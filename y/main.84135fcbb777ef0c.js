"use strict";var dD=Object.defineProperty,hD=Object.defineProperties,fD=Object.getOwnPropertyDescriptors,NE=Object.getOwnPropertySymbols,pD=Object.prototype.hasOwnProperty,gD=Object.prototype.propertyIsEnumerable,PE=(_t,Me,O)=>Me in _t?dD(_t,Me,{enumerable:!0,configurable:!0,writable:!0,value:O}):_t[Me]=O,OE=(_t,Me)=>{for(var O in Me||(Me={}))pD.call(Me,O)&&PE(_t,O,Me[O]);if(NE)for(var O of NE(Me))gD.call(Me,O)&&PE(_t,O,Me[O]);return _t},kE=(_t,Me)=>hD(_t,fD(Me));(self.webpackChunkrepartidor=self.webpackChunkrepartidor||[]).push([[179],{440:(_t,Me,O)=>{O.d(Me,{nm:()=>je});var E=O(5813);O(5e3),O(5867);var ne=O(5861),$e=O(9681),We=O(4859),Be=O(2090),Ye=O(1877);const re=new Map,ke={activated:!1,tokenObservers:[]},K={initialized:!1,enabled:!1};function Ee(ve){return re.get(ve)||ke}function oe(ve,ce){re.set(ve,ce)}function Oe(){return K}class en{constructor(ce,Re,Ze,mt,xt){if(this.operation=ce,this.retryPolicy=Re,this.getWaitDuration=Ze,this.lowerBound=mt,this.upperBound=xt,this.pending=null,this.nextErrorWaitInterval=mt,mt>xt)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(ce){var Re=this;return(0,ne.Z)(function*(){Re.stop();try{Re.pending=new Be.BH,yield function Bt(ve){return new Promise(ce=>{setTimeout(ce,ve)})}(Re.getNextRun(ce)),Re.pending.resolve(),yield Re.pending.promise,Re.pending=new Be.BH,yield Re.operation(),Re.pending.resolve(),yield Re.pending.promise,Re.process(!0).catch(()=>{})}catch(Ze){Re.retryPolicy(Ze)?Re.process(!1).catch(()=>{}):Re.stop()}})()}getNextRun(ce){if(ce)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Re=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Re}}}const wt=new Be.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Zt(ve){if(!Ee(ve).activated)throw wt.create("use-before-activation",{appName:ve.name})}function Gn(ve,ce){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,ne.Z)(function*({url:ve,body:ce},Re){const Ze={"Content-Type":"application/json"},mt=Re.getImmediate({optional:!0});if(mt){const xr=yield mt.getHeartbeatsHeader();xr&&(Ze["X-Firebase-Client"]=xr)}const xt={method:"POST",body:JSON.stringify(ce),headers:Ze};let $n,ir;try{$n=yield fetch(ve,xt)}catch(xr){throw wt.create("fetch-network-error",{originalErrorMessage:xr.message})}if(200!==$n.status)throw wt.create("fetch-status-error",{httpStatus:$n.status});try{ir=yield $n.json()}catch(xr){throw wt.create("fetch-parse-error",{originalErrorMessage:xr.message})}const An=ir.ttl.match(/^([\d.]+)(s)$/);if(!An||!An[2]||isNaN(Number(An[1])))throw wt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${ir.ttl}`});const Qi=1e3*Number(An[1]),Hs=Date.now();return{token:ir.token,expireTimeMillis:Hs+Qi,issuedAtTimeMillis:Hs}})).apply(this,arguments)}function Zn(ve,ce){const{projectId:Re,appId:Ze,apiKey:mt}=ve.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${Re}/apps/${Ze}:exchangeDebugToken?key=${mt}`,body:{debug_token:ce}}}const Yt="firebase-app-check-store";let vn=null;function Zr(){return vn||(vn=new Promise((ve,ce)=>{try{const Re=indexedDB.open("firebase-app-check-database",1);Re.onsuccess=Ze=>{ve(Ze.target.result)},Re.onerror=Ze=>{var mt;ce(wt.create("storage-open",{originalErrorMessage:null===(mt=Ze.target.error)||void 0===mt?void 0:mt.message}))},Re.onupgradeneeded=Ze=>{0===Ze.oldVersion&&Ze.target.result.createObjectStore(Yt,{keyPath:"compositeKey"})}}catch(Re){ce(wt.create("storage-open",{originalErrorMessage:Re.message}))}}),vn)}function Se(){return(Se=(0,ne.Z)(function*(ve,ce){const Ze=(yield Zr()).transaction(Yt,"readwrite"),xt=Ze.objectStore(Yt).put({compositeKey:ve,value:ce});return new Promise(($n,ir)=>{xt.onsuccess=An=>{$n()},Ze.onerror=An=>{var Qi;ir(wt.create("storage-set",{originalErrorMessage:null===(Qi=An.target.error)||void 0===Qi?void 0:Qi.message}))}})})).apply(this,arguments)}const Kt=new Ye.Yd("@firebase/app-check");function Un(ve,ce){return(0,Be.hl)()?function qe(ve,ce){return function tt(ve,ce){return Se.apply(this,arguments)}(function fn(ve){return`${ve.options.appId}-${ve.name}`}(ve),ce)}(ve,ce).catch(Re=>{Kt.warn(`Failed to write token to IndexedDB. Error: ${Re}`)}):Promise.resolve()}function se(){return Oe().enabled}function le(){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,ne.Z)(function*(){const ve=Oe();if(ve.enabled&&ve.token)return ve.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const De={error:"UNKNOWN_ERROR"};function nt(ve){return Be.US.encodeString(JSON.stringify(ve),!1)}function Ct(ve){return At.apply(this,arguments)}function At(){return(At=(0,ne.Z)(function*(ve,ce=!1){const Re=ve.app;Zt(Re);const Ze=Ee(Re);let xt,mt=Ze.token;if(!mt){const An=yield Ze.cachedTokenPromise;An&&ui(An)&&(mt=An)}if(!ce&&mt&&ui(mt))return{token:mt.token};let ir,$n=!1;if(se()){Ze.exchangeTokenPromise||(Ze.exchangeTokenPromise=Gn(Zn(Re,yield le()),ve.heartbeatServiceProvider).then(Qi=>(Ze.exchangeTokenPromise=void 0,Qi)),$n=!0);const An=yield Ze.exchangeTokenPromise;return yield Un(Re,An),oe(Re,Object.assign(Object.assign({},Ze),{token:An})),{token:An.token}}try{Ze.exchangeTokenPromise||(Ze.exchangeTokenPromise=Ze.provider.getToken().then(An=>(Ze.exchangeTokenPromise=void 0,An)),$n=!0),mt=yield Ze.exchangeTokenPromise}catch(An){"appCheck/throttled"===An.code?Kt.warn(An.message):Kt.error(An),xt=An}return mt?(ir={token:mt.token},oe(Re,Object.assign(Object.assign({},Ze),{token:mt})),yield Un(Re,mt)):ir=pr(xt),$n&&_r(Re,ir),ir})).apply(this,arguments)}function Vn(ve,ce){const Re=Ee(ve),Ze=Re.tokenObservers.filter(mt=>mt.next!==ce);0===Ze.length&&Re.tokenRefresher&&Re.tokenRefresher.isRunning()&&Re.tokenRefresher.stop(),oe(ve,Object.assign(Object.assign({},Re),{tokenObservers:Ze}))}function zt(ve){const{app:ce}=ve,Re=Ee(ce);let Ze=Re.tokenRefresher;Ze||(Ze=function fr(ve){const{app:ce}=ve;return new en((0,ne.Z)(function*(){let Ze;if(Ze=Ee(ce).token?yield Ct(ve,!0):yield Ct(ve),Ze.error)throw Ze.error}),()=>!0,()=>{const Re=Ee(ce);if(Re.token){let Ze=Re.token.issuedAtTimeMillis+.5*(Re.token.expireTimeMillis-Re.token.issuedAtTimeMillis)+3e5;return Ze=Math.min(Ze,Re.token.expireTimeMillis-3e5),Math.max(0,Ze-Date.now())}return 0},3e4,96e4)}(ve),oe(ce,Object.assign(Object.assign({},Re),{tokenRefresher:Ze}))),!Ze.isRunning()&&Re.isTokenAutoRefreshEnabled&&Ze.start()}function _r(ve,ce){const Re=Ee(ve).tokenObservers;for(const Ze of Re)try{"EXTERNAL"===Ze.type&&null!=ce.error?Ze.error(ce.error):Ze.next(ce)}catch(mt){}}function ui(ve){return ve.expireTimeMillis-Date.now()>0}function pr(ve){return{token:nt(De),error:ve}}class kr{constructor(ce,Re){this.app=ce,this.heartbeatServiceProvider=Re}_delete(){const{tokenObservers:ce}=Ee(this.app);for(const Re of ce)Vn(this.app,Re.next);return Promise.resolve()}}const X="app-check-internal";!function ee(){(0,$e._registerComponent)(new We.wA("app-check",ve=>function an(ve,ce){return new kr(ve,ce)}(ve.getProvider("app").getImmediate(),ve.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((ve,ce,Re)=>{ve.getProvider(X).initialize()})),(0,$e._registerComponent)(new We.wA(X,ve=>function Mn(ve){return{getToken:ce=>Ct(ve,ce),addTokenListener:ce=>function Gt(ve,ce,Re,Ze){const{app:mt}=ve,xt=Ee(mt),$n={next:Re,error:Ze,type:ce};if(oe(mt,Object.assign(Object.assign({},xt),{tokenObservers:[...xt.tokenObservers,$n]})),xt.token&&ui(xt.token)){const ir=xt.token;Promise.resolve().then(()=>{Re({token:ir.token}),zt(ve)}).catch(()=>{})}xt.cachedTokenPromise.then(()=>zt(ve))}(ve,"INTERNAL",ce),removeTokenListener:ce=>Vn(ve.app,ce)}}(ve.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,$e.registerVersion)("@firebase/app-check","0.5.8")}();class je{constructor(){return(0,E.vb)("app-check")}}"undefined"!=typeof window&&window},1205:(_t,Me,O)=>{O.d(Me,{zQ:()=>xe,ww:()=>it,rT:()=>K,f7:()=>oe,L6:()=>re,_Q:()=>ke,lh:()=>Ee,Qv:()=>Ye,nw:()=>Oe});var E=O(5e3),F=O(7579),G=O(9646),me=O(8306),fe=O(8996),ge=O(6451),Ie=O(6063);class _e extends F.x{constructor(pt=1/0,Mt=1/0,at=Ie.l){super(),this._bufferSize=pt,this._windowTime=Mt,this._timestampProvider=at,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Mt===1/0,this._bufferSize=Math.max(1,pt),this._windowTime=Math.max(1,Mt)}next(pt){const{isStopped:Mt,_buffer:at,_infiniteTimeWindow:en,_timestampProvider:Bt,_windowTime:jt}=this;Mt||(at.push(pt),!en&&at.push(Bt.now()+jt)),this._trimBuffer(),super.next(pt)}_subscribe(pt){this._throwIfClosed(),this._trimBuffer();const Mt=this._innerSubscribe(pt),{_infiniteTimeWindow:at,_buffer:en}=this,Bt=en.slice();for(let jt=0;jt<Bt.length&&!pt.closed;jt+=at?1:2)pt.next(Bt[jt]);return this._checkFinalizedStatuses(pt),Mt}_trimBuffer(){const{_bufferSize:pt,_timestampProvider:Mt,_buffer:at,_infiniteTimeWindow:en}=this,Bt=(en?1:2)*pt;if(pt<1/0&&Bt<at.length&&at.splice(0,at.length-Bt),!en){const jt=Mt.now();let wt=0;for(let Ht=1;Ht<at.length&&at[Ht]<=jt;Ht+=2)wt=Ht;wt&&at.splice(0,wt+1)}}}var Te=O(3099);function ie(ft,pt,Mt){let at,en=!1;return ft&&"object"==typeof ft?({bufferSize:at=1/0,windowTime:pt=1/0,refCount:en=!1,scheduler:Mt}=ft):at=null!=ft?ft:1/0,(0,Te.B)({connector:()=>new _e(at,pt,Mt),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:en})}var J=O(3900),we=O(576);function ht(ft,pt){return(0,we.m)(pt)?(0,J.w)(()=>ft,pt):(0,J.w)(()=>ft)}var Ge=O(5363),Je=O(4004),lt=O(590),Ne=O(9468),Ke=O(9300),yt=O(5813),vt=O(2011),ne=O(9808),$e=O(440),We=O(127);const Ye=new E.OlP("angularfire2.auth.use-emulator"),re=new E.OlP("angularfire2.auth.settings"),ke=new E.OlP("angularfire2.auth.tenant-id"),K=new E.OlP("angularfire2.auth.langugage-code"),Ee=new E.OlP("angularfire2.auth.use-device-language"),oe=new E.OlP("angularfire.auth.persistence"),Oe=(ft,pt,Mt,at,en,Bt,jt,wt)=>(0,vt.cc)(`${ft.name}.auth`,"AngularFireAuth",ft.name,()=>{const Ht=pt.runOutsideAngular(()=>ft.auth());if(Mt&&Ht.useEmulator(...Mt),at&&(Ht.tenantId=at),Ht.languageCode=en,Bt&&Ht.useDeviceLanguage(),jt)for(const[Zt,nn]of Object.entries(jt))Ht.settings[Zt]=nn;return wt&&Ht.setPersistence(wt),Ht},[Mt,at,en,Bt,jt,wt]);let xe=(()=>{class ft{constructor(Mt,at,en,Bt,jt,wt,Ht,Zt,nn,Fn,bn,Gn){const Sn=new F.x,qn=(0,G.of)(void 0).pipe((0,Ge.Q)(jt.outsideAngular),(0,J.w)(()=>Bt.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,7092)))),(0,Je.U)(()=>(0,vt.on)(Mt,Bt,at)),(0,Je.U)(rr=>Oe(rr,Bt,wt,Zt,nn,Fn,Ht,bn)),ie({bufferSize:1,refCount:!1}));if((0,ne.PM)(en))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,G.of)(null);else{qn.pipe((0,lt.P)()).subscribe();const Zn=qn.pipe((0,J.w)(Yt=>Yt.getRedirectResult().then(wn=>wn,()=>null)),yt.iC,ie({bufferSize:1,refCount:!1})),Tn=qn.pipe((0,J.w)(Yt=>new me.y(wn=>({unsubscribe:Bt.runOutsideAngular(()=>Yt.onAuthStateChanged(vn=>wn.next(vn),vn=>wn.error(vn),()=>wn.complete()))})))),Ut=qn.pipe((0,J.w)(Yt=>new me.y(wn=>({unsubscribe:Bt.runOutsideAngular(()=>Yt.onIdTokenChanged(vn=>wn.next(vn),vn=>wn.error(vn),()=>wn.complete()))}))));this.authState=Zn.pipe(ht(Tn),(0,Ne.R)(jt.outsideAngular),(0,Ge.Q)(jt.insideAngular)),this.user=Zn.pipe(ht(Ut),(0,Ne.R)(jt.outsideAngular),(0,Ge.Q)(jt.insideAngular)),this.idToken=this.user.pipe((0,J.w)(Yt=>Yt?(0,fe.D)(Yt.getIdToken()):(0,G.of)(null))),this.idTokenResult=this.user.pipe((0,J.w)(Yt=>Yt?(0,fe.D)(Yt.getIdTokenResult()):(0,G.of)(null))),this.credential=(0,ge.T)(Zn,Sn,this.authState.pipe((0,Ke.h)(Yt=>!Yt))).pipe((0,Je.U)(Yt=>(null==Yt?void 0:Yt.user)?Yt:null),(0,Ne.R)(jt.outsideAngular),(0,Ge.Q)(jt.insideAngular))}return(0,vt.pX)(this,qn,Bt,{spy:{apply:(rr,Zn,Tn)=>{(rr.startsWith("signIn")||rr.startsWith("createUser"))&&Tn.then(Ut=>Sn.next(Ut))}}})}}return ft.\u0275fac=function(Mt){return new(Mt||ft)(E.LFG(vt.Dh),E.LFG(vt.xv,8),E.LFG(E.Lbi),E.LFG(E.R0b),E.LFG(yt.HU),E.LFG(Ye,8),E.LFG(re,8),E.LFG(ke,8),E.LFG(K,8),E.LFG(Ee,8),E.LFG(oe,8),E.LFG($e.nm,8))},ft.\u0275prov=E.Yz7({token:ft,factory:ft.\u0275fac,providedIn:"any"}),ft})(),it=(()=>{class ft{constructor(){We.Z.registerVersion("angularfire",yt.q4.full,"auth-compat")}}return ft.\u0275fac=function(Mt){return new(Mt||ft)},ft.\u0275mod=E.oAB({type:ft}),ft.\u0275inj=E.cJS({providers:[xe]}),ft})()},7566:(_t,Me,O)=>{O.d(Me,{ST:()=>Fl,yb:()=>Od});var E=O(5e3),F=O(4986),G=O(8306),me=O(8996),fe=O(9646),ge=O(5813),Ie=O(4482),_e=O(5403);function Te(){return(0,Ie.e)((i,e)=>{let t,o=!1;i.subscribe((0,_e.x)(e,u=>{const d=t;t=u,o&&e.next([d,u]),o=!0}))})}var ie=O(4671);function we(i,e){return i===e}var K,ht=O(8675),Ge=O(4004),Je=O(5026),lt=O(9300),Ne=O(2011),Ke=O(9808),vt=(O(7092),O(3942)),ne=O(5861),$e=O(9681),We=O(4859),Be=O(1877),Ye=O(2090),re="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ke={},Ee=Ee||{},oe=re||self;function Oe(){}function xe(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function it(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var pt="closure_uid_"+(1e9*Math.random()>>>0),Mt=0;function at(i,e,t){return i.call.apply(i.bind,arguments)}function en(i,e,t){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,o),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function Bt(i,e,t){return(Bt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?at:en).apply(null,arguments)}function jt(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var o=t.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function wt(i,e){function t(){}t.prototype=e.prototype,i.Z=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Vb=function(o,u,d){for(var g=Array(arguments.length-2),D=2;D<arguments.length;D++)g[D-2]=arguments[D];return e.prototype[u].apply(o,g)}}function Ht(){this.s=this.s,this.o=this.o}var nn={};Ht.prototype.s=!1,Ht.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function ft(i){return Object.prototype.hasOwnProperty.call(i,pt)&&i[pt]||(i[pt]=++Mt)}(this);delete nn[i]}},Ht.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Fn=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1},bn=Array.prototype.forEach?function(i,e,t){Array.prototype.forEach.call(i,e,t)}:function(i,e,t){const o=i.length,u="string"==typeof i?i.split(""):i;for(let d=0;d<o;d++)d in u&&e.call(t,u[d],d,i)};function Sn(i){return Array.prototype.concat.apply([],arguments)}function qn(i){const e=i.length;if(0<e){const t=Array(e);for(let o=0;o<e;o++)t[o]=i[o];return t}return[]}function rr(i){return/^[\s\xa0]*$/.test(i)}var Yt,Zn=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function Tn(i,e){return-1!=i.indexOf(e)}function Ut(i,e){return i<e?-1:i>e?1:0}e:{var wn=oe.navigator;if(wn){var vn=wn.userAgent;if(vn){Yt=vn;break e}}Yt=""}function Zr(i,e,t){for(const o in i)e.call(t,i[o],o,i)}function Sr(i){const e={};for(const t in i)e[t]=i[t];return e}var qe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(i,e){let t,o;for(let u=1;u<arguments.length;u++){for(t in o=arguments[u],o)i[t]=o[t];for(let d=0;d<qe.length;d++)t=qe[d],Object.prototype.hasOwnProperty.call(o,t)&&(i[t]=o[t])}}function pe(i){return pe[" "](i),i}pe[" "]=Oe;var Un,i,Se=Tn(Yt,"Opera"),et=Tn(Yt,"Trident")||Tn(Yt,"MSIE"),gt=Tn(Yt,"Edge"),fn=gt||et,Kt=Tn(Yt,"Gecko")&&!(Tn(Yt.toLowerCase(),"webkit")&&!Tn(Yt,"Edge"))&&!(Tn(Yt,"Trident")||Tn(Yt,"MSIE"))&&!Tn(Yt,"Edge"),qt=Tn(Yt.toLowerCase(),"webkit")&&!Tn(Yt,"Edge");function hr(){var i=oe.document;return i?i.documentMode:void 0}e:{var _n="",Y=(i=Yt,Kt?/rv:([^\);]+)(\)|;)/.exec(i):gt?/Edge\/([\d\.]+)/.exec(i):et?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):qt?/WebKit\/(\S+)/.exec(i):Se?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Y&&(_n=Y?Y[1]:""),et){var se=hr();if(null!=se&&se>parseFloat(_n)){Un=String(se);break e}}Un=_n}var le={};var nt=oe.document&&et&&(hr()||parseInt(Un,10))||void 0,Ct=function(){if(!oe.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{oe.addEventListener("test",Oe,e),oe.removeEventListener("test",Oe,e)}catch(t){}return i}();function At(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}function Gt(i,e){if(At.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Kt){e:{try{pe(e.nodeName);var u=!0;break e}catch(d){}u=!1}u||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Vn[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Gt.Z.h.call(this)}}At.prototype.h=function(){this.defaultPrevented=!0},wt(Gt,At);var Vn={2:"touch",3:"pen",4:"mouse"};Gt.prototype.h=function(){Gt.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var zt="closure_listenable_"+(1e6*Math.random()|0),fr=0;function _r(i,e,t,o,u){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!o,this.ia=u,this.key=++fr,this.ca=this.fa=!1}function ui(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function pr(i){this.src=i,this.g={},this.h=0}function kr(i,e){var t=e.type;if(t in i.g){var d,o=i.g[t],u=Fn(o,e);(d=0<=u)&&Array.prototype.splice.call(o,u,1),d&&(ui(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function an(i,e,t,o){for(var u=0;u<i.length;++u){var d=i[u];if(!d.ca&&d.listener==e&&d.capture==!!t&&d.ia==o)return u}return-1}pr.prototype.add=function(i,e,t,o,u){var d=i.toString();(i=this.g[d])||(i=this.g[d]=[],this.h++);var g=an(i,e,o,u);return-1<g?(e=i[g],t||(e.fa=!1)):((e=new _r(e,this.src,d,!!o,u)).fa=t,i.push(e)),e};var Mn="closure_lm_"+(1e6*Math.random()|0),Er={};function wr(i,e,t,o,u){if(o&&o.once)return Yi(i,e,t,o,u);if(Array.isArray(e)){for(var d=0;d<e.length;d++)wr(i,e[d],t,o,u);return null}return t=It(t),i&&i[zt]?i.N(e,t,it(o)?!!o.capture:!!o,u):Jn(i,e,t,!1,o,u)}function Jn(i,e,t,o,u,d){if(!e)throw Error("Invalid event type");var g=it(u)?!!u.capture:!!u,D=Fr(i);if(D||(i[Mn]=D=new pr(i)),(t=D.add(e,t,o,g,d)).proxy)return t;if(o=function br(){var e=ur;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=o,o.src=i,o.listener=t,i.addEventListener)Ct||(u=g),void 0===u&&(u=!1),i.addEventListener(e.toString(),o,u);else if(i.attachEvent)i.attachEvent(Ar(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return t}function Yi(i,e,t,o,u){if(Array.isArray(e)){for(var d=0;d<e.length;d++)Yi(i,e[d],t,o,u);return null}return t=It(t),i&&i[zt]?i.O(e,t,it(o)?!!o.capture:!!o,u):Jn(i,e,t,!0,o,u)}function Oi(i,e,t,o,u){if(Array.isArray(e))for(var d=0;d<e.length;d++)Oi(i,e[d],t,o,u);else o=it(o)?!!o.capture:!!o,t=It(t),i&&i[zt]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=an(d=i.g[e],t,o,u))&&(ui(d[t]),Array.prototype.splice.call(d,t,1),0==d.length&&(delete i.g[e],i.h--))):i&&(i=Fr(i))&&(e=i.g[e.toString()],i=-1,e&&(i=an(e,t,o,u)),(t=-1<i?e[i]:null)&&Lr(t))}function Lr(i){if("number"!=typeof i&&i&&!i.ca){var e=i.src;if(e&&e[zt])kr(e.i,i);else{var t=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(t,o,i.capture):e.detachEvent?e.detachEvent(Ar(t),o):e.addListener&&e.removeListener&&e.removeListener(o),(t=Fr(e))?(kr(t,i),0==t.h&&(t.src=null,e[Mn]=null)):ui(i)}}}function Ar(i){return i in Er?Er[i]:Er[i]="on"+i}function ur(i,e){if(i.ca)i=!0;else{e=new Gt(e,this);var t=i.listener,o=i.ia||i.src;i.fa&&Lr(i),i=t.call(o,e)}return i}function Fr(i){return(i=i[Mn])instanceof pr?i:null}var Tr="__closure_events_fn_"+(1e9*Math.random()>>>0);function It(i){return"function"==typeof i?i:(i[Tr]||(i[Tr]=function(e){return i.handleEvent(e)}),i[Tr])}function Dt(){Ht.call(this),this.i=new pr(this),this.P=this,this.I=null}function tn(i,e){var t,o=i.I;if(o)for(t=[];o;o=o.I)t.push(o);if(i=i.P,o=e.type||e,"string"==typeof e)e=new At(e,i);else if(e instanceof At)e.target=e.target||i;else{var u=e;ue(e=new At(o,i),u)}if(u=!0,t)for(var d=t.length-1;0<=d;d--){var g=e.g=t[d];u=cr(g,o,!0,e)&&u}if(u=cr(g=e.g=i,o,!0,e)&&u,u=cr(g,o,!1,e)&&u,t)for(d=0;d<t.length;d++)u=cr(g=e.g=t[d],o,!1,e)&&u}function cr(i,e,t,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,d=0;d<e.length;++d){var g=e[d];if(g&&!g.ca&&g.capture==t){var D=g.listener,P=g.ia||g.src;g.fa&&kr(i.i,g),u=!1!==D.call(P,o)&&u}}return u&&!o.defaultPrevented}wt(Dt,Ht),Dt.prototype[zt]=!0,Dt.prototype.removeEventListener=function(i,e,t,o){Oi(this,i,e,t,o)},Dt.prototype.M=function(){if(Dt.Z.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],o=0;o<t.length;o++)ui(t[o]);delete i.g[e],i.h--}}this.I=null},Dt.prototype.N=function(i,e,t,o){return this.i.add(String(i),e,!1,t,o)},Dt.prototype.O=function(i,e,t,o){return this.i.add(String(i),e,!0,t,o)};var Ur=oe.JSON.stringify;function er(){var i=X;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var mi,Rn=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new Xr,i=>i.reset());class Xr{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function tr(i){oe.setTimeout(()=>{throw i},0)}function rn(i,e){mi||function ki(){var i=oe.Promise.resolve(void 0);mi=function(){i.then(ee)}}(),Li||(mi(),Li=!0),X.add(i,e)}var Li=!1,X=new class Jr{constructor(){this.h=this.g=null}add(e,t){const o=Rn.get();o.set(e,t),this.h?this.h.next=o:this.g=o,this.h=o}};function ee(){for(var i;i=er();){try{i.h.call(i.g)}catch(t){tr(t)}var e=Rn;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Li=!1}function W(i,e){Dt.call(this),this.h=i||1,this.g=e||oe,this.j=Bt(this.kb,this),this.l=Date.now()}function be(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function je(i,e,t){if("function"==typeof i)t&&(i=Bt(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Bt(i.handleEvent,i)}return 2147483647<Number(e)?-1:oe.setTimeout(i,e||0)}function St(i){i.g=je(()=>{i.g=null,i.i&&(i.i=!1,St(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}wt(W,Dt),(K=W.prototype).da=!1,K.S=null,K.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),tn(this,"tick"),this.da&&(be(this),this.start()))}},K.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},K.M=function(){W.Z.M.call(this),be(this),delete this.g};class En extends Ht{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:St(this)}M(){super.M(),this.g&&(oe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bn(i){Ht.call(this),this.h=i,this.g={}}wt(Bn,Ht);var jn=[];function ei(i,e,t,o){Array.isArray(t)||(t&&(jn[0]=t.toString()),t=jn);for(var u=0;u<t.length;u++){var d=wr(e,t[u],o||i.handleEvent,!1,i.h||i);if(!d)break;i.g[d.key]=d}}function Hi(i){Zr(i.g,function(e,t){this.g.hasOwnProperty(t)&&Lr(e)},i),i.g={}}function gs(){this.g=!0}function Ci(i,e,t,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Ko(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var o=t[i];if(!(2>o.length)){var u=o[1];if(Array.isArray(u)&&!(1>u.length)){var d=u[0];if("noop"!=d&&"stop"!=d&&"close"!=d)for(var g=1;g<u.length;g++)u[g]=""}}}return Ur(t)}catch(D){return e}}(i,t)+(o?" "+o:"")})}Bn.prototype.M=function(){Bn.Z.M.call(this),Hi(this)},Bn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},gs.prototype.Aa=function(){this.g=!1},gs.prototype.info=function(){};var Yn={},Gi=null;function $s(){return Gi=Gi||new Dt}function ve(i){At.call(this,Yn.Ma,i)}function ce(i){const e=$s();tn(e,new ve(e,i))}function Re(i,e){At.call(this,Yn.STAT_EVENT,i),this.stat=e}function Ze(i){const e=$s();tn(e,new Re(e,i))}function mt(i,e){At.call(this,Yn.Na,i),this.size=e}function xt(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return oe.setTimeout(function(){i()},e)}Yn.Ma="serverreachability",wt(ve,At),Yn.STAT_EVENT="statevent",wt(Re,At),Yn.Na="timingevent",wt(mt,At);var $n={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},ir={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function An(){}function Hs(){}An.prototype.h=null;var ms,xr={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Gs(){At.call(this,"d")}function Ss(){At.call(this,"c")}function uo(){}function As(i,e,t,o){this.l=i,this.j=e,this.m=t,this.X=o||1,this.V=new Bn(this),this.P=xs,this.W=new W(i=fn?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Vr}function Vr(){this.i=null,this.g="",this.h=!1}wt(Gs,At),wt(Ss,At),wt(uo,An),uo.prototype.g=function(){return new XMLHttpRequest},uo.prototype.i=function(){return{}},ms=new uo;var xs=45e3,Si={},Ji={};function zs(i,e,t){i.K=1,i.v=Pt(V(e)),i.s=t,i.U=!0,Xi(i,null)}function Xi(i,e){i.F=Date.now(),Mr(i),i.A=V(i.v);var t=i.A,o=i.X;Array.isArray(o)||(o=[String(o)]),ho(t.h,"t",o),i.C=0,t=i.l.H,i.h=new Vr,i.g=Mo(i.l,t?e:null,!i.s),0<i.O&&(i.L=new En(Bt(i.Ia,i,i.g),i.O)),ei(i.V,i.g,"readystatechange",i.gb),e=i.H?Sr(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,e)):(i.u="GET",i.g.ea(i.A,i.u,null,e)),ce(1),function yi(i,e,t,o,u,d){i.info(function(){if(i.g)if(d)for(var g="",D=d.split("&"),P=0;P<D.length;P++){var U=D[P].split("=");if(1<U.length){var Q=U[0];U=U[1];var he=Q.split("_");g=2<=he.length&&"type"==he[1]?g+(Q+"=")+U+"&":g+(Q+"=redacted&")}}else g=null;else g=d;return"XMLHTTP REQ ("+o+") [attempt "+u+"]: "+e+"\n"+t+"\n"+g})}(i.j,i.u,i.A,i.m,i.X,i.s)}function qo(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function ci(i,e,t){let u,o=!0;for(;!i.I&&i.C<t.length;){if(u=Ws(i,t),u==Ji){4==e&&(i.o=4,Ze(14),o=!1),Ci(i.j,i.m,null,"[Incomplete Response]");break}if(u==Si){i.o=4,Ze(15),Ci(i.j,i.m,t,"[Invalid Chunk]"),o=!1;break}Ci(i.j,i.m,u,null),co(i,u)}qo(i)&&u!=Ji&&u!=Si&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,Ze(16),o=!1),i.i=i.i&&o,o?0<t.length&&!i.aa&&(i.aa=!0,(e=i.l).g==i&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),xn(e),e.L=!0,Ze(11))):(Ci(i.j,i.m,t,"[Invalid Chunked Response]"),lr(i),vi(i))}function Ws(i,e){var t=i.C,o=e.indexOf("\n",t);return-1==o?Ji:(t=Number(e.substring(t,o)),isNaN(t)?Si:(o+=1)+t>e.length?Ji:(e=e.substr(o,t),i.C=o+t,e))}function Mr(i){i.Y=Date.now()+i.P,Zo(i,i.P)}function Zo(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=xt(Bt(i.eb,i),e)}function Br(i){i.B&&(oe.clearTimeout(i.B),i.B=null)}function vi(i){0==i.l.G||i.I||rs(i.l,i)}function lr(i){Br(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,be(i.W),Hi(i.V),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function co(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||ys(t.i,i)))if(t.I=i.N,!i.J&&ys(t.i,i)&&3==t.G){try{var o=t.Ca.g.parse(e)}catch(U){o=null}if(Array.isArray(o)&&3==o.length){var u=o;if(0==u[0])e:if(t.u)t.ta=u[1],0<t.ta-t.U&&37500>u[2]&&t.N&&0==t.A&&!t.v&&(t.v=xt(Bt(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<i.F))break e;ta(t),mr(t)}Ls(t),Ze(18)}if(1>=Ir(t.i)&&t.ka){try{t.ka()}catch(U){}t.ka=void 0}}else fi(t,11)}else if((i.J||t.g==i)&&ta(t),!rr(e))for(u=t.Ca.g.parse(e),e=0;e<u.length;e++){let U=u[e];if(t.U=U[0],U=U[1],2==t.G)if("c"==U[0]){t.J=U[1],t.la=U[2];const Q=U[3];null!=Q&&(t.ma=Q,t.h.info("VER="+t.ma));const he=U[4];null!=he&&(t.za=he,t.h.info("SVER="+t.za));const Ue=U[5];null!=Ue&&"number"==typeof Ue&&0<Ue&&(t.K=o=1.5*Ue,t.h.info("backChannelRequestTimeoutMs_="+o)),o=t;const st=i.g;if(st){const ut=st.g?st.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ut){var d=o.i;!d.g&&(Tn(ut,"spdy")||Tn(ut,"quic")||Tn(ut,"h2"))&&(d.j=d.l,d.g=new Set,d.h&&(Ys(d,d.h),d.h=null))}if(o.D){const kt=st.g?st.g.getResponseHeader("X-HTTP-Session-Id"):null;kt&&(o.sa=kt,He(o.F,o.D,kt))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-i.F,t.h.info("Handshake RTT: "+t.O+"ms"));var g=i;if((o=t).oa=ss(o,o.H?o.la:null,o.W),g.J){Ui(o.i,g);var D=g,P=o.K;P&&D.setTimeout(P),D.B&&(Br(D),Mr(D)),o.g=g}else ns(o);0<t.l.length&&Mu(t)}else"stop"!=U[0]&&"close"!=U[0]||fi(t,7);else 3==t.G&&("stop"==U[0]||"close"==U[0]?"stop"==U[0]?fi(t,7):Xs(t):"noop"!=U[0]&&t.j&&t.j.wa(U),t.A=0)}ce(4)}catch(U){}}function Ms(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(xe(i)||"string"==typeof i)bn(i,e,void 0);else{if(i.T&&"function"==typeof i.T)var t=i.T();else if(i.R&&"function"==typeof i.R)t=void 0;else if(xe(i)||"string"==typeof i){t=[];for(var o=i.length,u=0;u<o;u++)t.push(u)}else for(u in t=[],o=0,i)t[o++]=u;o=function Ks(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(xe(i)){for(var e=[],t=i.length,o=0;o<t;o++)e.push(i[o]);return e}for(o in e=[],t=0,i)e[t++]=i[o];return e}(i),u=o.length;for(var d=0;d<u;d++)e.call(void 0,o[d],t&&t[d],i)}}function Fi(i,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var o=0;o<t;o+=2)this.set(arguments[o],arguments[o+1])}else if(i)if(i instanceof Fi)for(t=i.T(),o=0;o<t.length;o++)this.set(t[o],i.get(t[o]));else for(o in i)this.set(o,i[o])}function qs(i){if(i.i!=i.g.length){for(var e=0,t=0;e<i.g.length;){var o=i.g[e];jr(i.h,o)&&(i.g[t++]=o),e++}i.g.length=t}if(i.i!=i.g.length){var u={};for(t=e=0;e<i.g.length;)jr(u,o=i.g[e])||(i.g[t++]=o,u[o]=1),e++;i.g.length=t}}function jr(i,e){return Object.prototype.hasOwnProperty.call(i,e)}(K=As.prototype).setTimeout=function(i){this.P=i},K.gb=function(i){i=i.target;const e=this.L;e&&3==ts(i)?e.l():this.Ia(i)},K.Ia=function(i){try{if(i==this.g)e:{const Q=ts(this.g);var e=this.g.Da();const he=this.g.ba();if(!(3>Q)&&(3!=Q||fn||this.g&&(this.h.h||this.g.ga()||Ca(this.g)))){this.I||4!=Q||7==e||ce(8==e||0>=he?3:2),Br(this);var t=this.g.ba();this.N=t;t:if(qo(this)){var o=Ca(this.g);i="";var u=o.length,d=4==ts(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){lr(this),vi(this);var g="";break t}this.h.i=new oe.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:d&&e==u-1});o.splice(0,u),this.h.g+=i,this.C=0,g=this.h.g}else g=this.g.ga();if(this.i=200==t,function Ti(i,e,t,o,u,d,g){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+u+"]: "+e+"\n"+t+"\n"+d+" "+g})}(this.j,this.u,this.A,this.m,this.X,Q,t),this.i){if(this.$&&!this.J){t:{if(this.g){var D,P=this.g;if((D=P.g?P.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!rr(D)){var U=D;break t}}U=null}if(!(t=U)){this.i=!1,this.o=3,Ze(12),lr(this),vi(this);break e}Ci(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,co(this,t)}this.U?(ci(this,Q,g),fn&&this.i&&3==Q&&(ei(this.V,this.W,"tick",this.fb),this.W.start())):(Ci(this.j,this.m,g,null),co(this,g)),4==Q&&lr(this),this.i&&!this.I&&(4==Q?rs(this.l,this):(this.i=!1,Mr(this)))}else 400==t&&0<g.indexOf("Unknown SID")?(this.o=3,Ze(12)):(this.o=0,Ze(13)),lr(this),vi(this)}}}catch(Q){}},K.fb=function(){if(this.g){var i=ts(this.g),e=this.g.ga();this.C<e.length&&(Br(this),ci(this,i,e),this.i&&4!=i&&Mr(this))}},K.cancel=function(){this.I=!0,lr(this)},K.eb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function Wo(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(ce(3),Ze(17)),lr(this),this.o=2,vi(this)):Zo(this,this.Y-i)},(K=Fi.prototype).R=function(){qs(this);for(var i=[],e=0;e<this.g.length;e++)i.push(this.h[this.g[e]]);return i},K.T=function(){return qs(this),this.g.concat()},K.get=function(i,e){return jr(this.h,i)?this.h[i]:e},K.set=function(i,e){jr(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=e},K.forEach=function(i,e){for(var t=this.T(),o=0;o<t.length;o++){var u=t[o],d=this.get(u);i.call(e,d,u,this)}};var wa=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function A(i,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof A){this.g=void 0!==e?e:i.g,S(this,i.j),this.s=i.s,$(this,i.i),ae(this,i.m),this.l=i.l,e=i.h;var t=new ti;t.i=e.i,e.g&&(t.g=new Fi(e.g),t.h=e.h),Ve(this,t),this.o=i.o}else i&&(t=String(i).match(wa))?(this.g=!!e,S(this,t[1]||"",!0),this.s=un(t[2]||""),$(this,t[3]||"",!0),ae(this,t[4]),this.l=un(t[5]||"",!0),Ve(this,t[6]||"",!0),this.o=un(t[7]||"")):(this.g=!!e,this.h=new ti(null,this.g))}function V(i){return new A(i)}function S(i,e,t){i.j=t?un(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function $(i,e,t){i.i=t?un(e,!0):e}function ae(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Ve(i,e,t){e instanceof ti?(i.h=e,function Ia(i,e){e&&!i.j&&(zi(i),i.i=null,i.g.forEach(function(t,o){var u=o.toLowerCase();o!=u&&(Rs(this,o),ho(this,u,t))},i)),i.j=e}(i.h,i.g)):(t||(e=gn(e,Ai)),i.h=new ti(e,i.g))}function He(i,e,t){i.h.set(e,t)}function Pt(i){return He(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function un(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function gn(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,dr),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function dr(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}A.prototype.toString=function(){var i=[],e=this.j;e&&i.push(gn(e,On,!0),":");var t=this.i;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(gn(e,On,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&i.push("/"),i.push(gn(t,"/"==t.charAt(0)?li:Xn,!0))),(t=this.h.toString())&&i.push("?",t),(t=this.o)&&i.push("#",gn(t,Qt)),i.join("")};var On=/[#\/\?@]/g,Xn=/[#\?:]/g,li=/[#\?]/g,Ai=/[#\?@]/g,Qt=/#/g;function ti(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function zi(i){i.g||(i.g=new Fi,i.h=0,i.i&&function Qn(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var o=i[t].indexOf("="),u=null;if(0<=o){var d=i[t].substring(0,o);u=i[t].substring(o+1)}else d=i[t];e(d,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Rs(i,e){zi(i),e=Ns(i,e),jr(i.g.h,e)&&(i.i=null,i.h-=i.g.get(e).length,jr((i=i.g).h,e)&&(delete i.h[e],i.i--,i.g.length>2*i.i&&qs(i)))}function lo(i,e){return zi(i),e=Ns(i,e),jr(i.g.h,e)}function ho(i,e,t){Rs(i,e),0<t.length&&(i.i=null,i.g.set(Ns(i,e),qn(t)),i.h+=t.length)}function Ns(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function rt(i){this.l=i||Dn,i=oe.PerformanceNavigationTiming?0<(i=oe.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(oe.g&&oe.g.Ea&&oe.g.Ea()&&oe.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(K=ti.prototype).add=function(i,e){zi(this),this.i=null,i=Ns(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},K.forEach=function(i,e){zi(this),this.g.forEach(function(t,o){bn(t,function(u){i.call(e,u,o,this)},this)},this)},K.T=function(){zi(this);for(var i=this.g.R(),e=this.g.T(),t=[],o=0;o<e.length;o++)for(var u=i[o],d=0;d<u.length;d++)t.push(e[o]);return t},K.R=function(i){zi(this);var e=[];if("string"==typeof i)lo(this,i)&&(e=Sn(e,this.g.get(Ns(this,i))));else{i=this.g.R();for(var t=0;t<i.length;t++)e=Sn(e,i[t])}return e},K.set=function(i,e){return zi(this),this.i=null,lo(this,i=Ns(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},K.get=function(i,e){return i&&0<(i=this.R(i)).length?String(i[0]):e},K.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],e=this.g.T(),t=0;t<e.length;t++){var o=e[t],u=encodeURIComponent(String(o));o=this.R(o);for(var d=0;d<o.length;d++){var g=u;""!==o[d]&&(g+="="+encodeURIComponent(String(o[d]))),i.push(g)}}return this.i=i.join("&")};var Dn=10;function Zs(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Ir(i){return i.h?1:i.g?i.g.size:0}function ys(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function Ys(i,e){i.g?i.g.add(e):i.h=e}function Ui(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function Qs(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return qn(i.i)}function Yo(){}function Su(){this.g=new Yo}function Au(i,e,t){const o=t||"";try{Ms(i,function(u,d){let g=u;it(u)&&(g=Ur(u)),e.push(o+d+"="+encodeURIComponent(g))})}catch(u){throw e.push(o+"type="+encodeURIComponent("_badmap")),u}}function es(i,e,t,o,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(o)}catch(d){}}function $r(i){this.l=i.$b||null,this.j=i.ib||!1}function _i(i,e){Dt.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=So,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}rt.prototype.cancel=function(){if(this.i=Qs(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},Yo.prototype.stringify=function(i){return oe.JSON.stringify(i,void 0)},Yo.prototype.parse=function(i){return oe.JSON.parse(i,void 0)},wt($r,An),$r.prototype.g=function(){return new _i(this.l,this.j)},$r.prototype.i=function(i){return function(){return i}}({}),wt(_i,Dt);var So=0;function Ps(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function di(i){i.readyState=4,i.l=null,i.j=null,i.A=null,fo(i)}function fo(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(K=_i.prototype).open=function(i,e){if(this.readyState!=So)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,fo(this)},K.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||oe).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},K.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,di(this)),this.readyState=So},K.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,fo(this)),this.g&&(this.readyState=3,fo(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==oe.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ps(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},K.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?di(this):fo(this),3==this.readyState&&Ps(this)}},K.Ua=function(i){this.g&&(this.response=this.responseText=i,di(this))},K.Ta=function(i){this.g&&(this.response=i,di(this))},K.ha=function(){this.g&&di(this)},K.setRequestHeader=function(i,e){this.v.append(i,e)},K.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},K.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(_i.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var Da=oe.JSON.parse;function gr(i){Dt.call(this),this.headers=new Fi,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ba,this.K=this.L=!1}wt(gr,Dt);var ba="",Qo=/^https?$/i,Ao=["POST","PUT"];function Ta(i){return"content-type"==i.toLowerCase()}function Jo(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,xo(i),Xo(i)}function xo(i){i.D||(i.D=!0,tn(i,"complete"),tn(i,"error"))}function Os(i){if(i.h&&void 0!==Ee&&(!i.C[1]||4!=ts(i)||2!=i.ba()))if(i.v&&4==ts(i))je(i.Fa,0,i);else if(tn(i,"readystatechange"),4==ts(i)){i.h=!1;try{const D=i.ba();e:switch(D){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var o;if(o=0===D){var u=String(i.H).match(wa)[1]||null;if(!u&&oe.self&&oe.self.location){var d=oe.self.location.protocol;u=d.substr(0,d.length-1)}o=!Qo.test(u?u.toLowerCase():"")}t=o}if(t)tn(i,"complete"),tn(i,"success");else{i.m=6;try{var g=2<ts(i)?i.g.statusText:""}catch(P){g=""}i.j=g+" ["+i.ba()+"]",xo(i)}}finally{Xo(i)}}}function Xo(i,e){if(i.g){Js(i);const t=i.g,o=i.C[0]?Oe:null;i.g=null,i.C=null,e||tn(i,"ready");try{t.onreadystatechange=o}catch(u){}}}function Js(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(oe.clearTimeout(i.A),i.A=null)}function ts(i){return i.g?i.g.readyState:0}function Ca(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case ba:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(e){return null}}function nu(i,e,t){e:{for(o in t){var o=!1;break e}o=!0}o||(t=function po(i){let e="";return Zr(i,function(t,o){e+=o,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):He(i,e,t))}function ks(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function hi(i){this.za=0,this.l=[],this.h=new gs,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=ks("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=ks("baseRetryDelayMs",5e3,i),this.$a=ks("retryDelaySeedMs",1e4,i),this.Ya=ks("forwardChannelMaxRetries",2,i),this.ra=ks("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new rt(i&&i.concurrentRequestLimit),this.Ca=new Su,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function Xs(i){if(ea(i),3==i.G){var e=i.V++,t=V(i.F);He(t,"SID",i.J),He(t,"RID",e),He(t,"TYPE","terminate"),Sa(i,t),(e=new As(i,i.h,e,void 0)).K=2,e.v=Pt(V(t)),t=!1,oe.navigator&&oe.navigator.sendBeacon&&(t=oe.navigator.sendBeacon(e.v.toString(),"")),!t&&oe.Image&&((new Image).src=e.v,t=!0),t||(e.g=Mo(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Mr(e)}Ru(i)}function mr(i){i.g&&(xn(i),i.g.cancel(),i.g=null)}function ea(i){mr(i),i.u&&(oe.clearTimeout(i.u),i.u=null),ta(i),i.i.cancel(),i.m&&("number"==typeof i.m&&oe.clearTimeout(i.m),i.m=null)}function xu(i,e){i.l.push(new class{constructor(i,e){this.h=i,this.g=e}}(i.Za++,e)),3==i.G&&Mu(i)}function Mu(i){Zs(i.i)||i.m||(i.m=!0,rn(i.Ha,i),i.C=0)}function dc(i,e){var t;t=e?e.m:i.V++;const o=V(i.F);He(o,"SID",i.J),He(o,"RID",t),He(o,"AID",i.U),Sa(i,o),i.o&&i.s&&nu(o,i.o,i.s),t=new As(i,i.h,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.l=e.D.concat(i.l)),e=eo(i,t,1e3),t.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),Ys(i.i,t),zs(t,o,e)}function Sa(i,e){i.j&&Ms({},function(t,o){He(e,o,t)})}function eo(i,e,t){t=Math.min(i.l.length,t);var o=i.j?Bt(i.j.Oa,i.j,i):null;e:{var u=i.l;let d=-1;for(;;){const g=["count="+t];-1==d?0<t?(d=u[0].h,g.push("ofs="+d)):d=0:g.push("ofs="+d);let D=!0;for(let P=0;P<t;P++){let U=u[P].h;const Q=u[P].g;if(U-=d,0>U)d=Math.max(0,u[P].h-100),D=!1;else try{Au(Q,g,"req"+U+"_")}catch(he){o&&o(Q)}}if(D){o=g.join("&");break e}}}return i=i.l.splice(0,t),e.D=i,o}function ns(i){i.g||i.u||(i.Y=1,rn(i.Ga,i),i.A=0)}function Ls(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=xt(Bt(i.Ga,i),is(i,i.A)),i.A++,0))}function xn(i){null!=i.B&&(oe.clearTimeout(i.B),i.B=null)}function Aa(i){i.g=new As(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var e=V(i.oa);He(e,"RID","rpc"),He(e,"SID",i.J),He(e,"CI",i.N?"0":"1"),He(e,"AID",i.U),Sa(i,e),He(e,"TYPE","xmlhttp"),i.o&&i.s&&nu(e,i.o,i.s),i.K&&i.g.setTimeout(i.K);var t=i.g;i=i.la,t.K=1,t.v=Pt(V(e)),t.s=null,t.U=!0,Xi(t,i)}function ta(i){null!=i.v&&(oe.clearTimeout(i.v),i.v=null)}function rs(i,e){var t=null;if(i.g==e){ta(i),xn(i),i.g=null;var o=2}else{if(!ys(i.i,e))return;t=e.D,Ui(i.i,e),o=1}if(i.I=e.N,0!=i.G)if(e.i)if(1==o){t=e.s?e.s.length:0,e=Date.now()-e.F;var u=i.C;tn(o=$s(),new mt(o,t,e,u)),Mu(i)}else ns(i);else if(3==(u=e.o)||0==u&&0<i.I||!(1==o&&function ru(i,e){return!(Ir(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=e.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=xt(Bt(i.Ha,i,e),is(i,i.C)),i.C++,0)))}(i,e)||2==o&&Ls(i)))switch(t&&0<t.length&&(e=i.i,e.i=e.i.concat(t)),u){case 1:fi(i,5);break;case 4:fi(i,10);break;case 3:fi(i,6);break;default:fi(i,2)}}function is(i,e){let t=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(t*=2),t*e}function fi(i,e){if(i.h.info("Error code "+e),2==e){var t=null;i.j&&(t=null);var o=Bt(i.jb,i);t||(t=new A("//www.google.com/images/cleardot.gif"),oe.location&&"http"==oe.location.protocol||S(t,"https"),Pt(t)),function $c(i,e){const t=new gs;if(oe.Image){const o=new Image;o.onload=jt(es,t,o,"TestLoadImage: loaded",!0,e),o.onerror=jt(es,t,o,"TestLoadImage: error",!1,e),o.onabort=jt(es,t,o,"TestLoadImage: abort",!1,e),o.ontimeout=jt(es,t,o,"TestLoadImage: timeout",!1,e),oe.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(t.toString(),o)}else Ze(2);i.G=0,i.j&&i.j.va(e),Ru(i),ea(i)}function Ru(i){i.G=0,i.I=-1,i.j&&((0!=Qs(i.i).length||0!=i.l.length)&&(i.i.i.length=0,qn(i.l),i.l.length=0),i.j.ua())}function ss(i,e,t){let o=function ln(i){return i instanceof A?V(i):new A(i,void 0)}(t);if(""!=o.i)e&&$(o,e+"."+o.i),ae(o,o.m);else{const u=oe.location;o=function Nn(i,e,t,o){var u=new A(null,void 0);return i&&S(u,i),e&&$(u,e),t&&ae(u,t),o&&(u.l=o),u}(u.protocol,e?e+"."+u.hostname:u.hostname,+u.port,t)}return i.aa&&Zr(i.aa,function(u,d){He(o,d,u)}),t=i.sa,(e=i.D)&&t&&He(o,e,t),He(o,"VER",i.ma),Sa(i,o),o}function Mo(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new gr(t&&i.Ba&&!i.qa?new $r({ib:!0}):i.qa)).L=i.H,e}function Nu(){}function na(){if(et&&!(10<=Number(nt)))throw Error("Environmental error: no available transport.")}function Vi(i,e){Dt.call(this),this.g=new hi(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.P=i,(i=e&&e.httpHeadersOverwriteParam)&&!rr(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!rr(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new Wi(this)}function xi(i){Gs.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function go(){Ss.call(this),this.status=1}function Wi(i){this.g=i}(K=gr.prototype).ea=function(i,e,t,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ms.g(),this.C=function Qi(i){return i.h||(i.h=i.i())}(this.u?this.u:ms),this.g.onreadystatechange=Bt(this.Fa,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(d){return void Jo(this,d)}i=t||"";const u=new Fi(this.headers);o&&Ms(o,function(d,g){u.set(g,d)}),o=function Gn(i){e:{var e=Ta;const t=i.length,o="string"==typeof i?i.split(""):i;for(let u=0;u<t;u++)if(u in o&&e.call(void 0,o[u],u,i)){e=u;break e}e=-1}return 0>e?null:"string"==typeof i?i.charAt(e):i[e]}(u.T()),t=oe.FormData&&i instanceof oe.FormData,!(0<=Fn(Ao,e))||o||t||u.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),u.forEach(function(d,g){this.g.setRequestHeader(g,d)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Js(this),0<this.B&&((this.K=function tu(i){return et&&function Qe(){return function tt(i){var e=le;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=Zn(String(Un)).split("."),t=Zn("9").split("."),o=Math.max(e.length,t.length);for(let g=0;0==i&&g<o;g++){var u=e[g]||"",d=t[g]||"";do{if(u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],d=/(\d*)(\D*)(.*)/.exec(d)||["","","",""],0==u[0].length&&0==d[0].length)break;i=Ut(0==u[1].length?0:parseInt(u[1],10),0==d[1].length?0:parseInt(d[1],10))||Ut(0==u[2].length,0==d[2].length)||Ut(u[2],d[2]),u=u[3],d=d[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Bt(this.pa,this)):this.A=je(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(d){Jo(this,d)}},K.pa=function(){void 0!==Ee&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,tn(this,"timeout"),this.abort(8))},K.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,tn(this,"complete"),tn(this,"abort"),Xo(this))},K.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Xo(this,!0)),gr.Z.M.call(this)},K.Fa=function(){this.s||(this.F||this.v||this.l?Os(this):this.cb())},K.cb=function(){Os(this)},K.ba=function(){try{return 2<ts(this)?this.g.status:-1}catch(i){return-1}},K.ga=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},K.Qa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),Da(e)}},K.Da=function(){return this.m},K.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(K=hi.prototype).ma=8,K.G=1,K.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch(e){}},K.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;const u=new As(this,this.h,i,void 0);let d=this.s;if(this.P&&(d?(d=Sr(d),ue(d,this.P)):d=this.P),null===this.o&&(u.H=d),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var o=this.l[t];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=eo(this,u,e),He(t=V(this.F),"RID",i),He(t,"CVER",22),this.D&&He(t,"X-HTTP-Session-Id",this.D),Sa(this,t),this.o&&d&&nu(t,this.o,d),Ys(this.i,u),this.Ra&&He(t,"TYPE","init"),this.ja?(He(t,"$req",e),He(t,"SID","null"),u.$=!0,zs(u,t,null)):zs(u,t,e),this.G=2}}else 3==this.G&&(i?dc(this,i):0==this.l.length||Zs(this.i)||dc(this))},K.Ga=function(){if(this.u=null,Aa(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=xt(Bt(this.bb,this),i)}},K.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ze(10),mr(this),Aa(this))},K.ab=function(){null!=this.v&&(this.v=null,mr(this),Ls(this),Ze(19))},K.jb=function(i){i?(this.h.info("Successfully pinged google.com"),Ze(2)):(this.h.info("Failed to ping google.com"),Ze(1))},(K=Nu.prototype).xa=function(){},K.wa=function(){},K.va=function(){},K.ua=function(){},K.Oa=function(){},na.prototype.g=function(i,e){return new Vi(i,e)},wt(Vi,Dt),Vi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),rn(Bt(i.hb,i,e))),Ze(0),i.W=e,i.aa=t||{},i.N=i.X,i.F=ss(i,null,i.W),Mu(i)},Vi.prototype.close=function(){Xs(this.g)},Vi.prototype.u=function(i){if("string"==typeof i){var e={};e.__data__=i,xu(this.g,e)}else this.v?((e={}).__data__=Ur(i),xu(this.g,e)):xu(this.g,i)},Vi.prototype.M=function(){this.g.j=null,delete this.j,Xs(this.g),delete this.g,Vi.Z.M.call(this)},wt(xi,Gs),wt(go,Ss),wt(Wi,Nu),Wi.prototype.xa=function(){tn(this.g,"a")},Wi.prototype.wa=function(i){tn(this.g,new xi(i))},Wi.prototype.va=function(i){tn(this.g,new go(i))},Wi.prototype.ua=function(){tn(this.g,"b")},na.prototype.createWebChannel=na.prototype.g,Vi.prototype.send=Vi.prototype.u,Vi.prototype.open=Vi.prototype.m,Vi.prototype.close=Vi.prototype.close,$n.NO_ERROR=0,$n.TIMEOUT=8,$n.HTTP_ERROR=6,ir.COMPLETE="complete",Hs.EventType=xr,xr.OPEN="a",xr.CLOSE="b",xr.ERROR="c",xr.MESSAGE="d",Dt.prototype.listen=Dt.prototype.N,gr.prototype.listenOnce=gr.prototype.O,gr.prototype.getLastError=gr.prototype.La,gr.prototype.getLastErrorCode=gr.prototype.Da,gr.prototype.getStatus=gr.prototype.ba,gr.prototype.getResponseJson=gr.prototype.Qa,gr.prototype.getResponseText=gr.prototype.ga,gr.prototype.send=gr.prototype.ea;var os=ke.createWebChannelTransport=function(){return new na},ra=ke.getStatEventTarget=function(){return $s()},xa=ke.ErrorCode=$n,Ro=ke.EventType=ir,to=ke.Event=Yn,Rr=ke.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},no=ke.FetchXmlHttpFactory=$r,vs=ke.WebChannel=Hs,No=ke.XhrIo=gr;const iu="@firebase/firestore";class Yr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Yr.UNAUTHENTICATED=new Yr(null),Yr.GOOGLE_CREDENTIALS=new Yr("google-credentials-uid"),Yr.FIRST_PARTY=new Yr("first-party-uid"),Yr.MOCK_USER=new Yr("mock-user");let Fs="9.8.0";const Us=new Be.Yd("@firebase/firestore");function ia(){return Us.logLevel}function dt(i,...e){if(Us.logLevel<=Be.in.DEBUG){const t=e.map(_);Us.debug(`Firestore (${Fs}): ${i}`,...t)}}function sr(i,...e){if(Us.logLevel<=Be.in.ERROR){const t=e.map(_);Us.error(`Firestore (${Fs}): ${i}`,...t)}}function I(i,...e){if(Us.logLevel<=Be.in.WARN){const t=e.map(_);Us.warn(`Firestore (${Fs}): ${i}`,...t)}}function _(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(t){return i}}function m(i="Unexpected state"){const e=`FIRESTORE (${Fs}) INTERNAL ASSERTION FAILED: `+i;throw sr(e),new Error(e)}function T(i,e){i||m()}function k(i,e){return i}const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class z extends Ye.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Le{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Rt{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mn{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Yr.UNAUTHENTICATED))}shutdown(){}}class Ft{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class kn{constructor(e){this.t=e,this.currentUser=Yr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var o=this;let u=this.i;const d=U=>this.i!==u?(u=this.i,t(U)):Promise.resolve();let g=new Le;this.o=()=>{this.i++,this.currentUser=this.u(),g.resolve(),g=new Le,e.enqueueRetryable(()=>d(this.currentUser))};const D=()=>{const U=g;e.enqueueRetryable((0,ne.Z)(function*(){yield U.promise,yield d(o.currentUser)}))},P=U=>{dt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=U,this.auth.addAuthTokenListener(this.o),D()};this.t.onInit(U=>P(U)),setTimeout(()=>{if(!this.auth){const U=this.t.getImmediate({optional:!0});U?P(U):(dt("FirebaseAuthCredentialsProvider","Auth not yet detected"),g.resolve(),g=new Le)}},0),D()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(o=>this.i!==e?(dt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(T("string"==typeof o.accessToken),new Rt(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return T(null===e||"string"==typeof e),new Yr(e)}}class Hn{constructor(e,t,o){this.type="FirstParty",this.user=Yr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const u=e.auth.getAuthHeaderValueForFirstParty([]);u&&this.headers.set("Authorization",u),o&&this.headers.set("X-Goog-Iam-Authorization-Token",o)}}class ni{constructor(e,t,o){this.h=e,this.l=t,this.m=o}getToken(){return Promise.resolve(new Hn(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Yr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class as{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mo{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const o=d=>{null!=d.error&&dt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const g=d.token!==this.p;return this.p=d.token,dt("FirebaseAppCheckTokenProvider",`Received ${g?"new":"existing"} token.`),g?t(d.token):Promise.resolve()};this.o=d=>{e.enqueueRetryable(()=>o(d))};const u=d=>{dt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.appCheck.addTokenListener(this.o)};this.g.onInit(d=>u(d)),setTimeout(()=>{if(!this.appCheck){const d=this.g.getImmediate({optional:!0});d?u(d):dt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(T("string"==typeof t.token),this.p=t.token,new as(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class or{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.I(o),this.T=o=>t.writeSequenceNumber(o))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function Po(i){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let o=0;o<i;o++)t[o]=Math.floor(256*Math.random());return t}or.A=-1;class yo{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const u=Po(40);for(let d=0;d<u.length;++d)o.length<20&&u[d]<t&&(o+=e.charAt(u[d]%e.length))}return o}}function pn(i,e){return i<e?-1:i>e?1:0}function Oo(i,e,t){return i.length===e.length&&i.every((o,u)=>t(o,e[u]))}function sa(i){return i+"\0"}class Nr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new z(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new z(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new z(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Nr.fromMillis(Date.now())}static fromDate(e){return Nr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*t));return new Nr(t,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?pn(this.nanoseconds,e.nanoseconds):pn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class sn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new sn(e)}static min(){return new sn(new Nr(0,0))}static max(){return new sn(new Nr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Pr(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Ra(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function Vd(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Pu{constructor(e,t,o){void 0===t?t=0:t>e.length&&m(),void 0===o?o=e.length-t:o>e.length-t&&m(),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return 0===Pu.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Pu?e.forEach(o=>{t.push(o)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let u=0;u<o;u++){const d=e.get(u),g=t.get(u);if(d<g)return-1;if(d>g)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ln extends Pu{construct(e,t,o){return new Ln(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new z(L.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter(u=>u.length>0))}return new Ln(t)}static emptyPath(){return new Ln([])}}const Hc=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pi extends Pu{construct(e,t,o){return new pi(e,t,o)}static isValidIdentifier(e){return Hc.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new pi(["__name__"])}static fromServerFormat(e){const t=[];let o="",u=0;const d=()=>{if(0===o.length)throw new z(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let g=!1;for(;u<e.length;){const D=e[u];if("\\"===D){if(u+1===e.length)throw new z(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const P=e[u+1];if("\\"!==P&&"."!==P&&"`"!==P)throw new z(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=P,u+=2}else"`"===D?(g=!g,u++):"."!==D||g?(o+=D,u++):(d(),u++)}if(d(),g)throw new z(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pi(t)}static emptyPath(){return new pi([])}}class su{constructor(e){this.fields=e,e.sort(pi.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Oo(this.fields,e.fields,(t,o)=>t.isEqual(o))}}class Qr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Qr(t)}static fromUint8Array(e){const t=function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u}(e);return new Qr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qr.EMPTY_BYTE_STRING=new Qr("");const ri=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _s(i){if(T(!!i),"string"==typeof i){let e=0;const t=ri.exec(i);if(T(!!t),t[1]){let u=t[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:yr(i.seconds),nanos:yr(i.nanos)}}function yr(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function ko(i){return"string"==typeof i?Qr.fromBase64String(i):Qr.fromUint8Array(i)}function hc(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Bi(i){const e=i.mapValue.fields.__previous_value__;return hc(e)?Bi(e):e}function Ei(i){const e=_s(i.mapValue.fields.__local_write_time__.timestampValue);return new Nr(e.seconds,e.nanos)}class Ou{constructor(e,t,o,u,d,g,D,P){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=u,this.ssl=d,this.forceLongPolling=g,this.autoDetectLongPolling=D,this.useFetchStreams=P}}class Ki{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ki("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ki&&e.projectId===this.projectId&&e.database===this.database}}function us(i){return null==i}function Es(i){return 0===i&&1/i==-1/0}function ro(i){return"number"==typeof i&&Number.isInteger(i)&&!Es(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}class bt{constructor(e){this.path=e}static fromPath(e){return new bt(Ln.fromString(e))}static fromName(e){return new bt(Ln.fromString(e).popFirst(5))}static empty(){return new bt(Ln.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ln.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ln.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new bt(new Ln(e.slice()))}}const vo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},au={nullValue:"NULL_VALUE"};function oa(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?hc(i)?4:Gc(i)?9007199254740991:10:m()}function Cr(i,e){if(i===e)return!0;const t=oa(i);if(t!==oa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Ei(i).isEqual(Ei(e));case 3:return function(o,u){if("string"==typeof o.timestampValue&&"string"==typeof u.timestampValue&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=_s(o.timestampValue),g=_s(u.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return u=e,ko(i.bytesValue).isEqual(ko(u.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,u){return yr(o.geoPointValue.latitude)===yr(u.geoPointValue.latitude)&&yr(o.geoPointValue.longitude)===yr(u.geoPointValue.longitude)}(i,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return yr(o.integerValue)===yr(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=yr(o.doubleValue),g=yr(u.doubleValue);return d===g?Es(d)===Es(g):isNaN(d)&&isNaN(g)}return!1}(i,e);case 9:return Oo(i.arrayValue.values||[],e.arrayValue.values||[],Cr);case 10:return function(o,u){const d=o.mapValue.fields||{},g=u.mapValue.fields||{};if(Pr(d)!==Pr(g))return!1;for(const D in d)if(d.hasOwnProperty(D)&&(void 0===g[D]||!Cr(d[D],g[D])))return!1;return!0}(i,e);default:return m()}var u}function aa(i,e){return void 0!==(i.values||[]).find(t=>Cr(t,e))}function cs(i,e){if(i===e)return 0;const t=oa(i),o=oa(e);if(t!==o)return pn(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return pn(i.booleanValue,e.booleanValue);case 2:return function(u,d){const g=yr(u.integerValue||u.doubleValue),D=yr(d.integerValue||d.doubleValue);return g<D?-1:g>D?1:g===D?0:isNaN(g)?isNaN(D)?0:-1:1}(i,e);case 3:return Ul(i.timestampValue,e.timestampValue);case 4:return Ul(Ei(i),Ei(e));case 5:return pn(i.stringValue,e.stringValue);case 6:return function(u,d){const g=ko(u),D=ko(d);return g.compareTo(D)}(i.bytesValue,e.bytesValue);case 7:return function(u,d){const g=u.split("/"),D=d.split("/");for(let P=0;P<g.length&&P<D.length;P++){const U=pn(g[P],D[P]);if(0!==U)return U}return pn(g.length,D.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,d){const g=pn(yr(u.latitude),yr(d.latitude));return 0!==g?g:pn(yr(u.longitude),yr(d.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(u,d){const g=u.values||[],D=d.values||[];for(let P=0;P<g.length&&P<D.length;++P){const U=cs(g[P],D[P]);if(U)return U}return pn(g.length,D.length)}(i.arrayValue,e.arrayValue);case 10:return function(u,d){if(u===vo.mapValue&&d===vo.mapValue)return 0;if(u===vo.mapValue)return 1;if(d===vo.mapValue)return-1;const g=u.fields||{},D=Object.keys(g),P=d.fields||{},U=Object.keys(P);D.sort(),U.sort();for(let Q=0;Q<D.length&&Q<U.length;++Q){const he=pn(D[Q],U[Q]);if(0!==he)return he;const Ue=cs(g[D[Q]],P[U[Q]]);if(0!==Ue)return Ue}return pn(D.length,U.length)}(i.mapValue,e.mapValue);default:throw m()}}function Ul(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return pn(i,e);const t=_s(i),o=_s(e),u=pn(t.seconds,o.seconds);return 0!==u?u:pn(t.nanos,o.nanos)}function qi(i){return ku(i)}function ku(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(o){const u=_s(o);return`time(${u.seconds},${u.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?ko(i.bytesValue).toBase64():"referenceValue"in i?bt.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(o){let u="[",d=!0;for(const g of o.values||[])d?d=!1:u+=",",u+=ku(g);return u+"]"}(i.arrayValue):"mapValue"in i?function(o){const u=Object.keys(o.fields||{}).sort();let d="{",g=!0;for(const D of u)g?g=!1:d+=",",d+=`${D}:${ku(o.fields[D])}`;return d+"}"}(i.mapValue):m();var e}function _o(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function fc(i){return!!i&&"integerValue"in i}function ls(i){return!!i&&"arrayValue"in i}function Lu(i){return!!i&&"nullValue"in i}function Eo(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function wo(i){return!!i&&"mapValue"in i}function ua(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Ra(i.mapValue.fields,(t,o)=>e.mapValue.fields[t]=ua(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ua(i.arrayValue.values[t]);return e}return Object.assign({},i)}function Gc(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function ca(i){return"nullValue"in i?au:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?_o(Ki.empty(),bt.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:m()}function uu(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?_o(Ki.empty(),bt.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?vo:m()}function Na(i,e){const t=cs(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function C(i,e){const t=cs(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class x{constructor(e){this.value=e}static empty(){return new x({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!wo(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ua(t)}setAll(e){let t=pi.emptyPath(),o={},u=[];e.forEach((g,D)=>{if(!t.isImmediateParentOf(D)){const P=this.getFieldsMap(t);this.applyChanges(P,o,u),o={},u=[],t=D.popLast()}g?o[D.lastSegment()]=ua(g):u.push(D.lastSegment())});const d=this.getFieldsMap(t);this.applyChanges(d,o,u)}delete(e){const t=this.field(e.popLast());wo(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Cr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=t.mapValue.fields[e.get(o)];wo(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=u),t=u}return t.mapValue.fields}applyChanges(e,t,o){Ra(t,(u,d)=>e[u]=d);for(const u of o)delete e[u]}clone(){return new x(ua(this.value))}}function j(i){const e=[];return Ra(i.fields,(t,o)=>{const u=new pi([t]);if(wo(o)){const d=j(o.mapValue).fields;if(0===d.length)e.push(u);else for(const g of d)e.push(u.child(g))}else e.push(u)}),new su(e)}class q{constructor(e,t,o,u,d,g){this.key=e,this.documentType=t,this.version=o,this.readTime=u,this.data=d,this.documentState=g}static newInvalidDocument(e){return new q(e,0,sn.min(),sn.min(),x.empty(),0)}static newFoundDocument(e,t,o){return new q(e,1,t,sn.min(),o,0)}static newNoDocument(e,t){return new q(e,2,t,sn.min(),x.empty(),0)}static newUnknownDocument(e,t){return new q(e,3,t,sn.min(),x.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=x.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=x.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof q&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new q(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ce{constructor(e,t,o,u){this.indexId=e,this.collectionGroup=t,this.fields=o,this.indexState=u}}function Pe(i){return i.fields.find(e=>2===e.kind)}function ct(i){return i.fields.filter(e=>2!==e.kind)}Ce.UNKNOWN_ID=-1;class Lt{constructor(e,t){this.fieldPath=e,this.kind=t}}class Vt{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Vt(0,Xt.min())}}function dn(i,e){const t=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,u=sn.fromTimestamp(1e9===o?new Nr(t+1,0):new Nr(t,o));return new Xt(u,bt.empty(),e)}function zn(i){return new Xt(i.readTime,i.key,-1)}class Xt{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new Xt(sn.min(),bt.empty(),-1)}static max(){return new Xt(sn.max(),bt.empty(),-1)}}function ii(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=bt.comparator(i.documentKey,e.documentKey),0!==t?t:pn(i.largestBatchId,e.largestBatchId))}class Cn{constructor(e,t){this.comparator=e,this.root=t||Or.EMPTY}insert(e,t){return new Cn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Or.BLACK,null,null))}remove(e){return new Cn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Or.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(0===o)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(0===u)return t+o.left.size;u<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,o)=>(e(t,o),!1))}toString(){const e=[];return this.inorderTraversal((t,o)=>(e.push(`${t}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Io(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Io(this.root,e,this.comparator,!1)}getReverseIterator(){return new Io(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Io(this.root,e,this.comparator,!0)}}class Io{constructor(e,t,o,u){this.isReverse=u,this.nodeStack=[];let d=1;for(;!e.isEmpty();)if(d=t?o(e.key,t):1,t&&u&&(d*=-1),d<0)e=this.isReverse?e.left:e.right;else{if(0===d){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Or{constructor(e,t,o,u,d){this.key=e,this.value=t,this.color=null!=o?o:Or.RED,this.left=null!=u?u:Or.EMPTY,this.right=null!=d?d:Or.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,u,d){return new Or(null!=e?e:this.key,null!=t?t:this.value,null!=o?o:this.color,null!=u?u:this.left,null!=d?d:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let u=this;const d=o(e,u.key);return u=d<0?u.copy(null,null,null,u.left.insert(e,t,o),null):0===d?u.copy(null,t,null,null,null):u.copy(null,null,null,null,u.right.insert(e,t,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return Or.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,u=this;if(t(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,t),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===t(e,u.key)){if(u.right.isEmpty())return Or.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,t))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Or.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Or.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw m();const e=this.left.check();if(e!==this.right.check())throw m();return e+(this.isRed()?0:1)}}Or.EMPTY=null,Or.RED=!0,Or.BLACK=!1,Or.EMPTY=new class{constructor(){this.size=0}get key(){throw m()}get value(){throw m()}get color(){throw m()}get left(){throw m()}get right(){throw m()}copy(i,e,t,o,u){return this}insert(i,e,t){return new Or(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Pn{constructor(e){this.comparator=e,this.data=new Cn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,o)=>(e(t),!1))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;t(u.key)}}forEachWhile(e,t){let o;for(o=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ds(this.data.getIterator())}getIteratorFrom(e){return new ds(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(o=>{t=t.add(o)}),t}isEqual(e){if(!(e instanceof Pn)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const u=t.getNext().key,d=o.getNext().key;if(0!==this.comparator(u,d))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Pn(this.comparator);return t.data=e,t}}class ds{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Zi(i){return i.hasNext()?i.getNext():void 0}class Pa{constructor(e,t=null,o=[],u=[],d=null,g=null,D=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=u,this.limit=d,this.startAt=g,this.endAt=D,this.P=null}}function Vl(i,e=null,t=[],o=[],u=null,d=null,g=null){return new Pa(i,e,t,o,u,d,g)}function la(i){const e=k(i);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(o=>{return(u=o).field.canonicalString()+u.op.toString()+qi(u.value);var u}).join(","),t+="|ob:",t+=e.orderBy.map(o=>{return(u=o).field.canonicalString()+u.dir;var u}).join(","),us(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>qi(o)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>qi(o)).join(",")),e.P=t}return e.P}function Oa(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let u=0;u<i.orderBy.length;u++)if(!Vu(i.orderBy[u],e.orderBy[u]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let u=0;u<i.filters.length;u++)if((t=i.filters[u]).op!==(o=e.filters[u]).op||!t.field.isEqual(o.field)||!Cr(t.value,o.value))return!1;var t,o;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Hd(i.startAt,e.startAt)&&Hd(i.endAt,e.endAt)}function Fu(i){return bt.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function Uu(i,e){return i.filters.filter(t=>t instanceof si&&t.field.isEqual(e))}function Bd(i,e,t){let o=au,u=!0;for(const d of Uu(i,e)){let g=au,D=!0;switch(d.op){case"<":case"<=":g=ca(d.value);break;case"==":case"in":case">=":g=d.value;break;case">":g=d.value,D=!1;break;case"!=":case"not-in":g=au}Na({value:o,inclusive:u},{value:g,inclusive:D})<0&&(o=g,u=D)}if(null!==t)for(let d=0;d<i.orderBy.length;++d)if(i.orderBy[d].field.isEqual(e)){const g=t.position[d];Na({value:o,inclusive:u},{value:g,inclusive:t.inclusive})<0&&(o=g,u=t.inclusive);break}return{value:o,inclusive:u}}function cu(i,e,t){let o=vo,u=!0;for(const d of Uu(i,e)){let g=vo,D=!0;switch(d.op){case">=":case">":g=uu(d.value),D=!1;break;case"==":case"in":case"<=":g=d.value;break;case"<":g=d.value,D=!1;break;case"!=":case"not-in":g=vo}C({value:o,inclusive:u},{value:g,inclusive:D})>0&&(o=g,u=D)}if(null!==t)for(let d=0;d<i.orderBy.length;++d)if(i.orderBy[d].field.isEqual(e)){const g=t.position[d];C({value:o,inclusive:u},{value:g,inclusive:t.inclusive})>0&&(o=g,u=t.inclusive);break}return{value:o,inclusive:u}}class si extends class{}{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,o):new Bl(e,t,o):"array-contains"===t?new Dg(e,o):"in"===t?new Wc(e,o):"not-in"===t?new If(e,o):"array-contains-any"===t?new Df(e,o):new si(e,t,o)}static V(e,t,o){return"in"===t?new Ig(e,o):new jd(e,o)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(cs(t,this.value)):null!==t&&oa(this.value)===oa(t)&&this.v(cs(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return m()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Bl extends si{constructor(e,t,o){super(e,t,o),this.key=bt.fromName(o.referenceValue)}matches(e){const t=bt.comparator(e.key,this.key);return this.v(t)}}class Ig extends si{constructor(e,t){super(e,"in",t),this.keys=jl(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class jd extends si{constructor(e,t){super(e,"not-in",t),this.keys=jl(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function jl(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(o=>bt.fromName(o.referenceValue))}class Dg extends si{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ls(t)&&aa(t.arrayValue,this.value)}}class Wc extends si{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&aa(this.value.arrayValue,t)}}class If extends si{constructor(e,t){super(e,"not-in",t)}matches(e){if(aa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!aa(this.value.arrayValue,t)}}class Df extends si{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ls(t)||!t.arrayValue.values)&&t.arrayValue.values.some(o=>aa(this.value.arrayValue,o))}}class Do{constructor(e,t){this.position=e,this.inclusive=t}}class ka{constructor(e,t="asc"){this.field=e,this.dir=t}}function Vu(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function $d(i,e,t){let o=0;for(let u=0;u<i.position.length;u++){const d=e[u],g=i.position[u];if(o=d.field.isKeyField()?bt.comparator(bt.fromName(g.referenceValue),t.key):cs(g,t.data.field(d.field)),"desc"===d.dir&&(o*=-1),0!==o)break}return o}function Hd(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Cr(i.position[t],e.position[t]))return!1;return!0}class La{constructor(e,t=null,o=[],u=[],d=null,g="F",D=null,P=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=u,this.limit=d,this.limitType=g,this.startAt=D,this.endAt=P,this.D=null,this.C=null}}function lu(i,e,t,o,u,d,g,D){return new La(i,e,t,o,u,d,g,D)}function Fa(i){return new La(i)}function Kc(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function qc(i){for(const e of i.filters)if(e.S())return e.field;return null}function Zc(i){return null!==i.collectionGroup}function du(i){const e=k(i);if(null===e.D){e.D=[];const t=qc(e),o=Kc(e);if(null!==t&&null===o)t.isKeyField()||e.D.push(new ka(t)),e.D.push(new ka(pi.keyField(),"asc"));else{let u=!1;for(const d of e.explicitOrderBy)e.D.push(d),d.field.isKeyField()&&(u=!0);if(!u){const d=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new ka(pi.keyField(),d))}}}return e.D}function io(i){const e=k(i);if(!e.C)if("F"===e.limitType)e.C=Vl(e.path,e.collectionGroup,du(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const d of du(e))t.push(new ka(d.field,"desc"===d.dir?"asc":"desc"));const o=e.endAt?new Do(e.endAt.position,e.endAt.inclusive):null,u=e.startAt?new Do(e.startAt.position,e.startAt.inclusive):null;e.C=Vl(e.path,e.collectionGroup,t,e.filters,e.limit,o,u)}return e.C}function zd(i,e,t){return new La(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function pc(i,e){return Oa(io(i),io(e))&&i.limitType===e.limitType}function Wd(i){return`${la(io(i))}|lt:${i.limitType}`}function so(i){return`Query(target=${function zc(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(t=>{return`${(o=t).field.canonicalString()} ${o.op} ${qi(o.value)}`;var o}).join(", ")}]`),us(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(t=>{return`${(o=t).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(t=>qi(t)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(t=>qi(t)).join(",")),`Target(${e})`}(io(i))}; limitType=${i.limitType})`}function hu(i,e){return e.isFoundDocument()&&function(t,o){const u=o.key.path;return null!==t.collectionGroup?o.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(u):bt.isDocumentKey(t.path)?t.path.isEqual(u):t.path.isImmediateParentOf(u)}(i,e)&&function(t,o){for(const u of t.explicitOrderBy)if(!u.field.isKeyField()&&null===o.data.field(u.field))return!1;return!0}(i,e)&&function(t,o){for(const u of t.filters)if(!u.matches(o))return!1;return!0}(i,e)&&(o=e,!((t=i).startAt&&!function(u,d,g){const D=$d(u,d,g);return u.inclusive?D<=0:D<0}(t.startAt,du(t),o)||t.endAt&&!function(u,d,g){const D=$d(u,d,g);return u.inclusive?D>=0:D>0}(t.endAt,du(t),o)));var t,o}function Yc(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function bf(i){return(e,t)=>{let o=!1;for(const u of du(i)){const d=Tf(u,e,t);if(0!==d)return d;o=o||u.field.isKeyField()}return 0}}function Tf(i,e,t){const o=i.field.isKeyField()?bt.comparator(e.key,t.key):function(u,d,g){const D=d.data.field(u),P=g.data.field(u);return null!==D&&null!==P?cs(D,P):m()}(i.field,e,t);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return m()}}function Cf(i,e){if(i.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Es(e)?"-0":e}}function $l(i){return{integerValue:""+i}}function Sf(i,e){return ro(e)?$l(e):Cf(i,e)}class Bu{constructor(){this._=void 0}}function Kd(i,e,t){return i instanceof ju?function(o,u){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&(d.fields.__previous_value__=u),{mapValue:d}}(t,e):i instanceof gc?Ua(i,e):i instanceof Lo?Hl(i,e):function(o,u){const d=qd(o,u),g=$u(d)+$u(o.k);return fc(d)&&fc(o.k)?$l(g):Cf(o.M,g)}(i,e)}function Af(i,e,t){return i instanceof gc?Ua(i,e):i instanceof Lo?Hl(i,e):t}function qd(i,e){return i instanceof ji?fc(t=e)||(o=t)&&"doubleValue"in o?e:{integerValue:0}:null;var o,t}class ju extends Bu{}class gc extends Bu{constructor(e){super(),this.elements=e}}function Ua(i,e){const t=mc(e);for(const o of i.elements)t.some(u=>Cr(u,o))||t.push(o);return{arrayValue:{values:t}}}class Lo extends Bu{constructor(e){super(),this.elements=e}}function Hl(i,e){let t=mc(e);for(const o of i.elements)t=t.filter(u=>!Cr(u,o));return{arrayValue:{values:t}}}class ji extends Bu{constructor(e,t){super(),this.M=e,this.k=t}}function $u(i){return yr(i.integerValue||i.doubleValue)}function mc(i){return ls(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Hu{constructor(e,t){this.field=e,this.transform=t}}class Yd{constructor(e,t){this.version=e,this.transformResults=t}}class wi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new wi}static exists(e){return new wi(void 0,e)}static updateTime(e){return new wi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gl(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class Va{}function zl(i,e,t){i instanceof Gu?function(o,u,d){const g=o.value.clone(),D=Jd(o.fieldTransforms,u,d.transformResults);g.setAll(D),u.convertToFoundDocument(d.version,g).setHasCommittedMutations()}(i,e,t):i instanceof da?function(o,u,d){if(!Gl(o.precondition,u))return void u.convertToUnknownDocument(d.version);const g=Jd(o.fieldTransforms,u,d.transformResults),D=u.data;D.setAll(Qd(o)),D.setAll(g),u.convertToFoundDocument(d.version,D).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function yc(i,e,t){var u;i instanceof Gu?function(o,u,d){if(!Gl(o.precondition,u))return;const g=o.value.clone(),D=vc(o.fieldTransforms,d,u);g.setAll(D),u.convertToFoundDocument(Wl(u),g).setHasLocalMutations()}(i,e,t):i instanceof da?function(o,u,d){if(!Gl(o.precondition,u))return;const g=vc(o.fieldTransforms,d,u),D=u.data;D.setAll(Qd(o)),D.setAll(g),u.convertToFoundDocument(Wl(u),D).setHasLocalMutations()}(i,e,t):Gl(i.precondition,u=e)&&u.convertToNoDocument(sn.min())}function bg(i,e){let t=null;for(const o of i.fieldTransforms){const u=e.data.field(o.field),d=qd(o.transform,u||null);null!=d&&(null==t&&(t=x.empty()),t.set(o.field,d))}return t||null}function xf(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===o||t&&o&&Oo(t,o,(u,d)=>function Zd(i,e){return i.field.isEqual(e.field)&&(o=e.transform,(t=i.transform)instanceof gc&&o instanceof gc||t instanceof Lo&&o instanceof Lo?Oo(t.elements,o.elements,Cr):t instanceof ji&&o instanceof ji?Cr(t.k,o.k):t instanceof ju&&o instanceof ju);var t,o}(u,d))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,o}function Wl(i){return i.isFoundDocument()?i.version:sn.min()}class Gu extends Va{constructor(e,t,o,u=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=u,this.type=0}}class da extends Va{constructor(e,t,o,u,d=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=u,this.fieldTransforms=d,this.type=1}}function Qd(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const o=i.data.field(t);e.set(t,o)}}),e}function Jd(i,e,t){const o=new Map;T(i.length===t.length);for(let u=0;u<t.length;u++){const d=i[u],g=d.transform,D=e.data.field(d.field);o.set(d.field,Af(g,D,t[u]))}return o}function vc(i,e,t){const o=new Map;for(const u of i){const d=u.transform,g=t.data.field(u.field);o.set(u.field,Kd(d,g,e))}return o}class Fo extends Va{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Kl extends Va{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class ql{constructor(e){this.count=e}}var Hr,on;function Xd(i){switch(i){default:return m();case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0}}function eh(i){if(void 0===i)return sr("GRPC error has no .code"),L.UNKNOWN;switch(i){case Hr.OK:return L.OK;case Hr.CANCELLED:return L.CANCELLED;case Hr.UNKNOWN:return L.UNKNOWN;case Hr.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Hr.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Hr.INTERNAL:return L.INTERNAL;case Hr.UNAVAILABLE:return L.UNAVAILABLE;case Hr.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Hr.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Hr.NOT_FOUND:return L.NOT_FOUND;case Hr.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Hr.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Hr.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Hr.ABORTED:return L.ABORTED;case Hr.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Hr.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Hr.DATA_LOSS:return L.DATA_LOSS;default:return m()}}(on=Hr||(Hr={}))[on.OK=0]="OK",on[on.CANCELLED=1]="CANCELLED",on[on.UNKNOWN=2]="UNKNOWN",on[on.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",on[on.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",on[on.NOT_FOUND=5]="NOT_FOUND",on[on.ALREADY_EXISTS=6]="ALREADY_EXISTS",on[on.PERMISSION_DENIED=7]="PERMISSION_DENIED",on[on.UNAUTHENTICATED=16]="UNAUTHENTICATED",on[on.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",on[on.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",on[on.ABORTED=10]="ABORTED",on[on.OUT_OF_RANGE=11]="OUT_OF_RANGE",on[on.UNIMPLEMENTED=12]="UNIMPLEMENTED",on[on.INTERNAL=13]="INTERNAL",on[on.UNAVAILABLE=14]="UNAVAILABLE",on[on.DATA_LOSS=15]="DATA_LOSS";class bo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0!==o)for(const[u,d]of o)if(this.equalsFn(u,e))return d}has(e){return void 0!==this.get(e)}set(e,t){const o=this.mapKeyFn(e),u=this.inner[o];if(void 0===u)return this.inner[o]=[[e,t]],void this.innerSize++;for(let d=0;d<u.length;d++)if(this.equalsFn(u[d][0],e))return void(u[d]=[e,t]);u.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return 1===o.length?delete this.inner[t]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){Ra(this.inner,(t,o)=>{for(const[u,d]of o)e(u,d)})}isEmpty(){return Vd(this.inner)}size(){return this.innerSize}}const th=new Cn(bt.comparator);function oo(){return th}const Mf=new Cn(bt.comparator);function Zl(...i){let e=Mf;for(const t of i)e=e.insert(t.key,t);return e}function Ba(){return new bo(i=>i.toString(),(i,e)=>i.isEqual(e))}const Rf=new Cn(bt.comparator),Nf=new Pn(bt.comparator);function ar(...i){let e=Nf;for(const t of i)e=e.add(t);return e}const _c=new Pn(pn);function Mi(){return _c}class fu{constructor(e,t,o,u,d){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(e,t){const o=new Map;return o.set(e,pu.createSynthesizedTargetChangeForCurrentChange(e,t)),new fu(sn.min(),o,Mi(),oo(),ar())}}class pu{constructor(e,t,o,u,d){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(e,t){return new pu(Qr.EMPTY_BYTE_STRING,t,ar(),ar(),ar())}}class gu{constructor(e,t,o,u){this.O=e,this.removedTargetIds=t,this.key=o,this.F=u}}class Ii{constructor(e,t){this.targetId=e,this.$=t}}class mu{constructor(e,t,o=Qr.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=u}}class Qc{constructor(){this.B=0,this.L=hs(),this.U=Qr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=ar(),t=ar(),o=ar();return this.L.forEach((u,d)=>{switch(d){case 0:e=e.add(u);break;case 2:t=t.add(u);break;case 1:o=o.add(u);break;default:m()}}),new pu(this.U,this.q,e,t,o)}J(){this.K=!1,this.L=hs()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class Yl{constructor(e){this.nt=e,this.st=new Map,this.it=oo(),this.rt=nh(),this.ot=new Pn(pn)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const o=this.lt(t);switch(e.state){case 0:this.ft(t)&&o.W(e.resumeToken);break;case 1:o.tt(),o.G||o.J(),o.W(e.resumeToken);break;case 2:o.tt(),o.G||this.removeTarget(t);break;case 3:this.ft(t)&&(o.et(),o.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),o.W(e.resumeToken));break;default:m()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((o,u)=>{this.ft(u)&&t(u)})}_t(e){const t=e.targetId,o=e.$.count,u=this.wt(t);if(u){const d=u.target;if(Fu(d))if(0===o){const g=new bt(d.path);this.ct(t,g,q.newNoDocument(g,sn.min()))}else T(1===o);else this.gt(t)!==o&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((d,g)=>{const D=this.wt(g);if(D){if(d.current&&Fu(D.target)){const P=new bt(D.target.path);null!==this.it.get(P)||this.It(g,P)||this.ct(g,P,q.newNoDocument(P,e))}d.j&&(t.set(g,d.H()),d.J())}});let o=ar();this.rt.forEach((d,g)=>{let D=!0;g.forEachWhile(P=>{const U=this.wt(P);return!U||2===U.purpose||(D=!1,!1)}),D&&(o=o.add(d))}),this.it.forEach((d,g)=>g.setReadTime(e));const u=new fu(e,t,this.ot,this.it,o);return this.it=oo(),this.rt=nh(),this.ot=new Pn(pn),u}at(e,t){if(!this.ft(e))return;const o=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,o),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,o){if(!this.ft(e))return;const u=this.lt(e);this.It(e,t)?u.Y(t,1):u.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),o&&(this.it=this.it.insert(t,o))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Qc,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Pn(pn),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||dt("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new Qc),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function nh(){return new Cn(bt.comparator)}function hs(){return new Cn(bt.comparator)}const Ec={asc:"ASCENDING",desc:"DESCENDING"},Ql={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Pf{constructor(e,t){this.databaseId=e,this.N=t}}function ja(i,e){return i.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Jc(i,e){return i.N?e.toBase64():e.toUint8Array()}function Of(i,e){return ja(i,e.toTimestamp())}function oi(i){return T(!!i),sn.fromTimestamp(function(e){const t=_s(e);return new Nr(t.seconds,t.nanos)}(i))}function Jl(i,e){return(t=i,new Ln(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function ha(i){const e=Ln.fromString(i);return T(ye(e)),e}function $a(i,e){return Jl(i.databaseId,e.path)}function Uo(i,e){const t=ha(e);if(t.get(1)!==i.databaseId.projectId)throw new z(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new z(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new bt(fs(t))}function Xl(i,e){return Jl(i.databaseId,e)}function wc(i){const e=ha(i);return 4===e.length?Ln.emptyPath():fs(e)}function zu(i){return new Ln(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function fs(i){return T(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function Xc(i,e,t){return{name:$a(i,e),fields:t.value.mapValue.fields}}function el(i,e,t){const o=Uo(i,e.name),u=oi(e.updateTime),d=new x({mapValue:{fields:e.fields}}),g=q.newFoundDocument(o,u,d);return t&&g.setHasCommittedMutations(),t?g.setHasCommittedMutations():g}function fa(i,e){let t;if(e instanceof Gu)t={update:Xc(i,e.key,e.value)};else if(e instanceof Fo)t={delete:$a(i,e.key)};else if(e instanceof da)t={update:Xc(i,e.key,e.data),updateMask:H(e.fieldMask)};else{if(!(e instanceof Kl))return m();t={verify:$a(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(o=>function(u,d){const g=d.transform;if(g instanceof ju)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof gc)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Lo)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof ji)return{fieldPath:d.field.canonicalString(),increment:g.k};throw m()}(0,o))),e.precondition.isNone||(t.currentDocument=void 0!==(u=e.precondition).updateTime?{updateTime:Of(i,u.updateTime)}:void 0!==u.exists?{exists:u.exists}:m()),t;var u}function tl(i,e){const t=e.currentDocument?void 0!==(u=e.currentDocument).updateTime?wi.updateTime(oi(u.updateTime)):void 0!==u.exists?wi.exists(u.exists):wi.none():wi.none(),o=e.updateTransforms?e.updateTransforms.map(u=>function(d,g){let D=null;"setToServerValue"in g?(T("REQUEST_TIME"===g.setToServerValue),D=new ju):"appendMissingElements"in g?D=new gc(g.appendMissingElements.values||[]):"removeAllFromArray"in g?D=new Lo(g.removeAllFromArray.values||[]):"increment"in g?D=new ji(d,g.increment):m();const P=pi.fromServerFormat(g.fieldPath);return new Hu(P,D)}(i,u)):[];var u;if(e.update){const u=Uo(i,e.update.name),d=new x({mapValue:{fields:e.update.fields}});if(e.updateMask){const g=new su((e.updateMask.fieldPaths||[]).map(U=>pi.fromServerFormat(U)));return new da(u,d,g,t,o)}return new Gu(u,d,t,o)}if(e.delete){const u=Uo(i,e.delete);return new Fo(u,t)}if(e.verify){const u=Uo(i,e.verify);return new Kl(u,t)}return m()}function ih(i,e){return{documents:[Xl(i,e.path)]}}function nl(i,e){const t={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(t.parent=Xl(i,o),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Xl(i,o.popLast()),t.structuredQuery.from=[{collectionId:o.lastSegment()}]);const u=function(P){if(0===P.length)return;const U=P.map(Q=>function(he){if("=="===he.op){if(Eo(he.value))return{unaryFilter:{field:l(he.field),op:"IS_NAN"}};if(Lu(he.value))return{unaryFilter:{field:l(he.field),op:"IS_NULL"}}}else if("!="===he.op){if(Eo(he.value))return{unaryFilter:{field:l(he.field),op:"IS_NOT_NAN"}};if(Lu(he.value))return{unaryFilter:{field:l(he.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:l(he.field),op:p(he.op),value:he.value}}}(Q));return 1===U.length?U[0]:{compositeFilter:{op:"AND",filters:U}}}(e.filters);u&&(t.structuredQuery.where=u);const d=function(P){if(0!==P.length)return P.map(U=>{return{field:l((Q=U).field),direction:Wu(Q.dir)};var Q})}(e.orderBy);d&&(t.structuredQuery.orderBy=d);const g=(U=e.limit,i.N||us(U)?U:{value:U});var U,D,P;return null!==g&&(t.structuredQuery.limit=g),e.startAt&&(t.structuredQuery.startAt={before:(D=e.startAt).inclusive,values:D.position}),e.endAt&&(t.structuredQuery.endAt={before:!(P=e.endAt).inclusive,values:P.position}),t}function sh(i){let e=wc(i.parent);const t=i.structuredQuery,o=t.from?t.from.length:0;let u=null;if(o>0){T(1===o);const Q=t.from[0];Q.allDescendants?u=Q.collectionId:e=e.child(Q.collectionId)}let d=[];t.where&&(d=oh(t.where));let g=[];t.orderBy&&(g=t.orderBy.map(Q=>{return new ka(h((he=Q).field),function(Ue){switch(Ue){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(he.direction));var he}));let D=null;t.limit&&(D=function(Q){let he;return he="object"==typeof Q?Q.value:Q,us(he)?null:he}(t.limit));let P=null;var Q;t.startAt&&(P=new Do((Q=t.startAt).values||[],!!Q.before));let U=null;return t.endAt&&(U=function(Q){return new Do(Q.values||[],!Q.before)}(t.endAt)),lu(e,u,g,d,D,"F",P,U)}function oh(i){return i?void 0!==i.unaryFilter?[R(i)]:void 0!==i.fieldFilter?[v(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>oh(e)).reduce((e,t)=>e.concat(t)):m():[]}function Wu(i){return Ec[i]}function p(i){return Ql[i]}function l(i){return{fieldPath:i.canonicalString()}}function h(i){return pi.fromServerFormat(i.fieldPath)}function v(i){return si.create(h(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return m()}}(i.fieldFilter.op),i.fieldFilter.value)}function R(i){switch(i.unaryFilter.op){case"IS_NAN":const e=h(i.unaryFilter.field);return si.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=h(i.unaryFilter.field);return si.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=h(i.unaryFilter.field);return si.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=h(i.unaryFilter.field);return si.create(u,"!=",{nullValue:"NULL_VALUE"});default:return m()}}function H(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ye(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function Fe(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=Ot(e)),e=Tt(i.get(t),e);return Ot(e)}function Tt(i,e){let t=e;const o=i.length;for(let u=0;u<o;u++){const d=i.charAt(u);switch(d){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=d}}return t}function Ot(i){return i+"\x01\x01"}function $t(i){const e=i.length;if(T(e>=2),2===e)return T("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Ln.emptyPath();const t=e-2,o=[];let u="";for(let d=0;d<e;){const g=i.indexOf("\x01",d);switch((g<0||g>t)&&m(),i.charAt(g+1)){case"\x01":const D=i.substring(d,g);let P;0===u.length?P=D:(u+=D,P=u,u=""),o.push(P);break;case"\x10":u+=i.substring(d,g),u+="\0";break;case"\x11":u+=i.substring(d,g+1);break;default:m()}d=g+2}return new Ln(o)}const Jt=["userId","batchId"];function Gr(i,e){return[i,Fe(e)]}function ws(i,e,t){return[i,Fe(e),t]}const Ku={},ed=["prefixPath","collectionGroup","readTime","documentId"],ah=["prefixPath","collectionGroup","documentId"],yu=["collectionGroup","readTime","prefixPath","documentId"],rl=["canonicalId","targetId"],il=["targetId","path"],uh=["path","targetId"],sl=["collectionId","parent"],td=["indexId","uid"],ch=["uid","sequenceNumber"],Ff=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],nd=["indexId","uid","orderedDocumentKey"],Uf=["userId","collectionPath","documentId"],Fy=["userId","collectionPath","largestBatchId"],Tg=["userId","collectionGroup","largestBatchId"],lh=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Cg=[...lh,"documentOverlays"],dh=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Uy=[...dh,"indexConfiguration","indexState","indexEntries"],Sg="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Vf{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class ze{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&m(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ze((o,u)=>{this.nextCallback=d=>{this.wrapSuccess(e,d).next(o,u)},this.catchCallback=d=>{this.wrapFailure(t,d).next(o,u)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ze?t:ze.resolve(t)}catch(t){return ze.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ze.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ze.reject(t)}static resolve(e){return new ze((t,o)=>{t(e)})}static reject(e){return new ze((t,o)=>{o(e)})}static waitFor(e){return new ze((t,o)=>{let u=0,d=0,g=!1;e.forEach(D=>{++u,D.next(()=>{++d,g&&d===u&&t()},P=>o(P))}),g=!0,d===u&&t()})}static or(e){let t=ze.resolve(!1);for(const o of e)t=t.next(u=>u?ze.resolve(u):o());return t}static forEach(e,t){const o=[];return e.forEach((u,d)=>{o.push(t.call(this,u,d))}),this.waitFor(o)}}class Ha{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Le,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new rd(e,t.error)):this.At.resolve()},this.transaction.onerror=o=>{const u=hh(o.target.error);this.At.reject(new rd(e,u))}}static open(e,t,o,u){try{return new Ha(t,e.transaction(u,o))}catch(d){throw new rd(t,d)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(dt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Vy(t)}}class Bo{constructor(e,t,o){this.name=e,this.version=t,this.Pt=o,12.2===Bo.Vt((0,Ye.z$)())&&sr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return dt("SimpleDb","Removing database:",e),qu(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,Ye.hl)())return!1;if(Bo.St())return!0;const e=(0,Ye.z$)(),t=Bo.Vt(e),o=0<t&&t<10,u=Bo.Dt(e),d=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||d)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),o=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(o)}Nt(e){var t=this;return(0,ne.Z)(function*(){return t.db||(dt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((o,u)=>{const d=indexedDB.open(t.name,t.version);d.onsuccess=g=>{o(g.target.result)},d.onblocked=()=>{u(new rd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},d.onerror=g=>{const D=g.target.error;u("VersionError"===D.name?new z(L.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===D.name?new z(L.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+D):new rd(e,D))},d.onupgradeneeded=g=>{dt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',g.oldVersion),t.Pt.kt(g.target.result,d.transaction,g.oldVersion,t.version).next(()=>{dt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=o=>t.Mt(o)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,o,u){var d=this;return(0,ne.Z)(function*(){const g="readonly"===t;let D=0;for(;;){++D;try{d.db=yield d.Nt(e);const P=Ha.open(d.db,e,g?"readonly":"readwrite",o),U=u(P).next(Q=>(P.bt(),Q)).catch(Q=>(P.abort(Q),ze.reject(Q))).toPromise();return U.catch(()=>{}),yield P.Rt,U}catch(P){const U="FirebaseError"!==P.name&&D<3;if(dt("SimpleDb","Transaction failed with error:",P.message,"Retrying:",U),d.close(),!U)return Promise.reject(P)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Ag{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return qu(this.Ft.delete())}}class rd extends z{constructor(e,t){super(L.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ga(i){return"IndexedDbTransactionError"===i.name}class Vy{constructor(e){this.store=e}put(e,t){let o;return void 0!==t?(dt("SimpleDb","PUT",this.store.name,e,t),o=this.store.put(t,e)):(dt("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),qu(o)}add(e){return dt("SimpleDb","ADD",this.store.name,e,e),qu(this.store.add(e))}get(e){return qu(this.store.get(e)).next(t=>(void 0===t&&(t=null),dt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return dt("SimpleDb","DELETE",this.store.name,e),qu(this.store.delete(e))}count(){return dt("SimpleDb","COUNT",this.store.name),qu(this.store.count())}qt(e,t){const o=this.options(e,t);if(o.index||"function"!=typeof this.store.getAll){const u=this.cursor(o),d=[];return this.Kt(u,(g,D)=>{d.push(D)}).next(()=>d)}{const u=this.store.getAll(o.range);return new ze((d,g)=>{u.onerror=D=>{g(D.target.error)},u.onsuccess=D=>{d(D.target.result)}})}}Gt(e,t){const o=this.store.getAll(e,null===t?void 0:t);return new ze((u,d)=>{o.onerror=g=>{d(g.target.error)},o.onsuccess=g=>{u(g.target.result)}})}Qt(e,t){dt("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,t);o.jt=!1;const u=this.cursor(o);return this.Kt(u,(d,g,D)=>D.delete())}Wt(e,t){let o;t?o=e:(o={},t=e);const u=this.cursor(o);return this.Kt(u,t)}zt(e){const t=this.cursor({});return new ze((o,u)=>{t.onerror=d=>{const g=hh(d.target.error);u(g)},t.onsuccess=d=>{const g=d.target.result;g?e(g.primaryKey,g.value).next(D=>{D?g.continue():o()}):o()}})}Kt(e,t){const o=[];return new ze((u,d)=>{e.onerror=g=>{d(g.target.error)},e.onsuccess=g=>{const D=g.target.result;if(!D)return void u();const P=new Ag(D),U=t(D.primaryKey,D.value,P);if(U instanceof ze){const Q=U.catch(he=>(P.done(),ze.reject(he)));o.push(Q)}P.isDone?u():null===P.Lt?D.continue():D.continue(P.Lt)}}).next(()=>ze.waitFor(o))}options(e,t){let o;return void 0!==e&&("string"==typeof e?o=e:t=e),{index:o,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const o=this.store.index(e.index);return e.jt?o.openKeyCursor(e.range,t):o.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function qu(i){return new ze((e,t)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const u=hh(o.target.error);t(u)}})}let Bf=!1;function hh(i){const e=Bo.Vt((0,Ye.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const o=new z("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Bf||(Bf=!0,setTimeout(()=>{throw o},0)),o}}return i}class fh extends Vf{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function $i(i,e){const t=k(i);return Bo.xt(t.Ht,e)}class ol{constructor(e,t,o,u){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let u=0;u<this.mutations.length;u++){const d=this.mutations[u];d.key.isEqual(e.key)&&zl(d,e,o[u])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&yc(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&yc(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const o=e.get(t.key),u=o;this.applyToLocalView(u),o.isValidDocument()||u.convertToNoDocument(sn.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ar())}isEqual(e){return this.batchId===e.batchId&&Oo(this.mutations,e.mutations,(t,o)=>xf(t,o))&&Oo(this.baseMutations,e.baseMutations,(t,o)=>xf(t,o))}}class al{constructor(e,t,o,u){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=u}static from(e,t,o){T(e.mutations.length===o.length);let u=Rf;const d=e.mutations;for(let g=0;g<d.length;g++)u=u.insert(d[g].key,o[g].version);return new al(e,t,o,u)}}class ph{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class za{constructor(e,t,o,u,d=sn.min(),g=sn.min(),D=Qr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=g,this.resumeToken=D}withSequenceNumber(e){return new za(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new za(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new za(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class jf{constructor(e){this.Jt=e}}function ul(i,e){const t=e.key,o={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:gh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:$a(u=i.Jt,(d=e).key),fields:d.data.value.mapValue.fields,updateTime:ja(u,d.version.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:t.path.toArray(),readTime:Zu(e.version)};else{if(!e.isUnknownDocument())return m();o.unknownDocument={path:t.path.toArray(),version:Zu(e.version)}}var u,d;return o}function gh(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Zu(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ic(i){const e=new Nr(i.seconds,i.nanoseconds);return sn.fromTimestamp(e)}function cl(i,e){const t=(e.baseMutations||[]).map(d=>tl(i.Jt,d));for(let d=0;d<e.mutations.length-1;++d){const g=e.mutations[d];d+1<e.mutations.length&&void 0!==e.mutations[d+1].transform&&(g.updateTransforms=e.mutations[d+1].transform.fieldTransforms,e.mutations.splice(d+1,1),++d)}const o=e.mutations.map(d=>tl(i.Jt,d)),u=Nr.fromMillis(e.localWriteTimeMs);return new ol(e.batchId,u,t,o)}function ll(i){const e=Ic(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?Ic(i.lastLimboFreeSnapshotVersion):sn.min();let o;var u;return void 0!==i.query.documents?(T(1===(u=i.query).documents.length),o=io(Fa(wc(u.documents[0])))):o=io(sh(i.query)),new za(o,i.targetId,0,i.lastListenSequenceNumber,e,t,Qr.fromBase64String(i.resumeToken))}function mh(i,e){const t=Zu(e.snapshotVersion),o=Zu(e.lastLimboFreeSnapshotVersion);let u;u=Fu(e.target)?ih(i.Jt,e.target):nl(i.Jt,e.target);const d=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:la(e.target),readTime:t,resumeToken:d,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function yh(i){const e=sh({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?zd(e,e.limit,"L"):e}function xg(i,e){return new ph(e.largestBatchId,tl(i.Jt,e.overlayMutation))}function Hf(i,e){const t=e.path.lastSegment();return[i,Fe(e.path.popLast()),t]}class By{getBundleMetadata(e,t){return Gf(e).get(t).next(o=>{if(o)return{id:(u=o).bundleId,createTime:Ic(u.createTime),version:u.version};var u})}saveBundleMetadata(e,t){return Gf(e).put({bundleId:(o=t).id,createTime:Zu(oi(o.createTime)),version:o.version});var o}getNamedQuery(e,t){return Mg(e).get(t).next(o=>{if(o)return{name:(u=o).name,query:yh(u.bundledQuery),readTime:Ic(u.readTime)};var u})}saveNamedQuery(e,t){return Mg(e).put({name:(o=t).name,readTime:Zu(oi(o.readTime)),bundledQuery:o.bundledQuery});var o}}function Gf(i){return $i(i,"bundles")}function Mg(i){return $i(i,"namedQueries")}class zf{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new zf(e,t.uid||"")}getOverlay(e,t){return Bs(e).get(Hf(this.userId,t)).next(o=>o?xg(this.M,o):null)}saveOverlays(e,t,o){const u=[];return o.forEach((d,g)=>{const D=new ph(t,g);u.push(this.Xt(e,D))}),ze.waitFor(u)}removeOverlaysForBatchId(e,t,o){const u=new Set;t.forEach(g=>u.add(Fe(g.getCollectionPath())));const d=[];return u.forEach(g=>{const D=IDBKeyRange.bound([this.userId,g,o],[this.userId,g,o+1],!1,!0);d.push(Bs(e).Qt("collectionPathOverlayIndex",D))}),ze.waitFor(d)}getOverlaysForCollection(e,t,o){const u=Ba(),d=Fe(t),g=IDBKeyRange.bound([this.userId,d,o],[this.userId,d,Number.POSITIVE_INFINITY],!0);return Bs(e).qt("collectionPathOverlayIndex",g).next(D=>{for(const P of D){const U=xg(this.M,P);u.set(U.getKey(),U)}return u})}getOverlaysForCollectionGroup(e,t,o,u){const d=Ba();let g;const D=IDBKeyRange.bound([this.userId,t,o],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Bs(e).Wt({index:"collectionGroupOverlayIndex",range:D},(P,U,Q)=>{const he=xg(this.M,U);d.size()<u||he.largestBatchId===g?(d.set(he.getKey(),he),g=he.largestBatchId):Q.done()}).next(()=>d)}Xt(e,t){return Bs(e).put(function(o,u,d){const[g,D,P]=Hf(u,d.mutation.key);return{userId:u,collectionPath:D,documentId:P,collectionGroup:d.mutation.key.getCollectionGroup(),largestBatchId:d.largestBatchId,overlayMutation:fa(o.Jt,d.mutation)}}(this.M,this.userId,t))}}function Bs(i){return $i(i,"documentOverlays")}class Dc{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(yr(e.integerValue));else if("doubleValue"in e){const o=yr(e.doubleValue);isNaN(o)?this.ne(t,13):(this.ne(t,15),Es(o)?t.se(0):t.se(o))}else if("timestampValue"in e){const o=e.timestampValue;this.ne(t,20),"string"==typeof o?t.ie(o):(t.ie(`${o.seconds||""}`),t.se(o.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(ko(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const o=e.geoPointValue;this.ne(t,45),t.se(o.latitude||0),t.se(o.longitude||0)}else"mapValue"in e?Gc(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):m()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const o=e.fields||{};this.ne(t,55);for(const u of Object.keys(o))this.re(u,t),this.te(o[u],t)}he(e,t){const o=e.values||[];this.ne(t,50);for(const u of o)this.te(u,t)}ae(e,t){this.ne(t,37),bt.fromName(e).path.forEach(o=>{this.ne(t,60),this.le(o,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function Rg(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function Ng(i){const e=64-function(t){let o=0;for(let u=0;u<8;++u){const d=Rg(255&t[u]);if(o+=d,8!==d)break}return o}(i);return Math.ceil(e/8)}Dc.fe=new Dc;class jy{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this._e(o.value),o=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.ge(o.value),o=t.next();this.ye()}pe(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this._e(o);else if(o<2048)this._e(960|o>>>6),this._e(128|63&o);else if(t<"\ud800"||"\udbff"<t)this._e(480|o>>>12),this._e(128|63&o>>>6),this._e(128|63&o);else{const u=t.codePointAt(0);this._e(240|u>>>18),this._e(128|63&u>>>12),this._e(128|63&u>>>6),this._e(128|63&u)}}this.we()}Ie(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.ge(o);else if(o<2048)this.ge(960|o>>>6),this.ge(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.ge(480|o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o);else{const u=t.codePointAt(0);this.ge(240|u>>>18),this.ge(128|63&u>>>12),this.ge(128|63&u>>>6),this.ge(128|63&u)}}this.ye()}Te(e){const t=this.Ee(e),o=Ng(t);this.Ae(1+o),this.buffer[this.position++]=255&o;for(let u=t.length-o;u<t.length;++u)this.buffer[this.position++]=255&t[u]}Re(e){const t=this.Ee(e),o=Ng(t);this.Ae(1+o),this.buffer[this.position++]=~(255&o);for(let u=t.length-o;u<t.length;++u)this.buffer[this.position++]=~(255&t[u])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(u){const d=new DataView(new ArrayBuffer(8));return d.setFloat64(0,u,!1),new Uint8Array(d.buffer)}(e),o=0!=(128&t[0]);t[0]^=o?255:128;for(let u=1;u<t.length;++u)t[u]^=o?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let o=2*this.buffer.length;o<t&&(o=t);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class $y{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class Hy{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class dl{constructor(){this.De=new jy,this.Ce=new $y(this.De),this.xe=new Hy(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class bc{constructor(e,t,o,u){this.indexId=e,this.documentKey=t,this.arrayValue=o,this.directionalValue=u}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(t);return o.set(this.directionalValue,0),t!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new bc(this.indexId,this.documentKey,this.arrayValue,o)}}function Tc(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=Pg(i.arrayValue,e.arrayValue),0!==t?t:(t=Pg(i.directionalValue,e.directionalValue),0!==t?t:bt.comparator(i.documentKey,e.documentKey)))}function Pg(i,e){for(let t=0;t<i.length&&t<e.length;++t){const o=i[t]-e[t];if(0!==o)return o}return i.length-e.length}class In{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const o=t;o.S()?this.Fe=o:this.Oe.push(o)}}$e(e){const t=Pe(e);if(void 0!==t&&!this.Be(t))return!1;const o=ct(e);let u=0,d=0;for(;u<o.length&&this.Be(o[u]);++u);if(u===o.length)return!0;if(void 0!==this.Fe){const g=o[u];if(!this.Le(this.Fe,g)||!this.Ue(this.Me[d++],g))return!1;++u}for(;u<o.length;++u){const g=o[u];if(d>=this.Me.length||!this.Ue(this.Me[d++],g))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Og{constructor(){this.qe=new vh}addToCollectionParentIndex(e,t){return this.qe.add(t),ze.resolve()}getCollectionParents(e,t){return ze.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return ze.resolve()}deleteFieldIndex(e,t){return ze.resolve()}getDocumentsMatchingTarget(e,t){return ze.resolve(null)}getIndexType(e,t){return ze.resolve(0)}getFieldIndexes(e,t){return ze.resolve([])}getNextCollectionGroupToUpdate(e){return ze.resolve(null)}getMinOffset(e,t){return ze.resolve(Xt.min())}updateCollectionGroup(e,t,o){return ze.resolve()}updateIndexEntries(e,t){return ze.resolve()}}class vh{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),u=this.index[t]||new Pn(Ln.comparator),d=!u.has(o);return this.index[t]=u.add(o),d}has(e){const t=e.lastSegment(),o=e.popLast(),u=this.index[t];return u&&u.has(o)}getEntries(e){return(this.index[e]||new Pn(Ln.comparator)).toArray()}}const id=new Uint8Array(0);class _h{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new vh,this.Ge=new bo(o=>la(o),(o,u)=>Oa(o,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const o=t.lastSegment(),u=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const d={collectionId:o,parent:Fe(u)};return jo(e).put(d)}return ze.resolve()}getCollectionParents(e,t){const o=[],u=IDBKeyRange.bound([t,""],[sa(t),""],!1,!0);return jo(e).qt(u).next(d=>{for(const g of d){if(g.collectionId!==t)break;o.push($t(g.parent))}return o})}addFieldIndex(e,t){const o=Eh(e),u={indexId:(d=t).indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])};var d;return delete u.indexId,o.add(u).next()}deleteFieldIndex(e,t){const o=Eh(e),u=fl(e),d=hl(e);return o.delete(t.indexId).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>d.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const o=hl(e);let u=!0;const d=new Map;return ze.forEach(this.Qe(t),g=>this.je(e,g).next(D=>{u&&(u=!!D),d.set(g,D)})).next(()=>{if(u){let g=ar();const D=[];return ze.forEach(d,(P,U)=>{var Q;dt("IndexedDbIndexManager",`Using index ${Q=P,`id=${Q.indexId}|cg=${Q.collectionGroup}|f=${Q.fields.map(nr=>`${nr.fieldPath}:${nr.kind}`).join(",")}`} to execute ${la(t)}`);const he=function(nr,Pi){const qr=Pe(Pi);if(void 0===qr)return null;for(const ai of Uu(nr,qr.fieldPath))switch(ai.op){case"array-contains-any":return ai.value.arrayValue.values||[];case"array-contains":return[ai.value]}return null}(U,P),Ue=function(nr,Pi){const qr=new Map;for(const ai of ct(Pi))for(const Cs of Uu(nr,ai.fieldPath))switch(Cs.op){case"==":case"in":qr.set(ai.fieldPath.canonicalString(),Cs.value);break;case"not-in":case"!=":return qr.set(ai.fieldPath.canonicalString(),Cs.value),Array.from(qr.values())}return null}(U,P),st=function(nr,Pi){const qr=[];let ai=!0;for(const Cs of ct(Pi)){const kd=0===Cs.kind?Bd(nr,Cs.fieldPath,nr.startAt):cu(nr,Cs.fieldPath,nr.startAt);qr.push(kd.value),ai&&(ai=kd.inclusive)}return new Do(qr,ai)}(U,P),ut=function(nr,Pi){const qr=[];let ai=!0;for(const Cs of ct(Pi)){const kd=0===Cs.kind?cu(nr,Cs.fieldPath,nr.endAt):Bd(nr,Cs.fieldPath,nr.endAt);qr.push(kd.value),ai&&(ai=kd.inclusive)}return new Do(qr,ai)}(U,P),kt=this.We(P,U,st),yn=this.We(P,U,ut),Kr=this.ze(P,U,Ue),gi=this.He(P.indexId,he,kt,st.inclusive,yn,ut.inclusive,Kr);return ze.forEach(gi,nr=>o.Gt(nr,t.limit).next(Pi=>{Pi.forEach(qr=>{const ai=bt.fromSegments(qr.documentKey);g.has(ai)||(g=g.add(ai),D.push(ai))})}))}).next(()=>D)}return ze.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,o,u,d,g,D){const P=(null!=t?t.length:1)*Math.max(o.length,d.length),U=P/(null!=t?t.length:1),Q=[];for(let he=0;he<P;++he){const Ue=t?this.Je(t[he/U]):id,st=this.Ye(e,Ue,o[he%U],u),ut=this.Xe(e,Ue,d[he%U],g),kt=D.map(yn=>this.Ye(e,Ue,yn,!0));Q.push(...this.createRange(st,ut,kt))}return Q}Ye(e,t,o,u){const d=new bc(e,bt.empty(),t,o);return u?d:d.ke()}Xe(e,t,o,u){const d=new bc(e,bt.empty(),t,o);return u?d.ke():d}je(e,t){const o=new In(t),u=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,u).next(d=>{let g=null;for(const D of d)o.$e(D)&&(!g||D.fields.length>g.fields.length)&&(g=D);return g})}getIndexType(e,t){let o=2;return ze.forEach(this.Qe(t),u=>this.je(e,u).next(d=>{d?0!==o&&d.fields.length<function(g){let D=new Pn(pi.comparator),P=!1;for(const U of g.filters){const Q=U;Q.field.isKeyField()||("array-contains"===Q.op||"array-contains-any"===Q.op?P=!0:D=D.add(Q.field))}for(const U of g.orderBy)U.field.isKeyField()||(D=D.add(U.field));return D.size+(P?1:0)}(u)&&(o=1):o=0})).next(()=>o)}Ze(e,t){const o=new dl;for(const u of ct(e)){const d=t.data.field(u.fieldPath);if(null==d)return null;const g=o.Ne(u.kind);Dc.fe.Zt(d,g)}return o.Se()}Je(e){const t=new dl;return Dc.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const o=new dl;return Dc.fe.Zt(_o(this.databaseId,t),o.Ne(function(u){const d=ct(u);return 0===d.length?0:d[d.length-1].kind}(e))),o.Se()}ze(e,t,o){if(null===o)return[];let u=[];u.push(new dl);let d=0;for(const g of ct(e)){const D=o[d++];for(const P of u)if(this.en(t,g.fieldPath)&&ls(D))u=this.nn(u,g,D);else{const U=P.Ne(g.kind);Dc.fe.Zt(D,U)}}return this.sn(u)}We(e,t,o){return this.ze(e,t,o.position)}sn(e){const t=[];for(let o=0;o<e.length;++o)t[o]=e[o].Se();return t}nn(e,t,o){const u=[...e],d=[];for(const g of o.arrayValue.values||[])for(const D of u){const P=new dl;P.seed(D.Se()),Dc.fe.Zt(g,P.Ne(t.kind)),d.push(P)}return d}en(e,t){return!!e.filters.find(o=>o instanceof si&&o.field.isEqual(t)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,t){const o=Eh(e),u=fl(e);return(t?o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):o.qt()).next(d=>{const g=[];return ze.forEach(d,D=>u.get([D.indexId,this.uid]).next(P=>{g.push(function(U,Q){const he=Q?new Vt(Q.sequenceNumber,new Xt(Ic(Q.readTime),new bt($t(Q.documentKey)),Q.largestBatchId)):Vt.empty(),Ue=U.fields.map(([st,ut])=>new Lt(pi.fromServerFormat(st),ut));return new Ce(U.indexId,U.collectionGroup,Ue,he)}(D,P))})).next(()=>g)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((o,u)=>{const d=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==d?d:pn(o.collectionGroup,u.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,o){const u=Eh(e),d=fl(e);return this.rn(e).next(g=>u.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(D=>ze.forEach(D,P=>{return d.put({indexId:P.indexId,uid:this.user.uid||"",sequenceNumber:g,readTime:Zu((Ue=o).readTime),documentKey:Fe(Ue.documentKey.path),largestBatchId:Ue.largestBatchId});var Ue})))}updateIndexEntries(e,t){const o=new Map;return ze.forEach(t,(u,d)=>{const g=o.get(u.collectionGroup);return(g?ze.resolve(g):this.getFieldIndexes(e,u.collectionGroup)).next(D=>(o.set(u.collectionGroup,D),ze.forEach(D,P=>this.on(e,u,P).next(U=>{const Q=this.un(d,P);return U.isEqual(Q)?ze.resolve():this.an(e,d,P,U,Q)}))))})}cn(e,t,o,u){return hl(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.tn(o,t.key),documentKey:t.key.path.toArray()})}hn(e,t,o,u){return hl(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.tn(o,t.key),t.key.path.toArray()])}on(e,t,o){const u=hl(e);let d=new Pn(Tc);return u.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.tn(o,t)])},(g,D)=>{d=d.add(new bc(o.indexId,t,D.arrayValue,D.directionalValue))}).next(()=>d)}un(e,t){let o=new Pn(Tc);const u=this.Ze(t,e);if(null==u)return o;const d=Pe(t);if(null!=d){const g=e.data.field(d.fieldPath);if(ls(g))for(const D of g.arrayValue.values||[])o=o.add(new bc(t.indexId,e.key,this.Je(D),u))}else o=o.add(new bc(t.indexId,e.key,id,u));return o}an(e,t,o,u,d){dt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const g=[];return function(D,P,U,Q,he){const Ue=D.getIterator(),st=P.getIterator();let ut=Zi(Ue),kt=Zi(st);for(;ut||kt;){let yn=!1,Kr=!1;if(ut&&kt){const gi=U(ut,kt);gi<0?Kr=!0:gi>0&&(yn=!0)}else null!=ut?Kr=!0:yn=!0;yn?(Q(kt),kt=Zi(st)):Kr?(he(ut),ut=Zi(Ue)):(ut=Zi(Ue),kt=Zi(st))}}(u,d,Tc,D=>{g.push(this.cn(e,t,o,D))},D=>{g.push(this.hn(e,t,o,D))}),ze.waitFor(g)}rn(e){let t=1;return fl(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,d)=>{d.done(),t=u.sequenceNumber+1}).next(()=>t)}createRange(e,t,o){o=o.sort((g,D)=>Tc(g,D)).filter((g,D,P)=>!D||0!==Tc(g,P[D-1]));const u=[];u.push(e);for(const g of o){const D=Tc(g,e),P=Tc(g,t);if(0===D)u[0]=e.ke();else if(D>0&&P<0)u.push(g),u.push(g.ke());else if(P>0)break}u.push(t);const d=[];for(let g=0;g<u.length;g+=2)d.push(IDBKeyRange.bound([u[g].indexId,this.uid,u[g].arrayValue,u[g].directionalValue,id,[]],[u[g+1].indexId,this.uid,u[g+1].arrayValue,u[g+1].directionalValue,id,[]]));return d}getMinOffset(e,t){let o;return ze.forEach(this.Qe(t),u=>this.je(e,u).next(d=>{d?(!o||ii(d.indexState.offset,o)<0)&&(o=d.indexState.offset):o=Xt.min()})).next(()=>o)}}function jo(i){return $i(i,"collectionParents")}function hl(i){return $i(i,"indexEntries")}function Eh(i){return $i(i,"indexConfiguration")}function fl(i){return $i(i,"indexState")}const Wa={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Is{constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new Is(e,Is.DEFAULT_COLLECTION_PERCENTILE,Is.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Wf(i,e,t){const o=i.store("mutations"),u=i.store("documentMutations"),d=[],g=IDBKeyRange.only(t.batchId);let D=0;const P=o.Wt({range:g},(Q,he,Ue)=>(D++,Ue.delete()));d.push(P.next(()=>{T(1===D)}));const U=[];for(const Q of t.mutations){const he=ws(e,Q.key.path,t.batchId);d.push(u.delete(he)),U.push(Q.key)}return ze.waitFor(d).next(()=>U)}function pl(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw m();e=i.noDocument}return JSON.stringify(e).length}Is.DEFAULT_COLLECTION_PERCENTILE=10,Is.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Is.DEFAULT=new Is(41943040,Is.DEFAULT_COLLECTION_PERCENTILE,Is.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Is.DISABLED=new Is(-1,0,0);class kg{constructor(e,t,o,u){this.userId=e,this.M=t,this.indexManager=o,this.referenceDelegate=u,this.ln={}}static Yt(e,t,o,u){T(""!==e.uid);const d=e.isAuthenticated()?e.uid:"";return new kg(d,t,o,u)}checkEmpty(e){let t=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Cc(e).Wt({index:"userMutationsIndex",range:o},(u,d,g)=>{t=!1,g.done()}).next(()=>t)}addMutationBatch(e,t,o,u){const d=vu(e),g=Cc(e);return g.add({}).next(D=>{T("number"==typeof D);const P=new ol(D,t,o,u),U=function(Ue,st,ut){const kt=ut.baseMutations.map(Kr=>fa(Ue.Jt,Kr)),yn=ut.mutations.map(Kr=>fa(Ue.Jt,Kr));return{userId:st,batchId:ut.batchId,localWriteTimeMs:ut.localWriteTime.toMillis(),baseMutations:kt,mutations:yn}}(this.M,this.userId,P),Q=[];let he=new Pn((Ue,st)=>pn(Ue.canonicalString(),st.canonicalString()));for(const Ue of u){const st=ws(this.userId,Ue.key.path,D);he=he.add(Ue.key.path.popLast()),Q.push(g.put(U)),Q.push(d.put(st,Ku))}return he.forEach(Ue=>{Q.push(this.indexManager.addToCollectionParentIndex(e,Ue))}),e.addOnCommittedListener(()=>{this.ln[D]=P.keys()}),ze.waitFor(Q).next(()=>P)})}lookupMutationBatch(e,t){return Cc(e).get(t).next(o=>o?(T(o.userId===this.userId),cl(this.M,o)):null)}fn(e,t){return this.ln[t]?ze.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(o=>{if(o){const u=o.keys();return this.ln[t]=u,u}return null})}getNextMutationBatchAfterBatchId(e,t){const o=t+1,u=IDBKeyRange.lowerBound([this.userId,o]);let d=null;return Cc(e).Wt({index:"userMutationsIndex",range:u},(g,D,P)=>{D.userId===this.userId&&(T(D.batchId>=o),d=cl(this.M,D)),P.done()}).next(()=>d)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return Cc(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(u,d,g)=>{o=d.batchId,g.done()}).next(()=>o)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Cc(e).qt("userMutationsIndex",t).next(o=>o.map(u=>cl(this.M,u)))}getAllMutationBatchesAffectingDocumentKey(e,t){const o=Gr(this.userId,t.path),u=IDBKeyRange.lowerBound(o),d=[];return vu(e).Wt({range:u},(g,D,P)=>{const[U,Q,he]=g,Ue=$t(Q);if(U===this.userId&&t.path.isEqual(Ue))return Cc(e).get(he).next(st=>{if(!st)throw m();T(st.userId===this.userId),d.push(cl(this.M,st))});P.done()}).next(()=>d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Pn(pn);const u=[];return t.forEach(d=>{const g=Gr(this.userId,d.path),D=IDBKeyRange.lowerBound(g),P=vu(e).Wt({range:D},(U,Q,he)=>{const[Ue,st,ut]=U,kt=$t(st);Ue===this.userId&&d.path.isEqual(kt)?o=o.add(ut):he.done()});u.push(P)}),ze.waitFor(u).next(()=>this.dn(e,o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,u=o.length+1,d=Gr(this.userId,o),g=IDBKeyRange.lowerBound(d);let D=new Pn(pn);return vu(e).Wt({range:g},(P,U,Q)=>{const[he,Ue,st]=P,ut=$t(Ue);he===this.userId&&o.isPrefixOf(ut)?ut.length===u&&(D=D.add(st)):Q.done()}).next(()=>this.dn(e,D))}dn(e,t){const o=[],u=[];return t.forEach(d=>{u.push(Cc(e).get(d).next(g=>{if(null===g)throw m();T(g.userId===this.userId),o.push(cl(this.M,g))}))}),ze.waitFor(u).next(()=>o)}removeMutationBatch(e,t){return Wf(e.Ht,this.userId,t).next(o=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),ze.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ze.resolve();const o=IDBKeyRange.lowerBound([this.userId]),u=[];return vu(e).Wt({range:o},(d,g,D)=>{if(d[0]===this.userId){const P=$t(d[1]);u.push(P)}else D.done()}).next(()=>{T(0===u.length)})})}containsKey(e,t){return Kf(e,this.userId,t)}wn(e){return sd(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Kf(i,e,t){const o=Gr(e,t.path),u=o[1],d=IDBKeyRange.lowerBound(o);let g=!1;return vu(i).Wt({range:d,jt:!0},(D,P,U)=>{const[Q,he,Ue]=D;Q===e&&he===u&&(g=!0),U.done()}).next(()=>g)}function Cc(i){return $i(i,"mutations")}function vu(i){return $i(i,"documentMutations")}function sd(i){return $i(i,"mutationQueues")}class _u{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new _u(0)}static yn(){return new _u(-1)}}class qf{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const o=new _u(t.highestTargetId);return t.highestTargetId=o.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>sn.fromTimestamp(new Nr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,o){return this.pn(e).next(u=>(u.highestListenSequenceNumber=t,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),t>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=t),this.In(e,u)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(o=>(o.targetCount+=1,this.En(t,o),this.In(e,o))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Yu(e).delete(t.targetId)).next(()=>this.pn(e)).next(o=>(T(o.targetCount>0),o.targetCount-=1,this.In(e,o)))}removeTargets(e,t,o){let u=0;const d=[];return Yu(e).Wt((g,D)=>{const P=ll(D);P.sequenceNumber<=t&&null===o.get(P.targetId)&&(u++,d.push(this.removeTargetData(e,P)))}).next(()=>ze.waitFor(d)).next(()=>u)}forEachTarget(e,t){return Yu(e).Wt((o,u)=>{const d=ll(u);t(d)})}pn(e){return Gy(e).get("targetGlobalKey").next(t=>(T(null!==t),t))}In(e,t){return Gy(e).put("targetGlobalKey",t)}Tn(e,t){return Yu(e).put(mh(this.M,t))}En(e,t){let o=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,o=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const o=la(t),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let d=null;return Yu(e).Wt({range:u,index:"queryTargetsIndex"},(g,D,P)=>{const U=ll(D);Oa(t,U.target)&&(d=U,P.done())}).next(()=>d)}addMatchingKeys(e,t,o){const u=[],d=Qu(e);return t.forEach(g=>{const D=Fe(g.path);u.push(d.put({targetId:o,path:D})),u.push(this.referenceDelegate.addReference(e,o,g))}),ze.waitFor(u)}removeMatchingKeys(e,t,o){const u=Qu(e);return ze.forEach(t,d=>{const g=Fe(d.path);return ze.waitFor([u.delete([o,g]),this.referenceDelegate.removeReference(e,o,d)])})}removeMatchingKeysForTargetId(e,t){const o=Qu(e),u=IDBKeyRange.bound([t],[t+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(e,t){const o=IDBKeyRange.bound([t],[t+1],!1,!0),u=Qu(e);let d=ar();return u.Wt({range:o,jt:!0},(g,D,P)=>{const U=$t(g[1]),Q=new bt(U);d=d.add(Q)}).next(()=>d)}containsKey(e,t){const o=Fe(t.path),u=IDBKeyRange.bound([o],[sa(o)],!1,!0);let d=0;return Qu(e).Wt({index:"documentTargetsIndex",jt:!0,range:u},([g,D],P,U)=>{0!==g&&(d++,U.done())}).next(()=>d>0)}Et(e,t){return Yu(e).get(t).next(o=>o?ll(o):null)}}function Yu(i){return $i(i,"targets")}function Gy(i){return $i(i,"targetGlobal")}function Qu(i){return $i(i,"targetDocuments")}function Sc(i){return Zf.apply(this,arguments)}function Zf(){return Zf=(0,ne.Z)(function*(i){if(i.code!==L.FAILED_PRECONDITION||i.message!==Sg)throw i;dt("LocalStore","Unexpectedly lost primary lease")}),Zf.apply(this,arguments)}function Lg([i,e],[t,o]){const u=pn(i,t);return 0===u?pn(e,o):u}class Fg{constructor(e){this.An=e,this.buffer=new Pn(Lg),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();Lg(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class $_{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const o=this.Vn?3e5:6e4;dt("LruGarbageCollector",`Garbage collection scheduled in ${o}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",o,(0,ne.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(u){Ga(u)?dt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",u):yield Sc(u)}yield t.Sn(e)}))}}class zy{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(o=>Math.floor(t/100*o))}nthSequenceNumber(e,t){if(0===t)return ze.resolve(or.A);const o=new Fg(t);return this.Dn.forEachTarget(e,u=>o.Pn(u.sequenceNumber)).next(()=>this.Dn.xn(e,u=>o.Pn(u))).next(()=>o.maxValue)}removeTargets(e,t,o){return this.Dn.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(dt("LruGarbageCollector","Garbage collection skipped; disabled"),ze.resolve(Wa)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(dt("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Wa):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let o,u,d,g,D,P,U;const Q=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(he=>(he>this.params.maximumSequenceNumbersToCollect?(dt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${he}`),u=this.params.maximumSequenceNumbersToCollect):u=he,g=Date.now(),this.nthSequenceNumber(e,u))).next(he=>(o=he,D=Date.now(),this.removeTargets(e,o,t))).next(he=>(d=he,P=Date.now(),this.removeOrphanedDocuments(e,o))).next(he=>(U=Date.now(),ia()<=Be.in.DEBUG&&dt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${g-Q}ms\n\tDetermined least recently used ${u} in `+(D-g)+`ms\n\tRemoved ${d} targets in `+(P-D)+`ms\n\tRemoved ${he} documents in `+(U-P)+`ms\nTotal Duration: ${U-Q}ms`),ze.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:d,documentsRemoved:he})))}}class H_{constructor(e,t){this.db=e,this.garbageCollector=new zy(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>t.next(u=>o+u))}kn(e){let t=0;return this.xn(e,o=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(o,u)=>t(u))}addReference(e,t,o){return od(e,o)}removeReference(e,t,o){return od(e,o)}removeTargets(e,t,o){return this.db.getTargetCache().removeTargets(e,t,o)}markPotentiallyOrphaned(e,t){return od(e,t)}On(e,t){return function(o,u){let d=!1;return sd(o).zt(g=>Kf(o,g,u).next(D=>(D&&(d=!0),ze.resolve(!D)))).next(()=>d)}(e,t)}removeOrphanedDocuments(e,t){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let d=0;return this.Mn(e,(g,D)=>{if(D<=t){const P=this.On(e,g).next(U=>{if(!U)return d++,o.getEntry(e,g).next(()=>(o.removeEntry(g,sn.min()),Qu(e).delete([0,Fe(g.path)])))});u.push(P)}}).next(()=>ze.waitFor(u)).next(()=>o.apply(e)).next(()=>d)}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,t){return od(e,t)}Mn(e,t){const o=Qu(e);let u,d=or.A;return o.Wt({index:"documentTargetsIndex"},([g,D],{path:P,sequenceNumber:U})=>{0===g?(d!==or.A&&t(new bt($t(u)),d),d=U,u=P):d=or.A}).next(()=>{d!==or.A&&t(new bt($t(u)),d)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function od(i,e){return Qu(i).put((o=i.currentSequenceNumber,{targetId:0,path:Fe(e.path),sequenceNumber:o}));var o}class Yf{constructor(){this.changes=new bo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,q.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return void 0!==o?ze.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Wy{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,o){return gl(e).put(o)}removeEntry(e,t,o){return gl(e).delete(function(u,d){const g=u.path.toArray();return[g.slice(0,g.length-2),g[g.length-2],gh(d),g[g.length-1]]}(t,o))}updateMetadata(e,t){return this.getMetadata(e).next(o=>(o.byteSize+=t,this.Fn(e,o)))}getEntry(e,t){let o=q.newInvalidDocument(t);return gl(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(wh(t))},(u,d)=>{o=this.$n(t,d)}).next(()=>o)}Bn(e,t){let o={size:0,document:q.newInvalidDocument(t)};return gl(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(wh(t))},(u,d)=>{o={document:this.$n(t,d),size:pl(d)}}).next(()=>o)}getEntries(e,t){let o=oo();return this.Ln(e,t,(u,d)=>{const g=this.$n(u,d);o=o.insert(u,g)}).next(()=>o)}Un(e,t){let o=oo(),u=new Cn(bt.comparator);return this.Ln(e,t,(d,g)=>{const D=this.$n(d,g);o=o.insert(d,D),u=u.insert(d,pl(g))}).next(()=>({documents:o,qn:u}))}Ln(e,t,o){if(t.isEmpty())return ze.resolve();let u=new Pn(Zy);t.forEach(P=>u=u.add(P));const d=IDBKeyRange.bound(wh(u.first()),wh(u.last())),g=u.getIterator();let D=g.getNext();return gl(e).Wt({index:"documentKeyIndex",range:d},(P,U,Q)=>{const he=bt.fromSegments([...U.prefixPath,U.collectionGroup,U.documentId]);for(;D&&Zy(D,he)<0;)o(D,null),D=g.getNext();D&&D.isEqual(he)&&(o(D,U),D=g.hasNext()?g.getNext():null),D?Q.Ut(wh(D)):Q.done()}).next(()=>{for(;D;)o(D,null),D=g.hasNext()?g.getNext():null})}getAllFromCollection(e,t,o){const u=[t.popLast().toArray(),t.lastSegment(),gh(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],d=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return gl(e).qt(IDBKeyRange.bound(u,d,!0)).next(g=>{let D=oo();for(const P of g){const U=this.$n(bt.fromSegments(P.prefixPath.concat(P.collectionGroup,P.documentId)),P);D=D.insert(U.key,U)}return D})}getAllFromCollectionGroup(e,t,o,u){let d=oo();const g=qy(t,o),D=qy(t,Xt.max());return gl(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(g,D,!0)},(P,U,Q)=>{const he=this.$n(bt.fromSegments(U.prefixPath.concat(U.collectionGroup,U.documentId)),U);d=d.insert(he.key,he),d.size===u&&Q.done()}).next(()=>d)}newChangeBuffer(e){return new Qf(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Ky(e).get("remoteDocumentGlobalKey").next(t=>(T(!!t),t))}Fn(e,t){return Ky(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const o=function $f(i,e){let t;if(e.document)t=el(i.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=bt.fromSegments(e.noDocument.path),u=Ic(e.noDocument.readTime);t=q.newNoDocument(o,u),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return m();{const o=bt.fromSegments(e.unknownDocument.path),u=Ic(e.unknownDocument.version);t=q.newUnknownDocument(o,u)}}return e.readTime&&t.setReadTime(function(o){const u=new Nr(o[0],o[1]);return sn.fromTimestamp(u)}(e.readTime)),t}(this.M,t);if(!o.isNoDocument()||!o.version.isEqual(sn.min()))return o}return q.newInvalidDocument(e)}}class Qf extends Yf{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new bo(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(e){const t=[];let o=0,u=new Pn((d,g)=>pn(d.canonicalString(),g.canonicalString()));return this.changes.forEach((d,g)=>{const D=this.Gn.get(d);if(t.push(this.Kn.removeEntry(e,d,D.readTime)),g.isValidDocument()){const P=ul(this.Kn.M,g);u=u.add(d.path.popLast()),o+=pl(P)-D.size,t.push(this.Kn.addEntry(e,d,P))}else if(o-=D.size,this.trackRemovals){const P=ul(this.Kn.M,g.convertToNoDocument(sn.min()));t.push(this.Kn.addEntry(e,d,P))}}),u.forEach(d=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,d))}),t.push(this.Kn.updateMetadata(e,o)),ze.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(o=>(this.Gn.set(t,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:o,qn:u})=>(u.forEach((d,g)=>{this.Gn.set(d,{size:g,readTime:o.get(d).readTime})}),o))}}function Ky(i){return $i(i,"remoteDocumentGlobal")}function gl(i){return $i(i,"remoteDocumentsV14")}function wh(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function qy(i,e){const t=e.documentKey.path.toArray();return[i,gh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Zy(i,e){const t=i.path.toArray(),o=e.path.toArray();let u=0;for(let d=0;d<t.length-2&&d<o.length-2;++d)if(u=pn(t[d],o[d]),u)return u;return u=pn(t.length,o.length),u||(u=pn(t[t.length-2],o[o.length-2]),u||pn(t[t.length-1],o[o.length-1]))}class G_{constructor(e){this.M=e}kt(e,t,o,u){const d=new Ha("createOrUpgrade",t);var D;o<1&&u>=1&&(e.createObjectStore("owner"),(D=e).createObjectStore("mutationQueues",{keyPath:"userId"}),D.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Jt,{unique:!0}),D.createObjectStore("documentMutations"),Yy(e),function(D){D.createObjectStore("remoteDocuments")}(e));let g=ze.resolve();return o<3&&u>=3&&(0!==o&&(function(D){D.deleteObjectStore("targetDocuments"),D.deleteObjectStore("targets"),D.deleteObjectStore("targetGlobal")}(e),Yy(e)),g=g.next(()=>function(D){const P=D.store("targetGlobal"),U={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:sn.min().toTimestamp(),targetCount:0};return P.put("targetGlobalKey",U)}(d))),o<4&&u>=4&&(0!==o&&(g=g.next(()=>function(D,P){return P.store("mutations").qt().next(U=>{D.deleteObjectStore("mutations"),D.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Jt,{unique:!0});const Q=P.store("mutations"),he=U.map(Ue=>Q.put(Ue));return ze.waitFor(he)})}(e,d))),g=g.next(()=>{!function(D){D.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&u>=5&&(g=g.next(()=>this.Qn(d))),o<6&&u>=6&&(g=g.next(()=>(function(D){D.createObjectStore("remoteDocumentGlobal")}(e),this.jn(d)))),o<7&&u>=7&&(g=g.next(()=>this.Wn(d))),o<8&&u>=8&&(g=g.next(()=>this.zn(e,d))),o<9&&u>=9&&(g=g.next(()=>{!function(D){D.objectStoreNames.contains("remoteDocumentChanges")&&D.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&u>=10&&(g=g.next(()=>this.Hn(d))),o<11&&u>=11&&(g=g.next(()=>{(function(D){D.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(D){D.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&u>=12&&(g=g.next(()=>{!function(D){const P=D.createObjectStore("documentOverlays",{keyPath:Uf});P.createIndex("collectionPathOverlayIndex",Fy,{unique:!1}),P.createIndex("collectionGroupOverlayIndex",Tg,{unique:!1})}(e)})),o<13&&u>=13&&(g=g.next(()=>function(D){const P=D.createObjectStore("remoteDocumentsV14",{keyPath:ed});P.createIndex("documentKeyIndex",ah),P.createIndex("collectionGroupIndex",yu)}(e)).next(()=>this.Jn(e,d)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(g=g.next(()=>{!function(D){D.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),D.createObjectStore("indexState",{keyPath:td}).createIndex("sequenceNumberIndex",ch,{unique:!1}),D.createObjectStore("indexEntries",{keyPath:Ff}).createIndex("documentKeyIndex",nd,{unique:!1})}(e)})),g}jn(e){let t=0;return e.store("remoteDocuments").Wt((o,u)=>{t+=pl(u)}).next(()=>{const o={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}Qn(e){const t=e.store("mutationQueues"),o=e.store("mutations");return t.qt().next(u=>ze.forEach(u,d=>{const g=IDBKeyRange.bound([d.userId,-1],[d.userId,d.lastAcknowledgedBatchId]);return o.qt("userMutationsIndex",g).next(D=>ze.forEach(D,P=>{T(P.userId===d.userId);const U=cl(this.M,P);return Wf(e,d.userId,U).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const d=[];return o.Wt((g,D)=>{const P=new Ln(g),U=[0,Fe(P)];d.push(t.get(U).next(Q=>Q?ze.resolve():t.put({targetId:0,path:Fe(P),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>ze.waitFor(d))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:sl});const o=t.store("collectionParents"),u=new vh,d=g=>{if(u.add(g)){const D=g.lastSegment(),P=g.popLast();return o.put({collectionId:D,parent:Fe(P)})}};return t.store("remoteDocuments").Wt({jt:!0},(g,D)=>{const P=new Ln(g);return d(P.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([g,D,P],U)=>{const Q=$t(D);return d(Q.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((o,u)=>{const d=ll(u),g=mh(this.M,d);return t.put(g)})}Jn(e,t){const o=t.store("remoteDocuments"),u=[];return o.Wt((d,g)=>{const D=t.store("remoteDocumentsV14"),P=(U=g,U.document?new bt(Ln.fromString(U.document.name).popFirst(5)):U.noDocument?bt.fromSegments(U.noDocument.path):U.unknownDocument?bt.fromSegments(U.unknownDocument.path):m()).path.toArray();var U;const Q={prefixPath:P.slice(0,P.length-2),collectionGroup:P[P.length-2],documentId:P[P.length-1],readTime:g.readTime||[0,0],unknownDocument:g.unknownDocument,noDocument:g.noDocument,document:g.document,hasCommittedMutations:!!g.hasCommittedMutations};u.push(D.put(Q))}).next(()=>ze.waitFor(u))}}function Yy(i){i.createObjectStore("targetDocuments",{keyPath:il}).createIndex("documentTargetsIndex",uh,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",rl,{unique:!0}),i.createObjectStore("targetGlobal")}const Ug="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Vg{constructor(e,t,o,u,d,g,D,P,U,Q,he=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=o,this.Yn=d,this.window=g,this.document=D,this.Xn=U,this.Zn=Q,this.ts=he,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=Ue=>Promise.resolve(),!Vg.vt())throw new z(L.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new H_(this,u),this.hs=t+"main",this.M=new jf(P),this.ls=new Bo(this.hs,this.ts,new G_(this.M)),this.fs=new qf(this.referenceDelegate,this.M),this.ds=new Wy(this.M),this._s=new By,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===Q&&sr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new z(L.FAILED_PRECONDITION,Ug);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new or(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var o=(0,ne.Z)(function*(u){if(t.started)return e(u)});return function(u){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,ne.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,ne.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>pa(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(Ga(e))return dt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return dt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return Ih(e).get("owner").next(t=>ze.resolve(this.Ps(t)))}Vs(e){return pa(e).delete(this.clientId)}vs(){var e=this;return(0,ne.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=$i(o,"clientMetadata");return u.qt().next(d=>{const g=e.Ds(d,18e5),D=d.filter(P=>-1===g.indexOf(P));return ze.forEach(D,P=>u.delete(P.clientId)).next(()=>D)})}).catch(()=>[]);if(e.ws)for(const o of t)e.ws.removeItem(e.Cs(o.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?ze.resolve(!0):Ih(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new z(L.FAILED_PRECONDITION,Ug);return!1}}return!(!this.networkEnabled||!this.inForeground)||pa(e).qt().next(o=>void 0===this.Ds(o,5e3).find(u=>{if(this.clientId!==u.clientId){const g=!this.inForeground&&u.inForeground,D=this.networkEnabled===u.networkEnabled;if(!this.networkEnabled&&u.networkEnabled||g&&D)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&dt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ne.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const o=new fh(t,or.A);return e.Rs(o).next(()=>e.Vs(o))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(o=>this.Ss(o.updateTimeMs,t)&&!this.xs(o.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>pa(e).qt().next(t=>this.Ds(t,18e5).map(o=>o.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return kg.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new _h(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return zf.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,o){dt("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===t?"readonly":"readwrite",d=14===(g=this.ts)?Uy:13===g?dh:12===g?Cg:11===g?lh:void m();var g;let D;return this.ls.runTransaction(e,u,d,P=>(D=new fh(P,this.es?this.es.next():or.A),"readwrite-primary"===t?this.Es(D).next(U=>!!U||this.As(D)).next(U=>{if(!U)throw sr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new z(L.FAILED_PRECONDITION,Sg);return o(D)}).next(U=>this.bs(D).next(()=>U)):this.$s(D).next(()=>o(D)))).then(P=>(D.raiseOnCommittedEvent(),P))}$s(e){return Ih(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new z(L.FAILED_PRECONDITION,Ug)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ih(e).put("owner",t)}static vt(){return Bo.vt()}Rs(e){const t=Ih(e);return t.get("owner").next(o=>this.Ps(o)?(dt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ze.resolve())}Ss(e,t){const o=Date.now();return!(e<o-t||e>o&&(sr(`Detected an update time that is in the future: ${e} > ${o}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,Ye.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const o=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return dt("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return sr("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){sr("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ih(i){return $i(i,"owner")}function pa(i){return $i(i,"clientMetadata")}function ad(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class Qy{constructor(e,t,o){this.ds=e,this.Bs=t,this.indexManager=o}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(o=>this.Us(e,t,o))}Us(e,t,o){return this.ds.getEntry(e,t).next(u=>{for(const d of o)d.applyToLocalView(u);return u})}qs(e,t){e.forEach((o,u)=>{for(const d of t)d.applyToLocalView(u)})}Ks(e,t){return this.ds.getEntries(e,t).next(o=>this.Gs(e,o).next(()=>o))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>this.qs(t,o))}Qs(e,t,o){return bt.isDocumentKey((u=t).path)&&null===u.collectionGroup&&0===u.filters.length?this.js(e,t.path):Zc(t)?this.Ws(e,t,o):this.zs(e,t,o);var u}js(e,t){return this.Ls(e,new bt(t)).next(o=>{let u=Zl();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}Ws(e,t,o){const u=t.collectionGroup;let d=Zl();return this.indexManager.getCollectionParents(e,u).next(g=>ze.forEach(g,D=>{const P=(U=t,Q=D.child(u),new La(Q,null,U.explicitOrderBy.slice(),U.filters.slice(),U.limit,U.limitType,U.startAt,U.endAt));var U,Q;return this.zs(e,P,o).next(U=>{U.forEach((Q,he)=>{d=d.insert(Q,he)})})}).next(()=>d))}zs(e,t,o){let u;return this.ds.getAllFromCollection(e,t.path,o).next(d=>(u=d,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(d=>{for(const g of d)for(const D of g.mutations){const P=D.key;let U=u.get(P);null==U&&(U=q.newInvalidDocument(P),u=u.insert(P,U)),yc(D,U,g.localWriteTime),U.isFoundDocument()||(u=u.remove(P))}}).next(()=>(u.forEach((d,g)=>{hu(t,g)||(u=u.remove(d))}),u))}}class Dh{constructor(e,t,o,u){this.targetId=e,this.fromCache=t,this.Hs=o,this.Js=u}static Ys(e,t){let o=ar(),u=ar();for(const d of t.docChanges)switch(d.type){case 0:o=o.add(d.doc.key);break;case 1:u=u.add(d.doc.key)}return new Dh(e,t.fromCache,o,u)}}class bh{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,o,u){return this.ti(e,t).next(d=>d||this.ei(e,t,u,o)).next(d=>d||this.ni(e,t))}ti(e,t){return ze.resolve(null)}ei(e,t,o,u){return function Gd(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}(t)||u.isEqual(sn.min())?this.ni(e,t):this.Zs.Ks(e,o).next(d=>{const g=this.si(t,d);return this.ii(t,g,o,u)?this.ni(e,t):(ia()<=Be.in.DEBUG&&dt("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),so(t)),this.ri(e,g,t,dn(u,-1)))})}si(e,t){let o=new Pn(bf(e));return t.forEach((u,d)=>{hu(e,d)&&(o=o.add(d))}),o}ii(e,t,o,u){if(null===e.limit)return!1;if(o.size!==t.size)return!0;const d="F"===e.limitType?t.last():t.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(u)>0)}ni(e,t){return ia()<=Be.in.DEBUG&&dt("QueryEngine","Using full collection scan to execute query:",so(t)),this.Zs.Qs(e,t,Xt.min())}ri(e,t,o,u){return this.Zs.Qs(e,o,u).next(d=>(t.forEach(g=>{d=d.insert(g.key,g)}),d))}}class Bg{constructor(e,t,o,u){this.persistence=e,this.oi=t,this.M=u,this.ui=new Cn(pn),this.ai=new bo(d=>la(d),Oa),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(o)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new Qy(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function Th(i,e,t,o){return new Bg(i,e,t,o)}function jg(i,e){return Ka.apply(this,arguments)}function Ka(){return Ka=(0,ne.Z)(function*(i,e){const t=k(i);return yield t.persistence.runTransaction("Handle user change","readonly",o=>{let u;return t.Bs.getAllMutationBatches(o).next(d=>(u=d,t.li(e),t.Bs.getAllMutationBatches(o))).next(d=>{const g=[],D=[];let P=ar();for(const U of u){g.push(U.batchId);for(const Q of U.mutations)P=P.add(Q.key)}for(const U of d){D.push(U.batchId);for(const Q of U.mutations)P=P.add(Q.key)}return t.fi.Ks(o,P).next(U=>({di:U,removedBatchIds:g,addedBatchIds:D}))})})}),Ka.apply(this,arguments)}function $g(i,e){const t=k(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=e.batch.keys(),d=t.hi.newChangeBuffer({trackRemovals:!0});return function(g,D,P,U){const Q=P.batch,he=Q.keys();let Ue=ze.resolve();return he.forEach(st=>{Ue=Ue.next(()=>U.getEntry(D,st)).next(ut=>{const kt=P.docVersions.get(st);T(null!==kt),ut.version.compareTo(kt)<0&&(Q.applyToRemoteDocument(ut,P),ut.isValidDocument()&&(ut.setReadTime(P.commitVersion),U.addEntry(ut)))})}),Ue.next(()=>g.Bs.removeMutationBatch(D,Q))}(t,o,e,d).next(()=>d.apply(o)).next(()=>t.Bs.performConsistencyCheck(o)).next(()=>t.fi.Ks(o,u))})}function Hg(i){const e=k(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function Jf(i,e){const t=k(i),o=e.snapshotVersion;let u=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",d=>{const g=t.hi.newChangeBuffer({trackRemovals:!0});u=t.ui;const D=[];e.targetChanges.forEach((U,Q)=>{const he=u.get(Q);if(!he)return;D.push(t.fs.removeMatchingKeys(d,U.removedDocuments,Q).next(()=>t.fs.addMatchingKeys(d,U.addedDocuments,Q)));let Ue=he.withSequenceNumber(d.currentSequenceNumber);var st,ut,kt;e.targetMismatches.has(Q)?Ue=Ue.withResumeToken(Qr.EMPTY_BYTE_STRING,sn.min()).withLastLimboFreeSnapshotVersion(sn.min()):U.resumeToken.approximateByteSize()>0&&(Ue=Ue.withResumeToken(U.resumeToken,o)),u=u.insert(Q,Ue),ut=Ue,kt=U,(0===(st=he).resumeToken.approximateByteSize()||ut.snapshotVersion.toMicroseconds()-st.snapshotVersion.toMicroseconds()>=3e8||kt.addedDocuments.size+kt.modifiedDocuments.size+kt.removedDocuments.size>0)&&D.push(t.fs.updateTargetData(d,Ue))});let P=oo();if(e.documentUpdates.forEach(U=>{e.resolvedLimboDocuments.has(U)&&D.push(t.persistence.referenceDelegate.updateLimboDocument(d,U))}),D.push(Gg(d,g,e.documentUpdates).next(U=>{P=U})),!o.isEqual(sn.min())){const U=t.fs.getLastRemoteSnapshotVersion(d).next(Q=>t.fs.setTargetsMetadata(d,d.currentSequenceNumber,o));D.push(U)}return ze.waitFor(D).next(()=>g.apply(d)).next(()=>t.fi.Gs(d,P)).next(()=>P)}).then(d=>(t.ui=u,d))}function Gg(i,e,t){let o=ar();return t.forEach(u=>o=o.add(u)),e.getEntries(i,o).next(u=>{let d=oo();return t.forEach((g,D)=>{const P=u.get(g);D.isNoDocument()&&D.version.isEqual(sn.min())?(e.removeEntry(g,D.readTime),d=d.insert(g,D)):!P.isValidDocument()||D.version.compareTo(P.version)>0||0===D.version.compareTo(P.version)&&P.hasPendingWrites?(e.addEntry(D),d=d.insert(g,D)):dt("LocalStore","Ignoring outdated watch update for ",g,". Current version:",P.version," Watch version:",D.version)}),d})}function zg(i,e){const t=k(i);return t.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(o,e)))}function ml(i,e){const t=k(i);return t.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return t.fs.getTargetData(o,e).next(d=>d?(u=d,ze.resolve(u)):t.fs.allocateTargetId(o).next(g=>(u=new za(e,g,0,o.currentSequenceNumber),t.fs.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=t.ui.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(t.ui=t.ui.insert(o.targetId,o),t.ai.set(e,o.targetId)),o})}function yl(i,e,t){return Ac.apply(this,arguments)}function Ac(){return Ac=(0,ne.Z)(function*(i,e,t){const o=k(i),u=o.ui.get(e),d=t?"readwrite":"readwrite-primary";try{t||(yield o.persistence.runTransaction("Release target",d,g=>o.persistence.referenceDelegate.removeTarget(g,u)))}catch(g){if(!Ga(g))throw g;dt("LocalStore",`Failed to update sequence numbers for target ${e}: ${g}`)}o.ui=o.ui.remove(e),o.ai.delete(u.target)}),Ac.apply(this,arguments)}function Eu(i,e,t){const o=k(i);let u=sn.min(),d=ar();return o.persistence.runTransaction("Execute query","readonly",g=>function(D,P,U){const Q=k(D),he=Q.ai.get(U);return void 0!==he?ze.resolve(Q.ui.get(he)):Q.fs.getTargetData(P,U)}(o,g,io(e)).next(D=>{if(D)return u=D.lastLimboFreeSnapshotVersion,o.fs.getMatchingKeysForTargetId(g,D.targetId).next(P=>{d=P})}).next(()=>o.oi.Qs(g,e,t?u:sn.min(),t?d:ar())).next(D=>(vl(o,Yc(e),D),{documents:D,_i:d})))}function Ch(i,e){const t=k(i),o=k(t.fs),u=t.ui.get(e);return u?Promise.resolve(u.target):t.persistence.runTransaction("Get target data","readonly",d=>o.Et(d,e).next(g=>g?g.target:null))}function xc(i,e){const t=k(i),o=t.ci.get(e)||sn.min();return t.persistence.runTransaction("Get new document changes","readonly",u=>t.hi.getAllFromCollectionGroup(u,e,dn(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(vl(t,e,u),u))}function vl(i,e,t){let o=sn.min();t.forEach((u,d)=>{d.readTime.compareTo(o)>0&&(o=d.readTime)}),i.ci.set(e,o)}function Xf(){return Xf=(0,ne.Z)(function*(i,e,t,o){const u=k(i);let d=ar(),g=oo();for(const U of t){const Q=e.wi(U.metadata.name);U.document&&(d=d.add(Q));const he=e.mi(U);he.setReadTime(e.gi(U.metadata.readTime)),g=g.insert(Q,he)}const D=u.hi.newChangeBuffer({trackRemovals:!0}),P=yield ml(u,(U=o,io(Fa(Ln.fromString(`__bundle__/docs/${U}`)))));var U;return u.persistence.runTransaction("Apply bundle documents","readwrite",U=>Gg(U,D,g).next(Q=>(D.apply(U),Q)).next(Q=>u.fs.removeMatchingKeysForTargetId(U,P.targetId).next(()=>u.fs.addMatchingKeys(U,d,P.targetId)).next(()=>u.fi.Gs(U,Q)).next(()=>Q)))}),Xf.apply(this,arguments)}function Wg(i,e){return Sh.apply(this,arguments)}function Sh(){return Sh=(0,ne.Z)(function*(i,e,t=ar()){const o=yield ml(i,io(yh(e.bundledQuery))),u=k(i);return u.persistence.runTransaction("Save named query","readwrite",d=>{const g=oi(e.readTime);if(o.snapshotVersion.compareTo(g)>=0)return u._s.saveNamedQuery(d,e);const D=o.withResumeToken(Qr.EMPTY_BYTE_STRING,g);return u.ui=u.ui.insert(D.targetId,D),u.fs.updateTargetData(d,D).next(()=>u.fs.removeMatchingKeysForTargetId(d,o.targetId)).next(()=>u.fs.addMatchingKeys(d,t,o.targetId)).next(()=>u._s.saveNamedQuery(d,e))})}),Sh.apply(this,arguments)}class ep{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return ze.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var o;return this.yi.set(t.id,{id:(o=t).id,version:o.version,createTime:oi(o.createTime)}),ze.resolve()}getNamedQuery(e,t){return ze.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(o=t).name,query:yh(o.bundledQuery),readTime:oi(o.readTime)}),ze.resolve();var o}}class tp{constructor(){this.overlays=new Cn(bt.comparator),this.Ii=new Map}getOverlay(e,t){return ze.resolve(this.overlays.get(t))}saveOverlays(e,t,o){return o.forEach((u,d)=>{this.Xt(e,t,d)}),ze.resolve()}removeOverlaysForBatchId(e,t,o){const u=this.Ii.get(o);return void 0!==u&&(u.forEach(d=>this.overlays=this.overlays.remove(d)),this.Ii.delete(o)),ze.resolve()}getOverlaysForCollection(e,t,o){const u=Ba(),d=t.length+1,g=new bt(t.child("")),D=this.overlays.getIteratorFrom(g);for(;D.hasNext();){const P=D.getNext().value,U=P.getKey();if(!t.isPrefixOf(U.path))break;U.path.length===d&&P.largestBatchId>o&&u.set(P.getKey(),P)}return ze.resolve(u)}getOverlaysForCollectionGroup(e,t,o,u){let d=new Cn((U,Q)=>U-Q);const g=this.overlays.getIterator();for(;g.hasNext();){const U=g.getNext().value;if(U.getKey().getCollectionGroup()===t&&U.largestBatchId>o){let Q=d.get(U.largestBatchId);null===Q&&(Q=Ba(),d=d.insert(U.largestBatchId,Q)),Q.set(U.getKey(),U)}}const D=Ba(),P=d.getIterator();for(;P.hasNext()&&(P.getNext().value.forEach((U,Q)=>D.set(U,Q)),!(D.size()>=u)););return ze.resolve(D)}Xt(e,t,o){if(null===o)return;const u=this.overlays.get(o.key);if(null!==u){const g=this.Ii.get(u.largestBatchId).delete(o.key);this.Ii.set(u.largestBatchId,g)}this.overlays=this.overlays.insert(o.key,new ph(t,o));let d=this.Ii.get(t);void 0===d&&(d=ar(),this.Ii.set(t,d)),this.Ii.set(t,d.add(o.key))}}class Ah{constructor(){this.Ti=new Pn(Di.Ei),this.Ai=new Pn(Di.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const o=new Di(e,t);this.Ti=this.Ti.add(o),this.Ai=this.Ai.add(o)}bi(e,t){e.forEach(o=>this.addReference(o,t))}removeReference(e,t){this.Pi(new Di(e,t))}Vi(e,t){e.forEach(o=>this.removeReference(o,t))}vi(e){const t=new bt(new Ln([])),o=new Di(t,e),u=new Di(t,e+1),d=[];return this.Ai.forEachInRange([o,u],g=>{this.Pi(g),d.push(g.key)}),d}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new bt(new Ln([])),o=new Di(t,e),u=new Di(t,e+1);let d=ar();return this.Ai.forEachInRange([o,u],g=>{d=d.add(g.key)}),d}containsKey(e){const t=new Di(e,0),o=this.Ti.firstAfterOrEqual(t);return null!==o&&e.isEqual(o.key)}}class Di{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return bt.comparator(e.key,t.key)||pn(e.Ci,t.Ci)}static Ri(e,t){return pn(e.Ci,t.Ci)||bt.comparator(e.key,t.key)}}class Jy{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new Pn(Di.Ei)}checkEmpty(e){return ze.resolve(0===this.Bs.length)}addMutationBatch(e,t,o,u){const d=this.xi;this.xi++;const g=new ol(d,t,o,u);this.Bs.push(g);for(const D of u)this.Ni=this.Ni.add(new Di(D.key,d)),this.indexManager.addToCollectionParentIndex(e,D.key.path.popLast());return ze.resolve(g)}lookupMutationBatch(e,t){return ze.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const u=this.Mi(t+1),d=u<0?0:u;return ze.resolve(this.Bs.length>d?this.Bs[d]:null)}getHighestUnacknowledgedBatchId(){return ze.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return ze.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new Di(t,0),u=new Di(t,Number.POSITIVE_INFINITY),d=[];return this.Ni.forEachInRange([o,u],g=>{const D=this.ki(g.Ci);d.push(D)}),ze.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Pn(pn);return t.forEach(u=>{const d=new Di(u,0),g=new Di(u,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([d,g],D=>{o=o.add(D.Ci)})}),ze.resolve(this.Oi(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,u=o.length+1;let d=o;bt.isDocumentKey(d)||(d=d.child(""));const g=new Di(new bt(d),0);let D=new Pn(pn);return this.Ni.forEachWhile(P=>{const U=P.key.path;return!!o.isPrefixOf(U)&&(U.length===u&&(D=D.add(P.Ci)),!0)},g),ze.resolve(this.Oi(D))}Oi(e){const t=[];return e.forEach(o=>{const u=this.ki(o);null!==u&&t.push(u)}),t}removeMutationBatch(e,t){T(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let o=this.Ni;return ze.forEach(t.mutations,u=>{const d=new Di(u.key,t.batchId);return o=o.delete(d),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.Ni=o})}_n(e){}containsKey(e,t){const o=new Di(t,0),u=this.Ni.firstAfterOrEqual(o);return ze.resolve(t.isEqual(u&&u.key))}performConsistencyCheck(e){return ze.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class Kg{constructor(e){this.$i=e,this.docs=new Cn(bt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,u=this.docs.get(o),d=u?u.size:0,g=this.$i(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:g}),this.size+=g-d,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return ze.resolve(o?o.document.mutableCopy():q.newInvalidDocument(t))}getEntries(e,t){let o=oo();return t.forEach(u=>{const d=this.docs.get(u);o=o.insert(u,d?d.document.mutableCopy():q.newInvalidDocument(u))}),ze.resolve(o)}getAllFromCollection(e,t,o){let u=oo();const d=new bt(t.child("")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:D,value:{document:P}}=g.getNext();if(!t.isPrefixOf(D.path))break;D.path.length>t.length+1||ii(zn(P),o)<=0||(u=u.insert(P.key,P.mutableCopy()))}return ze.resolve(u)}getAllFromCollectionGroup(e,t,o,u){m()}Bi(e,t){return ze.forEach(this.docs,o=>t(o))}newChangeBuffer(e){return new z_(this)}getSize(e){return ze.resolve(this.size)}}class z_ extends Yf{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?t.push(this.Kn.addEntry(e,u)):this.Kn.removeEntry(o)}),ze.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class qg{constructor(e){this.persistence=e,this.Li=new bo(t=>la(t),Oa),this.lastRemoteSnapshotVersion=sn.min(),this.highestTargetId=0,this.Ui=0,this.qi=new Ah,this.targetCount=0,this.Ki=_u.gn()}forEachTarget(e,t){return this.Li.forEach((o,u)=>t(u)),ze.resolve()}getLastRemoteSnapshotVersion(e){return ze.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ze.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),ze.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.Ui&&(this.Ui=t),ze.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new _u(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,ze.resolve()}updateTargetData(e,t){return this.Tn(t),ze.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,ze.resolve()}removeTargets(e,t,o){let u=0;const d=[];return this.Li.forEach((g,D)=>{D.sequenceNumber<=t&&null===o.get(D.targetId)&&(this.Li.delete(g),d.push(this.removeMatchingKeysForTargetId(e,D.targetId)),u++)}),ze.waitFor(d).next(()=>u)}getTargetCount(e){return ze.resolve(this.targetCount)}getTargetData(e,t){const o=this.Li.get(t)||null;return ze.resolve(o)}addMatchingKeys(e,t,o){return this.qi.bi(t,o),ze.resolve()}removeMatchingKeys(e,t,o){this.qi.Vi(t,o);const u=this.persistence.referenceDelegate,d=[];return u&&t.forEach(g=>{d.push(u.markPotentiallyOrphaned(e,g))}),ze.waitFor(d)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),ze.resolve()}getMatchingKeysForTargetId(e,t){const o=this.qi.Di(t);return ze.resolve(o)}containsKey(e,t){return ze.resolve(this.qi.containsKey(t))}}class Zg{constructor(e,t){this.Gi={},this.overlays={},this.es=new or(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new qg(this),this.indexManager=new Og,this.ds=new Kg(o=>this.referenceDelegate.Qi(o)),this.M=new jf(t),this._s=new ep(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new tp,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.Gi[e.toKey()];return o||(o=new Jy(t,this.referenceDelegate),this.Gi[e.toKey()]=o),o}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,o){dt("MemoryPersistence","Starting transaction:",e);const u=new Xy(this.es.next());return this.referenceDelegate.ji(),o(u).next(d=>this.referenceDelegate.Wi(u).next(()=>d)).toPromise().then(d=>(u.raiseOnCommittedEvent(),d))}zi(e,t){return ze.or(Object.values(this.Gi).map(o=>()=>o.containsKey(e,t)))}}class Xy extends Vf{constructor(e){super(),this.currentSequenceNumber=e}}class xh{constructor(e){this.persistence=e,this.Hi=new Ah,this.Ji=null}static Yi(e){return new xh(e)}get Xi(){if(this.Ji)return this.Ji;throw m()}addReference(e,t,o){return this.Hi.addReference(o,t),this.Xi.delete(o.toString()),ze.resolve()}removeReference(e,t,o){return this.Hi.removeReference(o,t),this.Xi.add(o.toString()),ze.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),ze.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(u=>this.Xi.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next(u=>{u.forEach(d=>this.Xi.add(d.toString()))}).next(()=>o.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ze.forEach(this.Xi,o=>{const u=bt.fromPath(o);return this.Zi(e,u).next(d=>{d||t.removeEntry(u,sn.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(o=>{o?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return ze.or([()=>ze.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function Yg(i,e){return`firestore_clients_${i}_${e}`}function Qg(i,e,t){let o=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function js(i,e){return`firestore_targets_${i}_${e}`}class Mh{constructor(e,t,o,u){this.user=e,this.batchId=t,this.state=o,this.error=u}static tr(e,t,o){const u=JSON.parse(o);let d,g="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return g&&u.error&&(g="string"==typeof u.error.message&&"string"==typeof u.error.code,g&&(d=new z(u.error.code,u.error.message))),g?new Mh(e,t,u.state,d):(sr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${o}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ud{constructor(e,t,o){this.targetId=e,this.state=t,this.error=o}static tr(e,t){const o=JSON.parse(t);let u,d="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new z(o.error.code,o.error.message))),d?new ud(e,o.state,u):(sr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class np{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const o=JSON.parse(t);let u="object"==typeof o&&o.activeTargetIds instanceof Array,d=Mi();for(let g=0;u&&g<o.activeTargetIds.length;++g)u=ro(o.activeTargetIds[g]),d=d.add(o.activeTargetIds[g]);return u?new np(e,d):(sr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Jg{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Jg(t.clientId,t.onlineState):(sr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Rh{constructor(){this.activeTargetIds=Mi()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Xg{constructor(e,t,o,u,d){this.window=e,this.Yn=t,this.persistenceKey=o,this.ir=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new Cn(pn),this.started=!1,this.cr=[];const g=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=d,this.hr=Yg(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new Rh),this.dr=new RegExp(`^firestore_clients_${g}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${g}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${g}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(D){return`firestore_bundle_loaded_v2_${D}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ne.Z)(function*(){const t=yield e.syncEngine.Fs();for(const u of t){if(u===e.ir)continue;const d=e.getItem(Yg(e.persistenceKey,u));if(d){const g=np.tr(u,d);g&&(e.ar=e.ar.insert(g.clientId,g))}}e.yr();const o=e.storage.getItem(e.mr);if(o){const u=e.pr(o);u&&e.Ir(u)}for(const u of e.cr)e.ur(u);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((o,u)=>{u.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,o){this.Er(e,t,o),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(js(this.persistenceKey,e));if(o){const u=ud.tr(e,o);u&&(t=u.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(js(this.persistenceKey,e))}updateQueryState(e,t,o){this.br(e,t,o)}handleUserChange(e,t,o){t.forEach(u=>{this.Ar(u)}),this.currentUser=e,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return dt("SharedClientState","READ",e,t),t}setItem(e,t){dt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){dt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const o=e;if(o.storageArea===this.storage){if(dt("SharedClientState","EVENT",o.key,o.newValue),o.key===this.hr)return void sr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,ne.Z)(function*(){if(t.started){if(null!==o.key)if(t.dr.test(o.key)){if(null==o.newValue){const u=t.vr(o.key);return t.Sr(u,null)}{const u=t.Dr(o.key,o.newValue);if(u)return t.Sr(u.clientId,u)}}else if(t._r.test(o.key)){if(null!==o.newValue){const u=t.Cr(o.key,o.newValue);if(u)return t.Nr(u)}}else if(t.wr.test(o.key)){if(null!==o.newValue){const u=t.kr(o.key,o.newValue);if(u)return t.Mr(u)}}else if(o.key===t.mr){if(null!==o.newValue){const u=t.pr(o.newValue);if(u)return t.Ir(u)}}else if(o.key===t.lr){const u=function(d){let g=or.A;if(null!=d)try{const D=JSON.parse(d);T("number"==typeof D),g=D}catch(D){sr("SharedClientState","Failed to read sequence number from WebStorage",D)}return g}(o.newValue);u!==or.A&&t.sequenceNumberHandler(u)}else if(o.key===t.gr){const u=t.Or(o.newValue);yield Promise.all(u.map(d=>t.syncEngine.Fr(d)))}}else t.cr.push(o)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,o){const u=new Mh(this.currentUser,e,t,o),d=Qg(this.persistenceKey,this.currentUser,e);this.setItem(d,u.er())}Ar(e){const t=Qg(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,o){const u=js(this.persistenceKey,e),d=new ud(e,t,o);this.setItem(u,d.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const o=this.vr(e);return np.tr(o,t)}Cr(e,t){const o=this._r.exec(e),u=Number(o[1]);return Mh.tr(new Yr(void 0!==o[2]?o[2]:null),u,t)}kr(e,t){const o=this.wr.exec(e),u=Number(o[1]);return ud.tr(u,t)}pr(e){return Jg.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,ne.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);dt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const o=t?this.ar.insert(e,t):this.ar.remove(e),u=this.Tr(this.ar),d=this.Tr(o),g=[],D=[];return d.forEach(P=>{u.has(P)||g.push(P)}),u.forEach(P=>{d.has(P)||D.push(P)}),this.syncEngine.Lr(g,D).then(()=>{this.ar=o})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=Mi();return e.forEach((o,u)=>{t=t.unionWith(u.activeTargetIds)}),t}}class em{constructor(){this.Ur=new Rh,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,o){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new Rh,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class rp{Kr(e){}shutdown(){}}class ip{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){dt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){dt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const ev={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class tv{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class nv extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,o,u,d){const g=this.ho(e,t);dt("RestConnection","Sending: ",g,o);const D={};return this.lo(D,u,d),this.fo(e,g,D,o).then(P=>(dt("RestConnection","Received: ",P),P),P=>{throw I("RestConnection",`${e} failed with error: `,P,"url: ",g,"request:",o),P})}_o(e,t,o,u,d){return this.co(e,t,o,u,d)}lo(e,t,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+Fs,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((u,d)=>e[d]=u),o&&o.headers.forEach((u,d)=>e[d]=u)}ho(e,t){return`${this.uo}/v1/${t}:${ev[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,o,u){return new Promise((d,g)=>{const D=new No;D.listenOnce(Ro.COMPLETE,()=>{try{switch(D.getLastErrorCode()){case xa.NO_ERROR:const U=D.getResponseJson();dt("Connection","XHR received:",JSON.stringify(U)),d(U);break;case xa.TIMEOUT:dt("Connection",'RPC "'+e+'" timed out'),g(new z(L.DEADLINE_EXCEEDED,"Request time out"));break;case xa.HTTP_ERROR:const Q=D.getStatus();if(dt("Connection",'RPC "'+e+'" failed with status:',Q,"response text:",D.getResponseText()),Q>0){const he=D.getResponseJson().error;if(he&&he.status&&he.message){const Ue=function(st){const ut=st.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(ut)>=0?ut:L.UNKNOWN}(he.status);g(new z(Ue,he.message))}else g(new z(L.UNKNOWN,"Server responded with status "+D.getStatus()))}else g(new z(L.UNAVAILABLE,"Connection failed."));break;default:m()}}finally{dt("Connection",'RPC "'+e+'" completed.')}});const P=JSON.stringify(u);D.send(t,"POST",P,o,15)})}wo(e,t,o){const u=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=os(),g=ra(),D={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(D.xmlHttpFactory=new no({})),this.lo(D.initMessageHeaders,t,o),(0,Ye.uI)()||(0,Ye.b$)()||(0,Ye.d)()||(0,Ye.w1)()||(0,Ye.Mn)()||(0,Ye.ru)()||(D.httpHeadersOverwriteParam="$httpHeaders");const P=u.join("");dt("Connection","Creating WebChannel: "+P,D);const U=d.createWebChannel(P,D);let Q=!1,he=!1;const Ue=new tv({Jr:ut=>{he?dt("Connection","Not sending because WebChannel is closed:",ut):(Q||(dt("Connection","Opening WebChannel transport."),U.open(),Q=!0),dt("Connection","WebChannel sending:",ut),U.send(ut))},Yr:()=>U.close()}),st=(ut,kt,yn)=>{ut.listen(kt,Kr=>{try{yn(Kr)}catch(gi){setTimeout(()=>{throw gi},0)}})};return st(U,vs.EventType.OPEN,()=>{he||dt("Connection","WebChannel transport opened.")}),st(U,vs.EventType.CLOSE,()=>{he||(he=!0,dt("Connection","WebChannel transport closed"),Ue.ro())}),st(U,vs.EventType.ERROR,ut=>{he||(he=!0,I("Connection","WebChannel transport errored:",ut),Ue.ro(new z(L.UNAVAILABLE,"The operation could not be completed")))}),st(U,vs.EventType.MESSAGE,ut=>{var kt;if(!he){const yn=ut.data[0];T(!!yn);const Kr=yn,gi=Kr.error||(null===(kt=Kr[0])||void 0===kt?void 0:kt.error);if(gi){dt("Connection","WebChannel received error:",gi);const nr=gi.status;let Pi=function(ai){const Cs=Hr[ai];if(void 0!==Cs)return eh(Cs)}(nr),qr=gi.message;void 0===Pi&&(Pi=L.INTERNAL,qr="Unknown error status: "+nr+" with message "+gi.message),he=!0,Ue.ro(new z(Pi,qr)),U.close()}else dt("Connection","WebChannel received:",yn),Ue.oo(yn)}}),st(g,to.STAT_EVENT,ut=>{ut.stat===Rr.PROXY?dt("Connection","Detected buffering proxy"):ut.stat===Rr.NOPROXY&&dt("Connection","Detected no buffering proxy")}),setTimeout(()=>{Ue.io()},0),Ue}}function sp(){return"undefined"!=typeof window?window:null}function Nh(){return"undefined"!=typeof document?document:null}function El(i){return new Pf(i,!0)}class op{constructor(e,t,o=1e3,u=1.5,d=6e4){this.Yn=e,this.timerId=t,this.mo=o,this.yo=u,this.po=d,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),o=Math.max(0,Date.now()-this.Eo),u=Math.max(0,t-o);u>0&&dt("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,u,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class tm{constructor(e,t,o,u,d,g,D,P){this.Yn=e,this.Vo=o,this.vo=u,this.So=d,this.authCredentialsProvider=g,this.appCheckCredentialsProvider=D,this.listener=P,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new op(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,ne.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,ne.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var o=this;return(0,ne.Z)(function*(){o.Uo(),o.qo(),o.No.cancel(),o.Do++,4!==e?o.No.reset():t&&t.code===L.RESOURCE_EXHAUSTED?(sr(t.toString()),sr("Using maximum backoff delay to prevent overloading the backend."),o.No.Ao()):t&&t.code===L.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.Ko(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.Do===t&&this.Qo(o,u)},o=>{e(()=>{const u=new z(L.UNKNOWN,"Fetching auth token failed: "+o.message);return this.jo(u)})})}Qo(e,t){const o=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{o(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(u=>{o(()=>this.jo(u))}),this.stream.onMessage(u=>{o(()=>this.onMessage(u))})}Oo(){var e=this;this.state=5,this.No.Ro((0,ne.Z)(function*(){e.state=0,e.start()}))}jo(e){return dt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(dt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class nm extends tm{constructor(e,t,o,u,d,g){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,u,g),this.M=d}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function Vo(i,e){let t;if("targetChange"in e){const o="NO_CHANGE"===(P=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===P?1:"REMOVE"===P?2:"CURRENT"===P?3:"RESET"===P?4:m(),u=e.targetChange.targetIds||[],d=function(P,U){return P.N?(T(void 0===U||"string"==typeof U),Qr.fromBase64String(U||"")):(T(void 0===U||U instanceof Uint8Array),Qr.fromUint8Array(U||new Uint8Array))}(i,e.targetChange.resumeToken),g=e.targetChange.cause,D=g&&function(P){const U=void 0===P.code?L.UNKNOWN:eh(P.code);return new z(U,P.message||"")}(g);t=new mu(o,u,d,D||null)}else if("documentChange"in e){const o=e.documentChange,u=Uo(i,o.document.name),d=oi(o.document.updateTime),g=new x({mapValue:{fields:o.document.fields}}),D=q.newFoundDocument(u,d,g);t=new gu(o.targetIds||[],o.removedTargetIds||[],D.key,D)}else if("documentDelete"in e){const o=e.documentDelete,u=Uo(i,o.document),d=o.readTime?oi(o.readTime):sn.min(),g=q.newNoDocument(u,d);t=new gu([],o.removedTargetIds||[],g.key,g)}else if("documentRemove"in e){const o=e.documentRemove,u=Uo(i,o.document);t=new gu([],o.removedTargetIds||[],u,null)}else{if(!("filter"in e))return m();{const o=e.filter,d=new ql(o.count||0);t=new Ii(o.targetId,d)}}var P;return t}(this.M,e),o=function(u){if(!("targetChange"in u))return sn.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?sn.min():d.readTime?oi(d.readTime):sn.min()}(e);return this.listener.zo(t,o)}Ho(e){const t={};t.database=zu(this.M),t.addTarget=function(u,d){let g;const D=d.target;return g=Fu(D)?{documents:ih(u,D)}:{query:nl(u,D)},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0?g.resumeToken=Jc(u,d.resumeToken):d.snapshotVersion.compareTo(sn.min())>0&&(g.readTime=ja(u,d.snapshotVersion.toTimestamp())),g}(this.M,e);const o=function Lf(i,e){const t=function(o,u){switch(u){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return m()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);o&&(t.labels=o),this.Lo(t)}Jo(e){const t={};t.database=zu(this.M),t.removeTarget=e,this.Lo(t)}}class rm extends tm{constructor(e,t,o,u,d,g){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,u,g),this.M=d,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(T(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function rh(i,e){return i&&i.length>0?(T(void 0!==e),i.map(t=>function(o,u){let d=oi(o.updateTime?o.updateTime:u);return d.isEqual(sn.min())&&(d=oi(u)),new Yd(d,o.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),o=oi(e.commitTime);return this.listener.tu(o,t)}return T(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=zu(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(o=>fa(this.M,o))};this.Lo(t)}}class rv extends class{}{constructor(e,t,o,u){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=o,this.M=u,this.su=!1}iu(){if(this.su)throw new z(L.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,o){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.So.co(e,t,o,u,d)).catch(u=>{throw"FirebaseError"===u.name?(u.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new z(L.UNKNOWN,u.toString())})}_o(e,t,o){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.So._o(e,t,o,u,d)).catch(u=>{throw"FirebaseError"===u.name?(u.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new z(L.UNKNOWN,u.toString())})}terminate(){this.su=!0}}class qa{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(sr(t),this.uu=!1):dt("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class ap{constructor(e,t,o,u,d){var g=this;this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=d,this.gu.Kr(D=>{o.enqueueAndForget((0,ne.Z)(function*(){var P;ga(g)&&(dt("RemoteStore","Restarting streams for network reachability change."),yield(P=(0,ne.Z)(function*(U){const Q=k(U);Q.wu.add(4),yield ld(Q),Q.yu.set("Unknown"),Q.wu.delete(4),yield cd(Q)}),function(U){return P.apply(this,arguments)})(g))}))}),this.yu=new qa(o,u)}}function cd(i){return up.apply(this,arguments)}function up(){return up=(0,ne.Z)(function*(i){if(ga(i))for(const e of i.mu)yield e(!0)}),up.apply(this,arguments)}function ld(i){return Ph.apply(this,arguments)}function Ph(){return Ph=(0,ne.Z)(function*(i){for(const e of i.mu)yield e(!1)}),Ph.apply(this,arguments)}function Oh(i,e){const t=k(i);t._u.has(e.targetId)||(t._u.set(e.targetId,e),dp(t)?lp(t):Nc(t).Mo()&&cp(t,e))}function dd(i,e){const t=k(i),o=Nc(t);t._u.delete(e),o.Mo()&&kh(t,e),0===t._u.size&&(o.Mo()?o.$o():ga(t)&&t.yu.set("Unknown"))}function cp(i,e){i.pu.Z(e.targetId),Nc(i).Ho(e)}function kh(i,e){i.pu.Z(e),Nc(i).Jo(e)}function lp(i){i.pu=new Yl({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>i._u.get(e)||null}),Nc(i).start(),i.yu.au()}function dp(i){return ga(i)&&!Nc(i).ko()&&i._u.size>0}function ga(i){return 0===k(i).wu.size}function Lh(i){i.pu=void 0}function iv(i){return hd.apply(this,arguments)}function hd(){return hd=(0,ne.Z)(function*(i){i._u.forEach((e,t)=>{cp(i,e)})}),hd.apply(this,arguments)}function hp(i,e){return Fh.apply(this,arguments)}function Fh(){return Fh=(0,ne.Z)(function*(i,e){Lh(i),dp(i)?(i.yu.lu(e),lp(i)):i.yu.set("Unknown")}),Fh.apply(this,arguments)}function W_(i,e,t){return im.apply(this,arguments)}function im(){return im=(0,ne.Z)(function*(i,e,t){if(i.yu.set("Online"),e instanceof mu&&2===e.state&&e.cause)try{yield(o=(0,ne.Z)(function*(u,d){const g=d.cause;for(const D of d.targetIds)u._u.has(D)&&(yield u.remoteSyncer.rejectListen(D,g),u._u.delete(D),u.pu.removeTarget(D))}),function(u,d){return o.apply(this,arguments)})(i,e)}catch(o){dt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield wl(i,o)}else if(e instanceof gu?i.pu.ut(e):e instanceof Ii?i.pu._t(e):i.pu.ht(e),!t.isEqual(sn.min()))try{const o=yield Hg(i.localStore);t.compareTo(o)>=0&&(yield function(u,d){const g=u.pu.yt(d);return g.targetChanges.forEach((D,P)=>{if(D.resumeToken.approximateByteSize()>0){const U=u._u.get(P);U&&u._u.set(P,U.withResumeToken(D.resumeToken,d))}}),g.targetMismatches.forEach(D=>{const P=u._u.get(D);if(!P)return;u._u.set(D,P.withResumeToken(Qr.EMPTY_BYTE_STRING,P.snapshotVersion)),kh(u,D);const U=new za(P.target,D,1,P.sequenceNumber);cp(u,U)}),u.remoteSyncer.applyRemoteEvent(g)}(i,t))}catch(o){dt("RemoteStore","Failed to raise snapshot:",o),yield wl(i,o)}var o}),im.apply(this,arguments)}function wl(i,e,t){return sm.apply(this,arguments)}function sm(){return sm=(0,ne.Z)(function*(i,e,t){if(!Ga(e))throw e;i.wu.add(1),yield ld(i),i.yu.set("Offline"),t||(t=()=>Hg(i.localStore)),i.asyncQueue.enqueueRetryable((0,ne.Z)(function*(){dt("RemoteStore","Retrying IndexedDB access"),yield t(),i.wu.delete(1),yield cd(i)}))}),sm.apply(this,arguments)}function om(i,e){return e().catch(t=>wl(i,t,e))}function Mc(i){return Uh.apply(this,arguments)}function Uh(){return Uh=(0,ne.Z)(function*(i){const e=k(i),t=Ju(e);let o=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;am(e);)try{const u=yield zg(e.localStore,o);if(null===u){0===e.du.length&&t.$o();break}o=u.batchId,um(e,u)}catch(u){yield wl(e,u)}fp(e)&&Za(e)}),Uh.apply(this,arguments)}function am(i){return ga(i)&&i.du.length<10}function um(i,e){i.du.push(e);const t=Ju(i);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function fp(i){return ga(i)&&!Ju(i).ko()&&i.du.length>0}function Za(i){Ju(i).start()}function Vh(i){return pp.apply(this,arguments)}function pp(){return pp=(0,ne.Z)(function*(i){Ju(i).nu()}),pp.apply(this,arguments)}function sv(i){return cm.apply(this,arguments)}function cm(){return cm=(0,ne.Z)(function*(i){const e=Ju(i);for(const t of i.du)e.Zo(t.mutations)}),cm.apply(this,arguments)}function gp(i,e,t){return Bh.apply(this,arguments)}function Bh(){return Bh=(0,ne.Z)(function*(i,e,t){const o=i.du.shift(),u=al.from(o,e,t);yield om(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield Mc(i)}),Bh.apply(this,arguments)}function mp(i,e){return Rc.apply(this,arguments)}function Rc(){return Rc=(0,ne.Z)(function*(i,e){var t;e&&Ju(i).Xo&&(yield(t=(0,ne.Z)(function*(o,u){if(Xd(d=u.code)&&d!==L.ABORTED){const g=o.du.shift();Ju(o).Fo(),yield om(o,()=>o.remoteSyncer.rejectFailedWrite(g.batchId,u)),yield Mc(o)}var d}),function(o,u){return t.apply(this,arguments)})(i,e)),fp(i)&&Za(i)}),Rc.apply(this,arguments)}function lm(i,e){return fd.apply(this,arguments)}function fd(){return fd=(0,ne.Z)(function*(i,e){const t=k(i);t.asyncQueue.verifyOperationInProgress(),dt("RemoteStore","RemoteStore received new credentials");const o=ga(t);t.wu.add(3),yield ld(t),o&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield cd(t)}),fd.apply(this,arguments)}function jh(i,e){return $h.apply(this,arguments)}function $h(){return $h=(0,ne.Z)(function*(i,e){const t=k(i);e?(t.wu.delete(2),yield cd(t)):e||(t.wu.add(2),yield ld(t),t.yu.set("Unknown"))}),$h.apply(this,arguments)}function Nc(i){return i.Iu||(i.Iu=function(e,t,o){const u=k(e);return u.iu(),new nm(t,u.So,u.authCredentials,u.appCheckCredentials,u.M,o)}(i.datastore,i.asyncQueue,{Xr:iv.bind(null,i),eo:hp.bind(null,i),zo:W_.bind(null,i)}),i.mu.push(function(){var e=(0,ne.Z)(function*(t){t?(i.Iu.Fo(),dp(i)?lp(i):i.yu.set("Unknown")):(yield i.Iu.stop(),Lh(i))});return function(t){return e.apply(this,arguments)}}())),i.Iu}function Ju(i){return i.Tu||(i.Tu=function(e,t,o){const u=k(e);return u.iu(),new rm(t,u.So,u.authCredentials,u.appCheckCredentials,u.M,o)}(i.datastore,i.asyncQueue,{Xr:Vh.bind(null,i),eo:mp.bind(null,i),eu:sv.bind(null,i),tu:gp.bind(null,i)}),i.mu.push(function(){var e=(0,ne.Z)(function*(t){t?(i.Tu.Fo(),yield Mc(i)):(yield i.Tu.stop(),i.du.length>0&&(dt("RemoteStore",`Stopping write stream with ${i.du.length} pending writes`),i.du=[]))});return function(t){return e.apply(this,arguments)}}())),i.Tu}class pd{constructor(e,t,o,u,d){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=u,this.removalCallback=d,this.deferred=new Le,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(g=>{})}static createAndSchedule(e,t,o,u,d){const g=Date.now()+o,D=new pd(e,t,g,u,d);return D.start(o),D}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new z(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Il(i,e){if(sr("AsyncQueue",`${e}: ${i}`),Ga(i))return new z(L.UNAVAILABLE,`${e}: ${i}`);throw i}class Dl{constructor(e){this.comparator=e?(t,o)=>e(t,o)||bt.comparator(t.key,o.key):(t,o)=>bt.comparator(t.key,o.key),this.keyedMap=Zl(),this.sortedSet=new Cn(this.comparator)}static emptySet(e){return new Dl(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,o)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Dl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const u=t.getNext().key,d=o.getNext().key;if(!u.isEqual(d))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const o=new Dl;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}class yp{constructor(){this.Eu=new Cn(bt.comparator)}track(e){const t=e.doc.key,o=this.Eu.get(t);o?0!==e.type&&3===o.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==o.type?this.Eu=this.Eu.insert(t,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.Eu=this.Eu.remove(t):1===e.type&&2===o.type?this.Eu=this.Eu.insert(t,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):m():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,o)=>{e.push(o)}),e}}class ma{constructor(e,t,o,u,d,g,D,P){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=d,this.fromCache=g,this.syncStateChanged=D,this.excludesMetadataChanges=P}static fromInitialDocuments(e,t,o,u){const d=[];return t.forEach(g=>{d.push({type:0,doc:g})}),new ma(e,t,Dl.emptySet(t),d,o,u,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let u=0;u<t.length;u++)if(t[u].type!==o[u].type||!t[u].doc.isEqual(o[u].doc))return!1;return!0}}class dm{constructor(){this.Ru=void 0,this.listeners=[]}}class ov{constructor(){this.queries=new bo(e=>Wd(e),pc),this.onlineState="Unknown",this.bu=new Set}}function vp(i,e){return Xu.apply(this,arguments)}function Xu(){return Xu=(0,ne.Z)(function*(i,e){const t=k(i),o=e.query;let u=!1,d=t.queries.get(o);if(d||(u=!0,d=new dm),u)try{d.Ru=yield t.onListen(o)}catch(g){const D=Il(g,`Initialization of query '${so(e.query)}' failed`);return void e.onError(D)}t.queries.set(o,d),d.listeners.push(e),e.Pu(t.onlineState),d.Ru&&e.Vu(d.Ru)&&$o(t)}),Xu.apply(this,arguments)}function _p(i,e){return Ep.apply(this,arguments)}function Ep(){return Ep=(0,ne.Z)(function*(i,e){const t=k(i),o=e.query;let u=!1;const d=t.queries.get(o);if(d){const g=d.listeners.indexOf(e);g>=0&&(d.listeners.splice(g,1),u=0===d.listeners.length)}if(u)return t.queries.delete(o),t.onUnlisten(o)}),Ep.apply(this,arguments)}function av(i,e){const t=k(i);let o=!1;for(const u of e){const g=t.queries.get(u.query);if(g){for(const D of g.listeners)D.Vu(u)&&(o=!0);g.Ru=u}}o&&$o(t)}function uv(i,e,t){const o=k(i),u=o.queries.get(e);if(u)for(const d of u.listeners)d.onError(t);o.queries.delete(e)}function $o(i){i.bu.forEach(e=>{e.next()})}class gd{constructor(e,t,o){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=o||{}}Vu(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)3!==u.type&&o.push(u);e=new ma(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=ma.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class hm{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class wp{constructor(e){this.M=e}wi(e){return Uo(this.M,e)}mi(e){return e.metadata.exists?el(this.M,e.document,!1):q.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return oi(e)}}class fm{constructor(e,t,o){this.Ou=e,this.localStore=t,this.M=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Ip(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const o=Ln.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,o=new wp(this.M);for(const u of e)if(u.metadata.queries){const d=o.wi(u.metadata.name);for(const g of u.metadata.queries){const D=(t.get(g)||ar()).add(d);t.set(g,D)}}return t}complete(){var e=this;return(0,ne.Z)(function*(){const t=yield function _l(i,e,t,o){return Xf.apply(this,arguments)}(e.localStore,new wp(e.M),e.documents,e.Ou.id),o=e.$u(e.documents);for(const u of e.queries)yield Wg(e.localStore,u,o.get(u.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function Ip(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class pm{constructor(e){this.key=e}}class gm{constructor(e){this.key=e}}class mm{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=ar(),this.mutatedKeys=ar(),this.Gu=bf(e),this.Qu=new Dl(this.Gu)}get ju(){return this.Uu}Wu(e,t){const o=t?t.zu:new yp,u=t?t.Qu:this.Qu;let d=t?t.mutatedKeys:this.mutatedKeys,g=u,D=!1;const P="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,U="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((Q,he)=>{const Ue=u.get(Q),st=hu(this.query,he)?he:null,ut=!!Ue&&this.mutatedKeys.has(Ue.key),kt=!!st&&(st.hasLocalMutations||this.mutatedKeys.has(st.key)&&st.hasCommittedMutations);let yn=!1;Ue&&st?Ue.data.isEqual(st.data)?ut!==kt&&(o.track({type:3,doc:st}),yn=!0):this.Hu(Ue,st)||(o.track({type:2,doc:st}),yn=!0,(P&&this.Gu(st,P)>0||U&&this.Gu(st,U)<0)&&(D=!0)):!Ue&&st?(o.track({type:0,doc:st}),yn=!0):Ue&&!st&&(o.track({type:1,doc:Ue}),yn=!0,(P||U)&&(D=!0)),yn&&(st?(g=g.add(st),d=kt?d.add(Q):d.delete(Q)):(g=g.delete(Q),d=d.delete(Q)))}),null!==this.query.limit)for(;g.size>this.query.limit;){const Q="F"===this.query.limitType?g.last():g.first();g=g.delete(Q.key),d=d.delete(Q.key),o.track({type:1,doc:Q})}return{Qu:g,zu:o,ii:D,mutatedKeys:d}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o){const u=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const d=e.zu.Au();d.sort((U,Q)=>function(he,Ue){const st=ut=>{switch(ut){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return m()}};return st(he)-st(Ue)}(U.type,Q.type)||this.Gu(U.doc,Q.doc)),this.Ju(o);const g=t?this.Yu():[],D=0===this.Ku.size&&this.current?1:0,P=D!==this.qu;return this.qu=D,0!==d.length||P?{snapshot:new ma(this.query,e.Qu,u,d,e.mutatedKeys,0===D,P,!1),Xu:g}:{Xu:g}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new yp,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=ar(),this.Qu.forEach(o=>{this.Zu(o.key)&&(this.Ku=this.Ku.add(o.key))});const t=[];return e.forEach(o=>{this.Ku.has(o)||t.push(new gm(o))}),this.Ku.forEach(o=>{e.has(o)||t.push(new pm(o))}),t}ta(e){this.Uu=e._i,this.Ku=ar();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return ma.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class cv{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class ym{constructor(e){this.key=e,this.na=!1}}class K_{constructor(e,t,o,u,d,g){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=u,this.currentUser=d,this.maxConcurrentLimboResolutions=g,this.sa={},this.ia=new bo(D=>Wd(D),pc),this.ra=new Map,this.oa=new Set,this.ua=new Cn(bt.comparator),this.aa=new Map,this.ca=new Ah,this.ha={},this.la=new Map,this.fa=_u.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function vm(i,e){return Dp.apply(this,arguments)}function Dp(){return Dp=(0,ne.Z)(function*(i,e){const t=ic(i);let o,u;const d=t.ia.get(e);if(d)o=d.targetId,t.sharedClientState.addLocalQueryTarget(o),u=d.view.ea();else{const g=yield ml(t.localStore,io(e));t.isPrimaryClient&&Oh(t.remoteStore,g);const D=t.sharedClientState.addLocalQueryTarget(g.targetId);o=g.targetId,u=yield bp(t,e,o,"current"===D)}return u}),Dp.apply(this,arguments)}function bp(i,e,t,o){return _m.apply(this,arguments)}function _m(){return _m=(0,ne.Z)(function*(i,e,t,o){i._a=(Q,he,Ue)=>{return(st=(0,ne.Z)(function*(ut,kt,yn,Kr){let gi=kt.view.Wu(yn);gi.ii&&(gi=yield Eu(ut.localStore,kt.query,!1).then(({documents:qr})=>kt.view.Wu(qr,gi)));const nr=Kr&&Kr.targetChanges.get(kt.targetId),Pi=kt.view.applyChanges(gi,ut.isPrimaryClient,nr);return Ap(ut,kt.targetId,Pi.Xu),Pi.snapshot}),function(ut,kt,yn,Kr){return st.apply(this,arguments)})(i,Q,he,Ue);var st};const u=yield Eu(i.localStore,e,!0),d=new mm(e,u._i),g=d.Wu(u.documents),D=pu.createSynthesizedTargetChangeForCurrentChange(t,o&&"Offline"!==i.onlineState),P=d.applyChanges(g,i.isPrimaryClient,D);Ap(i,t,P.Xu);const U=new cv(e,t,d);return i.ia.set(e,U),i.ra.has(t)?i.ra.get(t).push(e):i.ra.set(t,[e]),P.snapshot}),_m.apply(this,arguments)}function q_(i,e){return md.apply(this,arguments)}function md(){return md=(0,ne.Z)(function*(i,e){const t=k(i),o=t.ia.get(e),u=t.ra.get(o.targetId);if(u.length>1)return t.ra.set(o.targetId,u.filter(d=>!pc(d,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(o.targetId),t.sharedClientState.isActiveQueryTarget(o.targetId)||(yield yl(t.localStore,o.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(o.targetId),dd(t.remoteStore,o.targetId),ec(t,o.targetId)}).catch(Sc))):(ec(t,o.targetId),yield yl(t.localStore,o.targetId,!0))}),md.apply(this,arguments)}function Hh(){return Hh=(0,ne.Z)(function*(i,e,t){const o=sc(i);try{const u=yield function(d,g){const D=k(d),P=Nr.now(),U=g.reduce((he,Ue)=>he.add(Ue.key),ar());let Q;return D.persistence.runTransaction("Locally write mutations","readwrite",he=>D.fi.Ks(he,U).next(Ue=>{Q=Ue;const st=[];for(const ut of g){const kt=bg(ut,Q.get(ut.key));null!=kt&&st.push(new da(ut.key,kt,j(kt.value.mapValue),wi.exists(!0)))}return D.Bs.addMutationBatch(he,P,st,g)})).then(he=>(he.applyToLocalDocumentSet(Q),{batchId:he.batchId,changes:Q}))}(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),function(d,g,D){let P=d.ha[d.currentUser.toKey()];P||(P=new Cn(pn)),P=P.insert(g,D),d.ha[d.currentUser.toKey()]=P}(o,u.batchId,t),yield wu(o,u.changes),yield Mc(o.remoteStore)}catch(u){const d=Il(u,"Failed to persist write");t.reject(d)}}),Hh.apply(this,arguments)}function Tp(i,e){return Em.apply(this,arguments)}function Em(){return Em=(0,ne.Z)(function*(i,e){const t=k(i);try{const o=yield Jf(t.localStore,e);e.targetChanges.forEach((u,d)=>{const g=t.aa.get(d);g&&(T(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?g.na=!0:u.modifiedDocuments.size>0?T(g.na):u.removedDocuments.size>0&&(T(g.na),g.na=!1))}),yield wu(t,o,e)}catch(o){yield Sc(o)}}),Em.apply(this,arguments)}function Ho(i,e,t){const o=k(i);if(o.isPrimaryClient&&0===t||!o.isPrimaryClient&&1===t){const u=[];o.ia.forEach((d,g)=>{const D=g.view.Pu(e);D.snapshot&&u.push(D.snapshot)}),function(d,g){const D=k(d);D.onlineState=g;let P=!1;D.queries.forEach((U,Q)=>{for(const he of Q.listeners)he.Pu(g)&&(P=!0)}),P&&$o(D)}(o.eventManager,e),u.length&&o.sa.zo(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function Z_(i,e,t){return wm.apply(this,arguments)}function wm(){return wm=(0,ne.Z)(function*(i,e,t){const o=k(i);o.sharedClientState.updateQueryState(e,"rejected",t);const u=o.aa.get(e),d=u&&u.key;if(d){let g=new Cn(bt.comparator);g=g.insert(d,q.newNoDocument(d,sn.min()));const D=ar().add(d),P=new fu(sn.min(),new Map,new Pn(pn),g,D);yield Tp(o,P),o.ua=o.ua.remove(d),o.aa.delete(e),xp(o)}else yield yl(o.localStore,e,!1).then(()=>ec(o,e,t)).catch(Sc)}),wm.apply(this,arguments)}function Im(i,e){return Gh.apply(this,arguments)}function Gh(){return Gh=(0,ne.Z)(function*(i,e){const t=k(i),o=e.batch.batchId;try{const u=yield $g(t.localStore,e);Sp(t,o,null),yd(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),yield wu(t,u)}catch(u){yield Sc(u)}}),Gh.apply(this,arguments)}function Dm(i,e,t){return Cp.apply(this,arguments)}function Cp(){return Cp=(0,ne.Z)(function*(i,e,t){const o=k(i);try{const u=yield function(d,g){const D=k(d);return D.persistence.runTransaction("Reject batch","readwrite-primary",P=>{let U;return D.Bs.lookupMutationBatch(P,g).next(Q=>(T(null!==Q),U=Q.keys(),D.Bs.removeMutationBatch(P,Q))).next(()=>D.Bs.performConsistencyCheck(P)).next(()=>D.fi.Ks(P,U))})}(o.localStore,e);Sp(o,e,t),yd(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),yield wu(o,u)}catch(u){yield Sc(u)}}),Cp.apply(this,arguments)}function zh(){return zh=(0,ne.Z)(function*(i,e){const t=k(i);ga(t.remoteStore)||dt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(d){const g=k(d);return g.persistence.runTransaction("Get highest unacknowledged batch id","readonly",D=>g.Bs.getHighestUnacknowledgedBatchId(D))}(t.localStore);if(-1===o)return void e.resolve();const u=t.la.get(o)||[];u.push(e),t.la.set(o,u)}catch(o){const u=Il(o,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),zh.apply(this,arguments)}function yd(i,e){(i.la.get(e)||[]).forEach(t=>{t.resolve()}),i.la.delete(e)}function Sp(i,e,t){const o=k(i);let u=o.ha[o.currentUser.toKey()];if(u){const d=u.get(e);d&&(t?d.reject(t):d.resolve(),u=u.remove(e)),o.ha[o.currentUser.toKey()]=u}}function ec(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.ra.get(e))i.ia.delete(o),t&&i.sa.wa(o,t);i.ra.delete(e),i.isPrimaryClient&&i.ca.vi(e).forEach(o=>{i.ca.containsKey(o)||bm(i,o)})}function bm(i,e){i.oa.delete(e.path.canonicalString());const t=i.ua.get(e);null!==t&&(dd(i.remoteStore,t),i.ua=i.ua.remove(e),i.aa.delete(t),xp(i))}function Ap(i,e,t){for(const o of t)o instanceof pm?(i.ca.addReference(o.key,e),dv(i,o)):o instanceof gm?(dt("SyncEngine","Document no longer in limbo: "+o.key),i.ca.removeReference(o.key,e),i.ca.containsKey(o.key)||bm(i,o.key)):m()}function dv(i,e){const t=e.key,o=t.path.canonicalString();i.ua.get(t)||i.oa.has(o)||(dt("SyncEngine","New document in limbo: "+t),i.oa.add(o),xp(i))}function xp(i){for(;i.oa.size>0&&i.ua.size<i.maxConcurrentLimboResolutions;){const e=i.oa.values().next().value;i.oa.delete(e);const t=new bt(Ln.fromString(e)),o=i.fa.next();i.aa.set(o,new ym(t)),i.ua=i.ua.insert(t,o),Oh(i.remoteStore,new za(io(Fa(t.path)),o,2,or.A))}}function wu(i,e,t){return Mp.apply(this,arguments)}function Mp(){return Mp=(0,ne.Z)(function*(i,e,t){const o=k(i),u=[],d=[],g=[];var D;o.ia.isEmpty()||(o.ia.forEach((D,P)=>{g.push(o._a(P,e,t).then(U=>{if(U){o.isPrimaryClient&&o.sharedClientState.updateQueryState(P.targetId,U.fromCache?"not-current":"current"),u.push(U);const Q=Dh.Ys(P.targetId,U);d.push(Q)}}))}),yield Promise.all(g),o.sa.zo(u),yield(D=(0,ne.Z)(function*(P,U){const Q=k(P);try{yield Q.persistence.runTransaction("notifyLocalViewChanges","readwrite",he=>ze.forEach(U,Ue=>ze.forEach(Ue.Hs,st=>Q.persistence.referenceDelegate.addReference(he,Ue.targetId,st)).next(()=>ze.forEach(Ue.Js,st=>Q.persistence.referenceDelegate.removeReference(he,Ue.targetId,st)))))}catch(he){if(!Ga(he))throw he;dt("LocalStore","Failed to update sequence numbers: "+he)}for(const he of U){const Ue=he.targetId;if(!he.fromCache){const st=Q.ui.get(Ue),kt=st.withLastLimboFreeSnapshotVersion(st.snapshotVersion);Q.ui=Q.ui.insert(Ue,kt)}}}),function(P,U){return D.apply(this,arguments)})(o.localStore,d))}),Mp.apply(this,arguments)}function Wh(i,e){return tc.apply(this,arguments)}function tc(){return tc=(0,ne.Z)(function*(i,e){const t=k(i);if(!t.currentUser.isEqual(e)){dt("SyncEngine","User change. New user:",e.toKey());const o=yield jg(t.localStore,e);t.currentUser=e,(u=t).la.forEach(g=>{g.forEach(D=>{D.reject(new z(L.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.la.clear(),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield wu(t,o.di)}var u}),tc.apply(this,arguments)}function hv(i,e){const t=k(i),o=t.aa.get(e);if(o&&o.na)return ar().add(o.key);{let u=ar();const d=t.ra.get(e);if(!d)return u;for(const g of d){const D=t.ia.get(g);u=u.unionWith(D.view.ju)}return u}}function vd(i,e){return Rp.apply(this,arguments)}function Rp(){return Rp=(0,ne.Z)(function*(i,e){const t=k(i),o=yield Eu(t.localStore,e.query,!0),u=e.view.ta(o);return t.isPrimaryClient&&Ap(t,e.targetId,u.Xu),u}),Rp.apply(this,arguments)}function fv(i,e){return _d.apply(this,arguments)}function _d(){return _d=(0,ne.Z)(function*(i,e){const t=k(i);return xc(t.localStore,e).then(o=>wu(t,o))}),_d.apply(this,arguments)}function Ya(i,e,t,o){return Pc.apply(this,arguments)}function Pc(){return Pc=(0,ne.Z)(function*(i,e,t,o){const u=k(i),d=yield function(g,D){const P=k(g),U=k(P.Bs);return P.persistence.runTransaction("Lookup mutation documents","readonly",Q=>U.fn(Q,D).next(he=>he?P.fi.Ks(Q,he):ze.resolve(null)))}(u.localStore,e);var D;null!==d?("pending"===t?yield Mc(u.remoteStore):"acknowledged"===t||"rejected"===t?(Sp(u,e,o||null),yd(u,e),D=e,k(k(u.localStore).Bs)._n(D)):m(),yield wu(u,d)):dt("SyncEngine","Cannot apply mutation batch with id: "+e)}),Pc.apply(this,arguments)}function Iu(){return Iu=(0,ne.Z)(function*(i,e){const t=k(i);if(ic(t),sc(t),!0===e&&!0!==t.da){const o=t.sharedClientState.getAllActiveQueryTargets(),u=yield Ed(t,o.toArray());t.da=!0,yield jh(t.remoteStore,!0);for(const d of u)Oh(t.remoteStore,d)}else if(!1===e&&!1!==t.da){const o=[];let u=Promise.resolve();t.ra.forEach((d,g)=>{t.sharedClientState.isLocalQueryTarget(g)?o.push(g):u=u.then(()=>(ec(t,g),yl(t.localStore,g,!0))),dd(t.remoteStore,g)}),yield u,yield Ed(t,o),function(d){const g=k(d);g.aa.forEach((D,P)=>{dd(g.remoteStore,P)}),g.ca.Si(),g.aa=new Map,g.ua=new Cn(bt.comparator)}(t),t.da=!1,yield jh(t.remoteStore,!1)}}),Iu.apply(this,arguments)}function Ed(i,e,t){return ao.apply(this,arguments)}function ao(){return ao=(0,ne.Z)(function*(i,e,t){const o=k(i),u=[],d=[];for(const g of e){let D;const P=o.ra.get(g);if(P&&0!==P.length){D=yield ml(o.localStore,io(P[0]));for(const U of P){const Q=o.ia.get(U),he=yield vd(o,Q);he.snapshot&&d.push(he.snapshot)}}else{const U=yield Ch(o.localStore,g);D=yield ml(o.localStore,U),yield bp(o,Kh(U),g,!1)}u.push(D)}return o.sa.zo(d),u}),ao.apply(this,arguments)}function Kh(i){return lu(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function bl(i){const e=k(i);return k(k(e.localStore).persistence).Fs()}function Tl(i,e,t,o){return nc.apply(this,arguments)}function nc(){return nc=(0,ne.Z)(function*(i,e,t,o){const u=k(i);if(u.da)return void dt("SyncEngine","Ignoring unexpected query state notification.");const d=u.ra.get(e);if(d&&d.length>0)switch(t){case"current":case"not-current":{const g=yield xc(u.localStore,Yc(d[0])),D=fu.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield wu(u,g,D);break}case"rejected":yield yl(u.localStore,e,!0),ec(u,e,o);break;default:m()}}),nc.apply(this,arguments)}function Cl(i,e,t){return rc.apply(this,arguments)}function rc(){return rc=(0,ne.Z)(function*(i,e,t){const o=ic(i);if(o.da){for(const u of e){if(o.ra.has(u)){dt("SyncEngine","Adding an already active target "+u);continue}const d=yield Ch(o.localStore,u),g=yield ml(o.localStore,d);yield bp(o,Kh(d),g.targetId,!1),Oh(o.remoteStore,g)}for(const u of t)o.ra.has(u)&&(yield yl(o.localStore,u,!1).then(()=>{dd(o.remoteStore,u),ec(o,u)}).catch(Sc))}}),rc.apply(this,arguments)}function ic(i){const e=k(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Tp.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hv.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Z_.bind(null,e),e.sa.zo=av.bind(null,e.eventManager),e.sa.wa=uv.bind(null,e.eventManager),e}function sc(i){const e=k(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Im.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Dm.bind(null,e),e}class Oc{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ne.Z)(function*(){t.M=El(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return Th(this.persistence,new bh,e.initialUser,this.M)}ya(e){return new Zg(xh.Yi,this.M)}ga(e){return new em}terminate(){var e=this;return(0,ne.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Np extends Oc{constructor(e,t,o){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,o=this;return(0,ne.Z)(function*(){yield t().call(o,e),yield o.Ta.initialize(o,e),yield sc(o.Ta.syncEngine),yield Mc(o.Ta.remoteStore),yield o.persistence.Ts(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(o.localStore),Promise.resolve()))})()}Ia(e){return Th(this.persistence,new bh,e.initialUser,this.M)}pa(e){return new $_(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=ad(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?Is.withCacheSize(this.cacheSizeBytes):Is.DEFAULT;return new Vg(this.synchronizeTabs,t,e.clientId,o,e.asyncQueue,sp(),Nh(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new em}}class Tm extends Np{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,o=this;return(0,ne.Z)(function*(){yield t().call(o,e);const u=o.Ta.syncEngine;o.sharedClientState instanceof Xg&&(o.sharedClientState.syncEngine={$r:Ya.bind(null,u),Br:Tl.bind(null,u),Lr:Cl.bind(null,u),Fs:bl.bind(null,u),Fr:fv.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.Ts(function(){var d=(0,ne.Z)(function*(g){yield function Ds(i,e){return Iu.apply(this,arguments)}(o.Ta.syncEngine,g),o.gcScheduler&&(g&&!o.gcScheduler.started?o.gcScheduler.start(o.localStore):g||o.gcScheduler.stop())});return function(g){return d.apply(this,arguments)}}())})()}ga(e){const t=sp();if(!Xg.vt(t))throw new z(L.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=ad(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Xg(t,e.asyncQueue,o,e.clientId,e.initialUser)}}class qh{initialize(e,t){var o=this;return(0,ne.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(t),o.remoteStore=o.createRemoteStore(t),o.eventManager=o.createEventManager(t),o.syncEngine=o.createSyncEngine(t,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>Ho(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=Wh.bind(null,o.syncEngine),yield jh(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new ov}createDatastore(e){const t=El(e.databaseInfo.databaseId),o=new nv(e.databaseInfo);return new rv(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return t=this.localStore,o=this.datastore,u=e.asyncQueue,d=D=>Ho(this.syncEngine,D,0),g=ip.vt()?new ip:new rp,new ap(t,o,u,d,g);var t,o,u,d,g}createSyncEngine(e,t){return function(o,u,d,g,D,P,U){const Q=new K_(o,u,d,g,D,P);return U&&(Q.da=!0),Q}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ne.Z)(function*(t){const o=k(t);dt("RemoteStore","RemoteStore shutting down."),o.wu.add(5),yield ld(o),o.gu.shutdown(),o.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Pp(i,e=10240){let t=0;return{read:()=>(0,ne.Z)(function*(){if(t<i.byteLength){const o={value:i.slice(t,t+e),done:!1};return t+=e,o}return{done:!0}})(),cancel:()=>(0,ne.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class wd{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Cm{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new Le,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(o=>{o&&o.Mu()?this.metadata.resolve(o.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==o?void 0:o.payload)}`))},o=>this.metadata.reject(o))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,ne.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,ne.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,ne.Z)(function*(){const t=yield e.Va();if(null===t)return null;const o=e.ba.decode(t),u=Number(o);isNaN(u)&&e.va(`length string (${o}) is not valid number`);const d=yield e.Sa(u);return new hm(JSON.parse(d),t.length+u)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,ne.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),o})()}Sa(e){var t=this;return(0,ne.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const o=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),o})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,ne.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const o=new Uint8Array(e.buffer.length+t.value.length);o.set(e.buffer),o.set(t.value,e.buffer.length),e.buffer=o}return t.done})()}}class Sm{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ne.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new z(L.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(u=(0,ne.Z)(function*(d,g){const D=k(d),P=zu(D.M)+"/documents",U={documents:g.map(st=>$a(D.M,st))},Q=yield D._o("BatchGetDocuments",P,U),he=new Map;Q.forEach(st=>{const ut=function kf(i,e){return"found"in e?function(t,o){T(!!o.found);const u=Uo(t,o.found.name),d=oi(o.found.updateTime),g=new x({mapValue:{fields:o.found.fields}});return q.newFoundDocument(u,d,g)}(i,e):"missing"in e?function(t,o){T(!!o.missing),T(!!o.readTime);const u=Uo(t,o.missing),d=oi(o.readTime);return q.newNoDocument(u,d)}(i,e):m()}(D.M,st);he.set(ut.key.toString(),ut)});const Ue=[];return g.forEach(st=>{const ut=he.get(st.toString());T(!!ut),Ue.push(ut)}),Ue}),function(d,g){return u.apply(this,arguments)})(t.datastore,e);var u;return o.forEach(u=>t.recordVersion(u)),o})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new Fo(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ne.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var o;e.mutations.forEach(o=>{t.delete(o.key.toString())}),t.forEach((o,u)=>{const d=bt.fromPath(u);e.mutations.push(new Kl(d,e.precondition(d)))}),yield(o=(0,ne.Z)(function*(u,d){const g=k(u),D=zu(g.M)+"/documents",P={writes:d.map(U=>fa(g.M,U))};yield g.co("Commit",D,P)}),function(u,d){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw m();t=sn.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!t.isEqual(o))throw new z(L.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?wi.updateTime(t):wi.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(sn.min()))throw new z(L.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return wi.updateTime(t)}return wi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Am{constructor(e,t,o,u,d){this.asyncQueue=e,this.datastore=t,this.options=o,this.updateFunction=u,this.deferred=d,this.xa=o.maxAttempts,this.No=new op(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,ne.Z)(function*(){const t=new Sm(e.datastore),o=e.ka(t);o&&o.then(u=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(u)}).catch(d=>{e.Ma(d)}))}).catch(u=>{e.Ma(u)})}))}ka(e){try{const t=this.updateFunction(e);return!us(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Xd(t)}return!1}}class xm{constructor(e,t,o,u){var d=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=u,this.user=Yr.UNAUTHENTICATED,this.clientId=yo.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var g=(0,ne.Z)(function*(D){dt("FirestoreClient","Received user=",D.uid),yield d.authCredentialListener(D),d.user=D});return function(D){return g.apply(this,arguments)}}()),this.appCheckCredentials.start(o,g=>(dt("FirestoreClient","Received new app check token=",g),this.appCheckCredentialListener(g,this.user)))}getConfiguration(){var e=this;return(0,ne.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new z(L.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Le;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ne.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(o){const u=Il(o,"Failed to shutdown persistence");t.reject(u)}})),t.promise}}function Mm(i,e){return Zh.apply(this,arguments)}function Zh(){return Zh=(0,ne.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),dt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let o=t.initialUser;i.setCredentialChangeListener(function(){var u=(0,ne.Z)(function*(d){o.isEqual(d)||(yield jg(e.localStore,d),o=d)});return function(d){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),Zh.apply(this,arguments)}function Rm(i,e){return Op.apply(this,arguments)}function Op(){return Op=(0,ne.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield Yh(i);dt("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(t,o),i.setCredentialChangeListener(u=>lm(e.remoteStore,u)),i.setAppCheckTokenChangeListener((u,d)=>lm(e.remoteStore,d)),i.onlineComponents=e}),Op.apply(this,arguments)}function Yh(i){return kp.apply(this,arguments)}function kp(){return kp=(0,ne.Z)(function*(i){return i.offlineComponents||(dt("FirestoreClient","Using default OfflineComponentProvider"),yield Mm(i,new Oc)),i.offlineComponents}),kp.apply(this,arguments)}function Qh(i){return Jh.apply(this,arguments)}function Jh(){return Jh=(0,ne.Z)(function*(i){return i.onlineComponents||(dt("FirestoreClient","Using default OnlineComponentProvider"),yield Rm(i,new qh)),i.onlineComponents}),Jh.apply(this,arguments)}function Nm(i){return Yh(i).then(e=>e.persistence)}function Xh(i){return Yh(i).then(e=>e.localStore)}function Pm(i){return Qh(i).then(e=>e.remoteStore)}function Lp(i){return Qh(i).then(e=>e.syncEngine)}function Id(i){return Fp.apply(this,arguments)}function Fp(){return Fp=(0,ne.Z)(function*(i){const e=yield Qh(i),t=e.eventManager;return t.onListen=vm.bind(null,e.syncEngine),t.onUnlisten=q_.bind(null,e.syncEngine),t}),Fp.apply(this,arguments)}function gv(i,e,t={}){const o=new Le;return i.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return function(u,d,g,D,P){const U=new wd({next:he=>{d.enqueueAndForget(()=>_p(u,Q));const Ue=he.docs.has(g);!Ue&&he.fromCache?P.reject(new z(L.UNAVAILABLE,"Failed to get document because the client is offline.")):Ue&&he.fromCache&&D&&"server"===D.source?P.reject(new z(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):P.resolve(he)},error:he=>P.reject(he)}),Q=new gd(Fa(g.path),U,{includeMetadataChanges:!0,ku:!0});return vp(u,Q)}(yield Id(i),i.asyncQueue,e,t,o)})),o.promise}function mv(i,e,t={}){const o=new Le;return i.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return function(u,d,g,D,P){const U=new wd({next:he=>{d.enqueueAndForget(()=>_p(u,Q)),he.fromCache&&"server"===D.source?P.reject(new z(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):P.resolve(he)},error:he=>P.reject(he)}),Q=new gd(g,U,{includeMetadataChanges:!0,ku:!0});return vp(u,Q)}(yield Id(i),i.asyncQueue,e,t,o)})),o.promise}const kc=new Map;function Bp(i,e,t){if(!t)throw new z(L.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function jp(i,e,t,o){if(!0===e&&!0===o)throw new z(L.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function km(i){if(!bt.isDocumentKey(i))throw new z(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function $p(i){if(bt.isDocumentKey(i))throw new z(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Lc(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":m()}function Wn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new z(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Lc(i);throw new z(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function Hp(i,e){if(e<=0)throw new z(L.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class Lm{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new z(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new z(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,jp("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Dd{constructor(e,t,o){this._authCredentials=t,this._appCheckCredentials=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Lm({}),this._settingsFrozen=!1,e instanceof Ki?this._databaseId=e:(this._app=e,this._databaseId=function(u){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new z(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ki(u.options.projectId)}(e))}get app(){if(!this._app)throw new z(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new z(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Lm(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new mn;switch(t.type){case"gapi":const o=t.client;return T(!("object"!=typeof o||null===o||!o.auth||!o.auth.getAuthHeaderValueForFirstParty)),new ni(o,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new z(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=kc.get(e);t&&(dt("ComponentProvider","Removing Datastore"),kc.delete(e),t.terminate())}(this),Promise.resolve()}}class zr{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ya(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zr(this.firestore,e,this._key)}}class bs{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new bs(this.firestore,e,this._query)}}class ya extends bs{constructor(e,t,o){super(e,t,Fa(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zr(this.firestore,null,new bt(e))}withConverter(e){return new ya(this.firestore,e,this._path)}}function Fm(i,e,...t){if(i=(0,Ye.m9)(i),Bp("collection","path",e),i instanceof Dd){const o=Ln.fromString(e,...t);return $p(o),new ya(i,null,o)}{if(!(i instanceof zr||i instanceof ya))throw new z(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Ln.fromString(e,...t));return $p(o),new ya(i.firestore,null,o)}}function bd(i,e,...t){if(i=(0,Ye.m9)(i),1===arguments.length&&(e=yo.R()),Bp("doc","path",e),i instanceof Dd){const o=Ln.fromString(e,...t);return km(o),new zr(i,null,new bt(o))}{if(!(i instanceof zr||i instanceof ya))throw new z(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Ln.fromString(e,...t));return km(o),new zr(i.firestore,i instanceof ya?i.converter:null,new bt(o))}}function ef(i,e){return i=(0,Ye.m9)(i),e=(0,Ye.m9)(e),(i instanceof zr||i instanceof ya)&&(e instanceof zr||e instanceof ya)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function Ev(i,e){return i=(0,Ye.m9)(i),e=(0,Ye.m9)(e),i instanceof bs&&e instanceof bs&&i.firestore===e.firestore&&pc(i._query,e._query)&&i.converter===e.converter}class Gp{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new op(this,"async_queue_retry"),this.Qa=()=>{const t=Nh();t&&dt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=Nh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=Nh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new Le;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,ne.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!Ga(t))throw t;dt("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(o=>{throw this.Ua=o,this.qa=!1,sr("INTERNAL UNHANDLED ERROR: ",function(d){let g=d.message||"";return d.stack&&(g=d.stack.includes(d.message)?d.stack:d.message+"\n"+d.stack),g}(o)),o}).then(o=>(this.qa=!1,o))));return this.Fa=t,t}enqueueAfterDelay(e,t,o){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const u=pd.createAndSchedule(this,e,t,o,d=>this.Ha(d));return this.La.push(u),u}ja(){this.Ua&&m()}verifyOperationInProgress(){}Ja(){var e=this;return(0,ne.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,o)=>t.targetTimeMs-o.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function zp(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const o=e;for(const u of["next","error","complete"])if(u in o&&"function"==typeof o[u])return!0;return!1}(i)}class X_{constructor(){this._progressObserver={},this._taskCompletionResolver=new Le,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,o){this._progressObserver={next:e,error:t,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Wr extends Dd{constructor(e,t,o){super(e,t,o),this.type="firestore",this._queue=new Gp,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Cd(this),this._firestoreClient.terminate()}}function Ri(i){return i._firestoreClient||Cd(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Cd(i){var e;const t=i._freezeSettings(),o=(d=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new Ou(i._databaseId,d,i._persistenceKey,(D=t).host,D.ssl,D.experimentalForceLongPolling,D.experimentalAutoDetectLongPolling,D.useFetchStreams));var d,D;i._firestoreClient=new xm(i._authCredentials,i._appCheckCredentials,i._queue,o)}function wv(i,e,t){const o=new Le;return i.asyncQueue.enqueue((0,ne.Z)(function*(){try{yield Mm(i,t),yield Rm(i,e),o.resolve()}catch(u){if(!("FirebaseError"===(d=u).name?d.code===L.FAILED_PRECONDITION||d.code===L.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&d instanceof DOMException)||22===d.code||20===d.code||11===d.code))throw u;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+u),o.reject(u)}var d})).then(()=>o.promise)}function Yp(i){if(i._initialized||i._terminated)throw new z(L.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class va{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new z(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Qa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qa(Qr.fromBase64String(e))}catch(t){throw new z(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Qa(Qr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class oc{constructor(e){this._methodName=e}}class Sd{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new z(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new z(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return pn(this._lat,e._lat)||pn(this._long,e._long)}}const Qp=/^__.*__$/;class Hm{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return null!==this.fieldMask?new da(e,this.data,this.fieldMask,t,this.fieldTransforms):new Gu(e,this.data,t,this.fieldTransforms)}}class Gm{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new da(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function zm(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw m()}}class nf{constructor(e,t,o,u,d,g){this.settings=e,this.databaseId=t,this.M=o,this.ignoreUndefinedProperties=u,void 0===d&&this.tc(),this.fieldTransforms=d||[],this.fieldMask=g||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new nf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.nc({path:o,ic:!1});return u.rc(e),u}oc(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.nc({path:o,ic:!1});return u.tc(),u}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return xd(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(zm(this.ec)&&Qp.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class Wm{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=o||El(e)}lc(e,t,o,u=!1){return new nf({ec:e,methodName:t,hc:o,path:pi.emptyPath(),ic:!1,cc:u},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Du(i){const e=i._freezeSettings(),t=El(i._databaseId);return new Wm(i._databaseId,!!e.ignoreUndefinedProperties,t)}function Ad(i,e,t,o,u,d={}){const g=i.lc(d.merge||d.mergeFields?2:0,e,t,u);bi("Data must be an object, but it was:",g,o);const D=Xp(o,g);let P,U;if(d.merge)P=new su(g.fieldMask),U=g.fieldTransforms;else if(d.mergeFields){const Q=[];for(const he of d.mergeFields){const Ue=of(e,he,t);if(!g.contains(Ue))throw new z(L.INVALID_ARGUMENT,`Field '${Ue}' is specified in your field mask but missing from your input data.`);Xm(Q,Ue)||Q.push(Ue)}P=new su(Q),U=g.fieldTransforms.filter(he=>P.covers(he.field))}else P=null,U=g.fieldTransforms;return new Hm(new x(D),P,U)}class Al extends oc{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Al}}function Jp(i,e,t){return new nf({ec:3,hc:e.settings.hc,methodName:i._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class rf extends oc{_toFieldTransform(e){return new Hu(e.path,new ju)}isEqual(e){return e instanceof rf}}class Km extends oc{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=Jp(this,e,!0),o=this.fc.map(d=>Fc(d,t)),u=new gc(o);return new Hu(e.path,u)}isEqual(e){return this===e}}class qm extends oc{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=Jp(this,e,!0),o=this.fc.map(d=>Fc(d,t)),u=new Lo(o);return new Hu(e.path,u)}isEqual(e){return this===e}}class Zm extends oc{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new ji(e.M,Sf(e.M,this.dc));return new Hu(e.path,t)}isEqual(e){return this===e}}function sf(i,e,t,o){const u=i.lc(1,e,t);bi("Data must be an object, but it was:",u,o);const d=[],g=x.empty();Ra(o,(P,U)=>{const Q=af(e,P,t);U=(0,Ye.m9)(U);const he=u.oc(Q);if(U instanceof Al)d.push(Q);else{const Ue=Fc(U,he);null!=Ue&&(d.push(Q),g.set(Q,Ue))}});const D=new su(d);return new Gm(g,D,u.fieldTransforms)}function Ym(i,e,t,o,u,d){const g=i.lc(1,e,t),D=[of(e,o,t)],P=[u];if(d.length%2!=0)throw new z(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Ue=0;Ue<d.length;Ue+=2)D.push(of(e,d[Ue])),P.push(d[Ue+1]);const U=[],Q=x.empty();for(let Ue=D.length-1;Ue>=0;--Ue)if(!Xm(U,D[Ue])){const st=D[Ue];let ut=P[Ue];ut=(0,Ye.m9)(ut);const kt=g.oc(st);if(ut instanceof Al)U.push(st);else{const yn=Fc(ut,kt);null!=yn&&(U.push(st),Q.set(st,yn))}}const he=new su(U);return new Gm(Q,he,g.fieldTransforms)}function Qm(i,e,t,o=!1){return Fc(t,i.lc(o?4:3,e))}function Fc(i,e){if(Jm(i=(0,Ye.m9)(i)))return bi("Unsupported field value:",e,i),Xp(i,e);if(i instanceof oc)return function(t,o){if(!zm(o.ec))throw o.ac(`${t._methodName}() can only be used with update() and set()`);if(!o.path)throw o.ac(`${t._methodName}() is not currently supported inside arrays`);const u=t._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,o){const u=[];let d=0;for(const g of t){let D=Fc(g,o.uc(d));null==D&&(D={nullValue:"NULL_VALUE"}),u.push(D),d++}return{arrayValue:{values:u}}}(i,e)}return function(t,o){if(null===(t=(0,Ye.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Sf(o.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const u=Nr.fromDate(t);return{timestampValue:ja(o.M,u)}}if(t instanceof Nr){const u=new Nr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ja(o.M,u)}}if(t instanceof Sd)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Qa)return{bytesValue:Jc(o.M,t._byteString)};if(t instanceof zr){const u=o.databaseId,d=t.firestore._databaseId;if(!d.isEqual(u))throw o.ac(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Jl(t.firestore._databaseId||o.databaseId,t._key.path)}}throw o.ac(`Unsupported field value: ${Lc(t)}`)}(i,e)}function Xp(i,e){const t={};return Vd(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ra(i,(o,u)=>{const d=Fc(u,e.sc(o));null!=d&&(t[o]=d)}),{mapValue:{fields:t}}}function Jm(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Nr||i instanceof Sd||i instanceof Qa||i instanceof zr||i instanceof oc)}function bi(i,e,t){if(!Jm(t)||"object"!=typeof(o=t)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=Lc(t);throw e.ac("an object"===o?i+" a custom object":i+" "+o)}var o}function of(i,e,t){if((e=(0,Ye.m9)(e))instanceof va)return e._internalPath;if("string"==typeof e)return af(i,e);throw xd("Field path arguments must be of type string or ",i,!1,void 0,t)}const Tv=new RegExp("[~\\*/\\[\\]]");function af(i,e,t){if(e.search(Tv)>=0)throw xd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new va(...e.split("."))._internalPath}catch(o){throw xd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function xd(i,e,t,o,u){const d=o&&!o.isEmpty(),g=void 0!==u;let D=`Function ${e}() called with invalid data`;t&&(D+=" (via `toFirestore()`)"),D+=". ";let P="";return(d||g)&&(P+=" (found",d&&(P+=` in field ${o}`),g&&(P+=` in document ${u}`),P+=")"),new z(L.INVALID_ARGUMENT,D+i+P)}function Xm(i,e){return i.some(t=>t.isEqual(e))}class xl{constructor(e,t,o,u,d){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=u,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new zr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new ey(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(bu("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class ey extends xl{data(){return super.data()}}function bu(i,e){return"string"==typeof e?af(i,e):e instanceof va?e._internalPath:e._delegate._internalPath}class Uc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Tu extends xl{constructor(e,t,o,u,d,g){super(e,t,o,u,g),this._firestore=e,this._firestoreImpl=e,this.metadata=d}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ml(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(bu("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}}class Ml extends Tu{data(e={}){return super.data(e)}}class ac{constructor(e,t,o,u){this._firestore=e,this._userDataWriter=t,this._snapshot=u,this.metadata=new Uc(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(o=>{e.call(t,new Ml(this._firestore,this._userDataWriter,o.key,o,new Uc(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new z(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(g=>({type:"added",doc:new Ml(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Uc(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:d++}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(g=>u||3!==g.type).map(g=>{const D=new Ml(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Uc(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let P=-1,U=-1;return 0!==g.type&&(P=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),1!==g.type&&(d=d.add(g.doc),U=d.indexOf(g.doc.key)),{type:ty(g.type),doc:D,oldIndex:P,newIndex:U}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function ty(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return m()}}function Cv(i,e){return i instanceof Tu&&e instanceof Tu?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof ac&&e instanceof ac&&i._firestore===e._firestore&&Ev(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function eg(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new z(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vc{}function ps(i,...e){for(const t of e)i=t._apply(i);return i}class Sv extends Vc{constructor(e,t,o){super(),this._c=e,this.wc=t,this.mc=o,this.type="where"}_apply(e){const t=Du(e.firestore),o=function(u,d,g,D,P,U,Q){let he;if(P.isKeyField()){if("array-contains"===U||"array-contains-any"===U)throw new z(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${U}' queries on documentId().`);if("in"===U||"not-in"===U){ay(Q,U);const st=[];for(const ut of Q)st.push(ng(D,u,ut));he={arrayValue:{values:st}}}else he=ng(D,u,Q)}else"in"!==U&&"not-in"!==U&&"array-contains-any"!==U||ay(Q,U),he=Qm(g,"where",Q,"in"===U||"not-in"===U);const Ue=si.create(P,U,he);return function(st,ut){if(ut.S()){const yn=qc(st);if(null!==yn&&!yn.isEqual(ut.field))throw new z(L.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${yn.toString()}' and '${ut.field.toString()}'`);const Kr=Kc(st);null!==Kr&&rg(0,ut.field,Kr)}const kt=function(yn,Kr){for(const gi of yn.filters)if(Kr.indexOf(gi.op)>=0)return gi.op;return null}(st,function(yn){switch(yn){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ut.op));if(null!==kt)throw new z(L.INVALID_ARGUMENT,kt===ut.op?`Invalid query. You cannot use more than one '${ut.op.toString()}' filter.`:`Invalid query. You cannot use '${ut.op.toString()}' filters with '${kt.toString()}' filters.`)}(u,Ue),Ue}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new bs(e.firestore,e.converter,function(u,d){const g=u.filters.concat([d]);return new La(u.path,u.collectionGroup,u.explicitOrderBy.slice(),g,u.limit,u.limitType,u.startAt,u.endAt)}(e._query,o))}}class Ja extends Vc{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(o,u,d){if(null!==o.startAt)throw new z(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new z(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const g=new ka(u,d);return function(D,P){if(null===Kc(D)){const U=qc(D);null!==U&&rg(0,U,P.field)}}(o,g),g}(e._query,this._c,this.gc);return new bs(e.firestore,e.converter,function(o,u){const d=o.explicitOrderBy.concat([u]);return new La(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}class Go extends Vc{constructor(e,t,o){super(),this.type=e,this.yc=t,this.Ic=o}_apply(e){return new bs(e.firestore,e.converter,zd(e._query,this.yc,this.Ic))}}class iy extends Vc{constructor(e,t,o){super(),this.type=e,this.Tc=t,this.Ec=o}_apply(e){const t=oy(e,this.type,this.Tc,this.Ec);return new bs(e.firestore,e.converter,(u=t,new La((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,u,o.endAt)));var o,u}}class sy extends Vc{constructor(e,t,o){super(),this.type=e,this.Tc=t,this.Ec=o}_apply(e){const t=oy(e,this.type,this.Tc,this.Ec);return new bs(e.firestore,e.converter,(u=t,new La((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,u)));var o,u}}function oy(i,e,t,o){if(t[0]=(0,Ye.m9)(t[0]),t[0]instanceof xl)return function(u,d,g,D,P){if(!D)throw new z(L.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${g}().`);const U=[];for(const Q of du(u))if(Q.field.isKeyField())U.push(_o(d,D.key));else{const he=D.data.field(Q.field);if(hc(he))throw new z(L.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+Q.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===he){const Ue=Q.field.canonicalString();throw new z(L.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Ue}' (used as the orderBy) does not exist.`)}U.push(he)}return new Do(U,P)}(i._query,i.firestore._databaseId,e,t[0]._document,o);{const u=Du(i.firestore);return function(d,g,D,P,U,Q){const he=d.explicitOrderBy;if(U.length>he.length)throw new z(L.INVALID_ARGUMENT,`Too many arguments provided to ${P}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Ue=[];for(let st=0;st<U.length;st++){const ut=U[st];if(he[st].field.isKeyField()){if("string"!=typeof ut)throw new z(L.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${P}(), but got a ${typeof ut}`);if(!Zc(d)&&-1!==ut.indexOf("/"))throw new z(L.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${P}() must be a plain document ID, but '${ut}' contains a slash.`);const kt=d.path.child(Ln.fromString(ut));if(!bt.isDocumentKey(kt))throw new z(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${P}() must result in a valid document path, but '${kt}' is not because it contains an odd number of segments.`);const yn=new bt(kt);Ue.push(_o(g,yn))}else{const kt=Qm(D,P,ut);Ue.push(kt)}}return new Do(Ue,Q)}(i._query,i.firestore._databaseId,u,e,t,o)}}function ng(i,e,t){if("string"==typeof(t=(0,Ye.m9)(t))){if(""===t)throw new z(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Zc(e)&&-1!==t.indexOf("/"))throw new z(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(Ln.fromString(t));if(!bt.isDocumentKey(o))throw new z(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return _o(i,new bt(o))}if(t instanceof zr)return _o(i,t._key);throw new z(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Lc(t)}.`)}function ay(i,e){if(!Array.isArray(i)||0===i.length)throw new z(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new z(L.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function rg(i,e,t){if(!t.isEqual(e))throw new z(L.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const uy={maxAttempts:5};class Rl{convertValue(e,t="none"){switch(oa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ko(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw m()}}convertObject(e,t){const o={};return Ra(e.fields,(u,d)=>{o[u]=this.convertValue(d,t)}),o}convertGeoPoint(e){return new Sd(yr(e.latitude),yr(e.longitude))}convertArray(e,t){return(e.values||[]).map(o=>this.convertValue(o,t))}convertServerTimestamp(e,t){switch(t){case"previous":const o=Bi(e);return null==o?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(Ei(e));default:return null}}convertTimestamp(e){const t=_s(e);return new Nr(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=Ln.fromString(e);T(ye(o));const u=new Ki(o.get(1),o.get(3)),d=new bt(o.popFirst(5));return u.isEqual(t)||sr(`Document ${d} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),d}}function uf(i,e,t){let o;return o=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,o}class cy extends Rl{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zr(this.firestore,null,t)}}class ig{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Du(e)}set(e,t,o){this._verifyNotCommitted();const u=Xa(e,this._firestore),d=uf(u.converter,t,o),g=Ad(this._dataReader,"WriteBatch.set",u._key,d,null!==u.converter,o);return this._mutations.push(g.toMutation(u._key,wi.none())),this}update(e,t,o,...u){this._verifyNotCommitted();const d=Xa(e,this._firestore);let g;return g="string"==typeof(t=(0,Ye.m9)(t))||t instanceof va?Ym(this._dataReader,"WriteBatch.update",d._key,t,o,u):sf(this._dataReader,"WriteBatch.update",d._key,t),this._mutations.push(g.toMutation(d._key,wi.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Xa(e,this._firestore);return this._mutations=this._mutations.concat(new Fo(t._key,wi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new z(L.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Xa(i,e){if((i=(0,Ye.m9)(i)).firestore!==e)throw new z(L.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class uc extends Rl{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zr(this.firestore,null,t)}}function sg(i,e,t){i=Wn(i,zr);const o=Wn(i.firestore,Wr),u=uf(i.converter,e,t);return Nl(o,[Ad(Du(o),"setDoc",i._key,u,null!==i.converter,t).toMutation(i._key,wi.none())])}function og(i,e,t,...o){i=Wn(i,zr);const u=Wn(i.firestore,Wr),d=Du(u);let g;return g="string"==typeof(e=(0,Ye.m9)(e))||e instanceof va?Ym(d,"updateDoc",i._key,e,t,o):sf(d,"updateDoc",i._key,e),Nl(u,[g.toMutation(i._key,wi.exists(!0))])}function gy(i,...e){var t,o,u;i=(0,Ye.m9)(i);let d={includeMetadataChanges:!1},g=0;"object"!=typeof e[g]||zp(e[g])||(d=e[g],g++);const D={includeMetadataChanges:d.includeMetadataChanges};if(zp(e[g])){const he=e[g];e[g]=null===(t=he.next)||void 0===t?void 0:t.bind(he),e[g+1]=null===(o=he.error)||void 0===o?void 0:o.bind(he),e[g+2]=null===(u=he.complete)||void 0===u?void 0:u.bind(he)}let P,U,Q;if(i instanceof zr)U=Wn(i.firestore,Wr),Q=Fa(i._key.path),P={next:he=>{e[g]&&e[g](ag(U,i,he))},error:e[g+1],complete:e[g+2]};else{const he=Wn(i,bs);U=Wn(he.firestore,Wr),Q=he._query;const Ue=new uc(U);P={next:st=>{e[g]&&e[g](new ac(U,Ue,he,st))},error:e[g+1],complete:e[g+2]},eg(i._query)}return function(he,Ue,st,ut){const kt=new wd(ut),yn=new gd(Ue,kt,st);return he.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return vp(yield Id(he),yn)})),()=>{kt.Aa(),he.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return _p(yield Id(he),yn)}))}}(Ri(U),Q,D,P)}function Nl(i,e){return function(t,o){const u=new Le;return t.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return function lv(i,e,t){return Hh.apply(this,arguments)}(yield Lp(t),o,u)})),u.promise}(Ri(i),e)}function ag(i,e,t){const o=t.docs.get(e._key),u=new uc(i);return new Tu(i,u,e._key,o,new Uc(t.hasPendingWrites,t.fromCache),e.converter)}class Ov extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Du(e)}get(e){const t=Xa(e,this._firestore),o=new cy(this._firestore);return this._transaction.lookup([t._key]).then(u=>{if(!u||1!==u.length)return m();const d=u[0];if(d.isFoundDocument())return new xl(this._firestore,o,d.key,d,t.converter);if(d.isNoDocument())return new xl(this._firestore,o,t._key,null,t.converter);throw m()})}set(e,t,o){const u=Xa(e,this._firestore),d=uf(u.converter,t,o),g=Ad(this._dataReader,"Transaction.set",u._key,d,null!==u.converter,o);return this._transaction.set(u._key,g),this}update(e,t,o,...u){const d=Xa(e,this._firestore);let g;return g="string"==typeof(t=(0,Ye.m9)(t))||t instanceof va?Ym(this._dataReader,"Transaction.update",d._key,t,o,u):sf(this._dataReader,"Transaction.update",d._key,t),this._transaction.update(d._key,g),this}delete(e){const t=Xa(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Xa(e,this._firestore),o=new uc(this._firestore);return super.get(e).then(u=>new Tu(this._firestore,o,t._key,u._document,new Uc(!1,!1),t.converter))}}function lf(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new z("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function ug(){if("undefined"==typeof Uint8Array)throw new z("unimplemented","Uint8Arrays are not available in this environment.")}function cg(){if(!function ou(){return"undefined"!=typeof atob}())throw new z("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){Fs=$e.SDK_VERSION,(0,$e._registerComponent)(new We.wA("firestore",(t,{options:o})=>{const u=t.getProvider("app").getImmediate(),d=new Wr(u,new kn(t.getProvider("auth-internal")),new mo(t.getProvider("app-check-internal")));return o=Object.assign({useFetchStreams:e},o),d._setSettings(o),d},"PUBLIC")),(0,$e.registerVersion)(iu,"3.4.9",i),(0,$e.registerVersion)(iu,"3.4.9","esm2017")}();class Pl{constructor(e){this._delegate=e}static fromBase64String(e){return cg(),new Pl(Qa.fromBase64String(e))}static fromUint8Array(e){return ug(),new Pl(Qa.fromUint8Array(e))}toBase64(){return cg(),this._delegate.toBase64()}toUint8Array(){return ug(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function df(i){return function yy(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const o of e)if(o in t&&"function"==typeof t[o])return!0;return!1}(i,["next","error","complete"])}class vy{enableIndexedDbPersistence(e,t){return function tf(i,e){Yp(i=Wn(i,Wr));const t=Ri(i),o=i._freezeSettings(),u=new qh;return wv(t,u,new Np(u,o.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Wp(i){Yp(i=Wn(i,Wr));const e=Ri(i),t=i._freezeSettings(),o=new qh;return wv(e,o,new Tm(o,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Iv(i){if(i._initialized&&!i._terminated)throw new z(L.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Le;return i._queue.enqueueAndForgetEvenWhileRestricted((0,ne.Z)(function*(){try{yield(t=(0,ne.Z)(function*(o){if(!Bo.vt())return Promise.resolve();const u=o+"main";yield Bo.delete(u)}),function(o){return t.apply(this,arguments)})(ad(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class lg{constructor(e,t,o){this._delegate=t,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ki||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&I("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,o={}){!function _v(i,e,t,o={}){var u;const d=(i=Wn(i,Dd))._getSettings();if("firestore.googleapis.com"!==d.host&&d.host!==e&&I("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},d),{host:`${e}:${t}`,ssl:!1})),o.mockUserToken){let g,D;if("string"==typeof o.mockUserToken)g=o.mockUserToken,D=Yr.MOCK_USER;else{g=(0,Ye.Sg)(o.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const P=o.mockUserToken.sub||o.mockUserToken.user_id;if(!P)throw new z(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");D=new Yr(P)}i._authCredentials=new Ft(new Rt(g,D))}}(this._delegate,e,t,o)}enableNetwork(){return function qp(i){return function Up(i){return i.asyncQueue.enqueue((0,ne.Z)(function*(){const e=yield Nm(i),t=yield Pm(i);return e.setNetworkEnabled(!0),function(o){const u=k(o);return u.wu.delete(0),cd(u)}(t)}))}(Ri(i=Wn(i,Wr)))}(this._delegate)}disableNetwork(){return function jm(i){return function Vp(i){return i.asyncQueue.enqueue((0,ne.Z)(function*(){const e=yield Nm(i),t=yield Pm(i);return e.setNetworkEnabled(!1),(o=(0,ne.Z)(function*(u){const d=k(u);d.wu.add(0),yield ld(d),d.yu.set("Offline")}),function(u){return o.apply(this,arguments)})(t);var o}))}(Ri(i=Wn(i,Wr)))}(this._delegate)}enablePersistence(e){let t=!1,o=!1;return e&&(t=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,jp("synchronizeTabs",t,"experimentalForceOwningTab",o)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Kp(i){return function(e){const t=new Le;return e.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return function Y_(i,e){return zh.apply(this,arguments)}(yield Lp(e),t)})),t.promise}(Ri(i=Wn(i,Wr)))}(this._delegate)}onSnapshotsInSync(e){return function Pv(i,e){return function yv(i,e){const t=new wd(e);return i.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return o=yield Id(i),u=t,k(o).bu.add(u),void u.next();var o,u})),()=>{t.Aa(),i.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return o=yield Id(i),u=t,void k(o).bu.delete(u);var o,u}))}}(Ri(i=Wn(i,Wr)),zp(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new z("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new kl(this,Fm(this._delegate,e))}catch(t){throw Ni(t,"collection()","Firestore.collection()")}}doc(e){try{return new zo(this,bd(this._delegate,e))}catch(t){throw Ni(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ts(this,function Um(i,e){if(i=Wn(i,Dd),Bp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new z(L.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new bs(i,null,(t=e,new La(Ln.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ni(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function kv(i,e,t){i=Wn(i,Wr);const o=Object.assign(Object.assign({},uy),t);return function(u){if(u.maxAttempts<1)throw new z(L.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function Om(i,e,t){const o=new Le;return i.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){const u=yield(d=i,Qh(d).then(g=>g.datastore));var d;new Am(i.asyncQueue,u,t,e,o).run()})),o.promise}(Ri(i),u=>e(new Ov(i,u)),o)}(this._delegate,t=>e(new dg(this,t)))}batch(){return Ri(this._delegate),new cc(new ig(this._delegate,e=>Nl(this._delegate,e)))}loadBundle(e){return function Zp(i,e){const t=Ri(i=Wn(i,Wr)),o=new X_;return function J_(i,e,t,o){const u=function(d,g){let D;return D="string"==typeof d?(new TextEncoder).encode(d):d,P=function(P,U){if(P instanceof Uint8Array)return Pp(P,U);if(P instanceof ArrayBuffer)return Pp(new Uint8Array(P),U);if(P instanceof ReadableStream)return P.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(D),new Cm(P,g);var P}(t,El(e));i.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){!function Sl(i,e,t){const o=k(i);var u;(u=(0,ne.Z)(function*(d,g,D){try{const P=yield g.getMetadata();if(yield function(Ue,st){const ut=k(Ue),kt=oi(st.createTime);return ut.persistence.runTransaction("hasNewerBundle","readonly",yn=>ut._s.getBundleMetadata(yn,st.id)).then(yn=>!!yn&&yn.createTime.compareTo(kt)>=0)}(d.localStore,P))return yield g.close(),D._completeWith({taskState:"Success",documentsLoaded:(Ue=P).totalDocuments,bytesLoaded:Ue.totalBytes,totalDocuments:Ue.totalDocuments,totalBytes:Ue.totalBytes}),Promise.resolve(new Set);D._updateProgress(Ip(P));const U=new fm(P,d.localStore,g.M);let Q=yield g.ma();for(;Q;){const Ue=yield U.Fu(Q);Ue&&D._updateProgress(Ue),Q=yield g.ma()}const he=yield U.complete();return yield wu(d,he.Lu,void 0),yield function(Ue,st){const ut=k(Ue);return ut.persistence.runTransaction("Save bundle","readwrite",kt=>ut._s.saveBundleMetadata(kt,st))}(d.localStore,P),D._completeWith(he.progress),Promise.resolve(he.Bu)}catch(P){return I("SyncEngine",`Loading bundle failed with ${P}`),D._failWith(P),Promise.resolve(new Set)}var Ue}),function(d,g,D){return u.apply(this,arguments)})(o,e,t).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield Lp(i),u,o)}))}(t,i._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function $m(i,e){return function vv(i,e){return i.asyncQueue.enqueue((0,ne.Z)(function*(){return function(t,o){const u=k(t);return u.persistence.runTransaction("Get named query","readonly",d=>u._s.getNamedQuery(d,o))}(yield Xh(i),e)}))}(Ri(i=Wn(i,Wr)),e).then(t=>t?new bs(i,null,t.query):null)}(this._delegate,e).then(t=>t?new Ts(this,t):null)}}class Rd extends Rl{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pl(new Qa(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return zo.forKey(t,this.firestore,null)}}class dg{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Rd(e)}get(e){const t=jc(e);return this._delegate.get(t).then(o=>new ff(this._firestore,new Tu(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,t.converter)))}set(e,t,o){const u=jc(e);return o?(lf("Transaction.set",o),this._delegate.set(u,t,o)):this._delegate.set(u,t),this}update(e,t,o,...u){const d=jc(e);return 2===arguments.length?this._delegate.update(d,t):this._delegate.update(d,t,o,...u),this}delete(e){const t=jc(e);return this._delegate.delete(t),this}}class cc{constructor(e){this._delegate=e}set(e,t,o){const u=jc(e);return o?(lf("WriteBatch.set",o),this._delegate.set(u,t,o)):this._delegate.set(u,t),this}update(e,t,o,...u){const d=jc(e);return 2===arguments.length?this._delegate.update(d,t):this._delegate.update(d,t,o,...u),this}delete(e){const t=jc(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Bc{constructor(e,t,o){this._firestore=e,this._userDataWriter=t,this._delegate=o}fromFirestore(e,t){const o=new Ml(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Ol(this._firestore,o),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const o=Bc.INSTANCES;let u=o.get(e);u||(u=new WeakMap,o.set(e,u));let d=u.get(t);return d||(d=new Bc(e,new Rd(e),t),u.set(t,d)),d}}Bc.INSTANCES=new WeakMap;class zo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Rd(e)}static forPath(e,t,o){if(e.length%2!=0)throw new z("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new zo(t,new zr(t._delegate,o,new bt(e)))}static forKey(e,t,o){return new zo(t,new zr(t._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new kl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new kl(this.firestore,Fm(this._delegate,e))}catch(t){throw Ni(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ye.m9)(e))instanceof zr&&ef(this._delegate,e)}set(e,t){t=lf("DocumentReference.set",t);try{return t?sg(this._delegate,e,t):sg(this._delegate,e)}catch(o){throw Ni(o,"setDoc()","DocumentReference.set()")}}update(e,t,...o){try{return 1===arguments.length?og(this._delegate,e):og(this._delegate,e,t,...o)}catch(u){throw Ni(u,"updateDoc()","DocumentReference.update()")}}delete(){return function Rv(i){return Nl(Wn(i.firestore,Wr),[new Fo(i._key,wi.none())])}(this._delegate)}onSnapshot(...e){const t=Hv(e),o=hf(e,u=>new ff(this.firestore,new Tu(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return gy(this._delegate,t,o)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function ly(i){i=Wn(i,zr);const e=Wn(i.firestore,Wr),t=Ri(e),o=new uc(e);return function pv(i,e){const t=new Le;return i.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return(o=(0,ne.Z)(function*(u,d,g){try{const D=yield function(P,U){const Q=k(P);return Q.persistence.runTransaction("read document","readonly",he=>Q.fi.Ls(he,U))}(u,d);D.isFoundDocument()?g.resolve(D):D.isNoDocument()?g.resolve(null):g.reject(new z(L.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(D){const P=Il(D,`Failed to get document '${d} from cache`);g.reject(P)}}),function(u,d,g){return o.apply(this,arguments)})(yield Xh(i),e,t);var o})),t.promise}(t,i._key).then(u=>new Tu(e,o,i._key,u,new Uc(null!==u&&u.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function dy(i){i=Wn(i,zr);const e=Wn(i.firestore,Wr);return gv(Ri(e),i._key,{source:"server"}).then(t=>ag(e,i,t))}(this._delegate):function cf(i){i=Wn(i,zr);const e=Wn(i.firestore,Wr);return gv(Ri(e),i._key).then(t=>ag(e,i,t))}(this._delegate),t.then(o=>new ff(this.firestore,new Tu(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new zo(this.firestore,this._delegate.withConverter(e?Bc.getInstance(this.firestore,e):null))}}function Ni(i,e,t){return i.message=i.message.replace(e,t),i}function Hv(i){for(const e of i)if("object"==typeof e&&!df(e))return e;return{}}function hf(i,e){var t,o;let u;return u=df(i[0])?i[0]:df(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:d=>{u.next&&u.next(e(d))},error:null===(t=u.error)||void 0===t?void 0:t.bind(u),complete:null===(o=u.complete)||void 0===o?void 0:o.bind(u)}}class ff{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new zo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Cv(this._delegate,e._delegate)}}class Ol extends ff{data(e){const t=this._delegate.data(e);return function M(i,e){i||m()}(void 0!==t),t}}class Ts{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Rd(e)}where(e,t,o){try{return new Ts(this.firestore,ps(this._delegate,function Av(i,e,t){const o=e,u=bu("where",i);return new Sv(u,o,t)}(e,t,o)))}catch(u){throw Ni(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ts(this.firestore,ps(this._delegate,function _a(i,e="asc"){const t=e,o=bu("orderBy",i);return new Ja(o,t)}(e,t)))}catch(o){throw Ni(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ts(this.firestore,ps(this._delegate,function ny(i){return Hp("limit",i),new Go("limit",i,"F")}(e)))}catch(t){throw Ni(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ts(this.firestore,ps(this._delegate,function ry(i){return Hp("limitToLast",i),new Go("limitToLast",i,"L")}(e)))}catch(t){throw Ni(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ts(this.firestore,ps(this._delegate,function xv(...i){return new iy("startAt",i,!0)}(...e)))}catch(t){throw Ni(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ts(this.firestore,ps(this._delegate,function Mv(...i){return new iy("startAfter",i,!1)}(...e)))}catch(t){throw Ni(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ts(this.firestore,ps(this._delegate,function tg(...i){return new sy("endBefore",i,!1)}(...e)))}catch(t){throw Ni(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ts(this.firestore,ps(this._delegate,function Md(...i){return new sy("endAt",i,!0)}(...e)))}catch(t){throw Ni(t,"endAt()","Query.endAt()")}}isEqual(e){return Ev(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function fy(i){i=Wn(i,bs);const e=Wn(i.firestore,Wr),t=Ri(e),o=new uc(e);return function Q_(i,e){const t=new Le;return i.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return(o=(0,ne.Z)(function*(u,d,g){try{const D=yield Eu(u,d,!0),P=new mm(d,D._i),U=P.Wu(D.documents),Q=P.applyChanges(U,!1);g.resolve(Q.snapshot)}catch(D){const P=Il(D,`Failed to execute query '${d} against cache`);g.reject(P)}}),function(u,d,g){return o.apply(this,arguments)})(yield Xh(i),e,t);var o})),t.promise}(t,i._query).then(u=>new ac(e,o,i,u))}(this._delegate):"server"===(null==e?void 0:e.source)?function py(i){i=Wn(i,bs);const e=Wn(i.firestore,Wr),t=Ri(e),o=new uc(e);return mv(t,i._query,{source:"server"}).then(u=>new ac(e,o,i,u))}(this._delegate):function hy(i){i=Wn(i,bs);const e=Wn(i.firestore,Wr),t=Ri(e),o=new uc(e);return eg(i._query),mv(t,i._query).then(u=>new ac(e,o,i,u))}(this._delegate),t.then(o=>new cn(this.firestore,new ac(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const t=Hv(e),o=hf(e,u=>new cn(this.firestore,new ac(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return gy(this._delegate,t,o)}withConverter(e){return new Ts(this.firestore,this._delegate.withConverter(e?Bc.getInstance(this.firestore,e):null))}}class n0{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Ol(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class cn{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ts(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Ol(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new n0(this._firestore,t))}forEach(e,t){this._delegate.forEach(o=>{e.call(t,new Ol(this._firestore,o))})}isEqual(e){return Cv(this._delegate,e._delegate)}}class kl extends Ts{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new zo(this.firestore,e):null}doc(e){try{return new zo(this.firestore,void 0===e?bd(this._delegate):bd(this._delegate,e))}catch(t){throw Ni(t,"doc()","CollectionReference.doc()")}}add(e){return function Nv(i,e){const t=Wn(i.firestore,Wr),o=bd(i),u=uf(i.converter,e);return Nl(t,[Ad(Du(i.firestore),"addDoc",o._key,u,null!==i.converter,{}).toMutation(o._key,wi.exists(!1))]).then(()=>o)}(this._delegate,e).then(t=>new zo(this.firestore,t))}isEqual(e){return ef(this._delegate,e._delegate)}withConverter(e){return new kl(this.firestore,this._delegate.withConverter(e?Bc.getInstance(this.firestore,e):null))}}function jc(i){return Wn(i,zr)}class hg{constructor(...e){this._delegate=new va(...e)}static documentId(){return new hg(pi.keyField().canonicalString())}isEqual(e){return(e=(0,Ye.m9)(e))instanceof va&&this._delegate._internalPath.isEqual(e._internalPath)}}class eu{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Fv(){return new rf("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new eu(e)}static delete(){const e=function Lv(){return new Al("deleteField")}();return e._methodName="FieldValue.delete",new eu(e)}static arrayUnion(...e){const t=function Uv(...i){return new Km("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new eu(t)}static arrayRemove(...e){const t=function Vv(...i){return new qm("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new eu(t)}static increment(e){const t=function Bv(i){return new Zm("increment",i)}(e);return t._methodName="FieldValue.increment",new eu(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Gv={Firestore:lg,GeoPoint:Sd,Timestamp:Nr,Blob:Pl,Transaction:dg,WriteBatch:cc,DocumentReference:zo,DocumentSnapshot:ff,Query:Ts,QueryDocumentSnapshot:Ol,QuerySnapshot:cn,CollectionReference:kl,FieldPath:hg,FieldValue:eu,setLogLevel:function _y(i){!function Vs(i){Us.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function gf(i){(function pf(i,e){i.INTERNAL.registerComponent(new We.wA("firestore-compat",t=>{const o=t.getProvider("app-compat").getImmediate(),u=t.getProvider("firestore").getImmediate();return e(o,u)},"PUBLIC").setServiceProps(Object.assign({},Gv)))})(i,(e,t)=>new lg(e,t,new vy)),i.registerVersion("@firebase/firestore-compat","0.1.18")}(vt.Z);var vr=O(1205),r0=O(440),Ey=O(127);function wy(i,e){return function zv(i,e=F.z){return new G.y(t=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},t)}):o=i.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=o&&o()}})}(i,e)}function mf(i,e){return wy(i,e).pipe((0,Ge.U)(t=>({payload:t,type:"query"})))}function Nd(i,e){return mf(i,e).pipe((0,ht.O)(void 0),Te(),(0,Ge.U)(([t,o])=>{const u=o.payload.docChanges(),d=u.map(g=>({type:g.type,payload:g}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(o.payload.metadata)&&o.payload.docs.forEach((g,D)=>{const P=u.find(Q=>Q.doc.ref.isEqual(g.ref)),U=null==t?void 0:t.payload.docs.find(Q=>Q.ref.isEqual(g.ref));P&&JSON.stringify(P.doc.metadata)===JSON.stringify(g.metadata)||!P&&U&&JSON.stringify(U.metadata)===JSON.stringify(g.metadata)||d.push({type:"modified",payload:{oldIndex:D,newIndex:D,type:"modified",doc:g}})}),d}))}function fg(i,e,t){return Nd(i,t).pipe((0,Je.R)((o,u)=>function Wv(i,e,t){return e.forEach(o=>{t.indexOf(o.type)>-1&&(i=function Kv(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return pg(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return pg(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return pg(i,e.oldIndex,1)}return i}(i,o))}),i}(o,u.map(d=>d.payload),e),[]),function J(i,e=ie.y){return i=null!=i?i:we,(0,Ie.e)((t,o)=>{let u,d=!0;t.subscribe((0,_e.x)(o,g=>{const D=e(g);(d||!i(u,D))&&(d=!1,u=D,o.next(g))}))})}(),(0,Ge.U)(o=>o.map(u=>({type:u.type,payload:u}))))}function pg(i,e,t,...o){const u=i.slice();return u.splice(e,t,...o),u}function Ll(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class Dy{constructor(e,t,o){this.ref=e,this.query=t,this.afs=o}stateChanges(e){let t=Nd(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Ge.U)(o=>o.filter(u=>e.indexOf(u.type)>-1)))),t.pipe((0,ht.O)(void 0),Te(),(0,lt.h)(([o,u])=>u.length>0||!o),(0,Ge.U)(([o,u])=>u),ge.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Je.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=Ll(e);return fg(this.query,t,this.afs.schedulers.outsideAngular).pipe(ge.iC)}valueChanges(e={}){return mf(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ge.U)(t=>t.payload.docs.map(o=>e.idField?Object.assign(Object.assign({},o.data()),{[e.idField]:o.id}):o.data())),ge.iC)}get(e){return(0,me.D)(this.query.get(e)).pipe(ge.iC)}add(e){return this.ref.add(e)}doc(e){return new by(this.ref.doc(e),this.afs)}}class by{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const o=this.ref.collection(e),{ref:u,query:d}=Sy(o,t);return new Dy(u,d,this.afs)}snapshotChanges(){return function Iy(i,e){return wy(i,e).pipe((0,ht.O)(void 0),Te(),(0,Ge.U)(([t,o])=>o.exists?(null==t?void 0:t.exists)?{payload:o,type:"modified"}:{payload:o,type:"added"}:{payload:o,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ge.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ge.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,me.D)(this.ref.get(e)).pipe(ge.iC)}}class qv{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Nd(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ge.U)(t=>t.filter(o=>e.indexOf(o.type)>-1)),(0,lt.h)(t=>t.length>0),ge.iC):Nd(this.query,this.afs.schedulers.outsideAngular).pipe(ge.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Je.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=Ll(e);return fg(this.query,t,this.afs.schedulers.outsideAngular).pipe(ge.iC)}valueChanges(e={}){return mf(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ge.U)(o=>o.payload.docs.map(u=>e.idField?Object.assign({[e.idField]:u.id},u.data()):u.data())),ge.iC)}get(e){return(0,me.D)(this.query.get(e)).pipe(ge.iC)}}const Pd=new E.OlP("angularfire2.enableFirestorePersistence"),gg=new E.OlP("angularfire2.firestore.persistenceSettings"),Ty=new E.OlP("angularfire2.firestore.settings"),Cy=new E.OlP("angularfire2.firestore.use-emulator");function Sy(i,e=(t=>t)){return{query:e(i),ref:i}}let Fl=(()=>{class i{constructor(t,o,u,d,g,D,P,U,Q,he,Ue,st,ut,kt,yn,Kr,gi){this.schedulers=P;const nr=(0,Ne.on)(t,D,o),Pi=Q;he&&(0,vr.nw)(nr,D,Ue,ut,kt,yn,st,Kr),[this.firestore,this.persistenceEnabled$]=(0,Ne.cc)(`${nr.name}.firestore`,"AngularFirestore",nr.name,()=>{const qr=D.runOutsideAngular(()=>nr.firestore());if(d&&qr.settings(d),Pi&&qr.useEmulator(...Pi),u&&!(0,Ke.PM)(g)){const ai=()=>{try{return(0,me.D)(qr.enablePersistence(U||void 0).then(()=>!0,()=>!1))}catch(Cs){return"undefined"!=typeof console&&console.warn(Cs),(0,fe.of)(!1)}};return[qr,D.runOutsideAngular(ai)]}return[qr,(0,fe.of)(!1)]},[d,Pi,u])}collection(t,o){let u;u="string"==typeof t?this.firestore.collection(t):t;const{ref:d,query:g}=Sy(u,o),D=this.schedulers.ngZone.run(()=>d);return new Dy(D,g,this)}collectionGroup(t,o){const u=o||(g=>g),d=this.firestore.collectionGroup(t);return new qv(u(d),this)}doc(t){let o;o="string"==typeof t?this.firestore.doc(t):t;const u=this.schedulers.ngZone.run(()=>o);return new by(u,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(E.LFG(Ne.Dh),E.LFG(Ne.xv,8),E.LFG(Pd,8),E.LFG(Ty,8),E.LFG(E.Lbi),E.LFG(E.R0b),E.LFG(ge.HU),E.LFG(gg,8),E.LFG(Cy,8),E.LFG(vr.zQ,8),E.LFG(vr.Qv,8),E.LFG(vr.L6,8),E.LFG(vr._Q,8),E.LFG(vr.rT,8),E.LFG(vr.lh,8),E.LFG(vr.f7,8),E.LFG(r0.nm,8))},i.\u0275prov=E.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),Od=(()=>{class i{constructor(){Ey.Z.registerVersion("angularfire",ge.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:i,providers:[{provide:Pd,useValue:!0},{provide:gg,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=E.oAB({type:i}),i.\u0275inj=E.cJS({providers:[Fl]}),i})()},2011:(_t,Me,O)=>{O.d(Me,{Dh:()=>_e,GT:()=>ge,cc:()=>Ge,hO:()=>ht,on:()=>ie,pX:()=>fe,xv:()=>Te});var E=O(5e3),F=O(127),G=O(5813);_t=O.hmd(_t);const me=["ngOnDestroy"],fe=(Ke,yt,vt,ne={})=>new Proxy(Ke,{get:($e,We)=>vt.runOutsideAngular(()=>{var Be;if(Ke[We])return(null===(Be=null==ne?void 0:ne.spy)||void 0===Be?void 0:Be.get)&&ne.spy.get(We,Ke[We]),Ke[We];if(me.indexOf(We)>-1)return()=>{};const Ye=yt.toPromise().then(re=>{const ke=re&&re[We];return"function"==typeof ke?ke.bind(re):ke&&ke.then?ke.then(K=>vt.run(()=>K)):vt.run(()=>ke)});return new Proxy(()=>{},{get:(re,ke)=>Ye[ke],apply:(re,ke,K)=>Ye.then(Ee=>{var oe;const Oe=Ee&&Ee(...K);return(null===(oe=null==ne?void 0:ne.spy)||void 0===oe?void 0:oe.apply)&&ne.spy.apply(We,K,Oe),Oe})})})}),ge=(Ke,yt)=>{yt.forEach(vt=>{Object.getOwnPropertyNames(vt.prototype||vt).forEach(ne=>{Object.defineProperty(Ke.prototype,ne,Object.getOwnPropertyDescriptor(vt.prototype||vt,ne))})})};class Ie{constructor(yt){return yt}}const _e=new E.OlP("angularfire2.app.options"),Te=new E.OlP("angularfire2.app.name");function ie(Ke,yt,vt){const $e="object"==typeof vt&&vt||{};$e.name=$e.name||"string"==typeof vt&&vt||"[DEFAULT]";const Be=F.Z.apps.filter(Ye=>Ye&&Ye.name===$e.name)[0]||yt.runOutsideAngular(()=>F.Z.initializeApp(Ke,$e));try{JSON.stringify(Ke)!==JSON.stringify(Be.options)&&J("error",`${Be.name} Firebase App already initialized with different options${_t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ye){}return new Ie(Be)}const J=(Ke,...yt)=>{(0,E.X6Q)()&&"undefined"!=typeof console&&console[Ke](...yt)},we={provide:Ie,useFactory:ie,deps:[_e,E.R0b,[new E.FiY,Te]]};let ht=(()=>{class Ke{constructor(vt){F.Z.registerVersion("angularfire",G.q4.full,"core"),F.Z.registerVersion("angularfire",G.q4.full,"app-compat"),F.Z.registerVersion("angular",E.q4F.full,vt.toString())}static initializeApp(vt,ne){return{ngModule:Ke,providers:[{provide:_e,useValue:vt},{provide:Te,useValue:ne}]}}}return Ke.\u0275fac=function(vt){return new(vt||Ke)(E.LFG(E.Lbi))},Ke.\u0275mod=E.oAB({type:Ke}),Ke.\u0275inj=E.cJS({providers:[we]}),Ke})();function Ge(Ke,yt,vt,ne,$e){const[,We,Be]=globalThis.\u0275AngularfireInstanceCache.find(Ye=>Ye[0]===Ke)||[];if(We)return function Je(Ke,yt){try{return Ke.toString()===yt.toString()}catch(vt){return Ke===yt}}($e,Be)||(Ne("error",`${yt} was already initialized on the ${vt} Firebase App with different settings.${lt?" You may need to reload as Firebase is not HMR aware.":""}`),Ne("warn",{is:$e,was:Be})),We;{const Ye=ne();return globalThis.\u0275AngularfireInstanceCache.push([Ke,Ye,$e]),Ye}}const lt=!!_t.hot,Ne=(Ke,...yt)=>{(0,E.X6Q)()&&"undefined"!=typeof console&&console[Ke](...yt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(_t,Me,O)=>{O.d(Me,{q4:()=>Ou,iC:()=>Gc,HU:()=>fc,vb:()=>Ul,JM:()=>cs});var E=O(5e3),F=O(5867),G=O(5861),me=O(9681),fe=O(2090),ge=O(4859),Ie=O(1877),_e=O(8766);const Te="@firebase/installations",we="w:0.5.9",ht="FIS_v2",yt=new fe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function vt(C){return C instanceof fe.ZR&&C.code.includes("request-failed")}function ne({projectId:C}){return`https://firebaseinstallations.googleapis.com/v1/projects/${C}/installations`}function $e(C){return{token:C.token,requestStatus:2,expiresIn:Ee(C.expiresIn),creationTime:Date.now()}}function We(C,x){return Be.apply(this,arguments)}function Be(){return(Be=(0,G.Z)(function*(C,x){const q=(yield x.json()).error;return yt.create("request-failed",{requestName:C,serverCode:q.code,serverMessage:q.message,serverStatus:q.status})})).apply(this,arguments)}function Ye({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function re(C,{refreshToken:x}){const j=Ye(C);return j.append("Authorization",function oe(C){return`${ht} ${C}`}(x)),j}function ke(C){return K.apply(this,arguments)}function K(){return(K=(0,G.Z)(function*(C){const x=yield C();return x.status>=500&&x.status<600?C():x})).apply(this,arguments)}function Ee(C){return Number(C.replace("s","000"))}function Oe(C,x){return xe.apply(this,arguments)}function xe(){return(xe=(0,G.Z)(function*({appConfig:C,heartbeatServiceProvider:x},{fid:j}){const q=ne(C),Ce=Ye(C),Pe=x.getImmediate({optional:!0});if(Pe){const dn=yield Pe.getHeartbeatsHeader();dn&&Ce.append("x-firebase-client",dn)}const Lt={method:"POST",headers:Ce,body:JSON.stringify({fid:j,authVersion:ht,appId:C.appId,sdkVersion:we})},Vt=yield ke(()=>fetch(q,Lt));if(Vt.ok){const dn=yield Vt.json();return{fid:dn.fid||j,registrationStatus:2,refreshToken:dn.refreshToken,authToken:$e(dn.authToken)}}throw yield We("Create Installation",Vt)})).apply(this,arguments)}function it(C){return new Promise(x=>{setTimeout(x,C)})}const pt=/^[cdef][\w-]{21}$/;function at(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const j=function en(C){return function ft(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return pt.test(j)?j:""}catch(C){return""}}function Bt(C){return`${C.appName}!${C.appId}`}const jt=new Map;function wt(C,x){const j=Bt(C);nn(j,x),function Fn(C,x){const j=function Gn(){return!bn&&"BroadcastChannel"in self&&(bn=new BroadcastChannel("[Firebase] FID Change"),bn.onmessage=C=>{nn(C.data.key,C.data.fid)}),bn}();j&&j.postMessage({key:C,fid:x}),function Sn(){0===jt.size&&bn&&(bn.close(),bn=null)}()}(j,x)}function nn(C,x){const j=jt.get(C);if(j)for(const q of j)q(x)}let bn=null;const Zn="firebase-installations-store";let Tn=null;function Ut(){return Tn||(Tn=(0,_e.X3)("firebase-installations-database",1,{upgrade:(C,x)=>{0===x&&C.createObjectStore(Zn)}})),Tn}function Yt(C,x){return wn.apply(this,arguments)}function wn(){return(wn=(0,G.Z)(function*(C,x){const j=Bt(C),Ce=(yield Ut()).transaction(Zn,"readwrite"),Pe=Ce.objectStore(Zn),ct=yield Pe.get(j);return yield Pe.put(x,j),yield Ce.done,(!ct||ct.fid!==x.fid)&&wt(C,x.fid),x})).apply(this,arguments)}function vn(C){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,G.Z)(function*(C){const x=Bt(C),q=(yield Ut()).transaction(Zn,"readwrite");yield q.objectStore(Zn).delete(x),yield q.done})).apply(this,arguments)}function Sr(C,x){return qe.apply(this,arguments)}function qe(){return(qe=(0,G.Z)(function*(C,x){const j=Bt(C),Ce=(yield Ut()).transaction(Zn,"readwrite"),Pe=Ce.objectStore(Zn),ct=yield Pe.get(j),Lt=x(ct);return void 0===Lt?yield Pe.delete(j):yield Pe.put(Lt,j),yield Ce.done,Lt&&(!ct||ct.fid!==Lt.fid)&&wt(C,Lt.fid),Lt})).apply(this,arguments)}function ue(C){return pe.apply(this,arguments)}function pe(){return(pe=(0,G.Z)(function*(C){let x;const j=yield Sr(C.appConfig,q=>{const Ce=tt(q),Pe=Se(C,Ce);return x=Pe.registrationPromise,Pe.installationEntry});return""===j.fid?{installationEntry:yield x}:{installationEntry:j,registrationPromise:x}})).apply(this,arguments)}function tt(C){return hr(C||{fid:at(),registrationStatus:0})}function Se(C,x){if(0===x.registrationStatus){if(!navigator.onLine)return{installationEntry:x,registrationPromise:Promise.reject(yt.create("app-offline"))};const j={fid:x.fid,registrationStatus:1,registrationTime:Date.now()},q=function et(C,x){return gt.apply(this,arguments)}(C,j);return{installationEntry:j,registrationPromise:q}}return 1===x.registrationStatus?{installationEntry:x,registrationPromise:fn(C)}:{installationEntry:x}}function gt(){return(gt=(0,G.Z)(function*(C,x){try{const j=yield Oe(C,x);return Yt(C.appConfig,j)}catch(j){throw vt(j)&&409===j.customData.serverCode?yield vn(C.appConfig):yield Yt(C.appConfig,{fid:x.fid,registrationStatus:0}),j}})).apply(this,arguments)}function fn(C){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,G.Z)(function*(C){let x=yield qt(C.appConfig);for(;1===x.registrationStatus;)yield it(100),x=yield qt(C.appConfig);if(0===x.registrationStatus){const{installationEntry:j,registrationPromise:q}=yield ue(C);return q||j}return x})).apply(this,arguments)}function qt(C){return Sr(C,x=>{if(!x)throw yt.create("installation-not-found");return hr(x)})}function hr(C){return function Un(C){return 1===C.registrationStatus&&C.registrationTime+1e4<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function _n(C,x){return Y.apply(this,arguments)}function Y(){return(Y=(0,G.Z)(function*({appConfig:C,heartbeatServiceProvider:x},j){const q=se(C,j),Ce=re(C,j),Pe=x.getImmediate({optional:!0});if(Pe){const dn=yield Pe.getHeartbeatsHeader();dn&&Ce.append("x-firebase-client",dn)}const Lt={method:"POST",headers:Ce,body:JSON.stringify({installation:{sdkVersion:we,appId:C.appId}})},Vt=yield ke(()=>fetch(q,Lt));if(Vt.ok)return $e(yield Vt.json());throw yield We("Generate Auth Token",Vt)})).apply(this,arguments)}function se(C,{fid:x}){return`${ne(C)}/${x}/authTokens:generate`}function le(C){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,G.Z)(function*(C,x=!1){let j;const q=yield Sr(C.appConfig,Pe=>{if(!Gt(Pe))throw yt.create("not-registered");const ct=Pe.authToken;if(!x&&Vn(ct))return Pe;if(1===ct.requestStatus)return j=te(C,x),Pe;{if(!navigator.onLine)throw yt.create("app-offline");const Lt=fr(Pe);return j=Ct(C,Lt),Lt}});return j?yield j:q.authToken})).apply(this,arguments)}function te(C,x){return De.apply(this,arguments)}function De(){return(De=(0,G.Z)(function*(C,x){let j=yield nt(C.appConfig);for(;1===j.authToken.requestStatus;)yield it(100),j=yield nt(C.appConfig);const q=j.authToken;return 0===q.requestStatus?le(C,x):q})).apply(this,arguments)}function nt(C){return Sr(C,x=>{if(!Gt(x))throw yt.create("not-registered");return function _r(C){return 1===C.requestStatus&&C.requestTime+1e4<Date.now()}(x.authToken)?Object.assign(Object.assign({},x),{authToken:{requestStatus:0}}):x})}function Ct(C,x){return At.apply(this,arguments)}function At(){return(At=(0,G.Z)(function*(C,x){try{const j=yield _n(C,x),q=Object.assign(Object.assign({},x),{authToken:j});return yield Yt(C.appConfig,q),j}catch(j){if(!vt(j)||401!==j.customData.serverCode&&404!==j.customData.serverCode){const q=Object.assign(Object.assign({},x),{authToken:{requestStatus:0}});yield Yt(C.appConfig,q)}else yield vn(C.appConfig);throw j}})).apply(this,arguments)}function Gt(C){return void 0!==C&&2===C.registrationStatus}function Vn(C){return 2===C.requestStatus&&!function zt(C){const x=Date.now();return x<C.creationTime||C.creationTime+C.expiresIn<x+36e5}(C)}function fr(C){const x={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:x})}function pr(){return(pr=(0,G.Z)(function*(C){const x=C,{installationEntry:j,registrationPromise:q}=yield ue(x);return q?q.catch(console.error):le(x).catch(console.error),j.fid})).apply(this,arguments)}function an(){return(an=(0,G.Z)(function*(C,x=!1){const j=C;return yield Mn(j),(yield le(j,x)).token})).apply(this,arguments)}function Mn(C){return Er.apply(this,arguments)}function Er(){return(Er=(0,G.Z)(function*(C){const{registrationPromise:x}=yield ue(C);x&&(yield x)})).apply(this,arguments)}function Fr(C){return yt.create("missing-app-config-values",{valueName:C})}const Tr="installations",Dt=C=>{const x=C.getProvider("app").getImmediate(),j=function ur(C){if(!C||!C.options)throw Fr("App Configuration");if(!C.name)throw Fr("App Name");const x=["projectId","apiKey","appId"];for(const j of x)if(!C.options[j])throw Fr(j);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(x);return{app:x,appConfig:j,heartbeatServiceProvider:(0,me._getProvider)(x,"heartbeat"),_delete:()=>Promise.resolve()}},tn=C=>{const x=C.getProvider("app").getImmediate(),j=(0,me._getProvider)(x,Tr).getImmediate();return{getId:()=>function ui(C){return pr.apply(this,arguments)}(j),getToken:Ce=>function kr(C){return an.apply(this,arguments)}(j,Ce)}};(function cr(){(0,me._registerComponent)(new ge.wA(Tr,Dt,"PUBLIC")),(0,me._registerComponent)(new ge.wA("installations-internal",tn,"PRIVATE"))})(),(0,me.registerVersion)(Te,"0.5.9"),(0,me.registerVersion)(Te,"0.5.9","esm2017");const Ur="@firebase/remote-config",tr=new fe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Wo{constructor(x,j,q,Ce){this.client=x,this.storage=j,this.storageCache=q,this.logger=Ce}isCachedDataFresh(x,j){if(!j)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const q=Date.now()-j,Ce=q<=x;return this.logger.debug(`Config fetch cache check. Cache age millis: ${q}. Cache max age millis (minimumFetchIntervalMillis setting): ${x}. Is cache hit: ${Ce}.`),Ce}fetch(x){var j=this;return(0,G.Z)(function*(){const[q,Ce]=yield Promise.all([j.storage.getLastSuccessfulFetchTimestampMillis(),j.storage.getLastSuccessfulFetchResponse()]);if(Ce&&j.isCachedDataFresh(x.cacheMaxAgeMillis,q))return Ce;x.eTag=Ce&&Ce.eTag;const Pe=yield j.client.fetch(x),ct=[j.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Pe.status&&ct.push(j.storage.setLastSuccessfulFetchResponse(Pe)),yield Promise.all(ct),Pe})()}}function Ko(C=navigator){return C.languages&&C.languages[0]||C.language}class Yn{constructor(x,j,q,Ce,Pe,ct){this.firebaseInstallations=x,this.sdkVersion=j,this.namespace=q,this.projectId=Ce,this.apiKey=Pe,this.appId=ct}fetch(x){var j=this;return(0,G.Z)(function*(){const[q,Ce]=yield Promise.all([j.firebaseInstallations.getId(),j.firebaseInstallations.getToken()]),ct=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${j.projectId}/namespaces/${j.namespace}:fetch?key=${j.apiKey}`,Lt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":x.eTag||"*"},Vt={sdk_version:j.sdkVersion,app_instance_id:q,app_instance_id_token:Ce,app_id:j.appId,language_code:Ko()},dn={method:"POST",headers:Lt,body:JSON.stringify(Vt)},zn=fetch(ct,dn),Xt=new Promise((ds,Zi)=>{x.signal.addEventListener(()=>{const Pa=new Error("The operation was aborted.");Pa.name="AbortError",Zi(Pa)})});let ii;try{yield Promise.race([zn,Xt]),ii=yield zn}catch(ds){let Zi="fetch-client-network";throw"AbortError"===ds.name&&(Zi="fetch-timeout"),tr.create(Zi,{originalErrorMessage:ds.message})}let Cn=ii.status;const Io=ii.headers.get("ETag")||void 0;let Or,Pn;if(200===ii.status){let ds;try{ds=yield ii.json()}catch(Zi){throw tr.create("fetch-client-parse",{originalErrorMessage:Zi.message})}Or=ds.entries,Pn=ds.state}if("INSTANCE_STATE_UNSPECIFIED"===Pn?Cn=500:"NO_CHANGE"===Pn?Cn=304:("NO_TEMPLATE"===Pn||"EMPTY_CONFIG"===Pn)&&(Or={}),304!==Cn&&200!==Cn)throw tr.create("fetch-status",{httpStatus:Cn});return{status:Cn,eTag:Io,config:Or}})()}}class ve{constructor(x,j){this.client=x,this.storage=j}fetch(x){var j=this;return(0,G.Z)(function*(){const q=(yield j.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return j.attemptFetch(x,q)})()}attemptFetch(x,{throttleEndTimeMillis:j,backoffCount:q}){var Ce=this;return(0,G.Z)(function*(){yield function Gi(C,x){return new Promise((j,q)=>{const Ce=Math.max(x-Date.now(),0),Pe=setTimeout(j,Ce);C.addEventListener(()=>{clearTimeout(Pe),q(tr.create("fetch-throttle",{throttleEndTimeMillis:x}))})})}(x.signal,j);try{const Pe=yield Ce.client.fetch(x);return yield Ce.storage.deleteThrottleMetadata(),Pe}catch(Pe){if(!function $s(C){if(!(C instanceof fe.ZR&&C.customData))return!1;const x=Number(C.customData.httpStatus);return 429===x||500===x||503===x||504===x}(Pe))throw Pe;const ct={throttleEndTimeMillis:Date.now()+(0,fe.$s)(q),backoffCount:q+1};return yield Ce.storage.setThrottleMetadata(ct),Ce.attemptFetch(x,ct)}})()}}class Ze{constructor(x,j,q,Ce,Pe){this.app=x,this._client=j,this._storageCache=q,this._storage=Ce,this._logger=Pe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function mt(C,x){const j=C.target.error||void 0;return tr.create(x,{originalErrorMessage:j&&j.message})}const xt="app_namespace_store";class Qi{constructor(x,j,q,Ce=function An(){return new Promise((C,x)=>{try{const j=indexedDB.open("firebase_remote_config",1);j.onerror=q=>{x(mt(q,"storage-open"))},j.onsuccess=q=>{C(q.target.result)},j.onupgradeneeded=q=>{0===q.oldVersion&&q.target.result.createObjectStore(xt,{keyPath:"compositeKey"})}}catch(j){x(tr.create("storage-open",{originalErrorMessage:j}))}})}()){this.appId=x,this.appName=j,this.namespace=q,this.openDbPromise=Ce}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(x){return this.set("last_fetch_status",x)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(x){return this.set("last_successful_fetch_timestamp_millis",x)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(x){return this.set("last_successful_fetch_response",x)}getActiveConfig(){return this.get("active_config")}setActiveConfig(x){return this.set("active_config",x)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(x){return this.set("active_config_etag",x)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(x){return this.set("throttle_metadata",x)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(x){var j=this;return(0,G.Z)(function*(){const q=yield j.openDbPromise;return new Promise((Ce,Pe)=>{const Lt=q.transaction([xt],"readonly").objectStore(xt),Vt=j.createCompositeKey(x);try{const dn=Lt.get(Vt);dn.onerror=zn=>{Pe(mt(zn,"storage-get"))},dn.onsuccess=zn=>{const Xt=zn.target.result;Ce(Xt?Xt.value:void 0)}}catch(dn){Pe(tr.create("storage-get",{originalErrorMessage:dn&&dn.message}))}})})()}set(x,j){var q=this;return(0,G.Z)(function*(){const Ce=yield q.openDbPromise;return new Promise((Pe,ct)=>{const Vt=Ce.transaction([xt],"readwrite").objectStore(xt),dn=q.createCompositeKey(x);try{const zn=Vt.put({compositeKey:dn,value:j});zn.onerror=Xt=>{ct(mt(Xt,"storage-set"))},zn.onsuccess=()=>{Pe()}}catch(zn){ct(tr.create("storage-set",{originalErrorMessage:zn&&zn.message}))}})})()}delete(x){var j=this;return(0,G.Z)(function*(){const q=yield j.openDbPromise;return new Promise((Ce,Pe)=>{const Lt=q.transaction([xt],"readwrite").objectStore(xt),Vt=j.createCompositeKey(x);try{const dn=Lt.delete(Vt);dn.onerror=zn=>{Pe(mt(zn,"storage-delete"))},dn.onsuccess=()=>{Ce()}}catch(dn){Pe(tr.create("storage-delete",{originalErrorMessage:dn&&dn.message}))}})})()}createCompositeKey(x){return[this.appId,this.appName,this.namespace,x].join()}}class Hs{constructor(x){this.storage=x}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var x=this;return(0,G.Z)(function*(){const j=x.storage.getLastFetchStatus(),q=x.storage.getLastSuccessfulFetchTimestampMillis(),Ce=x.storage.getActiveConfig(),Pe=yield j;Pe&&(x.lastFetchStatus=Pe);const ct=yield q;ct&&(x.lastSuccessfulFetchTimestampMillis=ct);const Lt=yield Ce;Lt&&(x.activeConfig=Lt)})()}setLastFetchStatus(x){return this.lastFetchStatus=x,this.storage.setLastFetchStatus(x)}setLastSuccessfulFetchTimestampMillis(x){return this.lastSuccessfulFetchTimestampMillis=x,this.storage.setLastSuccessfulFetchTimestampMillis(x)}setActiveConfig(x){return this.activeConfig=x,this.storage.setActiveConfig(x)}}function ms(){return uo.apply(this,arguments)}function uo(){return(uo=(0,G.Z)(function*(){if(!(0,fe.hl)())return!1;try{return yield(0,fe.eu)()}catch(C){return!1}})).apply(this,arguments)}!function xr(){(0,me._registerComponent)(new ge.wA("remote-config",function C(x,{instanceIdentifier:j}){const q=x.getProvider("app").getImmediate(),Ce=x.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw tr.create("registration-window");if(!(0,fe.hl)())throw tr.create("indexed-db-unavailable");const{projectId:Pe,apiKey:ct,appId:Lt}=q.options;if(!Pe)throw tr.create("registration-project-id");if(!ct)throw tr.create("registration-api-key");if(!Lt)throw tr.create("registration-app-id");const Vt=new Qi(Lt,q.name,j=j||"firebase"),dn=new Hs(Vt),zn=new Ie.Yd(Ur);zn.logLevel=Ie.in.ERROR;const Xt=new Yn(Ce,me.SDK_VERSION,j,Pe,ct,Lt),ii=new ve(Xt,Vt),Cn=new Wo(ii,Vt,dn,zn),Io=new Ze(q,Cn,dn,Vt,zn);return function St(C){const x=(0,fe.m9)(C);x._initializePromise||(x._initializePromise=x._storageCache.loadFromStorage().then(()=>{x._isInitializationComplete=!0}))}(Io),Io},"PUBLIC").setMultipleInstances(!0)),(0,me.registerVersion)(Ur,"0.3.8"),(0,me.registerVersion)(Ur,"0.3.8","esm2017")}();const As="/firebase-messaging-sw.js",Vr="/firebase-cloud-messaging-push-scope",xs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ji="google.c.a.c_id",zs="google.c.a.c_l",Xi="google.c.a.ts",qo="google.c.a.e";var Ws=(()=>{return(C=Ws||(Ws={})).PUSH_RECEIVED="push-received",C.NOTIFICATION_CLICKED="notification-clicked",Ws;var C})();function Mr(C){const x=new Uint8Array(C);return btoa(String.fromCharCode(...x)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Zo(C){const j=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),q=atob(j),Ce=new Uint8Array(q.length);for(let Pe=0;Pe<q.length;++Pe)Ce[Pe]=q.charCodeAt(Pe);return Ce}const Br="fcm_token_details_db",lr="fcm_token_object_Store";function co(C){return Ks.apply(this,arguments)}function Ks(){return Ks=(0,G.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Pe=>Pe.name).includes(Br))return null;let x=null;return(yield(0,_e.X3)(Br,5,{upgrade:(q=(0,G.Z)(function*(Ce,Pe,ct,Lt){var Vt;if(Pe<2||!Ce.objectStoreNames.contains(lr))return;const dn=Lt.objectStore(lr),zn=yield dn.index("fcmSenderId").get(C);if(yield dn.clear(),zn)if(2===Pe){const Xt=zn;if(!Xt.auth||!Xt.p256dh||!Xt.endpoint)return;x={token:Xt.fcmToken,createTime:null!==(Vt=Xt.createTime)&&void 0!==Vt?Vt:Date.now(),subscriptionOptions:{auth:Xt.auth,p256dh:Xt.p256dh,endpoint:Xt.endpoint,swScope:Xt.swScope,vapidKey:"string"==typeof Xt.vapidKey?Xt.vapidKey:Mr(Xt.vapidKey)}}}else if(3===Pe){const Xt=zn;x={token:Xt.fcmToken,createTime:Xt.createTime,subscriptionOptions:{auth:Mr(Xt.auth),p256dh:Mr(Xt.p256dh),endpoint:Xt.endpoint,swScope:Xt.swScope,vapidKey:Mr(Xt.vapidKey)}}}else if(4===Pe){const Xt=zn;x={token:Xt.fcmToken,createTime:Xt.createTime,subscriptionOptions:{auth:Mr(Xt.auth),p256dh:Mr(Xt.p256dh),endpoint:Xt.endpoint,swScope:Xt.swScope,vapidKey:Mr(Xt.vapidKey)}}}}),function(Pe,ct,Lt,Vt){return q.apply(this,arguments)})})).close(),yield(0,_e.Lj)(Br),yield(0,_e.Lj)("fcm_vapid_details_db"),yield(0,_e.Lj)("undefined"),Ms(x)?x:null;var q}),Ks.apply(this,arguments)}function Ms(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:x}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof x.auth&&x.auth.length>0&&"string"==typeof x.p256dh&&x.p256dh.length>0&&"string"==typeof x.endpoint&&x.endpoint.length>0&&"string"==typeof x.swScope&&x.swScope.length>0&&"string"==typeof x.vapidKey&&x.vapidKey.length>0}const jr="firebase-messaging-store";let wa=null;function Qn(){return wa||(wa=(0,_e.X3)("firebase-messaging-database",1,{upgrade:(C,x)=>{0===x&&C.createObjectStore(jr)}})),wa}function A(C){return V.apply(this,arguments)}function V(){return(V=(0,G.Z)(function*(C){const x=He(C),q=yield(yield Qn()).transaction(jr).objectStore(jr).get(x);if(q)return q;{const Ce=yield co(C.appConfig.senderId);if(Ce)return yield S(C,Ce),Ce}})).apply(this,arguments)}function S(C,x){return $.apply(this,arguments)}function $(){return($=(0,G.Z)(function*(C,x){const j=He(C),Ce=(yield Qn()).transaction(jr,"readwrite");return yield Ce.objectStore(jr).put(x,j),yield Ce.done,x})).apply(this,arguments)}function ae(C){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,G.Z)(function*(C){const x=He(C),q=(yield Qn()).transaction(jr,"readwrite");yield q.objectStore(jr).delete(x),yield q.done})).apply(this,arguments)}function He({appConfig:C}){return C.appId}const ln=new fe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Nn(C,x){return un.apply(this,arguments)}function un(){return(un=(0,G.Z)(function*(C,x){const j=yield Ai(C),q=ti(x),Ce={method:"POST",headers:j,body:JSON.stringify(q)};let Pe;try{Pe=yield(yield fetch(li(C.appConfig),Ce)).json()}catch(ct){throw ln.create("token-subscribe-failed",{errorInfo:ct})}if(Pe.error)throw ln.create("token-subscribe-failed",{errorInfo:Pe.error.message});if(!Pe.token)throw ln.create("token-subscribe-no-token");return Pe.token})).apply(this,arguments)}function gn(C,x){return dr.apply(this,arguments)}function dr(){return(dr=(0,G.Z)(function*(C,x){const j=yield Ai(C),q=ti(x.subscriptionOptions),Ce={method:"PATCH",headers:j,body:JSON.stringify(q)};let Pe;try{Pe=yield(yield fetch(`${li(C.appConfig)}/${x.token}`,Ce)).json()}catch(ct){throw ln.create("token-update-failed",{errorInfo:ct})}if(Pe.error)throw ln.create("token-update-failed",{errorInfo:Pe.error.message});if(!Pe.token)throw ln.create("token-update-no-token");return Pe.token})).apply(this,arguments)}function On(C,x){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,G.Z)(function*(C,x){const q={method:"DELETE",headers:yield Ai(C)};try{const Pe=yield(yield fetch(`${li(C.appConfig)}/${x}`,q)).json();if(Pe.error)throw ln.create("token-unsubscribe-failed",{errorInfo:Pe.error.message})}catch(Ce){throw ln.create("token-unsubscribe-failed",{errorInfo:Ce})}})).apply(this,arguments)}function li({projectId:C}){return`https://fcmregistrations.googleapis.com/v1/projects/${C}/registrations`}function Ai(C){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,G.Z)(function*({appConfig:C,installations:x}){const j=yield x.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${j}`})})).apply(this,arguments)}function ti({p256dh:C,auth:x,endpoint:j,vapidKey:q}){const Ce={web:{endpoint:j,auth:x,p256dh:C}};return q!==xs&&(Ce.web.applicationPubKey=q),Ce}const zi=6048e5;function Rs(C){return lo.apply(this,arguments)}function lo(){return(lo=(0,G.Z)(function*(C){const x=yield Zs(C.swRegistration,C.vapidKey),j={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:x.endpoint,auth:Mr(x.getKey("auth")),p256dh:Mr(x.getKey("p256dh"))},q=yield A(C.firebaseDependencies);if(q){if(ys(q.subscriptionOptions,j))return Date.now()>=q.createTime+zi?Ia(C,{token:q.token,createTime:Date.now(),subscriptionOptions:j}):q.token;try{yield On(C.firebaseDependencies,q.token)}catch(Ce){console.warn(Ce)}return rt(C.firebaseDependencies,j)}return rt(C.firebaseDependencies,j)})).apply(this,arguments)}function ho(C){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,G.Z)(function*(C){const x=yield A(C.firebaseDependencies);x&&(yield On(C.firebaseDependencies,x.token),yield ae(C.firebaseDependencies));const j=yield C.swRegistration.pushManager.getSubscription();return!j||j.unsubscribe()})).apply(this,arguments)}function Ia(C,x){return Co.apply(this,arguments)}function Co(){return(Co=(0,G.Z)(function*(C,x){try{const j=yield gn(C.firebaseDependencies,x),q=Object.assign(Object.assign({},x),{token:j,createTime:Date.now()});return yield S(C.firebaseDependencies,q),j}catch(j){throw yield ho(C),j}})).apply(this,arguments)}function rt(C,x){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,G.Z)(function*(C,x){const q={token:yield Nn(C,x),createTime:Date.now(),subscriptionOptions:x};return yield S(C,q),q.token})).apply(this,arguments)}function Zs(C,x){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,G.Z)(function*(C,x){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Zo(x)})})).apply(this,arguments)}function ys(C,x){return x.vapidKey===C.vapidKey&&x.endpoint===C.endpoint&&x.auth===C.auth&&x.p256dh===C.p256dh}function Ys(C){const x={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function Ui(C,x){if(!x.notification)return;C.notification={};const j=x.notification.title;j&&(C.notification.title=j);const q=x.notification.body;q&&(C.notification.body=q);const Ce=x.notification.image;Ce&&(C.notification.image=Ce)}(x,C),function Qs(C,x){!x.data||(C.data=x.data)}(x,C),function Yo(C,x){if(!x.fcmOptions)return;C.fcmOptions={};const j=x.fcmOptions.link;j&&(C.fcmOptions.link=j);const q=x.fcmOptions.analytics_label;q&&(C.fcmOptions.analyticsLabel=q)}(x,C),x}function Su(C){return"object"==typeof C&&!!C&&Ji in C}function Au(C,x){const j=[];for(let q=0;q<C.length;q++)j.push(C.charAt(q)),q<x.length&&j.push(x.charAt(q));return j.join("")}function es(C){return ln.create("missing-app-config-values",{valueName:C})}Au("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Au("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class $r{constructor(x,j,q){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Ce=function $c(C){if(!C||!C.options)throw es("App Configuration Object");if(!C.name)throw es("App Name");const x=["projectId","apiKey","appId","messagingSenderId"],{options:j}=C;for(const q of x)if(!j[q])throw es(q);return{appName:C.name,projectId:j.projectId,apiKey:j.apiKey,appId:j.appId,senderId:j.messagingSenderId}}(x);this.firebaseDependencies={app:x,appConfig:Ce,installations:j,analyticsProvider:q}}_delete(){return Promise.resolve()}}function _i(C){return So.apply(this,arguments)}function So(){return(So=(0,G.Z)(function*(C){try{C.swRegistration=yield navigator.serviceWorker.register(As,{scope:Vr}),C.swRegistration.update().catch(()=>{})}catch(x){throw ln.create("failed-service-worker-registration",{browserErrorMessage:x.message})}})).apply(this,arguments)}function Ps(C,x){return di.apply(this,arguments)}function di(){return(di=(0,G.Z)(function*(C,x){if(!x&&!C.swRegistration&&(yield _i(C)),x||!C.swRegistration){if(!(x instanceof ServiceWorkerRegistration))throw ln.create("invalid-sw-registration");C.swRegistration=x}})).apply(this,arguments)}function fo(C,x){return Da.apply(this,arguments)}function Da(){return(Da=(0,G.Z)(function*(C,x){x?C.vapidKey=x:C.vapidKey||(C.vapidKey=xs)})).apply(this,arguments)}function ba(){return(ba=(0,G.Z)(function*(C,x){if(!navigator)throw ln.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ln.create("permission-blocked");return yield fo(C,null==x?void 0:x.vapidKey),yield Ps(C,null==x?void 0:x.serviceWorkerRegistration),Rs(C)})).apply(this,arguments)}function Qo(C,x,j){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,G.Z)(function*(C,x,j){const q=tu(x);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(q,{message_id:j[Ji],message_name:j[zs],message_time:j[Xi],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function tu(C){switch(C){case Ws.NOTIFICATION_CLICKED:return"notification_open";case Ws.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Jo(){return(Jo=(0,G.Z)(function*(C,x){const j=x.data;if(!j.isFirebaseMessaging)return;C.onMessageHandler&&j.messageType===Ws.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(Ys(j)):C.onMessageHandler.next(Ys(j)));const q=j.data;Su(q)&&"1"===q[qo]&&(yield Qo(C,j.messageType,q))})).apply(this,arguments)}const xo="@firebase/messaging",Xo=C=>{const x=new $r(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",j=>function Ta(C,x){return Jo.apply(this,arguments)}(x,j)),x},Js=C=>{const x=C.getProvider("messaging").getImmediate();return{getToken:q=>function gr(C,x){return ba.apply(this,arguments)}(x,q)}};function Ca(){return po.apply(this,arguments)}function po(){return(po=(0,G.Z)(function*(){try{yield(0,fe.eu)()}catch(C){return!1}return"undefined"!=typeof window&&(0,fe.hl)()&&(0,fe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function ts(){(0,me._registerComponent)(new ge.wA("messaging",Xo,"PUBLIC")),(0,me._registerComponent)(new ge.wA("messaging-internal",Js,"PRIVATE")),(0,me.registerVersion)(xo,"0.9.13"),(0,me.registerVersion)(xo,"0.9.13","esm2017")}();const ru="analytics",dc="firebase_id",ns="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ls="https://www.googletagmanager.com/gtag/js",xn=new Ie.Yd("@firebase/analytics");function Aa(C){return Promise.all(C.map(x=>x.catch(j=>j)))}function ta(C,x){const j=document.createElement("script");j.src=`${Ls}?l=${C}&id=${x}`,j.async=!0,document.head.appendChild(j)}function is(C,x,j,q,Ce,Pe){return fi.apply(this,arguments)}function fi(){return(fi=(0,G.Z)(function*(C,x,j,q,Ce,Pe){const ct=q[Ce];try{if(ct)yield x[ct];else{const Vt=(yield Aa(j)).find(dn=>dn.measurementId===Ce);Vt&&(yield x[Vt.appId])}}catch(Lt){xn.error(Lt)}C("config",Ce,Pe)})).apply(this,arguments)}function Ru(C,x,j,q,Ce){return ss.apply(this,arguments)}function ss(){return(ss=(0,G.Z)(function*(C,x,j,q,Ce){try{let Pe=[];if(Ce&&Ce.send_to){let ct=Ce.send_to;Array.isArray(ct)||(ct=[ct]);const Lt=yield Aa(j);for(const Vt of ct){const dn=Lt.find(Xt=>Xt.measurementId===Vt),zn=dn&&x[dn.appId];if(!zn){Pe=[];break}Pe.push(zn)}}0===Pe.length&&(Pe=Object.values(x)),yield Promise.all(Pe),C("event",q,Ce||{})}catch(Pe){xn.error(Pe)}})).apply(this,arguments)}function na(){const C=window.document.getElementsByTagName("script");for(const x of Object.values(C))if(x.src&&x.src.includes(Ls))return x;return null}const xi=new fe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ra=new class os{constructor(x={},j=1e3){this.throttleMetadata=x,this.intervalMillis=j}getThrottleMetadata(x){return this.throttleMetadata[x]}setThrottleMetadata(x,j){this.throttleMetadata[x]=j}deleteThrottleMetadata(x){delete this.throttleMetadata[x]}};function xa(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function Ro(C){return to.apply(this,arguments)}function to(){return(to=(0,G.Z)(function*(C){var x;const{appId:j,apiKey:q}=C,Ce={method:"GET",headers:xa(q)},Pe=ns.replace("{app-id}",j),ct=yield fetch(Pe,Ce);if(200!==ct.status&&304!==ct.status){let Lt="";try{const Vt=yield ct.json();(null===(x=Vt.error)||void 0===x?void 0:x.message)&&(Lt=Vt.error.message)}catch(Vt){}throw xi.create("config-fetch-failed",{httpStatus:ct.status,responseMessage:Lt})}return ct.json()})).apply(this,arguments)}function Rr(C){return no.apply(this,arguments)}function no(){return(no=(0,G.Z)(function*(C,x=ra,j){const{appId:q,apiKey:Ce,measurementId:Pe}=C.options;if(!q)throw xi.create("no-app-id");if(!Ce){if(Pe)return{measurementId:Pe,appId:q};throw xi.create("no-api-key")}const ct=x.getThrottleMetadata(q)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Lt=new Fs;return setTimeout((0,G.Z)(function*(){Lt.abort()}),void 0!==j?j:6e4),vs({appId:q,apiKey:Ce,measurementId:Pe},ct,Lt,x)})).apply(this,arguments)}function vs(C,x,j){return No.apply(this,arguments)}function No(){return(No=(0,G.Z)(function*(C,{throttleEndTimeMillis:x,backoffCount:j},q,Ce=ra){const{appId:Pe,measurementId:ct}=C;try{yield iu(q,x)}catch(Lt){if(ct)return xn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ct} provided in the "measurementId" field in the local Firebase config. [${Lt.message}]`),{appId:Pe,measurementId:ct};throw Lt}try{const Lt=yield Ro(C);return Ce.deleteThrottleMetadata(Pe),Lt}catch(Lt){if(!Yr(Lt)){if(Ce.deleteThrottleMetadata(Pe),ct)return xn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ct} provided in the "measurementId" field in the local Firebase config. [${Lt.message}]`),{appId:Pe,measurementId:ct};throw Lt}const Vt=503===Number(Lt.customData.httpStatus)?(0,fe.$s)(j,Ce.intervalMillis,30):(0,fe.$s)(j,Ce.intervalMillis),dn={throttleEndTimeMillis:Date.now()+Vt,backoffCount:j+1};return Ce.setThrottleMetadata(Pe,dn),xn.debug(`Calling attemptFetch again in ${Vt} millis`),vs(C,dn,q,Ce)}})).apply(this,arguments)}function iu(C,x){return new Promise((j,q)=>{const Ce=Math.max(x-Date.now(),0),Pe=setTimeout(j,Ce);C.addEventListener(()=>{clearTimeout(Pe),q(xi.create("fetch-throttle",{throttleEndTimeMillis:x}))})})}function Yr(C){if(!(C instanceof fe.ZR&&C.customData))return!1;const x=Number(C.customData.httpStatus);return 429===x||500===x||503===x||504===x}class Fs{constructor(){this.listeners=[]}addEventListener(x){this.listeners.push(x)}abort(){this.listeners.forEach(x=>x())}}function Us(){return ia.apply(this,arguments)}function ia(){return(ia=(0,G.Z)(function*(){if(!(0,fe.hl)())return xn.warn(xi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,fe.eu)()}catch(C){return xn.warn(xi.create("indexeddb-unavailable",{errorInfo:C}).message),!1}return!0})).apply(this,arguments)}function dt(){return(dt=(0,G.Z)(function*(C,x,j,q,Ce,Pe,ct){var Lt;const Vt=Rr(C);Vt.then(Cn=>{j[Cn.measurementId]=Cn.appId,C.options.measurementId&&Cn.measurementId!==C.options.measurementId&&xn.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${Cn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Cn=>xn.error(Cn)),x.push(Vt);const dn=Us().then(Cn=>{if(Cn)return q.getId()}),[zn,Xt]=yield Promise.all([Vt,dn]);na()||ta(Pe,zn.measurementId),Ce("js",new Date);const ii=null!==(Lt=null==ct?void 0:ct.config)&&void 0!==Lt?Lt:{};return ii.origin="firebase",ii.update=!0,null!=Xt&&(ii[dc]=Xt),Ce("config",zn.measurementId,ii),zn.measurementId})).apply(this,arguments)}class sr{constructor(x){this.app=x}_delete(){return delete I[this.app.options.appId],Promise.resolve()}}let I={},_=[];const m={};let k,L,T="dataLayer",z=!1;function mn(C,x,j){!function Rt(){const C=[];if((0,fe.ru)()&&C.push("This is a browser extension environment."),(0,fe.zI)()||C.push("Cookies are not available."),C.length>0){const x=C.map((q,Ce)=>`(${Ce+1}) ${q}`).join(" "),j=xi.create("invalid-analytics-context",{errorInfo:x});xn.warn(j.message)}}();const q=C.options.appId;if(!q)throw xi.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw xi.create("no-api-key");xn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=I[q])throw xi.create("already-exists",{id:q});if(!z){!function rs(C){let x=[];Array.isArray(window[C])?x=window[C]:window[C]=x}(T);const{wrappedGtag:Pe,gtagCore:ct}=function Nu(C,x,j,q,Ce){let Pe=function(...ct){window[q].push(arguments)};return window[Ce]&&"function"==typeof window[Ce]&&(Pe=window[Ce]),window[Ce]=function Mo(C,x,j,q){function Pe(){return(Pe=(0,G.Z)(function*(ct,Lt,Vt){try{"event"===ct?yield Ru(C,x,j,Lt,Vt):"config"===ct?yield is(C,x,j,q,Lt,Vt):C("set",Lt)}catch(dn){xn.error(dn)}})).apply(this,arguments)}return function Ce(ct,Lt,Vt){return Pe.apply(this,arguments)}}(Pe,C,x,j),{gtagCore:Pe,wrappedGtag:window[Ce]}}(I,_,m,T,"gtag");L=Pe,k=ct,z=!0}return I[q]=function Vs(C,x,j,q,Ce,Pe,ct){return dt.apply(this,arguments)}(C,_,m,x,k,T,j),new sr(C)}function kn(){return(kn=(0,G.Z)(function*(C,x,j,q,Ce){if(Ce&&Ce.global)C("event",j,q);else{const Pe=yield x;C("event",j,Object.assign(Object.assign({},q),{send_to:Pe}))}})).apply(this,arguments)}function sa(){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,G.Z)(function*(){if((0,fe.ru)()||!(0,fe.zI)()||!(0,fe.hl)())return!1;try{return yield(0,fe.eu)()}catch(C){return!1}})).apply(this,arguments)}const Ln="@firebase/analytics";!function pi(){(0,me._registerComponent)(new ge.wA(ru,(x,{options:j})=>mn(x.getProvider("app").getImmediate(),x.getProvider("installations-internal").getImmediate(),j),"PUBLIC")),(0,me._registerComponent)(new ge.wA("analytics-internal",function C(x){try{const j=x.getProvider(ru).getImmediate();return{logEvent:(q,Ce,Pe)=>function Pu(C,x,j,q){C=(0,fe.m9)(C),function Ft(C,x,j,q,Ce){return kn.apply(this,arguments)}(L,I[C.app.options.appId],x,j,q).catch(Ce=>xn.error(Ce))}(j,q,Ce,Pe)}}catch(j){throw xi.create("interop-component-reg-failed",{reason:j})}},"PRIVATE")),(0,me.registerVersion)(Ln,"0.7.9"),(0,me.registerVersion)(Ln,"0.7.9","esm2017")}();var su=O(4408),Qr=O(7565);const _s=new class ri extends Qr.v{}(class ou extends su.o{constructor(x,j){super(x,j),this.scheduler=x,this.work=j}schedule(x,j=0){return j>0?super.schedule(x,j):(this.delay=j,this.state=x,this.scheduler.flush(this),this)}execute(x,j){return j>0||this.closed?super.execute(x,j):this._execute(x,j)}requestAsyncId(x,j,q=0){return null!=q&&q>0||null==q&&this.delay>0?super.requestAsyncId(x,j,q):x.flush(this)}});var ko=O(4986),hc=O(8505),Bi=O(9468),Ei=O(5363);const Ou=new E.GfV("7.3.0"),Ki="__angularfire_symbol__analyticsIsSupportedValue",us="__angularfire_symbol__analyticsIsSupported",Es="__angularfire_symbol__remoteConfigIsSupportedValue",ro="__angularfire_symbol__remoteConfigIsSupported",bt="__angularfire_symbol__messagingIsSupportedValue",vo="__angularfire_symbol__messagingIsSupported";function cs(C,x,j){if(x){if(1===x.length)return x[0];const Pe=x.filter(ct=>ct.app===j);if(1===Pe.length)return Pe[0]}return j.container.getProvider(C).getImmediate({optional:!0})}globalThis[us]||(globalThis[us]=sa().then(C=>globalThis[Ki]=C).catch(()=>globalThis[Ki]=!1)),globalThis[vo]||(globalThis[vo]=Ca().then(C=>globalThis[bt]=C).catch(()=>globalThis[bt]=!1)),globalThis[ro]||(globalThis[ro]=ms().then(C=>globalThis[Es]=C).catch(()=>globalThis[Es]=!1));const Ul=(C,x)=>{const j=x?[x]:(0,F.C6)(),q=[];return j.forEach(Ce=>{Ce.container.getProvider(C).instances.forEach(ct=>{q.includes(ct)||q.push(ct)})}),q};function qi(){}class ku{constructor(x,j=_s){this.zone=x,this.delegate=j}now(){return this.delegate.now()}schedule(x,j,q){const Ce=this.zone;return this.delegate.schedule(function(ct){Ce.runGuarded(()=>{x.apply(this,[ct])})},j,q)}}class _o{constructor(x){this.zone=x,this.task=null}call(x,j){const q=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",qi,{},qi,qi)),j.pipe((0,hc.b)({next:q,complete:q,error:q})).subscribe(x).add(q)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let fc=(()=>{class C{constructor(j){this.ngZone=j,this.outsideAngular=j.runOutsideAngular(()=>new ku(Zone.current)),this.insideAngular=j.run(()=>new ku(Zone.current,ko.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(j){return new(j||C)(E.LFG(E.R0b))},C.\u0275prov=E.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function ls(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function Gc(C){return ls(),function ca(C){return function(j){return(j=j.lift(new _o(C.ngZone))).pipe((0,Bi.R)(C.outsideAngular),(0,Ei.Q)(C.insideAngular))}}(ls())(C)}},2090:(_t,Me,O)=>{O.d(Me,{$s:()=>qt,BH:()=>ht,G6:()=>Ye,L:()=>_e,LL:()=>xe,Mn:()=>We,Sg:()=>Ge,UG:()=>Ne,US:()=>ge,ZB:()=>J,ZR:()=>Oe,b$:()=>vt,d:()=>ne,eu:()=>ke,hl:()=>re,jU:()=>Ke,m9:()=>_n,ne:()=>Tn,pd:()=>rr,r3:()=>Ht,ru:()=>yt,tV:()=>Te,uI:()=>lt,vZ:()=>bn,w1:()=>$e,xO:()=>Sn,xb:()=>nn,z$:()=>Je,zI:()=>K,zd:()=>qn});const me=function(Y){const se=[];let le=0;for(let Qe=0;Qe<Y.length;Qe++){let te=Y.charCodeAt(Qe);te<128?se[le++]=te:te<2048?(se[le++]=te>>6|192,se[le++]=63&te|128):55296==(64512&te)&&Qe+1<Y.length&&56320==(64512&Y.charCodeAt(Qe+1))?(te=65536+((1023&te)<<10)+(1023&Y.charCodeAt(++Qe)),se[le++]=te>>18|240,se[le++]=te>>12&63|128,se[le++]=te>>6&63|128,se[le++]=63&te|128):(se[le++]=te>>12|224,se[le++]=te>>6&63|128,se[le++]=63&te|128)}return se},ge={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Y,se){if(!Array.isArray(Y))throw Error("encodeByteArray takes an array as a parameter");this.init_();const le=se?this.byteToCharMapWebSafe_:this.byteToCharMap_,Qe=[];for(let te=0;te<Y.length;te+=3){const De=Y[te],nt=te+1<Y.length,Ct=nt?Y[te+1]:0,At=te+2<Y.length,Gt=At?Y[te+2]:0;let fr=(15&Ct)<<2|Gt>>6,_r=63&Gt;At||(_r=64,nt||(fr=64)),Qe.push(le[De>>2],le[(3&De)<<4|Ct>>4],le[fr],le[_r])}return Qe.join("")},encodeString(Y,se){return this.HAS_NATIVE_SUPPORT&&!se?btoa(Y):this.encodeByteArray(me(Y),se)},decodeString(Y,se){return this.HAS_NATIVE_SUPPORT&&!se?atob(Y):function(Y){const se=[];let le=0,Qe=0;for(;le<Y.length;){const te=Y[le++];if(te<128)se[Qe++]=String.fromCharCode(te);else if(te>191&&te<224){const De=Y[le++];se[Qe++]=String.fromCharCode((31&te)<<6|63&De)}else if(te>239&&te<365){const At=((7&te)<<18|(63&Y[le++])<<12|(63&Y[le++])<<6|63&Y[le++])-65536;se[Qe++]=String.fromCharCode(55296+(At>>10)),se[Qe++]=String.fromCharCode(56320+(1023&At))}else{const De=Y[le++],nt=Y[le++];se[Qe++]=String.fromCharCode((15&te)<<12|(63&De)<<6|63&nt)}}return se.join("")}(this.decodeStringToByteArray(Y,se))},decodeStringToByteArray(Y,se){this.init_();const le=se?this.charToByteMapWebSafe_:this.charToByteMap_,Qe=[];for(let te=0;te<Y.length;){const De=le[Y.charAt(te++)],Ct=te<Y.length?le[Y.charAt(te)]:0;++te;const Gt=te<Y.length?le[Y.charAt(te)]:64;++te;const zt=te<Y.length?le[Y.charAt(te)]:64;if(++te,null==De||null==Ct||null==Gt||null==zt)throw Error();Qe.push(De<<2|Ct>>4),64!==Gt&&(Qe.push(Ct<<4&240|Gt>>2),64!==zt&&Qe.push(Gt<<6&192|zt))}return Qe},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Y=0;Y<this.ENCODED_VALS.length;Y++)this.byteToCharMap_[Y]=this.ENCODED_VALS.charAt(Y),this.charToByteMap_[this.byteToCharMap_[Y]]=Y,this.byteToCharMapWebSafe_[Y]=this.ENCODED_VALS_WEBSAFE.charAt(Y),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Y]]=Y,Y>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Y)]=Y,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Y)]=Y)}}},_e=function(Y){return function(Y){const se=me(Y);return ge.encodeByteArray(se,!0)}(Y).replace(/\./g,"")},Te=function(Y){try{return ge.decodeString(Y,!0)}catch(se){console.error("base64Decode failed: ",se)}return null};function J(Y,se){if(!(se instanceof Object))return se;switch(se.constructor){case Date:return new Date(se.getTime());case Object:void 0===Y&&(Y={});break;case Array:Y=[];break;default:return se}for(const le in se)!se.hasOwnProperty(le)||!we(le)||(Y[le]=J(Y[le],se[le]));return Y}function we(Y){return"__proto__"!==Y}class ht{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((se,le)=>{this.resolve=se,this.reject=le})}wrapCallback(se){return(le,Qe)=>{le?this.reject(le):this.resolve(Qe),"function"==typeof se&&(this.promise.catch(()=>{}),1===se.length?se(le):se(le,Qe))}}}function Ge(Y,se){if(Y.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Qe=se||"demo-project",te=Y.iat||0,De=Y.sub||Y.user_id;if(!De)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const nt=Object.assign({iss:`https://securetoken.google.com/${Qe}`,aud:Qe,iat:te,exp:te+3600,auth_time:te,sub:De,user_id:De,firebase:{sign_in_provider:"custom",identities:{}}},Y);return[_e(JSON.stringify({alg:"none",type:"JWT"})),_e(JSON.stringify(nt)),""].join(".")}function Je(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function lt(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Je())}function Ne(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Y){return!1}}function Ke(){return"object"==typeof self&&self.self===self}function yt(){const Y="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Y&&void 0!==Y.id}function vt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ne(){return Je().indexOf("Electron/")>=0}function $e(){const Y=Je();return Y.indexOf("MSIE ")>=0||Y.indexOf("Trident/")>=0}function We(){return Je().indexOf("MSAppHost/")>=0}function Ye(){return!Ne()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function re(){return"object"==typeof indexedDB}function ke(){return new Promise((Y,se)=>{try{let le=!0;const Qe="validate-browser-context-for-indexeddb-analytics-module",te=self.indexedDB.open(Qe);te.onsuccess=()=>{te.result.close(),le||self.indexedDB.deleteDatabase(Qe),Y(!0)},te.onupgradeneeded=()=>{le=!1},te.onerror=()=>{var De;se((null===(De=te.error)||void 0===De?void 0:De.message)||"")}}catch(le){se(le)}})}function K(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Oe extends Error{constructor(se,le,Qe){super(le),this.code=se,this.customData=Qe,this.name="FirebaseError",Object.setPrototypeOf(this,Oe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xe.prototype.create)}}class xe{constructor(se,le,Qe){this.service=se,this.serviceName=le,this.errors=Qe}create(se,...le){const Qe=le[0]||{},te=`${this.service}/${se}`,De=this.errors[se],nt=De?function it(Y,se){return Y.replace(ft,(le,Qe)=>{const te=se[Qe];return null!=te?String(te):`<${Qe}?>`})}(De,Qe):"Error";return new Oe(te,`${this.serviceName}: ${nt} (${te}).`,Qe)}}const ft=/\{\$([^}]+)}/g;function Ht(Y,se){return Object.prototype.hasOwnProperty.call(Y,se)}function nn(Y){for(const se in Y)if(Object.prototype.hasOwnProperty.call(Y,se))return!1;return!0}function bn(Y,se){if(Y===se)return!0;const le=Object.keys(Y),Qe=Object.keys(se);for(const te of le){if(!Qe.includes(te))return!1;const De=Y[te],nt=se[te];if(Gn(De)&&Gn(nt)){if(!bn(De,nt))return!1}else if(De!==nt)return!1}for(const te of Qe)if(!le.includes(te))return!1;return!0}function Gn(Y){return null!==Y&&"object"==typeof Y}function Sn(Y){const se=[];for(const[le,Qe]of Object.entries(Y))Array.isArray(Qe)?Qe.forEach(te=>{se.push(encodeURIComponent(le)+"="+encodeURIComponent(te))}):se.push(encodeURIComponent(le)+"="+encodeURIComponent(Qe));return se.length?"&"+se.join("&"):""}function qn(Y){const se={};return Y.replace(/^\?/,"").split("&").forEach(Qe=>{if(Qe){const[te,De]=Qe.split("=");se[decodeURIComponent(te)]=decodeURIComponent(De)}}),se}function rr(Y){const se=Y.indexOf("?");if(!se)return"";const le=Y.indexOf("#",se);return Y.substring(se,le>0?le:void 0)}function Tn(Y,se){const le=new Ut(Y,se);return le.subscribe.bind(le)}class Ut{constructor(se,le){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=le,this.task.then(()=>{se(this)}).catch(Qe=>{this.error(Qe)})}next(se){this.forEachObserver(le=>{le.next(se)})}error(se){this.forEachObserver(le=>{le.error(se)}),this.close(se)}complete(){this.forEachObserver(se=>{se.complete()}),this.close()}subscribe(se,le,Qe){let te;if(void 0===se&&void 0===le&&void 0===Qe)throw new Error("Missing Observer.");te=function wn(Y,se){if("object"!=typeof Y||null===Y)return!1;for(const le of se)if(le in Y&&"function"==typeof Y[le])return!0;return!1}(se,["next","error","complete"])?se:{next:se,error:le,complete:Qe},void 0===te.next&&(te.next=vn),void 0===te.error&&(te.error=vn),void 0===te.complete&&(te.complete=vn);const De=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?te.error(this.finalError):te.complete()}catch(nt){}}),this.observers.push(te),De}unsubscribeOne(se){void 0===this.observers||void 0===this.observers[se]||(delete this.observers[se],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(se){if(!this.finalized)for(let le=0;le<this.observers.length;le++)this.sendOne(le,se)}sendOne(se,le){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[se])try{le(this.observers[se])}catch(Qe){"undefined"!=typeof console&&console.error&&console.error(Qe)}})}close(se){this.finalized||(this.finalized=!0,void 0!==se&&(this.finalError=se),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vn(){}function qt(Y,se=1e3,le=2){const Qe=se*Math.pow(le,Y),te=Math.round(.5*Qe*(Math.random()-.5)*2);return Math.min(144e5,Qe+te)}function _n(Y){return Y&&Y._delegate?Y._delegate:Y}},7556:(_t,Me,O)=>{O.d(Me,{e:()=>me});var E=O(5e3),F=O(1205),G=O(3809);let me=(()=>{class fe{constructor(Ie,_e){this.a=Ie,this.router=_e,this.boolean=!1}login(Ie,_e){return new Promise((Te,ie)=>{this.a.signInWithEmailAndPassword(Ie,_e).then(J=>{var we;this.data=null===(we=J.user)||void 0===we?void 0:we.email,Te(J)}).catch(J=>ie(J))})}verificar(){return new Promise((Ie,_e)=>{this.a.onAuthStateChanged(Te=>{Ie(Te)})})}deslogear(){this.a.signOut().then(Ie=>{this.boolean=!1,localStorage.removeItem("usuario"),this.router.navigate([""])}).catch(Ie=>{alert("No se pudo deslogear")})}crearUsuario(Ie,_e){return new Promise((Te,ie)=>{this.a.createUserWithEmailAndPassword(Ie,_e).then(J=>{Te(J)}).catch(J=>ie(J))})}}return fe.\u0275fac=function(Ie){return new(Ie||fe)(E.LFG(F.zQ),E.LFG(G.F0))},fe.\u0275prov=E.Yz7({token:fe,factory:fe.\u0275fac,providedIn:"root"}),fe})()},4736:(_t,Me,O)=>{var E=O(9808),F=O(5e3);class G extends E.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class me extends G{static makeCurrent(){(0,E.HT)(new me)}onAndCancel(ee,W,be){return ee.addEventListener(W,be,!1),()=>{ee.removeEventListener(W,be,!1)}}dispatchEvent(ee,W){ee.dispatchEvent(W)}remove(ee){ee.parentNode&&ee.parentNode.removeChild(ee)}createElement(ee,W){return(W=W||this.getDefaultDocument()).createElement(ee)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ee){return ee.nodeType===Node.ELEMENT_NODE}isShadowRoot(ee){return ee instanceof DocumentFragment}getGlobalEventTarget(ee,W){return"window"===W?window:"document"===W?ee:"body"===W?ee.body:null}getBaseHref(ee){const W=function ge(){return fe=fe||document.querySelector("base"),fe?fe.getAttribute("href"):null}();return null==W?null:function _e(X){Ie=Ie||document.createElement("a"),Ie.setAttribute("href",X);const ee=Ie.pathname;return"/"===ee.charAt(0)?ee:`/${ee}`}(W)}resetBaseElement(){fe=null}getUserAgent(){return window.navigator.userAgent}getCookie(ee){return(0,E.Mx)(document.cookie,ee)}}let Ie,fe=null;const Te=new F.OlP("TRANSITION_ID"),J=[{provide:F.ip1,useFactory:function ie(X,ee,W){return()=>{W.get(F.CZH).donePromise.then(()=>{const be=(0,E.q)(),je=ee.querySelectorAll(`style[ng-transition="${X}"]`);for(let St=0;St<je.length;St++)be.remove(je[St])})}},deps:[Te,E.K0,F.zs3],multi:!0}];class we{static init(){(0,F.VLi)(new we)}addToWindow(ee){F.dqk.getAngularTestability=(be,je=!0)=>{const St=ee.findTestabilityInTree(be,je);if(null==St)throw new Error("Could not find testability for element.");return St},F.dqk.getAllAngularTestabilities=()=>ee.getAllTestabilities(),F.dqk.getAllAngularRootElements=()=>ee.getAllRootElements(),F.dqk.frameworkStabilizers||(F.dqk.frameworkStabilizers=[]),F.dqk.frameworkStabilizers.push(be=>{const je=F.dqk.getAllAngularTestabilities();let St=je.length,En=!1;const Bn=function(jn){En=En||jn,St--,0==St&&be(En)};je.forEach(function(jn){jn.whenStable(Bn)})})}findTestabilityInTree(ee,W,be){if(null==W)return null;const je=ee.getTestability(W);return null!=je?je:be?(0,E.q)().isShadowRoot(W)?this.findTestabilityInTree(ee,W.host,!0):this.findTestabilityInTree(ee,W.parentElement,!0):null}}let ht=(()=>{class X{build(){return new XMLHttpRequest}}return X.\u0275fac=function(W){return new(W||X)},X.\u0275prov=F.Yz7({token:X,factory:X.\u0275fac}),X})();const Ge=new F.OlP("EventManagerPlugins");let Je=(()=>{class X{constructor(W,be){this._zone=be,this._eventNameToPlugin=new Map,W.forEach(je=>je.manager=this),this._plugins=W.slice().reverse()}addEventListener(W,be,je){return this._findPluginFor(be).addEventListener(W,be,je)}addGlobalEventListener(W,be,je){return this._findPluginFor(be).addGlobalEventListener(W,be,je)}getZone(){return this._zone}_findPluginFor(W){const be=this._eventNameToPlugin.get(W);if(be)return be;const je=this._plugins;for(let St=0;St<je.length;St++){const En=je[St];if(En.supports(W))return this._eventNameToPlugin.set(W,En),En}throw new Error(`No event manager plugin found for event ${W}`)}}return X.\u0275fac=function(W){return new(W||X)(F.LFG(Ge),F.LFG(F.R0b))},X.\u0275prov=F.Yz7({token:X,factory:X.\u0275fac}),X})();class lt{constructor(ee){this._doc=ee}addGlobalEventListener(ee,W,be){const je=(0,E.q)().getGlobalEventTarget(this._doc,ee);if(!je)throw new Error(`Unsupported event target ${je} for event ${W}`);return this.addEventListener(je,W,be)}}let Ne=(()=>{class X{constructor(){this._stylesSet=new Set}addStyles(W){const be=new Set;W.forEach(je=>{this._stylesSet.has(je)||(this._stylesSet.add(je),be.add(je))}),this.onStylesAdded(be)}onStylesAdded(W){}getAllStyles(){return Array.from(this._stylesSet)}}return X.\u0275fac=function(W){return new(W||X)},X.\u0275prov=F.Yz7({token:X,factory:X.\u0275fac}),X})(),Ke=(()=>{class X extends Ne{constructor(W){super(),this._doc=W,this._hostNodes=new Map,this._hostNodes.set(W.head,[])}_addStylesToHost(W,be,je){W.forEach(St=>{const En=this._doc.createElement("style");En.textContent=St,je.push(be.appendChild(En))})}addHost(W){const be=[];this._addStylesToHost(this._stylesSet,W,be),this._hostNodes.set(W,be)}removeHost(W){const be=this._hostNodes.get(W);be&&be.forEach(yt),this._hostNodes.delete(W)}onStylesAdded(W){this._hostNodes.forEach((be,je)=>{this._addStylesToHost(W,je,be)})}ngOnDestroy(){this._hostNodes.forEach(W=>W.forEach(yt))}}return X.\u0275fac=function(W){return new(W||X)(F.LFG(E.K0))},X.\u0275prov=F.Yz7({token:X,factory:X.\u0275fac}),X})();function yt(X){(0,E.q)().remove(X)}const vt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ne=/%COMP%/g;function K(X,ee,W){for(let be=0;be<ee.length;be++){let je=ee[be];Array.isArray(je)?K(X,je,W):(je=je.replace(ne,X),W.push(je))}return W}function Ee(X){return ee=>{if("__ngUnwrap__"===ee)return X;!1===X(ee)&&(ee.preventDefault(),ee.returnValue=!1)}}let Oe=(()=>{class X{constructor(W,be,je){this.eventManager=W,this.sharedStylesHost=be,this.appId=je,this.rendererByCompId=new Map,this.defaultRenderer=new xe(W)}createRenderer(W,be){if(!W||!be)return this.defaultRenderer;switch(be.encapsulation){case F.ifc.Emulated:{let je=this.rendererByCompId.get(be.id);return je||(je=new pt(this.eventManager,this.sharedStylesHost,be,this.appId),this.rendererByCompId.set(be.id,je)),je.applyToHost(W),je}case 1:case F.ifc.ShadowDom:return new Mt(this.eventManager,this.sharedStylesHost,W,be);default:if(!this.rendererByCompId.has(be.id)){const je=K(be.id,be.styles,[]);this.sharedStylesHost.addStyles(je),this.rendererByCompId.set(be.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return X.\u0275fac=function(W){return new(W||X)(F.LFG(Je),F.LFG(Ke),F.LFG(F.AFp))},X.\u0275prov=F.Yz7({token:X,factory:X.\u0275fac}),X})();class xe{constructor(ee){this.eventManager=ee,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(ee,W){return W?document.createElementNS(vt[W]||W,ee):document.createElement(ee)}createComment(ee){return document.createComment(ee)}createText(ee){return document.createTextNode(ee)}appendChild(ee,W){ee.appendChild(W)}insertBefore(ee,W,be){ee&&ee.insertBefore(W,be)}removeChild(ee,W){ee&&ee.removeChild(W)}selectRootElement(ee,W){let be="string"==typeof ee?document.querySelector(ee):ee;if(!be)throw new Error(`The selector "${ee}" did not match any elements`);return W||(be.textContent=""),be}parentNode(ee){return ee.parentNode}nextSibling(ee){return ee.nextSibling}setAttribute(ee,W,be,je){if(je){W=je+":"+W;const St=vt[je];St?ee.setAttributeNS(St,W,be):ee.setAttribute(W,be)}else ee.setAttribute(W,be)}removeAttribute(ee,W,be){if(be){const je=vt[be];je?ee.removeAttributeNS(je,W):ee.removeAttribute(`${be}:${W}`)}else ee.removeAttribute(W)}addClass(ee,W){ee.classList.add(W)}removeClass(ee,W){ee.classList.remove(W)}setStyle(ee,W,be,je){je&(F.JOm.DashCase|F.JOm.Important)?ee.style.setProperty(W,be,je&F.JOm.Important?"important":""):ee.style[W]=be}removeStyle(ee,W,be){be&F.JOm.DashCase?ee.style.removeProperty(W):ee.style[W]=""}setProperty(ee,W,be){ee[W]=be}setValue(ee,W){ee.nodeValue=W}listen(ee,W,be){return"string"==typeof ee?this.eventManager.addGlobalEventListener(ee,W,Ee(be)):this.eventManager.addEventListener(ee,W,Ee(be))}}class pt extends xe{constructor(ee,W,be,je){super(ee),this.component=be;const St=K(je+"-"+be.id,be.styles,[]);W.addStyles(St),this.contentAttr=function re(X){return"_ngcontent-%COMP%".replace(ne,X)}(je+"-"+be.id),this.hostAttr=function ke(X){return"_nghost-%COMP%".replace(ne,X)}(je+"-"+be.id)}applyToHost(ee){super.setAttribute(ee,this.hostAttr,"")}createElement(ee,W){const be=super.createElement(ee,W);return super.setAttribute(be,this.contentAttr,""),be}}class Mt extends xe{constructor(ee,W,be,je){super(ee),this.sharedStylesHost=W,this.hostEl=be,this.shadowRoot=be.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const St=K(je.id,je.styles,[]);for(let En=0;En<St.length;En++){const Bn=document.createElement("style");Bn.textContent=St[En],this.shadowRoot.appendChild(Bn)}}nodeOrShadowRoot(ee){return ee===this.hostEl?this.shadowRoot:ee}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(ee,W){return super.appendChild(this.nodeOrShadowRoot(ee),W)}insertBefore(ee,W,be){return super.insertBefore(this.nodeOrShadowRoot(ee),W,be)}removeChild(ee,W){return super.removeChild(this.nodeOrShadowRoot(ee),W)}parentNode(ee){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ee)))}}let at=(()=>{class X extends lt{constructor(W){super(W)}supports(W){return!0}addEventListener(W,be,je){return W.addEventListener(be,je,!1),()=>this.removeEventListener(W,be,je)}removeEventListener(W,be,je){return W.removeEventListener(be,je)}}return X.\u0275fac=function(W){return new(W||X)(F.LFG(E.K0))},X.\u0275prov=F.Yz7({token:X,factory:X.\u0275fac}),X})();const en=["alt","control","meta","shift"],jt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},wt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ht={alt:X=>X.altKey,control:X=>X.ctrlKey,meta:X=>X.metaKey,shift:X=>X.shiftKey};let Zt=(()=>{class X extends lt{constructor(W){super(W)}supports(W){return null!=X.parseEventName(W)}addEventListener(W,be,je){const St=X.parseEventName(be),En=X.eventCallback(St.fullKey,je,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,E.q)().onAndCancel(W,St.domEventName,En))}static parseEventName(W){const be=W.toLowerCase().split("."),je=be.shift();if(0===be.length||"keydown"!==je&&"keyup"!==je)return null;const St=X._normalizeKey(be.pop());let En="";if(en.forEach(jn=>{const ei=be.indexOf(jn);ei>-1&&(be.splice(ei,1),En+=jn+".")}),En+=St,0!=be.length||0===St.length)return null;const Bn={};return Bn.domEventName=je,Bn.fullKey=En,Bn}static getEventFullKey(W){let be="",je=function nn(X){let ee=X.key;if(null==ee){if(ee=X.keyIdentifier,null==ee)return"Unidentified";ee.startsWith("U+")&&(ee=String.fromCharCode(parseInt(ee.substring(2),16)),3===X.location&&wt.hasOwnProperty(ee)&&(ee=wt[ee]))}return jt[ee]||ee}(W);return je=je.toLowerCase()," "===je?je="space":"."===je&&(je="dot"),en.forEach(St=>{St!=je&&Ht[St](W)&&(be+=St+".")}),be+=je,be}static eventCallback(W,be,je){return St=>{X.getEventFullKey(St)===W&&je.runGuarded(()=>be(St))}}static _normalizeKey(W){return"esc"===W?"escape":W}}return X.\u0275fac=function(W){return new(W||X)(F.LFG(E.K0))},X.\u0275prov=F.Yz7({token:X,factory:X.\u0275fac}),X})();const qn=(0,F.eFA)(F._c5,"browser",[{provide:F.Lbi,useValue:E.bD},{provide:F.g9A,useValue:function Fn(){me.makeCurrent(),we.init()},multi:!0},{provide:E.K0,useFactory:function Gn(){return(0,F.RDi)(document),document},deps:[]}]),rr=[{provide:F.zSh,useValue:"root"},{provide:F.qLn,useFactory:function bn(){return new F.qLn},deps:[]},{provide:Ge,useClass:at,multi:!0,deps:[E.K0,F.R0b,F.Lbi]},{provide:Ge,useClass:Zt,multi:!0,deps:[E.K0]},{provide:Oe,useClass:Oe,deps:[Je,Ke,F.AFp]},{provide:F.FYo,useExisting:Oe},{provide:Ne,useExisting:Ke},{provide:Ke,useClass:Ke,deps:[E.K0]},{provide:F.dDg,useClass:F.dDg,deps:[F.R0b]},{provide:Je,useClass:Je,deps:[Ge,F.R0b]},{provide:E.JF,useClass:ht,deps:[]}];let Zn=(()=>{class X{constructor(W){if(W)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(W){return{ngModule:X,providers:[{provide:F.AFp,useValue:W.appId},{provide:Te,useExisting:F.AFp},J]}}}return X.\u0275fac=function(W){return new(W||X)(F.LFG(X,12))},X.\u0275mod=F.oAB({type:X}),X.\u0275inj=F.cJS({providers:rr,imports:[E.ez,F.hGG]}),X})();"undefined"!=typeof window&&window;var pr=O(3809),kr=O(520);let an=(()=>{class X{constructor(W){this.http=W,this.url="https://api.github.com/users/cratos300"}obtenergit(){return this.http.get(this.url)}}return X.\u0275fac=function(W){return new(W||X)(F.LFG(kr.eN))},X.\u0275prov=F.Yz7({token:X,factory:X.\u0275fac,providedIn:"root"}),X})();var Mn=O(7556);function Er(X,ee){if(1&X&&F._UZ(0,"img",3),2&X){const W=F.oxw();F.Q6J("src",W.imgurl,F.LSH)}}let wr=(()=>{class X{constructor(W,be){this.httpgit=W,this.auth=be,this.imgurl="",this.nombre="",W.obtenergit().subscribe(je=>{this.imgurl=je.avatar_url,this.nombre=je.login}),be.verificar()}ngOnInit(){}}return X.\u0275fac=function(W){return new(W||X)(F.Y36(an),F.Y36(Mn.e))},X.\u0275cmp=F.Xpm({type:X,selectors:[["app-bienvenido"]],decls:6,vars:2,consts:[[1,"divgeneral","d-flex","justify-content-center","align-items-center"],["width","300px","alt","",3,"src",4,"ngIf"],[1,"d-flex","justify-content-center","align-items-center"],["width","300px","alt","",3,"src"]],template:function(W,be){1&W&&(F.TgZ(0,"div",0)(1,"div"),F.YNc(2,Er,1,1,"img",1),F.TgZ(3,"div",2)(4,"h2"),F._uU(5),F.qZA()()()()),2&W&&(F.xp6(2),F.Q6J("ngIf",null!=be.imgurl),F.xp6(3),F.Oqu(be.nombre))},directives:[E.O5],styles:[".divgeneral[_ngcontent-%COMP%]{min-height:75vh}h2[_ngcontent-%COMP%]{margin:auto}"]}),X})(),Jn=(()=>{class X{constructor(){this.logeado=!1,this.listo=!1}}return X.\u0275fac=function(W){return new(W||X)},X.\u0275prov=F.Yz7({token:X,factory:X.\u0275fac,providedIn:"root"}),X})(),br=(()=>{class X{constructor(W,be,je){this.auth=W,this.router=be,this.verificar=je}canActivate(W,be){return this.auth.verificar().then(je=>null!=je?(this.verificar.logeado=!0,this.verificar.listo=!0,!0):(this.router.navigateByUrl("/ingreso/login"),!1))}}return X.\u0275fac=function(W){return new(W||X)(F.LFG(Mn.e),F.LFG(pr.F0),F.LFG(Jn))},X.\u0275prov=F.Yz7({token:X,factory:X.\u0275fac,providedIn:"root"}),X})(),Yi=(()=>{class X{constructor(W,be,je){this.auth=W,this.router=be,this.verificar=je}canActivate(W,be){return this.auth.verificar().then(je=>null==je?(this.verificar.listo=!0,!0):(this.router.navigateByUrl("/home"),!1))}}return X.\u0275fac=function(W){return new(W||X)(F.LFG(Mn.e),F.LFG(pr.F0),F.LFG(Jn))},X.\u0275prov=F.Yz7({token:X,factory:X.\u0275fac,providedIn:"root"}),X})();const Lr=[{path:"",redirectTo:"bienvenido",pathMatch:"full"},{path:"home",component:(()=>{class X{constructor(){}ngOnInit(){}}return X.\u0275fac=function(W){return new(W||X)},X.\u0275cmp=F.Xpm({type:X,selectors:[["app-home"]],decls:1,vars:0,consts:[["id","principal"]],template:function(W,be){1&W&&F._UZ(0,"div",0)},styles:["#principal[_ngcontent-%COMP%]{min-height:78vh;background-color:#faebd7}"]}),X})(),canActivate:[br]},{path:"bienvenido",component:wr,canActivate:[Yi]},{path:"ingreso",loadChildren:()=>Promise.all([O.e(548),O.e(544)]).then(O.bind(O,7544)).then(X=>X.IngresoModule),canActivate:[Yi]},{path:"altaRepartidor",loadChildren:()=>Promise.all([O.e(548),O.e(309)]).then(O.bind(O,7309)).then(X=>X.AltaRepartidorModule),canActivate:[br]}];let Ar=(()=>{class X{}return X.\u0275fac=function(W){return new(W||X)},X.\u0275mod=F.oAB({type:X}),X.\u0275inj=F.cJS({imports:[[pr.Bz.forRoot(Lr)],pr.Bz]}),X})();const ur=function(){return["/ingreso/login"]};function Fr(X,ee){1&X&&(F.TgZ(0,"a",11),F._uU(1,"Login "),F.TgZ(2,"span",12),F._uU(3,"(current)"),F.qZA()()),2&X&&F.Q6J("routerLink",F.DdM(1,ur))}const Tr=function(){return["/ingreso/registrar"]};function It(X,ee){1&X&&(F.TgZ(0,"a",11),F._uU(1,"Registro"),F.qZA()),2&X&&F.Q6J("routerLink",F.DdM(1,Tr))}const Dt=function(){return["/altaRepartidor"]};function tn(X,ee){1&X&&(F.TgZ(0,"a",11),F._uU(1,"Alta Repartidor"),F.qZA()),2&X&&F.Q6J("routerLink",F.DdM(1,Dt))}function cr(X,ee){1&X&&(F.TgZ(0,"a",13),F._uU(1,"Informaci\xf3n"),F.qZA())}function Ur(X,ee){if(1&X){const W=F.EpF();F.TgZ(0,"a",14),F.NdJ("click",function(){return F.CHM(W),F.oxw(2).cerrar()}),F._uU(1,"LogOut"),F.qZA()}}function er(X,ee){if(1&X&&(F.TgZ(0,"nav",1)(1,"a",2),F._uU(2,"Vilar Hern\xe1n"),F.qZA(),F.TgZ(3,"button",3),F._UZ(4,"span",4),F.qZA(),F.TgZ(5,"div",5),F._UZ(6,"span",6),F.TgZ(7,"div",7),F.YNc(8,Fr,4,2,"a",8),F.YNc(9,It,2,2,"a",8),F.YNc(10,tn,2,2,"a",8),F.YNc(11,cr,2,0,"a",9),F.YNc(12,Ur,2,0,"a",10),F.qZA()()()),2&X){const W=F.oxw();F.xp6(8),F.Q6J("ngIf",1!=W.verificar.logeado),F.xp6(1),F.Q6J("ngIf",1!=W.verificar.logeado),F.xp6(1),F.Q6J("ngIf",1==W.verificar.logeado),F.xp6(1),F.Q6J("ngIf",1==W.verificar.logeado),F.xp6(1),F.Q6J("ngIf",1==W.verificar.logeado)}}let Jr=(()=>{class X{constructor(W,be,je){this.auth=W,this.router=be,this.verificar=je}ngOnInit(){}cerrar(){this.auth.deslogear(),this.verificar.logeado=!1,this.router.navigateByUrl("/ingreso/login")}}return X.\u0275fac=function(W){return new(W||X)(F.Y36(Mn.e),F.Y36(pr.F0),F.Y36(Jn))},X.\u0275cmp=F.Xpm({type:X,selectors:[["app-navbar"]],decls:1,vars:1,consts:[["class","navbar navbar-expand-lg navbar-light bg-dark",4,"ngIf"],[1,"navbar","navbar-expand-lg","navbar-light","bg-dark"],["id","pepe",1,"navbar-brand"],["id","blanquito","type","button","data-toggle","collapse","data-target","#navbarText","aria-controls","navbarText","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarText",1,"collapse","navbar-collapse"],[1,"navbar-nav","mr-auto"],["id","navbarText",1,"navbar-nav"],["class","navbar-brand esa","id","pepe",3,"routerLink",4,"ngIf"],["class","navbar-brand esa","id","pepe",4,"ngIf"],["class","navbar-brand esa","id","pepe",3,"click",4,"ngIf"],["id","pepe",1,"navbar-brand","esa",3,"routerLink"],[1,"sr-only"],["id","pepe",1,"navbar-brand","esa"],["id","pepe",1,"navbar-brand","esa",3,"click"]],template:function(W,be){1&W&&F.YNc(0,er,13,5,"nav",0),2&W&&F.Q6J("ngIf",1==be.verificar.listo)},directives:[E.O5,pr.yS],styles:["#pepe[_ngcontent-%COMP%]{color:#fff}nav[_ngcontent-%COMP%]{margin-bottom:0%;margin-top:0%;padding-top:0%;padding-bottom:0%;min-height:44px}#navbarText[_ngcontent-%COMP%]{min-height:100%}#blanquito[_ngcontent-%COMP%]{background-color:#fff}a[_ngcontent-%COMP%]{font-size:22px;font-family:Lucida Sans,Lucida Sans Regular,Lucida Grande,Lucida Sans Unicode,Geneva,Verdana,sans-serif}a[_ngcontent-%COMP%]:hover{background-color:gray}.esa[_ngcontent-%COMP%]{cursor:pointer;min-width:90px;text-align:center;margin-bottom:0}.ancho[_ngcontent-%COMP%]{width:100%}"]}),X})(),Rn=(()=>{class X{constructor(){}ngOnInit(){}}return X.\u0275fac=function(W){return new(W||X)},X.\u0275cmp=F.Xpm({type:X,selectors:[["app-footer"]],decls:4,vars:0,consts:[[1,"py-5","bg-dark"],[1,"container"],[1,"m-0","text-center","text-white"]],template:function(W,be){1&W&&(F.TgZ(0,"footer",0)(1,"div",1)(2,"p",2),F._uU(3," \xa9 Vilar Hern\xe1n "),F.qZA()()())},styles:["footer[_ngcontent-%COMP%]{margin-top:auto}"]}),X})(),Xr=(()=>{class X{constructor(){this.title="Vilar.Hernan"}}return X.\u0275fac=function(W){return new(W||X)},X.\u0275cmp=F.Xpm({type:X,selectors:[["app-root"]],decls:3,vars:0,template:function(W,be){1&W&&F._UZ(0,"app-navbar")(1,"router-outlet")(2,"app-footer")},directives:[Jr,pr.lC,Rn],styles:[""]}),X})();const tr_firebaseConfig={apiKey:"AIzaSyBShmSyrPKTENw0nmR9uLXyyx20VgioCTA",authDomain:"repartidores-d1a0c.firebaseapp.com",projectId:"repartidores-d1a0c",storageBucket:"repartidores-d1a0c.appspot.com",messagingSenderId:"84055899817",appId:"1:84055899817:web:93c4fce134dd285d8b33b8"};var rn=O(2011),mi=O(1205),ki=O(7566);let Li=(()=>{class X{}return X.\u0275fac=function(W){return new(W||X)},X.\u0275mod=F.oAB({type:X,bootstrap:[Xr]}),X.\u0275inj=F.cJS({providers:[],imports:[[Zn,kr.JF,Ar,rn.hO.initializeApp(tr_firebaseConfig),mi.ww,ki.yb]]}),X})();(0,F.G48)(),qn().bootstrapModule(Li).catch(X=>console.error(X))},5867:(_t,Me,O)=>{O.d(Me,{C6:()=>E.getApps,Mq:()=>E.getApp});var E=O(9681);(0,E.registerVersion)("firebase","9.8.1","app")},127:(_t,Me,O)=>{O.d(Me,{Z:()=>E.Z});var E=O(3942);E.Z.registerVersion("firebase","9.8.1","app-compat")},7092:(_t,Me,O)=>{O.r(Me);var E=O(5861),F=O(3942),G=O(2090),me=O(9681),fe=O(655),ge=O(1877),Ie=O(4859);const Je=function ht(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},lt=function Ge(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ne=new G.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),yt=new ge.Yd("@firebase/auth");function vt(p,...l){yt.logLevel<=ge.in.ERROR&&yt.error(`Auth (${me.SDK_VERSION}): ${p}`,...l)}function ne(p,...l){throw Ye(p,...l)}function $e(p,...l){return Ye(p,...l)}function We(p,l,h){const v=Object.assign(Object.assign({},lt()),{[l]:h});return new G.LL("auth","Firebase",v).create(l,{appName:p.name})}function Be(p,l,h){if(!(l instanceof h))throw h.name!==l.constructor.name&&ne(p,"argument-error"),We(p,"argument-error",`Type of ${l.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ye(p,...l){if("string"!=typeof p){const h=l[0],v=[...l.slice(1)];return v[0]&&(v[0].appName=p.name),p._errorFactory.create(h,...v)}return Ne.create(p,...l)}function re(p,l,...h){if(!p)throw Ye(l,...h)}function ke(p){const l="INTERNAL ASSERTION FAILED: "+p;throw vt(l),new Error(l)}function K(p,l){p||ke(l)}const Ee=new Map;function oe(p){K(p instanceof Function,"Expected a class definition");let l=Ee.get(p);return l?(K(l instanceof p,"Instance stored in cache mismatched with class"),l):(l=new p,Ee.set(p,l),l)}function it(){var p;return"undefined"!=typeof self&&(null===(p=self.location)||void 0===p?void 0:p.href)||""}function ft(){return"http:"===pt()||"https:"===pt()}function pt(){var p;return"undefined"!=typeof self&&(null===(p=self.location)||void 0===p?void 0:p.protocol)||null}class en{constructor(l,h){this.shortDelay=l,this.longDelay=h,K(h>l,"Short delay should be less than long delay!"),this.isMobile=(0,G.uI)()||(0,G.b$)()}get(){return function Mt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ft()||(0,G.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Bt(p,l){K(p.emulator,"Emulator should always be set here");const{url:h}=p.emulator;return l?`${h}${l.startsWith("/")?l.slice(1):l}`:h}class jt{static initialize(l,h,v){this.fetchImpl=l,h&&(this.headersImpl=h),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void ke("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void ke("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void ke("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const wt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Ht=new en(3e4,6e4);function Zt(p,l){return p.tenantId&&!l.tenantId?Object.assign(Object.assign({},l),{tenantId:p.tenantId}):l}function nn(p,l,h,v){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,E.Z)(function*(p,l,h,v,R={}){return bn(p,R,(0,E.Z)(function*(){let H={},ye={};v&&("GET"===l?ye=v:H={body:JSON.stringify(v)});const Fe=(0,G.xO)(Object.assign({key:p.config.apiKey},ye)).slice(1),Tt=yield p._getAdditionalHeaders();return Tt["Content-Type"]="application/json",p.languageCode&&(Tt["X-Firebase-Locale"]=p.languageCode),jt.fetch()(rr(p,p.config.apiHost,h,Fe),Object.assign({method:l,headers:Tt,referrerPolicy:"no-referrer"},H))}))})).apply(this,arguments)}function bn(p,l,h){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,E.Z)(function*(p,l,h){p._canInitEmulator=!1;const v=Object.assign(Object.assign({},wt),l);try{const R=new Zn(p),H=yield Promise.race([h(),R.promise]);R.clearNetworkTimeout();const ye=yield H.json();if("needConfirmation"in ye)throw Tn(p,"account-exists-with-different-credential",ye);if(H.ok&&!("errorMessage"in ye))return ye;{const Fe=H.ok?ye.errorMessage:ye.error.message,[Tt,Ot]=Fe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Tt)throw Tn(p,"credential-already-in-use",ye);if("EMAIL_EXISTS"===Tt)throw Tn(p,"email-already-in-use",ye);const $t=v[Tt]||Tt.toLowerCase().replace(/[_\s]+/g,"-");if(Ot)throw We(p,$t,Ot);ne(p,$t)}}catch(R){if(R instanceof G.ZR)throw R;ne(p,"network-request-failed")}})).apply(this,arguments)}function Sn(p,l,h,v){return qn.apply(this,arguments)}function qn(){return(qn=(0,E.Z)(function*(p,l,h,v,R={}){const H=yield nn(p,l,h,v,R);return"mfaPendingCredential"in H&&ne(p,"multi-factor-auth-required",{_serverResponse:H}),H})).apply(this,arguments)}function rr(p,l,h,v){const R=`${l}${h}?${v}`;return p.config.emulator?Bt(p.config,R):`${p.config.apiScheme}://${R}`}class Zn{constructor(l){this.auth=l,this.timer=null,this.promise=new Promise((h,v)=>{this.timer=setTimeout(()=>v($e(this.auth,"network-request-failed")),Ht.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Tn(p,l,h){const v={appName:p.name};h.email&&(v.email=h.email),h.phoneNumber&&(v.phoneNumber=h.phoneNumber);const R=$e(p,l,v);return R.customData._tokenResponse=h,R}function Yt(){return(Yt=(0,E.Z)(function*(p,l){return nn(p,"POST","/v1/accounts:delete",l)})).apply(this,arguments)}function wn(p,l){return vn.apply(this,arguments)}function vn(){return(vn=(0,E.Z)(function*(p,l){return nn(p,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function Zr(p,l){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,E.Z)(function*(p,l){return nn(p,"POST","/v1/accounts:lookup",l)})).apply(this,arguments)}function qe(p){if(p)try{const l=new Date(Number(p));if(!isNaN(l.getTime()))return l.toUTCString()}catch(l){}}function tt(){return(tt=(0,E.Z)(function*(p,l=!1){const h=(0,G.m9)(p),v=yield h.getIdToken(l),R=et(v);re(R&&R.exp&&R.auth_time&&R.iat,h.auth,"internal-error");const H="object"==typeof R.firebase?R.firebase:void 0,ye=null==H?void 0:H.sign_in_provider;return{claims:R,token:v,authTime:qe(Se(R.auth_time)),issuedAtTime:qe(Se(R.iat)),expirationTime:qe(Se(R.exp)),signInProvider:ye||null,signInSecondFactor:(null==H?void 0:H.sign_in_second_factor)||null}})).apply(this,arguments)}function Se(p){return 1e3*Number(p)}function et(p){const[l,h,v]=p.split(".");if(void 0===l||void 0===h||void 0===v)return vt("JWT malformed, contained fewer than 3 sections"),null;try{const R=(0,G.tV)(h);return R?JSON.parse(R):(vt("Failed to decode base64 JWT payload"),null)}catch(R){return vt("Caught error parsing JWT payload as JSON",R),null}}function fn(p,l){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,E.Z)(function*(p,l,h=!1){if(h)return l;try{return yield l}catch(v){throw v instanceof G.ZR&&qt(v)&&p.auth.currentUser===p&&(yield p.auth.signOut()),v}})).apply(this,arguments)}function qt({code:p}){return"auth/user-disabled"===p||"auth/user-token-expired"===p}class hr{constructor(l){this.user=l,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(l){var h;if(l){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const R=(null!==(h=this.user.stsTokenManager.expirationTime)&&void 0!==h?h:0)-Date.now()-3e5;return Math.max(0,R)}}schedule(l=!1){var h=this;if(!this.isRunning)return;const v=this.getInterval(l);this.timerId=setTimeout((0,E.Z)(function*(){yield h.iteration()}),v)}iteration(){var l=this;return(0,E.Z)(function*(){try{yield l.user.getIdToken(!0)}catch(h){return void("auth/network-request-failed"===h.code&&l.schedule(!0))}l.schedule()})()}}class Un{constructor(l,h){this.createdAt=l,this.lastLoginAt=h,this._initializeTime()}_initializeTime(){this.lastSignInTime=qe(this.lastLoginAt),this.creationTime=qe(this.createdAt)}_copy(l){this.createdAt=l.createdAt,this.lastLoginAt=l.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function _n(p){return Y.apply(this,arguments)}function Y(){return(Y=(0,E.Z)(function*(p){var l;const h=p.auth,v=yield p.getIdToken(),R=yield fn(p,Zr(h,{idToken:v}));re(null==R?void 0:R.users.length,h,"internal-error");const H=R.users[0];p._notifyReloadListener(H);const ye=(null===(l=H.providerUserInfo)||void 0===l?void 0:l.length)?te(H.providerUserInfo):[],Fe=Qe(p.providerData,ye),$t=!!p.isAnonymous&&!(p.email&&H.passwordHash||(null==Fe?void 0:Fe.length)),Jt={uid:H.localId,displayName:H.displayName||null,photoURL:H.photoUrl||null,email:H.email||null,emailVerified:H.emailVerified||!1,phoneNumber:H.phoneNumber||null,tenantId:H.tenantId||null,providerData:Fe,metadata:new Un(H.createdAt,H.lastLoginAt),isAnonymous:$t};Object.assign(p,Jt)})).apply(this,arguments)}function le(){return(le=(0,E.Z)(function*(p){const l=(0,G.m9)(p);yield _n(l),yield l.auth._persistUserIfCurrent(l),l.auth._notifyListenersIfCurrent(l)})).apply(this,arguments)}function Qe(p,l){return[...p.filter(v=>!l.some(R=>R.providerId===v.providerId)),...l]}function te(p){return p.map(l=>{var{providerId:h}=l,v=(0,fe._T)(l,["providerId"]);return{providerId:h,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function nt(){return(nt=(0,E.Z)(function*(p,l){const h=yield bn(p,{},(0,E.Z)(function*(){const v=(0,G.xO)({grant_type:"refresh_token",refresh_token:l}).slice(1),{tokenApiHost:R,apiKey:H}=p.config,ye=rr(p,R,"/v1/token",`key=${H}`),Fe=yield p._getAdditionalHeaders();return Fe["Content-Type"]="application/x-www-form-urlencoded",jt.fetch()(ye,{method:"POST",headers:Fe,body:v})}));return{accessToken:h.access_token,expiresIn:h.expires_in,refreshToken:h.refresh_token}})).apply(this,arguments)}class Ct{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(l){re(l.idToken,"internal-error"),re(void 0!==l.idToken,"internal-error"),re(void 0!==l.refreshToken,"internal-error");const h="expiresIn"in l&&void 0!==l.expiresIn?Number(l.expiresIn):function gt(p){const l=et(p);return re(l,"internal-error"),re(void 0!==l.exp,"internal-error"),re(void 0!==l.iat,"internal-error"),Number(l.exp)-Number(l.iat)}(l.idToken);this.updateTokensAndExpiration(l.idToken,l.refreshToken,h)}getToken(l,h=!1){var v=this;return(0,E.Z)(function*(){return re(!v.accessToken||v.refreshToken,l,"user-token-expired"),h||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(l,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(l,h){var v=this;return(0,E.Z)(function*(){const{accessToken:R,refreshToken:H,expiresIn:ye}=yield function De(p,l){return nt.apply(this,arguments)}(l,h);v.updateTokensAndExpiration(R,H,Number(ye))})()}updateTokensAndExpiration(l,h,v){this.refreshToken=h||null,this.accessToken=l||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(l,h){const{refreshToken:v,accessToken:R,expirationTime:H}=h,ye=new Ct;return v&&(re("string"==typeof v,"internal-error",{appName:l}),ye.refreshToken=v),R&&(re("string"==typeof R,"internal-error",{appName:l}),ye.accessToken=R),H&&(re("number"==typeof H,"internal-error",{appName:l}),ye.expirationTime=H),ye}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(l){this.accessToken=l.accessToken,this.refreshToken=l.refreshToken,this.expirationTime=l.expirationTime}_clone(){return Object.assign(new Ct,this.toJSON())}_performRefresh(){return ke("not implemented")}}function At(p,l){re("string"==typeof p||void 0===p,"internal-error",{appName:l})}class Gt{constructor(l){var{uid:h,auth:v,stsTokenManager:R}=l,H=(0,fe._T)(l,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new hr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=h,this.auth=v,this.stsTokenManager=R,this.accessToken=R.accessToken,this.displayName=H.displayName||null,this.email=H.email||null,this.emailVerified=H.emailVerified||!1,this.phoneNumber=H.phoneNumber||null,this.photoURL=H.photoURL||null,this.isAnonymous=H.isAnonymous||!1,this.tenantId=H.tenantId||null,this.providerData=H.providerData?[...H.providerData]:[],this.metadata=new Un(H.createdAt||void 0,H.lastLoginAt||void 0)}getIdToken(l){var h=this;return(0,E.Z)(function*(){const v=yield fn(h,h.stsTokenManager.getToken(h.auth,l));return re(v,h.auth,"internal-error"),h.accessToken!==v&&(h.accessToken=v,yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)),v})()}getIdTokenResult(l){return function pe(p){return tt.apply(this,arguments)}(this,l)}reload(){return function se(p){return le.apply(this,arguments)}(this)}_assign(l){this!==l&&(re(this.uid===l.uid,this.auth,"internal-error"),this.displayName=l.displayName,this.photoURL=l.photoURL,this.email=l.email,this.emailVerified=l.emailVerified,this.phoneNumber=l.phoneNumber,this.isAnonymous=l.isAnonymous,this.tenantId=l.tenantId,this.providerData=l.providerData.map(h=>Object.assign({},h)),this.metadata._copy(l.metadata),this.stsTokenManager._assign(l.stsTokenManager))}_clone(l){return new Gt(Object.assign(Object.assign({},this),{auth:l,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(l){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=l,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(l){this.reloadListener?this.reloadListener(l):this.reloadUserInfo=l}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(l,h=!1){var v=this;return(0,E.Z)(function*(){let R=!1;l.idToken&&l.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(l),R=!0),h&&(yield _n(v)),yield v.auth._persistUserIfCurrent(v),R&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var l=this;return(0,E.Z)(function*(){const h=yield l.getIdToken();return yield fn(l,function Ut(p,l){return Yt.apply(this,arguments)}(l.auth,{idToken:h})),l.stsTokenManager.clearRefreshToken(),l.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(l=>Object.assign({},l)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(l,h){var v,R,H,ye,Fe,Tt,Ot,$t;const Jt=null!==(v=h.displayName)&&void 0!==v?v:void 0,Gr=null!==(R=h.email)&&void 0!==R?R:void 0,ws=null!==(H=h.phoneNumber)&&void 0!==H?H:void 0,Ku=null!==(ye=h.photoURL)&&void 0!==ye?ye:void 0,ed=null!==(Fe=h.tenantId)&&void 0!==Fe?Fe:void 0,ah=null!==(Tt=h._redirectEventId)&&void 0!==Tt?Tt:void 0,yu=null!==(Ot=h.createdAt)&&void 0!==Ot?Ot:void 0,rl=null!==($t=h.lastLoginAt)&&void 0!==$t?$t:void 0,{uid:il,emailVerified:uh,isAnonymous:sl,providerData:td,stsTokenManager:ch}=h;re(il&&ch,l,"internal-error");const Ff=Ct.fromJSON(this.name,ch);re("string"==typeof il,l,"internal-error"),At(Jt,l.name),At(Gr,l.name),re("boolean"==typeof uh,l,"internal-error"),re("boolean"==typeof sl,l,"internal-error"),At(ws,l.name),At(Ku,l.name),At(ed,l.name),At(ah,l.name),At(yu,l.name),At(rl,l.name);const nd=new Gt({uid:il,auth:l,email:Gr,emailVerified:uh,displayName:Jt,isAnonymous:sl,photoURL:Ku,phoneNumber:ws,tenantId:ed,stsTokenManager:Ff,createdAt:yu,lastLoginAt:rl});return td&&Array.isArray(td)&&(nd.providerData=td.map(Uf=>Object.assign({},Uf))),ah&&(nd._redirectEventId=ah),nd}static _fromIdTokenResponse(l,h,v=!1){return(0,E.Z)(function*(){const R=new Ct;R.updateFromServerResponse(h);const H=new Gt({uid:h.localId,auth:l,stsTokenManager:R,isAnonymous:v});return yield _n(H),H})()}}const zt=(()=>{class p{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,E.Z)(function*(){return!0})()}_set(h,v){var R=this;return(0,E.Z)(function*(){R.storage[h]=v})()}_get(h){var v=this;return(0,E.Z)(function*(){const R=v.storage[h];return void 0===R?null:R})()}_remove(h){var v=this;return(0,E.Z)(function*(){delete v.storage[h]})()}_addListener(h,v){}_removeListener(h,v){}}return p.type="NONE",p})();function fr(p,l,h){return`firebase:${p}:${l}:${h}`}class _r{constructor(l,h,v){this.persistence=l,this.auth=h,this.userKey=v;const{config:R,name:H}=this.auth;this.fullUserKey=fr(this.userKey,R.apiKey,H),this.fullPersistenceKey=fr("persistence",R.apiKey,H),this.boundEventHandler=h._onStorageEvent.bind(h),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(l){return this.persistence._set(this.fullUserKey,l.toJSON())}getCurrentUser(){var l=this;return(0,E.Z)(function*(){const h=yield l.persistence._get(l.fullUserKey);return h?Gt._fromJSON(l.auth,h):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(l){var h=this;return(0,E.Z)(function*(){if(h.persistence===l)return;const v=yield h.getCurrentUser();return yield h.removeCurrentUser(),h.persistence=l,v?h.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(l,h,v="authUser"){return(0,E.Z)(function*(){if(!h.length)return new _r(oe(zt),l,v);const R=(yield Promise.all(h.map(function(){var Ot=(0,E.Z)(function*($t){if(yield $t._isAvailable())return $t});return function($t){return Ot.apply(this,arguments)}}()))).filter(Ot=>Ot);let H=R[0]||oe(zt);const ye=fr(v,l.config.apiKey,l.name);let Fe=null;for(const Ot of h)try{const $t=yield Ot._get(ye);if($t){const Jt=Gt._fromJSON(l,$t);Ot!==H&&(Fe=Jt),H=Ot;break}}catch($t){}const Tt=R.filter(Ot=>Ot._shouldAllowMigration);return H._shouldAllowMigration&&Tt.length?(H=Tt[0],Fe&&(yield H._set(ye,Fe.toJSON())),yield Promise.all(h.map(function(){var Ot=(0,E.Z)(function*($t){if($t!==H)try{yield $t._remove(ye)}catch(Jt){}});return function($t){return Ot.apply(this,arguments)}}())),new _r(H,l,v)):new _r(H,l,v)})()}}function ui(p){const l=p.toLowerCase();if(l.includes("opera/")||l.includes("opr/")||l.includes("opios/"))return"Opera";if(Mn(l))return"IEMobile";if(l.includes("msie")||l.includes("trident/"))return"IE";if(l.includes("edge/"))return"Edge";if(pr(l))return"Firefox";if(l.includes("silk/"))return"Silk";if(wr(l))return"Blackberry";if(Jn(l))return"Webos";if(kr(l))return"Safari";if((l.includes("chrome/")||an(l))&&!l.includes("edge/"))return"Chrome";if(Er(l))return"Android";{const v=p.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==v?void 0:v.length))return v[1]}return"Other"}function pr(p=(0,G.z$)()){return/firefox\//i.test(p)}function kr(p=(0,G.z$)()){const l=p.toLowerCase();return l.includes("safari/")&&!l.includes("chrome/")&&!l.includes("crios/")&&!l.includes("android")}function an(p=(0,G.z$)()){return/crios\//i.test(p)}function Mn(p=(0,G.z$)()){return/iemobile/i.test(p)}function Er(p=(0,G.z$)()){return/android/i.test(p)}function wr(p=(0,G.z$)()){return/blackberry/i.test(p)}function Jn(p=(0,G.z$)()){return/webos/i.test(p)}function br(p=(0,G.z$)()){return/iphone|ipad|ipod/i.test(p)}function Ar(p=(0,G.z$)()){return br(p)||Er(p)||Jn(p)||wr(p)||/windows phone/i.test(p)||Mn(p)}function Fr(p,l=[]){let h;switch(p){case"Browser":h=ui((0,G.z$)());break;case"Worker":h=`${ui((0,G.z$)())}-${p}`;break;default:h=p}const v=l.length?l.join(","):"FirebaseCore-web";return`${h}/JsCore/${me.SDK_VERSION}/${v}`}class Tr{constructor(l){this.auth=l,this.queue=[]}pushCallback(l,h){const v=H=>new Promise((ye,Fe)=>{try{ye(l(H))}catch(Tt){Fe(Tt)}});v.onAbort=h,this.queue.push(v);const R=this.queue.length-1;return()=>{this.queue[R]=()=>Promise.resolve()}}runMiddleware(l){var h=this;return(0,E.Z)(function*(){if(h.auth.currentUser===l)return;const v=[];try{for(const R of h.queue)yield R(l),R.onAbort&&v.push(R.onAbort)}catch(R){v.reverse();for(const H of v)try{H()}catch(ye){}throw h.auth._errorFactory.create("login-blocked",{originalMessage:R.message})}})()}}class It{constructor(l,h,v){this.app=l,this.heartbeatServiceProvider=h,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tn(this),this.idTokenSubscription=new tn(this),this.beforeStateQueue=new Tr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ne,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=l.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(l,h){var v=this;return h&&(this._popupRedirectResolver=oe(h)),this._initializationPromise=this.queue((0,E.Z)(function*(){var R,H;if(!v._deleted&&(v.persistenceManager=yield _r.create(v,l),!v._deleted)){if(null===(R=v._popupRedirectResolver)||void 0===R?void 0:R._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch(ye){}yield v.initializeCurrentUser(h),v.lastNotifiedUid=(null===(H=v.currentUser)||void 0===H?void 0:H.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var l=this;return(0,E.Z)(function*(){if(l._deleted)return;const h=yield l.assertedPersistence.getCurrentUser();if(l.currentUser||h){if(l.currentUser&&h&&l.currentUser.uid===h.uid)return l._currentUser._assign(h),void(yield l.currentUser.getIdToken());yield l._updateCurrentUser(h,!0)}})()}initializeCurrentUser(l){var h=this;return(0,E.Z)(function*(){var v;const R=yield h.assertedPersistence.getCurrentUser();let H=R,ye=!1;if(l&&h.config.authDomain){yield h.getOrInitRedirectPersistenceManager();const Fe=null===(v=h.redirectUser)||void 0===v?void 0:v._redirectEventId,Tt=null==H?void 0:H._redirectEventId,Ot=yield h.tryRedirectSignIn(l);(!Fe||Fe===Tt)&&(null==Ot?void 0:Ot.user)&&(H=Ot.user,ye=!0)}if(!H)return h.directlySetCurrentUser(null);if(!H._redirectEventId){if(ye)try{yield h.beforeStateQueue.runMiddleware(H)}catch(Fe){H=R,h._popupRedirectResolver._overrideRedirectResult(h,()=>Promise.reject(Fe))}return H?h.reloadAndSetCurrentUserOrClear(H):h.directlySetCurrentUser(null)}return re(h._popupRedirectResolver,h,"argument-error"),yield h.getOrInitRedirectPersistenceManager(),h.redirectUser&&h.redirectUser._redirectEventId===H._redirectEventId?h.directlySetCurrentUser(H):h.reloadAndSetCurrentUserOrClear(H)})()}tryRedirectSignIn(l){var h=this;return(0,E.Z)(function*(){let v=null;try{v=yield h._popupRedirectResolver._completeRedirectFn(h,l,!0)}catch(R){yield h._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(l){var h=this;return(0,E.Z)(function*(){try{yield _n(l)}catch(v){if("auth/network-request-failed"!==v.code)return h.directlySetCurrentUser(null)}return h.directlySetCurrentUser(l)})()}useDeviceLanguage(){this.languageCode=function at(){if("undefined"==typeof navigator)return null;const p=navigator;return p.languages&&p.languages[0]||p.language||null}()}_delete(){var l=this;return(0,E.Z)(function*(){l._deleted=!0})()}updateCurrentUser(l){var h=this;return(0,E.Z)(function*(){const v=l?(0,G.m9)(l):null;return v&&re(v.auth.config.apiKey===h.config.apiKey,h,"invalid-user-token"),h._updateCurrentUser(v&&v._clone(h))})()}_updateCurrentUser(l,h=!1){var v=this;return(0,E.Z)(function*(){if(!v._deleted)return l&&re(v.tenantId===l.tenantId,v,"tenant-id-mismatch"),h||(yield v.beforeStateQueue.runMiddleware(l)),v.queue((0,E.Z)(function*(){yield v.directlySetCurrentUser(l),v.notifyAuthListeners()}))})()}signOut(){var l=this;return(0,E.Z)(function*(){return yield l.beforeStateQueue.runMiddleware(null),(l.redirectPersistenceManager||l._popupRedirectResolver)&&(yield l._setRedirectUser(null)),l._updateCurrentUser(null,!0)})()}setPersistence(l){var h=this;return this.queue((0,E.Z)(function*(){yield h.assertedPersistence.setPersistence(oe(l))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(l){this._errorFactory=new G.LL("auth","Firebase",l())}onAuthStateChanged(l,h,v){return this.registerStateListener(this.authStateSubscription,l,h,v)}beforeAuthStateChanged(l,h){return this.beforeStateQueue.pushCallback(l,h)}onIdTokenChanged(l,h,v){return this.registerStateListener(this.idTokenSubscription,l,h,v)}toJSON(){var l;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(l=this._currentUser)||void 0===l?void 0:l.toJSON()}}_setRedirectUser(l,h){var v=this;return(0,E.Z)(function*(){const R=yield v.getOrInitRedirectPersistenceManager(h);return null===l?R.removeCurrentUser():R.setCurrentUser(l)})()}getOrInitRedirectPersistenceManager(l){var h=this;return(0,E.Z)(function*(){if(!h.redirectPersistenceManager){const v=l&&oe(l)||h._popupRedirectResolver;re(v,h,"argument-error"),h.redirectPersistenceManager=yield _r.create(h,[oe(v._redirectPersistence)],"redirectUser"),h.redirectUser=yield h.redirectPersistenceManager.getCurrentUser()}return h.redirectPersistenceManager})()}_redirectUserForId(l){var h=this;return(0,E.Z)(function*(){var v,R;return h._isInitialized&&(yield h.queue((0,E.Z)(function*(){}))),(null===(v=h._currentUser)||void 0===v?void 0:v._redirectEventId)===l?h._currentUser:(null===(R=h.redirectUser)||void 0===R?void 0:R._redirectEventId)===l?h.redirectUser:null})()}_persistUserIfCurrent(l){var h=this;return(0,E.Z)(function*(){if(l===h.currentUser)return h.queue((0,E.Z)(function*(){return h.directlySetCurrentUser(l)}))})()}_notifyListenersIfCurrent(l){l===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var l,h;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(h=null===(l=this.currentUser)||void 0===l?void 0:l.uid)&&void 0!==h?h:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(l,h,v,R){if(this._deleted)return()=>{};const H="function"==typeof h?h:h.next.bind(h),ye=this._isInitialized?Promise.resolve():this._initializationPromise;return re(ye,this,"internal-error"),ye.then(()=>H(this.currentUser)),"function"==typeof h?l.addObserver(h,v,R):l.addObserver(h)}directlySetCurrentUser(l){var h=this;return(0,E.Z)(function*(){h.currentUser&&h.currentUser!==l&&(h._currentUser._stopProactiveRefresh(),l&&h.isProactiveRefreshEnabled&&l._startProactiveRefresh()),h.currentUser=l,l?yield h.assertedPersistence.setCurrentUser(l):yield h.assertedPersistence.removeCurrentUser()})()}queue(l){return this.operations=this.operations.then(l,l),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(l){!l||this.frameworks.includes(l)||(this.frameworks.push(l),this.frameworks.sort(),this.clientVersion=Fr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var l=this;return(0,E.Z)(function*(){var h;const v={"X-Client-Version":l.clientVersion};l.app.options.appId&&(v["X-Firebase-gmpid"]=l.app.options.appId);const R=yield null===(h=l.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===h?void 0:h.getHeartbeatsHeader();return R&&(v["X-Firebase-Client"]=R),v})()}}function Dt(p){return(0,G.m9)(p)}class tn{constructor(l){this.auth=l,this.observer=null,this.addObserver=(0,G.ne)(h=>this.observer=h)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ur(p){const l=p.indexOf(":");return l<0?"":p.substr(0,l+1)}function Jr(p){if(!p)return null;const l=Number(p);return isNaN(l)?null:l}class Xr{constructor(l,h){this.providerId=l,this.signInMethod=h}toJSON(){return ke("not implemented")}_getIdTokenResponse(l){return ke("not implemented")}_linkToIdToken(l,h){return ke("not implemented")}_getReauthenticationResolver(l){return ke("not implemented")}}function tr(p,l){return rn.apply(this,arguments)}function rn(){return(rn=(0,E.Z)(function*(p,l){return nn(p,"POST","/v1/accounts:resetPassword",Zt(p,l))})).apply(this,arguments)}function mi(p,l){return ki.apply(this,arguments)}function ki(){return(ki=(0,E.Z)(function*(p,l){return nn(p,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function Li(p,l){return X.apply(this,arguments)}function X(){return(X=(0,E.Z)(function*(p,l){return nn(p,"POST","/v1/accounts:update",Zt(p,l))})).apply(this,arguments)}function W(){return(W=(0,E.Z)(function*(p,l){return Sn(p,"POST","/v1/accounts:signInWithPassword",Zt(p,l))})).apply(this,arguments)}function be(p,l){return je.apply(this,arguments)}function je(){return(je=(0,E.Z)(function*(p,l){return nn(p,"POST","/v1/accounts:sendOobCode",Zt(p,l))})).apply(this,arguments)}function St(p,l){return En.apply(this,arguments)}function En(){return(En=(0,E.Z)(function*(p,l){return be(p,l)})).apply(this,arguments)}function Bn(p,l){return jn.apply(this,arguments)}function jn(){return(jn=(0,E.Z)(function*(p,l){return be(p,l)})).apply(this,arguments)}function ei(p,l){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,E.Z)(function*(p,l){return be(p,l)})).apply(this,arguments)}function gs(p,l){return yi.apply(this,arguments)}function yi(){return(yi=(0,E.Z)(function*(p,l){return be(p,l)})).apply(this,arguments)}function Ci(){return(Ci=(0,E.Z)(function*(p,l){return Sn(p,"POST","/v1/accounts:signInWithEmailLink",Zt(p,l))})).apply(this,arguments)}function Ko(){return(Ko=(0,E.Z)(function*(p,l){return Sn(p,"POST","/v1/accounts:signInWithEmailLink",Zt(p,l))})).apply(this,arguments)}class Yn extends Xr{constructor(l,h,v,R=null){super("password",v),this._email=l,this._password=h,this._tenantId=R}static _fromEmailAndPassword(l,h){return new Yn(l,h,"password")}static _fromEmailAndCode(l,h,v=null){return new Yn(l,h,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(l){const h="string"==typeof l?JSON.parse(l):l;if((null==h?void 0:h.email)&&(null==h?void 0:h.password)){if("password"===h.signInMethod)return this._fromEmailAndPassword(h.email,h.password);if("emailLink"===h.signInMethod)return this._fromEmailAndCode(h.email,h.password,h.tenantId)}return null}_getIdTokenResponse(l){var h=this;return(0,E.Z)(function*(){switch(h.signInMethod){case"password":return function ee(p,l){return W.apply(this,arguments)}(l,{returnSecureToken:!0,email:h._email,password:h._password});case"emailLink":return function Ti(p,l){return Ci.apply(this,arguments)}(l,{email:h._email,oobCode:h._password});default:ne(l,"internal-error")}})()}_linkToIdToken(l,h){var v=this;return(0,E.Z)(function*(){switch(v.signInMethod){case"password":return mi(l,{idToken:h,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function Wo(p,l){return Ko.apply(this,arguments)}(l,{idToken:h,email:v._email,oobCode:v._password});default:ne(l,"internal-error")}})()}_getReauthenticationResolver(l){return this._getIdTokenResponse(l)}}function Gi(p,l){return $s.apply(this,arguments)}function $s(){return($s=(0,E.Z)(function*(p,l){return Sn(p,"POST","/v1/accounts:signInWithIdp",Zt(p,l))})).apply(this,arguments)}class ce extends Xr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(l){const h=new ce(l.providerId,l.signInMethod);return l.idToken||l.accessToken?(l.idToken&&(h.idToken=l.idToken),l.accessToken&&(h.accessToken=l.accessToken),l.nonce&&!l.pendingToken&&(h.nonce=l.nonce),l.pendingToken&&(h.pendingToken=l.pendingToken)):l.oauthToken&&l.oauthTokenSecret?(h.accessToken=l.oauthToken,h.secret=l.oauthTokenSecret):ne("argument-error"),h}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(l){const h="string"==typeof l?JSON.parse(l):l,{providerId:v,signInMethod:R}=h,H=(0,fe._T)(h,["providerId","signInMethod"]);if(!v||!R)return null;const ye=new ce(v,R);return ye.idToken=H.idToken||void 0,ye.accessToken=H.accessToken||void 0,ye.secret=H.secret,ye.nonce=H.nonce,ye.pendingToken=H.pendingToken||null,ye}_getIdTokenResponse(l){return Gi(l,this.buildRequest())}_linkToIdToken(l,h){const v=this.buildRequest();return v.idToken=h,Gi(l,v)}_getReauthenticationResolver(l){const h=this.buildRequest();return h.autoCreate=!1,Gi(l,h)}buildRequest(){const l={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)l.pendingToken=this.pendingToken;else{const h={};this.idToken&&(h.id_token=this.idToken),this.accessToken&&(h.access_token=this.accessToken),this.secret&&(h.oauth_token_secret=this.secret),h.providerId=this.providerId,this.nonce&&!this.pendingToken&&(h.nonce=this.nonce),l.postBody=(0,G.xO)(h)}return l}}function Re(p,l){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,E.Z)(function*(p,l){return nn(p,"POST","/v1/accounts:sendVerificationCode",Zt(p,l))})).apply(this,arguments)}function xt(){return(xt=(0,E.Z)(function*(p,l){return Sn(p,"POST","/v1/accounts:signInWithPhoneNumber",Zt(p,l))})).apply(this,arguments)}function ir(){return(ir=(0,E.Z)(function*(p,l){const h=yield Sn(p,"POST","/v1/accounts:signInWithPhoneNumber",Zt(p,l));if(h.temporaryProof)throw Tn(p,"account-exists-with-different-credential",h);return h})).apply(this,arguments)}const An={USER_NOT_FOUND:"user-not-found"};function Hs(){return(Hs=(0,E.Z)(function*(p,l){return Sn(p,"POST","/v1/accounts:signInWithPhoneNumber",Zt(p,Object.assign(Object.assign({},l),{operation:"REAUTH"})),An)})).apply(this,arguments)}class xr extends Xr{constructor(l){super("phone","phone"),this.params=l}static _fromVerification(l,h){return new xr({verificationId:l,verificationCode:h})}static _fromTokenResponse(l,h){return new xr({phoneNumber:l,temporaryProof:h})}_getIdTokenResponse(l){return function mt(p,l){return xt.apply(this,arguments)}(l,this._makeVerificationRequest())}_linkToIdToken(l,h){return function $n(p,l){return ir.apply(this,arguments)}(l,Object.assign({idToken:h},this._makeVerificationRequest()))}_getReauthenticationResolver(l){return function Qi(p,l){return Hs.apply(this,arguments)}(l,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:l,phoneNumber:h,verificationId:v,verificationCode:R}=this.params;return l&&h?{temporaryProof:l,phoneNumber:h}:{sessionInfo:v,code:R}}toJSON(){const l={providerId:this.providerId};return this.params.phoneNumber&&(l.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(l.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(l.verificationCode=this.params.verificationCode),this.params.verificationId&&(l.verificationId=this.params.verificationId),l}static fromJSON(l){"string"==typeof l&&(l=JSON.parse(l));const{verificationId:h,verificationCode:v,phoneNumber:R,temporaryProof:H}=l;return v||h||R||H?new xr({verificationId:h,verificationCode:v,phoneNumber:R,temporaryProof:H}):null}}class ms{constructor(l){var h,v,R,H,ye,Fe;const Tt=(0,G.zd)((0,G.pd)(l)),Ot=null!==(h=Tt.apiKey)&&void 0!==h?h:null,$t=null!==(v=Tt.oobCode)&&void 0!==v?v:null,Jt=function Gs(p){switch(p){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(R=Tt.mode)&&void 0!==R?R:null);re(Ot&&$t&&Jt,"argument-error"),this.apiKey=Ot,this.operation=Jt,this.code=$t,this.continueUrl=null!==(H=Tt.continueUrl)&&void 0!==H?H:null,this.languageCode=null!==(ye=Tt.languageCode)&&void 0!==ye?ye:null,this.tenantId=null!==(Fe=Tt.tenantId)&&void 0!==Fe?Fe:null}static parseLink(l){const h=function Ss(p){const l=(0,G.zd)((0,G.pd)(p)).link,h=l?(0,G.zd)((0,G.pd)(l)).deep_link_id:null,v=(0,G.zd)((0,G.pd)(p)).deep_link_id;return(v?(0,G.zd)((0,G.pd)(v)).link:null)||v||h||l||p}(l);try{return new ms(h)}catch(v){return null}}}let As=(()=>{class p{constructor(){this.providerId=p.PROVIDER_ID}static credential(h,v){return Yn._fromEmailAndPassword(h,v)}static credentialWithLink(h,v){const R=ms.parseLink(v);return re(R,"argument-error"),Yn._fromEmailAndCode(h,R.code,R.tenantId)}}return p.PROVIDER_ID="password",p.EMAIL_PASSWORD_SIGN_IN_METHOD="password",p.EMAIL_LINK_SIGN_IN_METHOD="emailLink",p})();class Vr{constructor(l){this.providerId=l,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(l){this.defaultLanguageCode=l}setCustomParameters(l){return this.customParameters=l,this}getCustomParameters(){return this.customParameters}}class xs extends Vr{constructor(){super(...arguments),this.scopes=[]}addScope(l){return this.scopes.includes(l)||this.scopes.push(l),this}getScopes(){return[...this.scopes]}}class Si extends xs{static credentialFromJSON(l){const h="string"==typeof l?JSON.parse(l):l;return re("providerId"in h&&"signInMethod"in h,"argument-error"),ce._fromParams(h)}credential(l){return this._credential(Object.assign(Object.assign({},l),{nonce:l.rawNonce}))}_credential(l){return re(l.idToken||l.accessToken,"argument-error"),ce._fromParams(Object.assign(Object.assign({},l),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(l){return Si.oauthCredentialFromTaggedObject(l)}static credentialFromError(l){return Si.oauthCredentialFromTaggedObject(l.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthIdToken:h,oauthAccessToken:v,oauthTokenSecret:R,pendingToken:H,nonce:ye,providerId:Fe}=l;if(!v&&!R&&!h&&!H||!Fe)return null;try{return new Si(Fe)._credential({idToken:h,accessToken:v,nonce:ye,pendingToken:H})}catch(Tt){return null}}}let Ji=(()=>{class p extends xs{constructor(){super("facebook.com")}static credential(h){return ce._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.FACEBOOK_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return p.credentialFromTaggedObject(h)}static credentialFromError(h){return p.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return p.credential(h.oauthAccessToken)}catch(v){return null}}}return p.FACEBOOK_SIGN_IN_METHOD="facebook.com",p.PROVIDER_ID="facebook.com",p})(),zs=(()=>{class p extends xs{constructor(){super("google.com"),this.addScope("profile")}static credential(h,v){return ce._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GOOGLE_SIGN_IN_METHOD,idToken:h,accessToken:v})}static credentialFromResult(h){return p.credentialFromTaggedObject(h)}static credentialFromError(h){return p.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:v,oauthAccessToken:R}=h;if(!v&&!R)return null;try{return p.credential(v,R)}catch(H){return null}}}return p.GOOGLE_SIGN_IN_METHOD="google.com",p.PROVIDER_ID="google.com",p})(),Xi=(()=>{class p extends xs{constructor(){super("github.com")}static credential(h){return ce._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GITHUB_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return p.credentialFromTaggedObject(h)}static credentialFromError(h){return p.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return p.credential(h.oauthAccessToken)}catch(v){return null}}}return p.GITHUB_SIGN_IN_METHOD="github.com",p.PROVIDER_ID="github.com",p})();class ci extends Xr{constructor(l,h){super(l,l),this.pendingToken=h}_getIdTokenResponse(l){return Gi(l,this.buildRequest())}_linkToIdToken(l,h){const v=this.buildRequest();return v.idToken=h,Gi(l,v)}_getReauthenticationResolver(l){const h=this.buildRequest();return h.autoCreate=!1,Gi(l,h)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(l){const h="string"==typeof l?JSON.parse(l):l,{providerId:v,signInMethod:R,pendingToken:H}=h;return v&&R&&H&&v===R?new ci(v,H):null}static _create(l,h){return new ci(l,h)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Mr extends Vr{constructor(l){re(l.startsWith("saml."),"argument-error"),super(l)}static credentialFromResult(l){return Mr.samlCredentialFromTaggedObject(l)}static credentialFromError(l){return Mr.samlCredentialFromTaggedObject(l.customData||{})}static credentialFromJSON(l){const h=ci.fromJSON(l);return re(h,"argument-error"),h}static samlCredentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{pendingToken:h,providerId:v}=l;if(!h||!v)return null;try{return ci._create(v,h)}catch(R){return null}}}let Zo=(()=>{class p extends xs{constructor(){super("twitter.com")}static credential(h,v){return ce._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.TWITTER_SIGN_IN_METHOD,oauthToken:h,oauthTokenSecret:v})}static credentialFromResult(h){return p.credentialFromTaggedObject(h)}static credentialFromError(h){return p.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthAccessToken:v,oauthTokenSecret:R}=h;if(!v||!R)return null;try{return p.credential(v,R)}catch(H){return null}}}return p.TWITTER_SIGN_IN_METHOD="twitter.com",p.PROVIDER_ID="twitter.com",p})();function Br(p,l){return vi.apply(this,arguments)}function vi(){return(vi=(0,E.Z)(function*(p,l){return Sn(p,"POST","/v1/accounts:signUp",Zt(p,l))})).apply(this,arguments)}class lr{constructor(l){this.user=l.user,this.providerId=l.providerId,this._tokenResponse=l._tokenResponse,this.operationType=l.operationType}static _fromIdTokenResponse(l,h,v,R=!1){return(0,E.Z)(function*(){const H=yield Gt._fromIdTokenResponse(l,v,R),ye=co(v);return new lr({user:H,providerId:ye,_tokenResponse:v,operationType:h})})()}static _forOperation(l,h,v){return(0,E.Z)(function*(){yield l._updateTokensIfNecessary(v,!0);const R=co(v);return new lr({user:l,providerId:R,_tokenResponse:v,operationType:h})})()}}function co(p){return p.providerId?p.providerId:"phoneNumber"in p?"phone":null}function Ms(){return(Ms=(0,E.Z)(function*(p){var l;const h=Dt(p);if(yield h._initializationPromise,null===(l=h.currentUser)||void 0===l?void 0:l.isAnonymous)return new lr({user:h.currentUser,providerId:null,operationType:"signIn"});const v=yield Br(h,{returnSecureToken:!0}),R=yield lr._fromIdTokenResponse(h,"signIn",v,!0);return yield h._updateCurrentUser(R.user),R})).apply(this,arguments)}class Fi extends G.ZR{constructor(l,h,v,R){var H;super(h.code,h.message),this.operationType=v,this.user=R,Object.setPrototypeOf(this,Fi.prototype),this.customData={appName:l.name,tenantId:null!==(H=l.tenantId)&&void 0!==H?H:void 0,_serverResponse:h.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(l,h,v,R){return new Fi(l,h,v,R)}}function qs(p,l,h,v){return("reauthenticate"===l?h._getReauthenticationResolver(p):h._getIdTokenResponse(p)).catch(H=>{throw"auth/multi-factor-auth-required"===H.code?Fi._fromErrorAndOperation(p,H,l,v):H})}function jr(p){return new Set(p.map(({providerId:l})=>l).filter(l=>!!l))}function Qn(){return(Qn=(0,E.Z)(function*(p,l){const h=(0,G.m9)(p);yield S(!0,h,l);const{providerUserInfo:v}=yield wn(h.auth,{idToken:yield h.getIdToken(),deleteProvider:[l]}),R=jr(v||[]);return h.providerData=h.providerData.filter(H=>R.has(H.providerId)),R.has("phone")||(h.phoneNumber=null),yield h.auth._persistUserIfCurrent(h),h})).apply(this,arguments)}function A(p,l){return V.apply(this,arguments)}function V(){return(V=(0,E.Z)(function*(p,l,h=!1){const v=yield fn(p,l._linkToIdToken(p.auth,yield p.getIdToken()),h);return lr._forOperation(p,"link",v)})).apply(this,arguments)}function S(p,l,h){return $.apply(this,arguments)}function $(){return($=(0,E.Z)(function*(p,l,h){yield _n(l);const R=!1===p?"provider-already-linked":"no-such-provider";re(jr(l.providerData).has(h)===p,l.auth,R)})).apply(this,arguments)}function ae(p,l){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,E.Z)(function*(p,l,h=!1){const{auth:v}=p,R="reauthenticate";try{const H=yield fn(p,qs(v,R,l,p),h);re(H.idToken,v,"internal-error");const ye=et(H.idToken);re(ye,v,"internal-error");const{sub:Fe}=ye;return re(p.uid===Fe,v,"user-mismatch"),lr._forOperation(p,R,H)}catch(H){throw"auth/user-not-found"===(null==H?void 0:H.code)&&ne(v,"user-mismatch"),H}})).apply(this,arguments)}function He(p,l){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,E.Z)(function*(p,l,h=!1){const v="signIn",R=yield qs(p,v,l),H=yield lr._fromIdTokenResponse(p,v,R);return h||(yield p._updateCurrentUser(H.user)),H})).apply(this,arguments)}function ln(p,l){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,E.Z)(function*(p,l){return He(Dt(p),l)})).apply(this,arguments)}function un(p,l){return gn.apply(this,arguments)}function gn(){return(gn=(0,E.Z)(function*(p,l){const h=(0,G.m9)(p);return yield S(!1,h,l.providerId),A(h,l)})).apply(this,arguments)}function dr(p,l){return On.apply(this,arguments)}function On(){return(On=(0,E.Z)(function*(p,l){return ae((0,G.m9)(p),l)})).apply(this,arguments)}function Xn(p,l){return li.apply(this,arguments)}function li(){return(li=(0,E.Z)(function*(p,l){return Sn(p,"POST","/v1/accounts:signInWithCustomToken",Zt(p,l))})).apply(this,arguments)}function Qt(){return(Qt=(0,E.Z)(function*(p,l){const h=Dt(p),v=yield Xn(h,{token:l,returnSecureToken:!0}),R=yield lr._fromIdTokenResponse(h,"signIn",v);return yield h._updateCurrentUser(R.user),R})).apply(this,arguments)}class ti{constructor(l,h){this.factorId=l,this.uid=h.mfaEnrollmentId,this.enrollmentTime=new Date(h.enrolledAt).toUTCString(),this.displayName=h.displayName}static _fromServerResponse(l,h){return"phoneInfo"in h?zi._fromServerResponse(l,h):ne(l,"internal-error")}}class zi extends ti{constructor(l){super("phone",l),this.phoneNumber=l.phoneInfo}static _fromServerResponse(l,h){return new zi(h)}}function Rs(p,l,h){var v;re((null===(v=h.url)||void 0===v?void 0:v.length)>0,p,"invalid-continue-uri"),re(void 0===h.dynamicLinkDomain||h.dynamicLinkDomain.length>0,p,"invalid-dynamic-link-domain"),l.continueUrl=h.url,l.dynamicLinkDomain=h.dynamicLinkDomain,l.canHandleCodeInApp=h.handleCodeInApp,h.iOS&&(re(h.iOS.bundleId.length>0,p,"missing-ios-bundle-id"),l.iOSBundleId=h.iOS.bundleId),h.android&&(re(h.android.packageName.length>0,p,"missing-android-pkg-name"),l.androidInstallApp=h.android.installApp,l.androidMinimumVersionCode=h.android.minimumVersion,l.androidPackageName=h.android.packageName)}function ho(){return(ho=(0,E.Z)(function*(p,l,h){const v=(0,G.m9)(p),R={requestType:"PASSWORD_RESET",email:l};h&&Rs(v,R,h),yield Bn(v,R)})).apply(this,arguments)}function Ia(){return(Ia=(0,E.Z)(function*(p,l,h){yield tr((0,G.m9)(p),{oobCode:l,newPassword:h})})).apply(this,arguments)}function rt(){return(rt=(0,E.Z)(function*(p,l){yield Li((0,G.m9)(p),{oobCode:l})})).apply(this,arguments)}function Dn(p,l){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,E.Z)(function*(p,l){const h=(0,G.m9)(p),v=yield tr(h,{oobCode:l}),R=v.requestType;switch(re(R,h,"internal-error"),R){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":re(v.newEmail,h,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":re(v.mfaInfo,h,"internal-error");default:re(v.email,h,"internal-error")}let H=null;return v.mfaInfo&&(H=ti._fromServerResponse(Dt(h),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:H},operation:R}})).apply(this,arguments)}function ys(){return(ys=(0,E.Z)(function*(p,l){const{data:h}=yield Dn((0,G.m9)(p),l);return h.email})).apply(this,arguments)}function Ui(){return(Ui=(0,E.Z)(function*(p,l,h){const v=Dt(p),R=yield Br(v,{returnSecureToken:!0,email:l,password:h}),H=yield lr._fromIdTokenResponse(v,"signIn",R);return yield v._updateCurrentUser(H.user),H})).apply(this,arguments)}function Su(){return(Su=(0,E.Z)(function*(p,l,h){const v=(0,G.m9)(p),R={requestType:"EMAIL_SIGNIN",email:l};re(h.handleCodeInApp,v,"argument-error"),h&&Rs(v,R,h),yield ei(v,R)})).apply(this,arguments)}function es(){return(es=(0,E.Z)(function*(p,l,h){const v=(0,G.m9)(p),R=As.credentialWithLink(l,h||it());return re(R._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),ln(v,R)})).apply(this,arguments)}function $r(p,l){return _i.apply(this,arguments)}function _i(){return(_i=(0,E.Z)(function*(p,l){return nn(p,"POST","/v1/accounts:createAuthUri",Zt(p,l))})).apply(this,arguments)}function Ps(){return(Ps=(0,E.Z)(function*(p,l){const v={identifier:l,continueUri:ft()?it():"http://localhost"},{signinMethods:R}=yield $r((0,G.m9)(p),v);return R||[]})).apply(this,arguments)}function fo(){return(fo=(0,E.Z)(function*(p,l){const h=(0,G.m9)(p),R={requestType:"VERIFY_EMAIL",idToken:yield p.getIdToken()};l&&Rs(h.auth,R,l);const{email:H}=yield St(h.auth,R);H!==p.email&&(yield p.reload())})).apply(this,arguments)}function gr(){return(gr=(0,E.Z)(function*(p,l,h){const v=(0,G.m9)(p),H={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield p.getIdToken(),newEmail:l};h&&Rs(v.auth,H,h);const{email:ye}=yield gs(v.auth,H);ye!==p.email&&(yield p.reload())})).apply(this,arguments)}function ba(p,l){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,E.Z)(function*(p,l){return nn(p,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function tu(){return(tu=(0,E.Z)(function*(p,{displayName:l,photoURL:h}){if(void 0===l&&void 0===h)return;const v=(0,G.m9)(p),H={idToken:yield v.getIdToken(),displayName:l,photoUrl:h,returnSecureToken:!0},ye=yield fn(v,ba(v.auth,H));v.displayName=ye.displayName||null,v.photoURL=ye.photoUrl||null;const Fe=v.providerData.find(({providerId:Tt})=>"password"===Tt);Fe&&(Fe.displayName=v.displayName,Fe.photoURL=v.photoURL),yield v._updateTokensIfNecessary(ye)})).apply(this,arguments)}function xo(p,l,h){return Os.apply(this,arguments)}function Os(){return(Os=(0,E.Z)(function*(p,l,h){const{auth:v}=p,H={idToken:yield p.getIdToken(),returnSecureToken:!0};l&&(H.email=l),h&&(H.password=h);const ye=yield fn(p,mi(v,H));yield p._updateTokensIfNecessary(ye,!0)})).apply(this,arguments)}class Js{constructor(l,h,v={}){this.isNewUser=l,this.providerId=h,this.profile=v}}class ts extends Js{constructor(l,h,v,R){super(l,h,v),this.username=R}}class Ca extends Js{constructor(l,h){super(l,"facebook.com",h)}}class po extends ts{constructor(l,h){super(l,"github.com",h,"string"==typeof(null==h?void 0:h.login)?null==h?void 0:h.login:null)}}class nu extends Js{constructor(l,h){super(l,"google.com",h)}}class ks extends ts{constructor(l,h,v){super(l,"twitter.com",h,v)}}function hi(p){const{user:l,_tokenResponse:h}=p;return l.isAnonymous&&!h?{providerId:null,isNewUser:!1,profile:null}:function Xo(p){var l,h;if(!p)return null;const{providerId:v}=p,R=p.rawUserInfo?JSON.parse(p.rawUserInfo):{},H=p.isNewUser||"identitytoolkit#SignupNewUserResponse"===p.kind;if(!v&&(null==p?void 0:p.idToken)){const ye=null===(h=null===(l=et(p.idToken))||void 0===l?void 0:l.firebase)||void 0===h?void 0:h.sign_in_provider;if(ye)return new Js(H,"anonymous"!==ye&&"custom"!==ye?ye:null)}if(!v)return null;switch(v){case"facebook.com":return new Ca(H,R);case"github.com":return new po(H,R);case"google.com":return new nu(H,R);case"twitter.com":return new ks(H,R,p.screenName||null);case"custom":case"anonymous":return new Js(H,null);default:return new Js(H,v,R)}}(h)}class ns{constructor(l,h){this.type=l,this.credential=h}static _fromIdtoken(l){return new ns("enroll",l)}static _fromMfaPendingCredential(l){return new ns("signin",l)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(l){var h,v;if(null==l?void 0:l.multiFactorSession){if(null===(h=l.multiFactorSession)||void 0===h?void 0:h.pendingCredential)return ns._fromMfaPendingCredential(l.multiFactorSession.pendingCredential);if(null===(v=l.multiFactorSession)||void 0===v?void 0:v.idToken)return ns._fromIdtoken(l.multiFactorSession.idToken)}return null}}class Ls{constructor(l,h,v){this.session=l,this.hints=h,this.signInResolver=v}static _fromError(l,h){const v=Dt(l),R=h.customData._serverResponse,H=(R.mfaInfo||[]).map(Fe=>ti._fromServerResponse(v,Fe));re(R.mfaPendingCredential,v,"internal-error");const ye=ns._fromMfaPendingCredential(R.mfaPendingCredential);return new Ls(ye,H,function(){var Fe=(0,E.Z)(function*(Tt){const Ot=yield Tt._process(v,ye);delete R.mfaInfo,delete R.mfaPendingCredential;const $t=Object.assign(Object.assign({},R),{idToken:Ot.idToken,refreshToken:Ot.refreshToken});switch(h.operationType){case"signIn":const Jt=yield lr._fromIdTokenResponse(v,h.operationType,$t);return yield v._updateCurrentUser(Jt.user),Jt;case"reauthenticate":return re(h.user,v,"internal-error"),lr._forOperation(h.user,h.operationType,$t);default:ne(v,"internal-error")}});return function(Tt){return Fe.apply(this,arguments)}}())}resolveSignIn(l){var h=this;return(0,E.Z)(function*(){return h.signInResolver(l)})()}}function Aa(p,l){return nn(p,"POST","/v2/accounts/mfaEnrollment:start",Zt(p,l))}class is{constructor(l){this.user=l,this.enrolledFactors=[],l._onReload(h=>{h.mfaInfo&&(this.enrolledFactors=h.mfaInfo.map(v=>ti._fromServerResponse(l.auth,v)))})}static _fromUser(l){return new is(l)}getSession(){var l=this;return(0,E.Z)(function*(){return ns._fromIdtoken(yield l.user.getIdToken())})()}enroll(l,h){var v=this;return(0,E.Z)(function*(){const R=l,H=yield v.getSession(),ye=yield fn(v.user,R._process(v.user.auth,H,h));return yield v.user._updateTokensIfNecessary(ye),v.user.reload()})()}unenroll(l){var h=this;return(0,E.Z)(function*(){const v="string"==typeof l?l:l.uid,R=yield h.user.getIdToken(),H=yield fn(h.user,function rs(p,l){return nn(p,"POST","/v2/accounts/mfaEnrollment:withdraw",Zt(p,l))}(h.user.auth,{idToken:R,mfaEnrollmentId:v}));h.enrolledFactors=h.enrolledFactors.filter(({uid:ye})=>ye!==v),yield h.user._updateTokensIfNecessary(H);try{yield h.user.reload()}catch(ye){if("auth/user-token-expired"!==ye.code)throw ye}})()}}const fi=new WeakMap,ss="__sak";class Mo{constructor(l,h){this.storageRetriever=l,this.type=h}_isAvailable(){try{return this.storage?(this.storage.setItem(ss,"1"),this.storage.removeItem(ss),Promise.resolve(!0)):Promise.resolve(!1)}catch(l){return Promise.resolve(!1)}}_set(l,h){return this.storage.setItem(l,JSON.stringify(h)),Promise.resolve()}_get(l){const h=this.storage.getItem(l);return Promise.resolve(h?JSON.parse(h):null)}_remove(l){return this.storage.removeItem(l),Promise.resolve()}get storage(){return this.storageRetriever()}}const go=(()=>{class p extends Mo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(h,v)=>this.onStorageEvent(h,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Nu(){const p=(0,G.z$)();return kr(p)||br(p)}()&&function ur(){try{return!(!window||window===window.top)}catch(p){return!1}}(),this.fallbackToPolling=Ar(),this._shouldAllowMigration=!0}forAllChangedKeys(h){for(const v of Object.keys(this.listeners)){const R=this.storage.getItem(v),H=this.localCache[v];R!==H&&h(v,H,R)}}onStorageEvent(h,v=!1){if(!h.key)return void this.forAllChangedKeys((Fe,Tt,Ot)=>{this.notifyListeners(Fe,Ot)});const R=h.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Fe=this.storage.getItem(R);if(h.newValue!==Fe)null!==h.newValue?this.storage.setItem(R,h.newValue):this.storage.removeItem(R);else if(this.localCache[R]===h.newValue&&!v)return}const H=()=>{const Fe=this.storage.getItem(R);!v&&this.localCache[R]===Fe||this.notifyListeners(R,Fe)},ye=this.storage.getItem(R);!function Lr(){return(0,G.w1)()&&10===document.documentMode}()||ye===h.newValue||h.newValue===h.oldValue?H():setTimeout(H,10)}notifyListeners(h,v){this.localCache[h]=v;const R=this.listeners[h];if(R)for(const H of Array.from(R))H(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((h,v,R)=>{this.onStorageEvent(new StorageEvent("storage",{key:h,oldValue:v,newValue:R}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(h,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[h]||(this.listeners[h]=new Set,this.localCache[h]=this.storage.getItem(h)),this.listeners[h].add(v)}_removeListener(h,v){this.listeners[h]&&(this.listeners[h].delete(v),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(h,v){var R=()=>super._set,H=this;return(0,E.Z)(function*(){yield R().call(H,h,v),H.localCache[h]=JSON.stringify(v)})()}_get(h){var v=()=>super._get,R=this;return(0,E.Z)(function*(){const H=yield v().call(R,h);return R.localCache[h]=JSON.stringify(H),H})()}_remove(h){var v=()=>super._remove,R=this;return(0,E.Z)(function*(){yield v().call(R,h),delete R.localCache[h]})()}}return p.type="LOCAL",p})(),os=(()=>{class p extends Mo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(h,v){}_removeListener(h,v){}}return p.type="SESSION",p})();let xa=(()=>{class p{constructor(h){this.eventTarget=h,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(h){const v=this.receivers.find(H=>H.isListeningto(h));if(v)return v;const R=new p(h);return this.receivers.push(R),R}isListeningto(h){return this.eventTarget===h}handleEvent(h){var v=this;return(0,E.Z)(function*(){const R=h,{eventId:H,eventType:ye,data:Fe}=R.data,Tt=v.handlersMap[ye];if(!(null==Tt?void 0:Tt.size))return;R.ports[0].postMessage({status:"ack",eventId:H,eventType:ye});const Ot=Array.from(Tt).map(function(){var Jt=(0,E.Z)(function*(Gr){return Gr(R.origin,Fe)});return function(Gr){return Jt.apply(this,arguments)}}()),$t=yield function ra(p){return Promise.all(p.map(function(){var l=(0,E.Z)(function*(h){try{return{fulfilled:!0,value:yield h}}catch(v){return{fulfilled:!1,reason:v}}});return function(h){return l.apply(this,arguments)}}()))}(Ot);R.ports[0].postMessage({status:"done",eventId:H,eventType:ye,response:$t})})()}_subscribe(h,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[h]||(this.handlersMap[h]=new Set),this.handlersMap[h].add(v)}_unsubscribe(h,v){this.handlersMap[h]&&v&&this.handlersMap[h].delete(v),(!v||0===this.handlersMap[h].size)&&delete this.handlersMap[h],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return p.receivers=[],p})();function Ro(p="",l=10){let h="";for(let v=0;v<l;v++)h+=Math.floor(10*Math.random());return p+h}class to{constructor(l){this.target=l,this.handlers=new Set}removeMessageHandler(l){l.messageChannel&&(l.messageChannel.port1.removeEventListener("message",l.onMessage),l.messageChannel.port1.close()),this.handlers.delete(l)}_send(l,h,v=50){var R=this;return(0,E.Z)(function*(){const H="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!H)throw new Error("connection_unavailable");let ye,Fe;return new Promise((Tt,Ot)=>{const $t=Ro("",20);H.port1.start();const Jt=setTimeout(()=>{Ot(new Error("unsupported_event"))},v);Fe={messageChannel:H,onMessage(Gr){const ws=Gr;if(ws.data.eventId===$t)switch(ws.data.status){case"ack":clearTimeout(Jt),ye=setTimeout(()=>{Ot(new Error("timeout"))},3e3);break;case"done":clearTimeout(ye),Tt(ws.data.response);break;default:clearTimeout(Jt),clearTimeout(ye),Ot(new Error("invalid_response"))}}},R.handlers.add(Fe),H.port1.addEventListener("message",Fe.onMessage),R.target.postMessage({eventType:l,eventId:$t,data:h},[H.port2])}).finally(()=>{Fe&&R.removeMessageHandler(Fe)})})()}}function Rr(){return window}function vs(){return void 0!==Rr().WorkerGlobalScope&&"function"==typeof Rr().importScripts}function iu(){return(iu=(0,E.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(p){return null}})).apply(this,arguments)}const Us="firebaseLocalStorageDb",Vs="firebaseLocalStorage",dt="fbase_key";class sr{constructor(l){this.request=l}toPromise(){return new Promise((l,h)=>{this.request.addEventListener("success",()=>{l(this.request.result)}),this.request.addEventListener("error",()=>{h(this.request.error)})})}}function I(p,l){return p.transaction([Vs],l?"readwrite":"readonly").objectStore(Vs)}function m(){const p=indexedDB.open(Us,1);return new Promise((l,h)=>{p.addEventListener("error",()=>{h(p.error)}),p.addEventListener("upgradeneeded",()=>{const v=p.result;try{v.createObjectStore(Vs,{keyPath:dt})}catch(R){h(R)}}),p.addEventListener("success",(0,E.Z)(function*(){const v=p.result;v.objectStoreNames.contains(Vs)?l(v):(v.close(),yield function _(){const p=indexedDB.deleteDatabase(Us);return new sr(p).toPromise()}(),l(yield m()))}))})}function T(p,l,h){return M.apply(this,arguments)}function M(){return(M=(0,E.Z)(function*(p,l,h){const v=I(p,!0).put({[dt]:l,value:h});return new sr(v).toPromise()})).apply(this,arguments)}function L(){return(L=(0,E.Z)(function*(p,l){const h=I(p,!1).get(l),v=yield new sr(h).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function z(p,l){const h=I(p,!0).delete(l);return new sr(h).toPromise()}const Ft=(()=>{class p{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var h=this;return(0,E.Z)(function*(){return h.db||(h.db=yield m()),h.db})()}_withRetries(h){var v=this;return(0,E.Z)(function*(){let R=0;for(;;)try{const H=yield v._openDb();return yield h(H)}catch(H){if(R++>3)throw H;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var h=this;return(0,E.Z)(function*(){return vs()?h.initializeReceiver():h.initializeSender()})()}initializeReceiver(){var h=this;return(0,E.Z)(function*(){h.receiver=xa._getInstance(function Fs(){return vs()?self:null}()),h.receiver._subscribe("keyChanged",function(){var v=(0,E.Z)(function*(R,H){return{keyProcessed:(yield h._poll()).includes(H.key)}});return function(R,H){return v.apply(this,arguments)}}()),h.receiver._subscribe("ping",function(){var v=(0,E.Z)(function*(R,H){return["keyChanged"]});return function(R,H){return v.apply(this,arguments)}}())})()}initializeSender(){var h=this;return(0,E.Z)(function*(){var v,R;if(h.activeServiceWorker=yield function No(){return iu.apply(this,arguments)}(),!h.activeServiceWorker)return;h.sender=new to(h.activeServiceWorker);const H=yield h.sender._send("ping",{},800);!H||(null===(v=H[0])||void 0===v?void 0:v.fulfilled)&&(null===(R=H[0])||void 0===R?void 0:R.value.includes("keyChanged"))&&(h.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(h){var v=this;return(0,E.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function Yr(){var p;return(null===(p=null==navigator?void 0:navigator.serviceWorker)||void 0===p?void 0:p.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:h},v.serviceWorkerReceiverAvailable?800:50)}catch(R){}})()}_isAvailable(){return(0,E.Z)(function*(){try{if(!indexedDB)return!1;const h=yield m();return yield T(h,ss,"1"),yield z(h,ss),!0}catch(h){}return!1})()}_withPendingWrite(h){var v=this;return(0,E.Z)(function*(){v.pendingWrites++;try{yield h()}finally{v.pendingWrites--}})()}_set(h,v){var R=this;return(0,E.Z)(function*(){return R._withPendingWrite((0,E.Z)(function*(){return yield R._withRetries(H=>T(H,h,v)),R.localCache[h]=v,R.notifyServiceWorker(h)}))})()}_get(h){var v=this;return(0,E.Z)(function*(){const R=yield v._withRetries(H=>function k(p,l){return L.apply(this,arguments)}(H,h));return v.localCache[h]=R,R})()}_remove(h){var v=this;return(0,E.Z)(function*(){return v._withPendingWrite((0,E.Z)(function*(){return yield v._withRetries(R=>z(R,h)),delete v.localCache[h],v.notifyServiceWorker(h)}))})()}_poll(){var h=this;return(0,E.Z)(function*(){const v=yield h._withRetries(ye=>{const Fe=I(ye,!1).getAll();return new sr(Fe).toPromise()});if(!v)return[];if(0!==h.pendingWrites)return[];const R=[],H=new Set;for(const{fbase_key:ye,value:Fe}of v)H.add(ye),JSON.stringify(h.localCache[ye])!==JSON.stringify(Fe)&&(h.notifyListeners(ye,Fe),R.push(ye));for(const ye of Object.keys(h.localCache))h.localCache[ye]&&!H.has(ye)&&(h.notifyListeners(ye,null),R.push(ye));return R})()}notifyListeners(h,v){this.localCache[h]=v;const R=this.listeners[h];if(R)for(const H of Array.from(R))H(v)}startPolling(){var h=this;this.stopPolling(),this.pollTimer=setInterval((0,E.Z)(function*(){return h._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(h,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[h]||(this.listeners[h]=new Set,this._get(h)),this.listeners[h].add(v)}_removeListener(h,v){this.listeners[h]&&(this.listeners[h].delete(v),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return p.type="LOCAL",p})();function kn(p,l){return nn(p,"POST","/v2/accounts/mfaSignIn:start",Zt(p,l))}function as(){return(as=(0,E.Z)(function*(p){return(yield nn(p,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ma(p){return new Promise((l,h)=>{const v=document.createElement("script");v.setAttribute("src",p),v.onload=l,v.onerror=R=>{const H=$e("internal-error");H.customData=R,h(H)},v.type="text/javascript",v.charset="UTF-8",function mo(){var p,l;return null!==(l=null===(p=document.getElementsByTagName("head"))||void 0===p?void 0:p[0])&&void 0!==l?l:document}().appendChild(v)})}function or(p){return`__${p}${Math.floor(1e6*Math.random())}`}const pn=1e12;class Oo{constructor(l){this.auth=l,this.counter=pn,this._widgets=new Map}render(l,h){const v=this.counter;return this._widgets.set(v,new sa(l,this.auth.name,h||{})),this.counter++,v}reset(l){var h;const v=l||pn;null===(h=this._widgets.get(v))||void 0===h||h.delete(),this._widgets.delete(v)}getResponse(l){var h;return(null===(h=this._widgets.get(l||pn))||void 0===h?void 0:h.getResponse())||""}execute(l){var h=this;return(0,E.Z)(function*(){var v;return null===(v=h._widgets.get(l||pn))||void 0===v||v.execute(),""})()}}class sa{constructor(l,h,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const R="string"==typeof l?document.getElementById(l):l;re(R,"argument-error",{appName:h}),this.container=R,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Nr(p){const l=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<p;v++)l.push(h.charAt(Math.floor(Math.random()*h.length)));return l.join("")}(50);const{callback:l,"expired-callback":h}=this.params;if(l)try{l(this.responseToken)}catch(v){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,h)try{h()}catch(v){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const sn=or("rcb"),Pr=new en(3e4,6e4);class Vd{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Rr().grecaptcha}load(l,h=""){return re(function Pu(p){return p.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(p)}(h),l,"argument-error"),this.shouldResolveImmediately(h)?Promise.resolve(Rr().grecaptcha):new Promise((v,R)=>{const H=Rr().setTimeout(()=>{R($e(l,"network-request-failed"))},Pr.get());Rr()[sn]=()=>{Rr().clearTimeout(H),delete Rr()[sn];const Fe=Rr().grecaptcha;if(!Fe)return void R($e(l,"internal-error"));const Tt=Fe.render;Fe.render=(Ot,$t)=>{const Jt=Tt(Ot,$t);return this.counter++,Jt},this.hostLanguage=h,v(Fe)},Ma(`https://www.google.com/recaptcha/api.js??${(0,G.xO)({onload:sn,render:"explicit",hl:h})}`).catch(()=>{clearTimeout(H),R($e(l,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(l){return!!Rr().grecaptcha&&(l===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ln{load(l){return(0,E.Z)(function*(){return new Oo(l)})()}clearedOneInstance(){}}const Hc="recaptcha",pi={theme:"light",type:"image"};class su{constructor(l,h=Object.assign({},pi),v){this.parameters=h,this.type=Hc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Dt(v),this.isInvisible="invisible"===this.parameters.size,re("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const R="string"==typeof l?document.getElementById(l):l;re(R,this.auth,"argument-error"),this.container=R,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ln:new Vd,this.validateStartingState()}verify(){var l=this;return(0,E.Z)(function*(){l.assertNotDestroyed();const h=yield l.render(),v=l.getAssertedRecaptcha();return v.getResponse(h)||new Promise(H=>{const ye=Fe=>{!Fe||(l.tokenChangeListeners.delete(ye),H(Fe))};l.tokenChangeListeners.add(ye),l.isInvisible&&v.execute(h)})})()}render(){try{this.assertNotDestroyed()}catch(l){return Promise.reject(l)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(l=>{throw this.renderPromise=null,l})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(l=>{this.container.removeChild(l)})}validateStartingState(){re(!this.parameters.sitekey,this.auth,"argument-error"),re(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),re("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(l){return h=>{if(this.tokenChangeListeners.forEach(v=>v(h)),"function"==typeof l)l(h);else if("string"==typeof l){const v=Rr()[l];"function"==typeof v&&v(h)}}}assertNotDestroyed(){re(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var l=this;return(0,E.Z)(function*(){if(yield l.init(),!l.widgetId){let h=l.container;if(!l.isInvisible){const v=document.createElement("div");h.appendChild(v),h=v}l.widgetId=l.getAssertedRecaptcha().render(h,l.parameters)}return l.widgetId})()}init(){var l=this;return(0,E.Z)(function*(){re(ft()&&!vs(),l.auth,"internal-error"),yield function ou(){let p=null;return new Promise(l=>{"complete"!==document.readyState?(p=()=>l(),window.addEventListener("load",p)):l()}).catch(l=>{throw p&&window.removeEventListener("load",p),l})}(),l.recaptcha=yield l._recaptchaLoader.load(l.auth,l.auth.languageCode||void 0);const h=yield function ni(p){return as.apply(this,arguments)}(l.auth);re(h,l.auth,"internal-error"),l.parameters.sitekey=h})()}getAssertedRecaptcha(){return re(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Qr{constructor(l,h){this.verificationId=l,this.onConfirmation=h}confirm(l){const h=xr._fromVerification(this.verificationId,l);return this.onConfirmation(h)}}function _s(){return(_s=(0,E.Z)(function*(p,l,h){const v=Dt(p),R=yield Ei(v,l,(0,G.m9)(h));return new Qr(R,H=>ln(v,H))})).apply(this,arguments)}function ko(){return(ko=(0,E.Z)(function*(p,l,h){const v=(0,G.m9)(p);yield S(!1,v,"phone");const R=yield Ei(v.auth,l,(0,G.m9)(h));return new Qr(R,H=>un(v,H))})).apply(this,arguments)}function Bi(){return(Bi=(0,E.Z)(function*(p,l,h){const v=(0,G.m9)(p),R=yield Ei(v.auth,l,(0,G.m9)(h));return new Qr(R,H=>dr(v,H))})).apply(this,arguments)}function Ei(p,l,h){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,E.Z)(function*(p,l,h){var v;const R=yield h.verify();try{let H;if(re("string"==typeof R,p,"argument-error"),re(h.type===Hc,p,"argument-error"),H="string"==typeof l?{phoneNumber:l}:l,"session"in H){const ye=H.session;if("phoneNumber"in H)return re("enroll"===ye.type,p,"internal-error"),(yield Aa(p,{idToken:ye.credential,phoneEnrollmentInfo:{phoneNumber:H.phoneNumber,recaptchaToken:R}})).phoneSessionInfo.sessionInfo;{re("signin"===ye.type,p,"internal-error");const Fe=(null===(v=H.multiFactorHint)||void 0===v?void 0:v.uid)||H.multiFactorUid;return re(Fe,p,"missing-multi-factor-info"),(yield kn(p,{mfaPendingCredential:ye.credential,mfaEnrollmentId:Fe,phoneSignInInfo:{recaptchaToken:R}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ye}=yield Re(p,{phoneNumber:H.phoneNumber,recaptchaToken:R});return ye}}finally{h._reset()}})).apply(this,arguments)}function us(){return(us=(0,E.Z)(function*(p,l){yield A((0,G.m9)(p),l)})).apply(this,arguments)}let Es=(()=>{class p{constructor(h){this.providerId=p.PROVIDER_ID,this.auth=Dt(h)}verifyPhoneNumber(h,v){return Ei(this.auth,h,(0,G.m9)(v))}static credential(h,v){return xr._fromVerification(h,v)}static credentialFromResult(h){return p.credentialFromTaggedObject(h)}static credentialFromError(h){return p.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{phoneNumber:v,temporaryProof:R}=h;return v&&R?xr._fromTokenResponse(v,R):null}}return p.PROVIDER_ID="phone",p.PHONE_SIGN_IN_METHOD="phone",p})();function ro(p,l){return l?oe(l):(re(p._popupRedirectResolver,p,"argument-error"),p._popupRedirectResolver)}class bt extends Xr{constructor(l){super("custom","custom"),this.params=l}_getIdTokenResponse(l){return Gi(l,this._buildIdpRequest())}_linkToIdToken(l,h){return Gi(l,this._buildIdpRequest(h))}_getReauthenticationResolver(l){return Gi(l,this._buildIdpRequest())}_buildIdpRequest(l){const h={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return l&&(h.idToken=l),h}}function vo(p){return He(p.auth,new bt(p),p.bypassAuthState)}function au(p){const{auth:l,user:h}=p;return re(h,l,"internal-error"),ae(h,new bt(p),p.bypassAuthState)}function oa(p){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,E.Z)(function*(p){const{auth:l,user:h}=p;return re(h,l,"internal-error"),A(h,new bt(p),p.bypassAuthState)})).apply(this,arguments)}class aa{constructor(l,h,v,R,H=!1){this.auth=l,this.resolver=v,this.user=R,this.bypassAuthState=H,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(h)?h:[h]}execute(){var l=this;return new Promise(function(){var h=(0,E.Z)(function*(v,R){l.pendingPromise={resolve:v,reject:R};try{l.eventManager=yield l.resolver._initialize(l.auth),yield l.onExecution(),l.eventManager.registerConsumer(l)}catch(H){l.reject(H)}});return function(v,R){return h.apply(this,arguments)}}())}onAuthEvent(l){var h=this;return(0,E.Z)(function*(){const{urlResponse:v,sessionId:R,postBody:H,tenantId:ye,error:Fe,type:Tt}=l;if(Fe)return void h.reject(Fe);const Ot={auth:h.auth,requestUri:v,sessionId:R,tenantId:ye||void 0,postBody:H||void 0,user:h.user,bypassAuthState:h.bypassAuthState};try{h.resolve(yield h.getIdpTask(Tt)(Ot))}catch($t){h.reject($t)}})()}onError(l){this.reject(l)}getIdpTask(l){switch(l){case"signInViaPopup":case"signInViaRedirect":return vo;case"linkViaPopup":case"linkViaRedirect":return oa;case"reauthViaPopup":case"reauthViaRedirect":return au;default:ne(this.auth,"internal-error")}}resolve(l){K(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(l),this.unregisterAndCleanUp()}reject(l){K(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(l),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const cs=new en(2e3,1e4);function qi(){return(qi=(0,E.Z)(function*(p,l,h){const v=Dt(p);Be(p,l,Vr);const R=ro(v,h);return new Lu(v,"signInViaPopup",l,R).executeNotNull()})).apply(this,arguments)}function _o(){return(_o=(0,E.Z)(function*(p,l,h){const v=(0,G.m9)(p);Be(v.auth,l,Vr);const R=ro(v.auth,h);return new Lu(v.auth,"reauthViaPopup",l,R,v).executeNotNull()})).apply(this,arguments)}function ls(){return(ls=(0,E.Z)(function*(p,l,h){const v=(0,G.m9)(p);Be(v.auth,l,Vr);const R=ro(v.auth,h);return new Lu(v.auth,"linkViaPopup",l,R,v).executeNotNull()})).apply(this,arguments)}let Lu=(()=>{class p extends aa{constructor(h,v,R,H,ye){super(h,v,H,ye),this.provider=R,this.authWindow=null,this.pollId=null,p.currentPopupAction&&p.currentPopupAction.cancel(),p.currentPopupAction=this}executeNotNull(){var h=this;return(0,E.Z)(function*(){const v=yield h.execute();return re(v,h.auth,"internal-error"),v})()}onExecution(){var h=this;return(0,E.Z)(function*(){K(1===h.filter.length,"Popup operations only handle one event");const v=Ro();h.authWindow=yield h.resolver._openPopup(h.auth,h.provider,h.filter[0],v),h.authWindow.associatedEvent=v,h.resolver._originValidation(h.auth).catch(R=>{h.reject(R)}),h.resolver._isIframeWebStorageSupported(h.auth,R=>{R||h.reject($e(h.auth,"web-storage-unsupported"))}),h.pollUserCancellation()})()}get eventId(){var h;return(null===(h=this.authWindow)||void 0===h?void 0:h.associatedEvent)||null}cancel(){this.reject($e(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,p.currentPopupAction=null}pollUserCancellation(){const h=()=>{var v,R;this.pollId=(null===(R=null===(v=this.authWindow)||void 0===v?void 0:v.window)||void 0===R?void 0:R.closed)?window.setTimeout(()=>{this.pollId=null,this.reject($e(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(h,cs.get())};h()}}return p.currentPopupAction=null,p})();const wo=new Map;class ua extends aa{constructor(l,h,v=!1){super(l,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],h,void 0,v),this.eventId=null}execute(){var l=()=>super.execute,h=this;return(0,E.Z)(function*(){let v=wo.get(h.auth._key());if(!v){try{const H=(yield function Gc(p,l){return ca.apply(this,arguments)}(h.resolver,h.auth))?yield l().call(h):null;v=()=>Promise.resolve(H)}catch(R){v=()=>Promise.reject(R)}wo.set(h.auth._key(),v)}return h.bypassAuthState||wo.set(h.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(l){var h=()=>super.onAuthEvent,v=this;return(0,E.Z)(function*(){if("signInViaRedirect"===l.type)return h().call(v,l);if("unknown"!==l.type){if(l.eventId){const R=yield v.auth._redirectUserForId(l.eventId);if(R)return v.user=R,h().call(v,l);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,E.Z)(function*(){})()}cleanUp(){}}function ca(){return(ca=(0,E.Z)(function*(p,l){const h=q(l),v=j(p);if(!(yield v._isAvailable()))return!1;const R="true"===(yield v._get(h));return yield v._remove(h),R})).apply(this,arguments)}function uu(p,l){return Na.apply(this,arguments)}function Na(){return(Na=(0,E.Z)(function*(p,l){return j(p)._set(q(l),"true")})).apply(this,arguments)}function x(p,l){wo.set(p._key(),l)}function j(p){return oe(p._redirectPersistence)}function q(p){return fr("pendingRedirect",p.config.apiKey,p.name)}function ct(){return(ct=(0,E.Z)(function*(p,l,h){const v=Dt(p);Be(p,l,Vr);const R=ro(v,h);return yield uu(R,v),R._openRedirect(v,l,"signInViaRedirect")})).apply(this,arguments)}function dn(){return(dn=(0,E.Z)(function*(p,l,h){const v=(0,G.m9)(p);Be(v.auth,l,Vr);const R=ro(v.auth,h);yield uu(R,v.auth);const H=yield ds(v);return R._openRedirect(v.auth,l,"reauthViaRedirect",H)})).apply(this,arguments)}function ii(){return(ii=(0,E.Z)(function*(p,l,h){const v=(0,G.m9)(p);Be(v.auth,l,Vr);const R=ro(v.auth,h);yield S(!1,v,l.providerId),yield uu(R,v.auth);const H=yield ds(v);return R._openRedirect(v.auth,l,"linkViaRedirect",H)})).apply(this,arguments)}function Io(){return(Io=(0,E.Z)(function*(p,l){return yield Dt(p)._initializationPromise,Or(p,l,!1)})).apply(this,arguments)}function Or(p,l){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,E.Z)(function*(p,l,h=!1){const v=Dt(p),R=ro(v,l),ye=yield new ua(v,R,h).execute();return ye&&!h&&(delete ye.user._redirectEventId,yield v._persistUserIfCurrent(ye.user),yield v._setRedirectUser(null,l)),ye})).apply(this,arguments)}function ds(p){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,E.Z)(function*(p){const l=Ro(`${p.uid}:::`);return p._redirectEventId=l,yield p.auth._setRedirectUser(p),yield p.auth._persistUserIfCurrent(p),l})).apply(this,arguments)}class Vl{constructor(l){this.auth=l,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(l){this.consumers.add(l),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,l)&&(this.sendToConsumer(this.queuedRedirectEvent,l),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(l){this.consumers.delete(l)}onEvent(l){if(this.hasEventBeenHandled(l))return!1;let h=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(l,v)&&(h=!0,this.sendToConsumer(l,v),this.saveEventToCache(l))}),this.hasHandledPotentialRedirect||!function Oa(p){switch(p.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zc(p);default:return!1}}(l)||(this.hasHandledPotentialRedirect=!0,h||(this.queuedRedirectEvent=l,h=!0)),h}sendToConsumer(l,h){var v;if(l.error&&!zc(l)){const R=(null===(v=l.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";h.onError($e(this.auth,R))}else h.onAuthEvent(l)}isEventForConsumer(l,h){const v=null===h.eventId||!!l.eventId&&l.eventId===h.eventId;return h.filter.includes(l.type)&&v}hasEventBeenHandled(l){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(la(l))}saveEventToCache(l){this.cachedEventUids.add(la(l)),this.lastProcessedEventTime=Date.now()}}function la(p){return[p.type,p.eventId,p.sessionId,p.tenantId].filter(l=>l).join("-")}function zc({type:p,error:l}){return"unknown"===p&&"auth/no-auth-event"===(null==l?void 0:l.code)}function Fu(p){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,E.Z)(function*(p,l={}){return nn(p,"GET","/v1/projects",l)})).apply(this,arguments)}const Bd=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cu=/^https?/;function Bl(){return(Bl=(0,E.Z)(function*(p){if(p.config.emulator)return;const{authorizedDomains:l}=yield Fu(p);for(const h of l)try{if(Ig(h))return}catch(v){}ne(p,"unauthorized-domain")})).apply(this,arguments)}function Ig(p){const l=it(),{protocol:h,hostname:v}=new URL(l);if(p.startsWith("chrome-extension://")){const ye=new URL(p);return""===ye.hostname&&""===v?"chrome-extension:"===h&&p.replace("chrome-extension://","")===l.replace("chrome-extension://",""):"chrome-extension:"===h&&ye.hostname===v}if(!cu.test(h))return!1;if(Bd.test(p))return v===p;const R=p.replace(/\./g,"\\.");return new RegExp("^(.+\\."+R+"|"+R+")$","i").test(v)}const jd=new en(3e4,6e4);function jl(){const p=Rr().___jsl;if(null==p?void 0:p.H)for(const l of Object.keys(p.H))if(p.H[l].r=p.H[l].r||[],p.H[l].L=p.H[l].L||[],p.H[l].r=[...p.H[l].L],p.CP)for(let h=0;h<p.CP.length;h++)p.CP[h]=null}let Wc=null;function If(p){return Wc=Wc||function Dg(p){return new Promise((l,h)=>{var v,R,H;function ye(){jl(),gapi.load("gapi.iframes",{callback:()=>{l(gapi.iframes.getContext())},ontimeout:()=>{jl(),h($e(p,"network-request-failed"))},timeout:jd.get()})}if(null===(R=null===(v=Rr().gapi)||void 0===v?void 0:v.iframes)||void 0===R?void 0:R.Iframe)l(gapi.iframes.getContext());else{if(!(null===(H=Rr().gapi)||void 0===H?void 0:H.load)){const Fe=or("iframefcb");return Rr()[Fe]=()=>{gapi.load?ye():h($e(p,"network-request-failed"))},Ma(`https://apis.google.com/js/api.js?onload=${Fe}`).catch(Tt=>h(Tt))}ye()}}).catch(l=>{throw Wc=null,l})}(p),Wc}const Df=new en(5e3,15e3),Vu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$d=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Hd(p){const l=p.config;re(l.authDomain,p,"auth-domain-config-required");const h=l.emulator?Bt(l,"emulator/auth/iframe"):`https://${p.config.authDomain}/__/auth/iframe`,v={apiKey:l.apiKey,appName:p.name,v:me.SDK_VERSION},R=$d.get(p.config.apiHost);R&&(v.eid=R);const H=p._getFrameworks();return H.length&&(v.fw=H.join(",")),`${h}?${(0,G.xO)(v).slice(1)}`}function lu(){return lu=(0,E.Z)(function*(p){const l=yield If(p),h=Rr().gapi;return re(h,p,"internal-error"),l.open({where:document.body,url:Hd(p),messageHandlersFilter:h.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Vu,dontclear:!0},v=>new Promise(function(){var R=(0,E.Z)(function*(H,ye){yield v.restyle({setHideOnLeave:!1});const Fe=$e(p,"network-request-failed"),Tt=Rr().setTimeout(()=>{ye(Fe)},Df.get());function Ot(){Rr().clearTimeout(Tt),H(v)}v.ping(Ot).then(Ot,()=>{ye(Fe)})});return function(H,ye){return R.apply(this,arguments)}}()))}),lu.apply(this,arguments)}const Fa={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class du{constructor(l){this.window=l,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(l){}}}function so(p,l,h,v,R,H){re(p.config.authDomain,p,"auth-domain-config-required"),re(p.config.apiKey,p,"invalid-api-key");const ye={apiKey:p.config.apiKey,appName:p.name,authType:h,redirectUrl:v,v:me.SDK_VERSION,eventId:R};if(l instanceof Vr){l.setDefaultLanguage(p.languageCode),ye.providerId=l.providerId||"",(0,G.xb)(l.getCustomParameters())||(ye.customParameters=JSON.stringify(l.getCustomParameters()));for(const[Tt,Ot]of Object.entries(H||{}))ye[Tt]=Ot}if(l instanceof xs){const Tt=l.getScopes().filter(Ot=>""!==Ot);Tt.length>0&&(ye.scopes=Tt.join(","))}p.tenantId&&(ye.tid=p.tenantId);const Fe=ye;for(const Tt of Object.keys(Fe))void 0===Fe[Tt]&&delete Fe[Tt];return`${function hu({config:p}){return p.emulator?Bt(p,"emulator/auth/handler"):`https://${p.authDomain}/__/auth/handler`}(p)}?${(0,G.xO)(Fe).slice(1)}`}const Yc="webStorageSupport";class $l extends class Cf{constructor(l){this.factorId=l}_process(l,h,v){switch(h.type){case"enroll":return this._finalizeEnroll(l,h.credential,v);case"signin":return this._finalizeSignIn(l,h.credential);default:return ke("unexpected MultiFactorSessionType")}}}{constructor(l){super("phone"),this.credential=l}static _fromCredential(l){return new $l(l)}_finalizeEnroll(l,h,v){return function ta(p,l){return nn(p,"POST","/v2/accounts/mfaEnrollment:finalize",Zt(p,l))}(l,{idToken:h,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(l,h){return function Hn(p,l){return nn(p,"POST","/v2/accounts/mfaSignIn:finalize",Zt(p,l))}(l,{mfaPendingCredential:h,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Sf=(()=>{class p{constructor(){}static assertion(h){return $l._fromCredential(h)}}return p.FACTOR_ID="phone",p})();var Bu="@firebase/auth";class Af{constructor(l){this.auth=l,this.internalListeners=new Map}getUid(){var l;return this.assertAuthConfigured(),(null===(l=this.auth.currentUser)||void 0===l?void 0:l.uid)||null}getToken(l){var h=this;return(0,E.Z)(function*(){return h.assertAuthConfigured(),yield h.auth._initializationPromise,h.auth.currentUser?{accessToken:yield h.auth.currentUser.getIdToken(l)}:null})()}addAuthTokenListener(l){if(this.assertAuthConfigured(),this.internalListeners.has(l))return;const h=this.auth.onIdTokenChanged(v=>{var R;l((null===(R=v)||void 0===R?void 0:R.stsTokenManager.accessToken)||null)});this.internalListeners.set(l,h),this.updateProactiveRefresh()}removeAuthTokenListener(l){this.assertAuthConfigured();const h=this.internalListeners.get(l);!h||(this.internalListeners.delete(l),h(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ua(){return window}function ji(){return(ji=(0,E.Z)(function*(p,l,h){var v;const{BuildInfo:R}=Ua();K(l.sessionId,"AuthEvent did not contain a session ID");const H=yield Gl(l.sessionId),ye={};return br()?ye.ibi=R.packageName:Er()?ye.apn=R.packageName:ne(p,"operation-not-supported-in-this-environment"),R.displayName&&(ye.appDisplayName=R.displayName),ye.sessionId=H,so(p,h,l.type,void 0,null!==(v=l.eventId)&&void 0!==v?v:void 0,ye)})).apply(this,arguments)}function mc(){return(mc=(0,E.Z)(function*(p){const{BuildInfo:l}=Ua(),h={};br()?h.iosBundleId=l.packageName:Er()?h.androidPackageName=l.packageName:ne(p,"operation-not-supported-in-this-environment"),yield Fu(p,h)})).apply(this,arguments)}function Yd(){return(Yd=(0,E.Z)(function*(p,l,h){const{cordova:v}=Ua();let R=()=>{};try{yield new Promise((H,ye)=>{let Fe=null;function Tt(){var Jt;H();const Gr=null===(Jt=v.plugins.browsertab)||void 0===Jt?void 0:Jt.close;"function"==typeof Gr&&Gr(),"function"==typeof(null==h?void 0:h.close)&&h.close()}function Ot(){Fe||(Fe=window.setTimeout(()=>{ye($e(p,"redirect-cancelled-by-user"))},2e3))}function $t(){"visible"===(null==document?void 0:document.visibilityState)&&Ot()}l.addPassiveListener(Tt),document.addEventListener("resume",Ot,!1),Er()&&document.addEventListener("visibilitychange",$t,!1),R=()=>{l.removePassiveListener(Tt),document.removeEventListener("resume",Ot,!1),document.removeEventListener("visibilitychange",$t,!1),Fe&&window.clearTimeout(Fe)}})}finally{R()}})).apply(this,arguments)}function Gl(p){return Va.apply(this,arguments)}function Va(){return(Va=(0,E.Z)(function*(p){const l=zl(p),h=yield crypto.subtle.digest("SHA-256",l);return Array.from(new Uint8Array(h)).map(R=>R.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function zl(p){if(K(/[0-9a-zA-Z]+/.test(p),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(p);const l=new ArrayBuffer(p.length),h=new Uint8Array(l);for(let v=0;v<p.length;v++)h[v]=p.charCodeAt(v);return h}!function ju(p){(0,me._registerComponent)(new Ie.wA("auth",(l,{options:h})=>{const v=l.getProvider("app").getImmediate(),R=l.getProvider("heartbeat"),{apiKey:H,authDomain:ye}=v.options;return((Fe,Tt)=>{re(H&&!H.includes(":"),"invalid-api-key",{appName:Fe.name}),re(!(null==ye?void 0:ye.includes(":")),"argument-error",{appName:Fe.name});const Ot={apiKey:H,authDomain:ye,clientPlatform:p,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Fr(p)},$t=new It(Fe,Tt,Ot);return function xe(p,l){const h=(null==l?void 0:l.persistence)||[],v=(Array.isArray(h)?h:[h]).map(oe);(null==l?void 0:l.errorMap)&&p._updateErrorMap(l.errorMap),p._initializeWithPersistence(v,null==l?void 0:l.popupRedirectResolver)}($t,h),$t})(v,R)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((l,h,v)=>{l.getProvider("auth-internal").initialize()})),(0,me._registerComponent)(new Ie.wA("auth-internal",l=>{const h=Dt(l.getProvider("auth").getImmediate());return new Af(h)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,me.registerVersion)(Bu,"0.20.1",function qd(p){switch(p){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(p)),(0,me.registerVersion)(Bu,"0.20.1","esm2017")}("Browser");class bg extends Vl{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(l=>{this.resolveInialized=l})}addPassiveListener(l){this.passiveListeners.add(l)}removePassiveListener(l){this.passiveListeners.delete(l)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(l){return this.resolveInialized(),this.passiveListeners.forEach(h=>h(l)),super.onEvent(l)}initialized(){var l=this;return(0,E.Z)(function*(){yield l.initPromise})()}}function Gu(p){return da.apply(this,arguments)}function da(){return(da=(0,E.Z)(function*(p){const l=yield vc()._get(Fo(p));return l&&(yield vc()._remove(Fo(p))),l})).apply(this,arguments)}function Jd(){const p=[],l="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let h=0;h<20;h++){const v=Math.floor(Math.random()*l.length);p.push(l.charAt(v))}return p.join("")}function vc(){return oe(go)}function Fo(p){return fr("authEvent",p.config.apiKey,p.name)}function Hr(p){if(!(null==p?void 0:p.includes("?")))return{};const[l,...h]=p.split("?");return(0,G.zd)(h.join("?"))}function bo(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:$e("no-auth-event")}}function Ba(){var p;return(null===(p=null==self?void 0:self.location)||void 0===p?void 0:p.protocol)||null}function Nf(p=(0,G.z$)()){return!("file:"!==Ba()&&"ionic:"!==Ba()||!p.toLowerCase().match(/iphone|ipad|ipod|android/))}function pu(){try{const p=self.localStorage,l=Ro();if(p)return p.setItem(l,"1"),p.removeItem(l),!function fu(p=(0,G.z$)()){return function _c(){return(0,G.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Mi(p=(0,G.z$)()){return/Edge\/\d+/.test(p)}(p)}()||(0,G.hl)()}catch(p){return gu()&&(0,G.hl)()}return!1}function gu(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ii(){return(function Rf(){return"http:"===Ba()||"https:"===Ba()}()||(0,G.ru)()||Nf())&&!function ar(){return(0,G.b$)()||(0,G.UG)()}()&&pu()&&!gu()}function mu(){return Nf()&&"undefined"!=typeof document}function Yl(){return(Yl=(0,E.Z)(function*(){return!!mu()&&new Promise(p=>{const l=setTimeout(()=>{p(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(l),p(!0)})})})).apply(this,arguments)}const hs={LOCAL:"local",NONE:"none",SESSION:"session"},Ec=re,Ql="persistence";function ja(p){return Jc.apply(this,arguments)}function Jc(){return(Jc=(0,E.Z)(function*(p){yield p._initializationPromise;const l=oi(),h=fr(Ql,p.config.apiKey,p.name);l&&l.setItem(h,p._getPersistence())})).apply(this,arguments)}function oi(){var p;try{return(null===(p=function nh(){return"undefined"!=typeof window?window:null}())||void 0===p?void 0:p.sessionStorage)||null}catch(l){return null}}const Jl=re;class ha{constructor(){this.browserResolver=oe(class bf{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=os,this._completeRedirectFn=Or,this._overrideRedirectResult=x}_openPopup(l,h,v,R){var H=this;return(0,E.Z)(function*(){var ye;K(null===(ye=H.eventManagers[l._key()])||void 0===ye?void 0:ye.manager,"_initialize() not called before _openPopup()");const Fe=so(l,h,v,it(),R);return function io(p,l,h,v=500,R=600){const H=Math.max((window.screen.availHeight-R)/2,0).toString(),ye=Math.max((window.screen.availWidth-v)/2,0).toString();let Fe="";const Tt=Object.assign(Object.assign({},Fa),{width:v.toString(),height:R.toString(),top:H,left:ye}),Ot=(0,G.z$)().toLowerCase();h&&(Fe=an(Ot)?"_blank":h),pr(Ot)&&(l=l||"http://localhost",Tt.scrollbars="yes");const $t=Object.entries(Tt).reduce((Gr,[ws,Ku])=>`${Gr}${ws}=${Ku},`,"");if(function Oi(p=(0,G.z$)()){var l;return br(p)&&!!(null===(l=window.navigator)||void 0===l?void 0:l.standalone)}(Ot)&&"_self"!==Fe)return function zd(p,l){const h=document.createElement("a");h.href=p,h.target=l;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),h.dispatchEvent(v)}(l||"",Fe),new du(null);const Jt=window.open(l||"",Fe,$t);re(Jt,p,"popup-blocked");try{Jt.focus()}catch(Gr){}return new du(Jt)}(l,Fe,Ro())})()}_openRedirect(l,h,v,R){var H=this;return(0,E.Z)(function*(){return yield H._originValidation(l),function no(p){Rr().location.href=p}(so(l,h,v,it(),R)),new Promise(()=>{})})()}_initialize(l){const h=l._key();if(this.eventManagers[h]){const{manager:R,promise:H}=this.eventManagers[h];return R?Promise.resolve(R):(K(H,"If manager is not set, promise should be"),H)}const v=this.initAndGetManager(l);return this.eventManagers[h]={promise:v},v.catch(()=>{delete this.eventManagers[h]}),v}initAndGetManager(l){var h=this;return(0,E.Z)(function*(){const v=yield function La(p){return lu.apply(this,arguments)}(l),R=new Vl(l);return v.register("authEvent",H=>(re(null==H?void 0:H.authEvent,l,"invalid-auth-event"),{status:R.onEvent(H.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),h.eventManagers[l._key()]={manager:R},h.iframes[l._key()]=v,R})()}_isIframeWebStorageSupported(l,h){this.iframes[l._key()].send(Yc,{type:Yc},R=>{var H;const ye=null===(H=null==R?void 0:R[0])||void 0===H?void 0:H[Yc];void 0!==ye&&h(!!ye),ne(l,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(l){const h=l._key();return this.originValidationPromises[h]||(this.originValidationPromises[h]=function si(p){return Bl.apply(this,arguments)}(l)),this.originValidationPromises[h]}get _shouldInitProactively(){return Ar()||kr()||br()}}),this.cordovaResolver=oe(class Xd{constructor(){this._redirectPersistence=os,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Or,this._overrideRedirectResult=x}_initialize(l){var h=this;return(0,E.Z)(function*(){const v=l._key();let R=h.eventManagers.get(v);return R||(R=new bg(l),h.eventManagers.set(v,R),h.attachCallbackListeners(l,R)),R})()}_openPopup(l){ne(l,"operation-not-supported-in-this-environment")}_openRedirect(l,h,v,R){var H=this;return(0,E.Z)(function*(){!function wi(p){var l,h,v,R,H,ye,Fe,Tt,Ot,$t;const Jt=Ua();re("function"==typeof(null===(l=null==Jt?void 0:Jt.universalLinks)||void 0===l?void 0:l.subscribe),p,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),re(void 0!==(null===(h=null==Jt?void 0:Jt.BuildInfo)||void 0===h?void 0:h.packageName),p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),re("function"==typeof(null===(H=null===(R=null===(v=null==Jt?void 0:Jt.cordova)||void 0===v?void 0:v.plugins)||void 0===R?void 0:R.browsertab)||void 0===H?void 0:H.openUrl),p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),re("function"==typeof(null===(Tt=null===(Fe=null===(ye=null==Jt?void 0:Jt.cordova)||void 0===ye?void 0:ye.plugins)||void 0===Fe?void 0:Fe.browsertab)||void 0===Tt?void 0:Tt.isAvailable),p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),re("function"==typeof(null===($t=null===(Ot=null==Jt?void 0:Jt.cordova)||void 0===Ot?void 0:Ot.InAppBrowser)||void 0===$t?void 0:$t.open),p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(l);const ye=yield H._initialize(l);yield ye.initialized(),ye.resetRedirect(),function C(){wo.clear()}(),yield H._originValidation(l);const Fe=function xf(p,l,h=null){return{type:l,eventId:h,urlResponse:null,sessionId:Jd(),postBody:null,tenantId:p.tenantId,error:$e(p,"no-auth-event")}}(l,v,R);yield function Wl(p,l){return vc()._set(Fo(p),l)}(l,Fe);const Tt=yield function Hl(p,l,h){return ji.apply(this,arguments)}(l,Fe,h),Ot=yield function Hu(p){const{cordova:l}=Ua();return new Promise(h=>{l.plugins.browsertab.isAvailable(v=>{let R=null;v?l.plugins.browsertab.openUrl(p):R=l.InAppBrowser.open(p,function Yi(p=(0,G.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(p)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(p)}()?"_blank":"_system","location=yes"),h(R)})})}(Tt);return function Zd(p,l,h){return Yd.apply(this,arguments)}(l,ye,Ot)})()}_isIframeWebStorageSupported(l,h){throw new Error("Method not implemented.")}_originValidation(l){const h=l._key();return this.originValidationPromises[h]||(this.originValidationPromises[h]=function $u(p){return mc.apply(this,arguments)}(l)),this.originValidationPromises[h]}attachCallbackListeners(l,h){const{universalLinks:v,handleOpenURL:R,BuildInfo:H}=Ua(),ye=setTimeout((0,E.Z)(function*(){yield Gu(l),h.onEvent(bo())}),500),Fe=function(){var $t=(0,E.Z)(function*(Jt){clearTimeout(ye);const Gr=yield Gu(l);let ws=null;Gr&&(null==Jt?void 0:Jt.url)&&(ws=function Qd(p,l){var h,v;const R=function ql(p){const l=Hr(p),h=l.link?decodeURIComponent(l.link):void 0,v=Hr(h).link,R=l.deep_link_id?decodeURIComponent(l.deep_link_id):void 0;return Hr(R).link||R||v||h||p}(l);if(R.includes("/__/auth/callback")){const H=Hr(R),ye=H.firebaseError?function Kl(p){try{return JSON.parse(p)}catch(l){return null}}(decodeURIComponent(H.firebaseError)):null,Fe=null===(v=null===(h=null==ye?void 0:ye.code)||void 0===h?void 0:h.split("auth/"))||void 0===v?void 0:v[1],Tt=Fe?$e(Fe):null;return Tt?{type:p.type,eventId:p.eventId,tenantId:p.tenantId,error:Tt,urlResponse:null,sessionId:null,postBody:null}:{type:p.type,eventId:p.eventId,tenantId:p.tenantId,sessionId:p.sessionId,urlResponse:R,postBody:null}}return null}(Gr,Jt.url)),h.onEvent(ws||bo())});return function(Gr){return $t.apply(this,arguments)}}();void 0!==v&&"function"==typeof v.subscribe&&v.subscribe(null,Fe);const Tt=R,Ot=`${H.packageName.toLowerCase()}://`;Ua().handleOpenURL=function(){var $t=(0,E.Z)(function*(Jt){if(Jt.toLowerCase().startsWith(Ot)&&Fe({url:Jt}),"function"==typeof Tt)try{Tt(Jt)}catch(Gr){console.error(Gr)}});return function(Jt){return $t.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=os,this._completeRedirectFn=Or,this._overrideRedirectResult=x}_initialize(l){var h=this;return(0,E.Z)(function*(){return yield h.selectUnderlyingResolver(),h.assertedUnderlyingResolver._initialize(l)})()}_openPopup(l,h,v,R){var H=this;return(0,E.Z)(function*(){return yield H.selectUnderlyingResolver(),H.assertedUnderlyingResolver._openPopup(l,h,v,R)})()}_openRedirect(l,h,v,R){var H=this;return(0,E.Z)(function*(){return yield H.selectUnderlyingResolver(),H.assertedUnderlyingResolver._openRedirect(l,h,v,R)})()}_isIframeWebStorageSupported(l,h){this.assertedUnderlyingResolver._isIframeWebStorageSupported(l,h)}_originValidation(l){return this.assertedUnderlyingResolver._originValidation(l)}get _shouldInitProactively(){return mu()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Jl(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var l=this;return(0,E.Z)(function*(){if(l.underlyingResolver)return;const h=yield function Qc(){return Yl.apply(this,arguments)}();l.underlyingResolver=h?l.cordovaResolver:l.browserResolver})()}}function $a(p){return p.unwrap()}function Xl(p){return zu(p)}function zu(p){const{_tokenResponse:l}=p instanceof G.ZR?p.customData:p;if(!l)return null;if(!(p instanceof G.ZR)&&"temporaryProof"in l&&"phoneNumber"in l)return Es.credentialFromResult(p);const h=l.providerId;if(!h||"password"===h)return null;let v;switch(h){case"google.com":v=zs;break;case"facebook.com":v=Ji;break;case"github.com":v=Xi;break;case"twitter.com":v=Zo;break;default:const{oauthIdToken:R,oauthAccessToken:H,oauthTokenSecret:ye,pendingToken:Fe,nonce:Tt}=l;return H||ye||R||Fe?Fe?h.startsWith("saml.")?ci._create(h,Fe):ce._fromParams({providerId:h,signInMethod:h,pendingToken:Fe,idToken:R,accessToken:H}):new Si(h).credential({idToken:R,accessToken:H,rawNonce:Tt}):null}return p instanceof G.ZR?v.credentialFromError(p):v.credentialFromResult(p)}function fs(p,l){return l.catch(h=>{throw h instanceof G.ZR&&function wc(p,l){var h;const v=null===(h=l.customData)||void 0===h?void 0:h._tokenResponse;if("auth/multi-factor-auth-required"===l.code)l.resolver=new kf(p,function xn(p,l){var h;const v=(0,G.m9)(p),R=l;return re(l.customData.operationType,v,"argument-error"),re(null===(h=R.customData._serverResponse)||void 0===h?void 0:h.mfaPendingCredential,v,"argument-error"),Ls._fromError(v,R)}(p,l));else if(v){const R=zu(l),H=l;R&&(H.credential=R,H.tenantId=v.tenantId||void 0,H.email=v.email||void 0,H.phoneNumber=v.phoneNumber||void 0)}}(p,h),h}).then(h=>{const R=h.user;return{operationType:h.operationType,credential:Xl(h),additionalUserInfo:hi(h),user:Vo.getOrCreate(R)}})}function Xc(p,l){return el.apply(this,arguments)}function el(){return(el=(0,E.Z)(function*(p,l){const h=yield l;return{verificationId:h.verificationId,confirm:v=>fs(p,h.confirm(v))}})).apply(this,arguments)}class kf{constructor(l,h){this.resolver=h,this.auth=function Uo(p){return p.wrapped()}(l)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(l){return fs($a(this.auth),this.resolver.resolveSignIn(l))}}class Vo{constructor(l){this._delegate=l,this.multiFactor=function Ru(p){const l=(0,G.m9)(p);return fi.has(l)||fi.set(l,is._fromUser(l)),fi.get(l)}(l)}static getOrCreate(l){return Vo.USER_MAP.has(l)||Vo.USER_MAP.set(l,new Vo(l)),Vo.USER_MAP.get(l)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(l){return this._delegate.getIdTokenResult(l)}getIdToken(l){return this._delegate.getIdToken(l)}linkAndRetrieveDataWithCredential(l){return this.linkWithCredential(l)}linkWithCredential(l){var h=this;return(0,E.Z)(function*(){return fs(h.auth,un(h._delegate,l))})()}linkWithPhoneNumber(l,h){var v=this;return(0,E.Z)(function*(){return Xc(v.auth,function yr(p,l,h){return ko.apply(this,arguments)}(v._delegate,l,h))})()}linkWithPopup(l){var h=this;return(0,E.Z)(function*(){return fs(h.auth,function fc(p,l,h){return ls.apply(this,arguments)}(h._delegate,l,ha))})()}linkWithRedirect(l){var h=this;return(0,E.Z)(function*(){return yield ja(Dt(h.auth)),function zn(p,l,h){return function Xt(p,l,h){return ii.apply(this,arguments)}(p,l,h)}(h._delegate,l,ha)})()}reauthenticateAndRetrieveDataWithCredential(l){return this.reauthenticateWithCredential(l)}reauthenticateWithCredential(l){var h=this;return(0,E.Z)(function*(){return fs(h.auth,dr(h._delegate,l))})()}reauthenticateWithPhoneNumber(l,h){return Xc(this.auth,function hc(p,l,h){return Bi.apply(this,arguments)}(this._delegate,l,h))}reauthenticateWithPopup(l){return fs(this.auth,function ku(p,l,h){return _o.apply(this,arguments)}(this._delegate,l,ha))}reauthenticateWithRedirect(l){var h=this;return(0,E.Z)(function*(){return yield ja(Dt(h.auth)),function Lt(p,l,h){return function Vt(p,l,h){return dn.apply(this,arguments)}(p,l,h)}(h._delegate,l,ha)})()}sendEmailVerification(l){return function di(p,l){return fo.apply(this,arguments)}(this._delegate,l)}unlink(l){var h=this;return(0,E.Z)(function*(){return yield function wa(p,l){return Qn.apply(this,arguments)}(h._delegate,l),h})()}updateEmail(l){return function Ta(p,l){return xo((0,G.m9)(p),l,null)}(this._delegate,l)}updatePassword(l){return function Jo(p,l){return xo((0,G.m9)(p),null,l)}(this._delegate,l)}updatePhoneNumber(l){return function Ki(p,l){return us.apply(this,arguments)}(this._delegate,l)}updateProfile(l){return function Ao(p,l){return tu.apply(this,arguments)}(this._delegate,l)}verifyBeforeUpdateEmail(l,h){return function Da(p,l,h){return gr.apply(this,arguments)}(this._delegate,l,h)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Vo.USER_MAP=new WeakMap;const fa=re;let tl=(()=>{class p{constructor(h,v){if(this.app=h,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:R}=h.options;fa(R,"invalid-api-key",{appName:h.name}),fa(R,"invalid-api-key",{appName:h.name});const H="undefined"!=typeof window?ha:void 0;this._delegate=v.initialize({options:{persistence:ih(R,h.name),popupRedirectResolver:H}}),this._delegate._updateErrorMap(Je),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Vo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(h){this._delegate.languageCode=h}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(h){this._delegate.tenantId=h}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(h,v){!function cr(p,l,h){const v=Dt(p);re(v._canInitEmulator,v,"emulator-config-failed"),re(/^https?:\/\//.test(l),v,"invalid-emulator-scheme");const R=!!(null==h?void 0:h.disableWarnings),H=Ur(l),{host:ye,port:Fe}=function er(p){const l=Ur(p),h=/(\/\/)?([^?#/]+)/.exec(p.substr(l.length));if(!h)return{host:"",port:null};const v=h[2].split("@").pop()||"",R=/^(\[[^\]]+\])(:|$)/.exec(v);if(R){const H=R[1];return{host:H,port:Jr(v.substr(H.length+1))}}{const[H,ye]=v.split(":");return{host:H,port:Jr(ye)}}}(l);v.config.emulator={url:`${H}//${ye}${null===Fe?"":`:${Fe}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:ye,port:Fe,protocol:H.replace(":",""),options:Object.freeze({disableWarnings:R})}),R||function Rn(){function p(){const l=document.createElement("p"),h=l.style;l.innerText="Running in emulator mode. Do not use with production credentials.",h.position="fixed",h.width="100%",h.backgroundColor="#ffffff",h.border=".1em solid #000000",h.color="#b50000",h.bottom="0px",h.left="0px",h.margin="0px",h.zIndex="10000",h.textAlign="center",l.classList.add("firebase-emulator-warning"),document.body.appendChild(l)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",p):p())}()}(this._delegate,h,v)}applyActionCode(h){return function Co(p,l){return rt.apply(this,arguments)}(this._delegate,h)}checkActionCode(h){return Dn(this._delegate,h)}confirmPasswordReset(h,v){return function Ns(p,l,h){return Ia.apply(this,arguments)}(this._delegate,h,v)}createUserWithEmailAndPassword(h,v){var R=this;return(0,E.Z)(function*(){return fs(R._delegate,function Ys(p,l,h){return Ui.apply(this,arguments)}(R._delegate,h,v))})()}fetchProvidersForEmail(h){return this.fetchSignInMethodsForEmail(h)}fetchSignInMethodsForEmail(h){return function So(p,l){return Ps.apply(this,arguments)}(this._delegate,h)}isSignInWithEmailLink(h){return function Au(p,l){const h=ms.parseLink(l);return"EMAIL_SIGNIN"===(null==h?void 0:h.operation)}(0,h)}getRedirectResult(){var h=this;return(0,E.Z)(function*(){fa(Ii(),h._delegate,"operation-not-supported-in-this-environment");const v=yield function Cn(p,l){return Io.apply(this,arguments)}(h._delegate,ha);return v?fs(h._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(h){!function th(p,l){Dt(p)._logFramework(l)}(this._delegate,h)}onAuthStateChanged(h,v,R){const{next:H,error:ye,complete:Fe}=rh(h,v,R);return this._delegate.onAuthStateChanged(H,ye,Fe)}onIdTokenChanged(h,v,R){const{next:H,error:ye,complete:Fe}=rh(h,v,R);return this._delegate.onIdTokenChanged(H,ye,Fe)}sendSignInLinkToEmail(h,v){return function Yo(p,l,h){return Su.apply(this,arguments)}(this._delegate,h,v)}sendPasswordResetEmail(h,v){return function lo(p,l,h){return ho.apply(this,arguments)}(this._delegate,h,v||void 0)}setPersistence(h){var v=this;return(0,E.Z)(function*(){let R;switch(function Pf(p,l){Ec(Object.values(hs).includes(l),p,"invalid-persistence-type"),(0,G.b$)()?Ec(l!==hs.SESSION,p,"unsupported-persistence-type"):(0,G.UG)()?Ec(l===hs.NONE,p,"unsupported-persistence-type"):gu()?Ec(l===hs.NONE||l===hs.LOCAL&&(0,G.hl)(),p,"unsupported-persistence-type"):Ec(l===hs.NONE||pu(),p,"unsupported-persistence-type")}(v._delegate,h),h){case hs.SESSION:R=os;break;case hs.LOCAL:R=(yield oe(Ft)._isAvailable())?Ft:go;break;case hs.NONE:R=zt;break;default:return ne("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(R)})()}signInAndRetrieveDataWithCredential(h){return this.signInWithCredential(h)}signInAnonymously(){return fs(this._delegate,function Ks(p){return Ms.apply(this,arguments)}(this._delegate))}signInWithCredential(h){return fs(this._delegate,ln(this._delegate,h))}signInWithCustomToken(h){return fs(this._delegate,function Ai(p,l){return Qt.apply(this,arguments)}(this._delegate,h))}signInWithEmailAndPassword(h,v){return fs(this._delegate,function Qs(p,l,h){return ln((0,G.m9)(p),As.credential(l,h))}(this._delegate,h,v))}signInWithEmailLink(h,v){return fs(this._delegate,function $c(p,l,h){return es.apply(this,arguments)}(this._delegate,h,v))}signInWithPhoneNumber(h,v){return Xc(this._delegate,function ri(p,l,h){return _s.apply(this,arguments)}(this._delegate,h,v))}signInWithPopup(h){var v=this;return(0,E.Z)(function*(){return fa(Ii(),v._delegate,"operation-not-supported-in-this-environment"),fs(v._delegate,function Ul(p,l,h){return qi.apply(this,arguments)}(v._delegate,h,ha))})()}signInWithRedirect(h){var v=this;return(0,E.Z)(function*(){return fa(Ii(),v._delegate,"operation-not-supported-in-this-environment"),yield ja(v._delegate),function Ce(p,l,h){return function Pe(p,l,h){return ct.apply(this,arguments)}(p,l,h)}(v._delegate,h,ha)})()}updateCurrentUser(h){return this._delegate.updateCurrentUser(h)}verifyPasswordResetCode(h){return function Ir(p,l){return ys.apply(this,arguments)}(this._delegate,h)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return p.Persistence=hs,p})();function rh(p,l,h){let v=p;"function"!=typeof p&&({next:v,error:l,complete:h}=p);const R=v;return{next:ye=>R(ye&&Vo.getOrCreate(ye)),error:l,complete:h}}function ih(p,l){const h=function Of(p,l){const h=oi();if(!h)return[];const v=fr(Ql,p,l);switch(h.getItem(v)){case hs.NONE:return[zt];case hs.LOCAL:return[Ft,os];case hs.SESSION:return[os];default:return[]}}(p,l);if("undefined"!=typeof self&&!h.includes(Ft)&&h.push(Ft),"undefined"!=typeof window)for(const v of[go,os])h.includes(v)||h.push(v);return h.includes(zt)||h.push(zt),h}class nl{constructor(){this.providerId="phone",this._delegate=new Es($a(F.Z.auth()))}static credential(l,h){return Es.credential(l,h)}verifyPhoneNumber(l,h){return this._delegate.verifyPhoneNumber(l,h)}unwrap(){return this._delegate}}nl.PHONE_SIGN_IN_METHOD=Es.PHONE_SIGN_IN_METHOD,nl.PROVIDER_ID=Es.PROVIDER_ID;const sh=re;class Lf{constructor(l,h,v=F.Z.app()){var R;sh(null===(R=v.options)||void 0===R?void 0:R.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new su(l,h,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Wu(p){p.INTERNAL.registerComponent(new Ie.wA("auth-compat",l=>{const h=l.getProvider("app-compat").getImmediate(),v=l.getProvider("auth");return new tl(h,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:As,FacebookAuthProvider:Ji,GithubAuthProvider:Xi,GoogleAuthProvider:zs,OAuthProvider:Si,SAMLAuthProvider:Mr,PhoneAuthProvider:nl,PhoneMultiFactorGenerator:Sf,RecaptchaVerifier:Lf,TwitterAuthProvider:Zo,Auth:tl,AuthCredential:Xr,Error:G.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),p.registerVersion("@firebase/auth-compat","0.2.14")}(F.Z)},8306:(_t,Me,O)=>{O.d(Me,{y:()=>ie});var E=O(2961),F=O(727),G=O(8822),me=O(4671);var Ie=O(2416),_e=O(576),Te=O(2806);let ie=(()=>{class Ge{constructor(lt){lt&&(this._subscribe=lt)}lift(lt){const Ne=new Ge;return Ne.source=this,Ne.operator=lt,Ne}subscribe(lt,Ne,Ke){const yt=function ht(Ge){return Ge&&Ge instanceof E.Lv||function we(Ge){return Ge&&(0,_e.m)(Ge.next)&&(0,_e.m)(Ge.error)&&(0,_e.m)(Ge.complete)}(Ge)&&(0,F.Nn)(Ge)}(lt)?lt:new E.Hp(lt,Ne,Ke);return(0,Te.x)(()=>{const{operator:vt,source:ne}=this;yt.add(vt?vt.call(yt,ne):ne?this._subscribe(yt):this._trySubscribe(yt))}),yt}_trySubscribe(lt){try{return this._subscribe(lt)}catch(Ne){lt.error(Ne)}}forEach(lt,Ne){return new(Ne=J(Ne))((Ke,yt)=>{const vt=new E.Hp({next:ne=>{try{lt(ne)}catch($e){yt($e),vt.unsubscribe()}},error:yt,complete:Ke});this.subscribe(vt)})}_subscribe(lt){var Ne;return null===(Ne=this.source)||void 0===Ne?void 0:Ne.subscribe(lt)}[G.L](){return this}pipe(...lt){return function ge(Ge){return 0===Ge.length?me.y:1===Ge.length?Ge[0]:function(lt){return Ge.reduce((Ne,Ke)=>Ke(Ne),lt)}}(lt)(this)}toPromise(lt){return new(lt=J(lt))((Ne,Ke)=>{let yt;this.subscribe(vt=>yt=vt,vt=>Ke(vt),()=>Ne(yt))})}}return Ge.create=Je=>new Ge(Je),Ge})();function J(Ge){var Je;return null!==(Je=null!=Ge?Ge:Ie.v.Promise)&&void 0!==Je?Je:Promise}},7579:(_t,Me,O)=>{O.d(Me,{x:()=>Ie});var E=O(8306),F=O(727);const me=(0,O(3888).d)(Te=>function(){Te(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var fe=O(8737),ge=O(2806);let Ie=(()=>{class Te extends E.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(J){const we=new _e(this,this);return we.operator=J,we}_throwIfClosed(){if(this.closed)throw new me}next(J){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const we of this.currentObservers)we.next(J)}})}error(J){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=J;const{observers:we}=this;for(;we.length;)we.shift().error(J)}})}complete(){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:J}=this;for(;J.length;)J.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var J;return(null===(J=this.observers)||void 0===J?void 0:J.length)>0}_trySubscribe(J){return this._throwIfClosed(),super._trySubscribe(J)}_subscribe(J){return this._throwIfClosed(),this._checkFinalizedStatuses(J),this._innerSubscribe(J)}_innerSubscribe(J){const{hasError:we,isStopped:ht,observers:Ge}=this;return we||ht?F.Lc:(this.currentObservers=null,Ge.push(J),new F.w0(()=>{this.currentObservers=null,(0,fe.P)(Ge,J)}))}_checkFinalizedStatuses(J){const{hasError:we,thrownError:ht,isStopped:Ge}=this;we?J.error(ht):Ge&&J.complete()}asObservable(){const J=new E.y;return J.source=this,J}}return Te.create=(ie,J)=>new _e(ie,J),Te})();class _e extends Ie{constructor(ie,J){super(),this.destination=ie,this.source=J}next(ie){var J,we;null===(we=null===(J=this.destination)||void 0===J?void 0:J.next)||void 0===we||we.call(J,ie)}error(ie){var J,we;null===(we=null===(J=this.destination)||void 0===J?void 0:J.error)||void 0===we||we.call(J,ie)}complete(){var ie,J;null===(J=null===(ie=this.destination)||void 0===ie?void 0:ie.complete)||void 0===J||J.call(ie)}_subscribe(ie){var J,we;return null!==(we=null===(J=this.source)||void 0===J?void 0:J.subscribe(ie))&&void 0!==we?we:F.Lc}}},2961:(_t,Me,O)=>{O.d(Me,{Hp:()=>lt,Lv:()=>we});var E=O(576),F=O(727),G=O(2416),me=O(7849);function fe(){}const ge=Te("C",void 0,void 0);function Te(ne,$e,We){return{kind:ne,value:$e,error:We}}var ie=O(3410),J=O(2806);class we extends F.w0{constructor($e){super(),this.isStopped=!1,$e?(this.destination=$e,(0,F.Nn)($e)&&$e.add(this)):this.destination=vt}static create($e,We,Be){return new lt($e,We,Be)}next($e){this.isStopped?yt(function _e(ne){return Te("N",ne,void 0)}($e),this):this._next($e)}error($e){this.isStopped?yt(function Ie(ne){return Te("E",void 0,ne)}($e),this):(this.isStopped=!0,this._error($e))}complete(){this.isStopped?yt(ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next($e){this.destination.next($e)}_error($e){try{this.destination.error($e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ht=Function.prototype.bind;function Ge(ne,$e){return ht.call(ne,$e)}class Je{constructor($e){this.partialObserver=$e}next($e){const{partialObserver:We}=this;if(We.next)try{We.next($e)}catch(Be){Ne(Be)}}error($e){const{partialObserver:We}=this;if(We.error)try{We.error($e)}catch(Be){Ne(Be)}else Ne($e)}complete(){const{partialObserver:$e}=this;if($e.complete)try{$e.complete()}catch(We){Ne(We)}}}class lt extends we{constructor($e,We,Be){let Ye;if(super(),(0,E.m)($e)||!$e)Ye={next:null!=$e?$e:void 0,error:null!=We?We:void 0,complete:null!=Be?Be:void 0};else{let re;this&&G.v.useDeprecatedNextContext?(re=Object.create($e),re.unsubscribe=()=>this.unsubscribe(),Ye={next:$e.next&&Ge($e.next,re),error:$e.error&&Ge($e.error,re),complete:$e.complete&&Ge($e.complete,re)}):Ye=$e}this.destination=new Je(Ye)}}function Ne(ne){G.v.useDeprecatedSynchronousErrorHandling?(0,J.O)(ne):(0,me.h)(ne)}function yt(ne,$e){const{onStoppedNotification:We}=G.v;We&&ie.z.setTimeout(()=>We(ne,$e))}const vt={closed:!0,next:fe,error:function Ke(ne){throw ne},complete:fe}},727:(_t,Me,O)=>{O.d(Me,{Lc:()=>ge,w0:()=>fe,Nn:()=>Ie});var E=O(576);const G=(0,O(3888).d)(Te=>function(J){Te(this),this.message=J?`${J.length} errors occurred during unsubscription:\n${J.map((we,ht)=>`${ht+1}) ${we.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=J});var me=O(8737);class fe{constructor(ie){this.initialTeardown=ie,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ie;if(!this.closed){this.closed=!0;const{_parentage:J}=this;if(J)if(this._parentage=null,Array.isArray(J))for(const Ge of J)Ge.remove(this);else J.remove(this);const{initialTeardown:we}=this;if((0,E.m)(we))try{we()}catch(Ge){ie=Ge instanceof G?Ge.errors:[Ge]}const{_finalizers:ht}=this;if(ht){this._finalizers=null;for(const Ge of ht)try{_e(Ge)}catch(Je){ie=null!=ie?ie:[],Je instanceof G?ie=[...ie,...Je.errors]:ie.push(Je)}}if(ie)throw new G(ie)}}add(ie){var J;if(ie&&ie!==this)if(this.closed)_e(ie);else{if(ie instanceof fe){if(ie.closed||ie._hasParent(this))return;ie._addParent(this)}(this._finalizers=null!==(J=this._finalizers)&&void 0!==J?J:[]).push(ie)}}_hasParent(ie){const{_parentage:J}=this;return J===ie||Array.isArray(J)&&J.includes(ie)}_addParent(ie){const{_parentage:J}=this;this._parentage=Array.isArray(J)?(J.push(ie),J):J?[J,ie]:ie}_removeParent(ie){const{_parentage:J}=this;J===ie?this._parentage=null:Array.isArray(J)&&(0,me.P)(J,ie)}remove(ie){const{_finalizers:J}=this;J&&(0,me.P)(J,ie),ie instanceof fe&&ie._removeParent(this)}}fe.EMPTY=(()=>{const Te=new fe;return Te.closed=!0,Te})();const ge=fe.EMPTY;function Ie(Te){return Te instanceof fe||Te&&"closed"in Te&&(0,E.m)(Te.remove)&&(0,E.m)(Te.add)&&(0,E.m)(Te.unsubscribe)}function _e(Te){(0,E.m)(Te)?Te():Te.unsubscribe()}},2416:(_t,Me,O)=>{O.d(Me,{v:()=>E});const E={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(_t,Me,O)=>{O.d(Me,{z:()=>fe});var E=O(8189),G=O(7669),me=O(8996);function fe(...ge){return function F(){return(0,E.J)(1)}()((0,me.D)(ge,(0,G.yG)(ge)))}},515:(_t,Me,O)=>{O.d(Me,{E:()=>F});const F=new(O(8306).y)(fe=>fe.complete())},8996:(_t,Me,O)=>{O.d(Me,{D:()=>$e});var E=O(8421),F=O(5363),G=O(9468),ge=O(8306),_e=O(2202),Te=O(576),ie=O(9672);function we(We,Be){if(!We)throw new Error("Iterable cannot be null");return new ge.y(Ye=>{(0,ie.f)(Ye,Be,()=>{const re=We[Symbol.asyncIterator]();(0,ie.f)(Ye,Be,()=>{re.next().then(ke=>{ke.done?Ye.complete():Ye.next(ke.value)})},0,!0)})})}var ht=O(3670),Ge=O(8239),Je=O(1144),lt=O(6495),Ne=O(2206),Ke=O(4532),yt=O(3260);function $e(We,Be){return Be?function ne(We,Be){if(null!=We){if((0,ht.c)(We))return function me(We,Be){return(0,E.Xf)(We).pipe((0,G.R)(Be),(0,F.Q)(Be))}(We,Be);if((0,Je.z)(We))return function Ie(We,Be){return new ge.y(Ye=>{let re=0;return Be.schedule(function(){re===We.length?Ye.complete():(Ye.next(We[re++]),Ye.closed||this.schedule())})})}(We,Be);if((0,Ge.t)(We))return function fe(We,Be){return(0,E.Xf)(We).pipe((0,G.R)(Be),(0,F.Q)(Be))}(We,Be);if((0,Ne.D)(We))return we(We,Be);if((0,lt.T)(We))return function J(We,Be){return new ge.y(Ye=>{let re;return(0,ie.f)(Ye,Be,()=>{re=We[_e.h](),(0,ie.f)(Ye,Be,()=>{let ke,K;try{({value:ke,done:K}=re.next())}catch(Ee){return void Ye.error(Ee)}K?Ye.complete():Ye.next(ke)},0,!0)}),()=>(0,Te.m)(null==re?void 0:re.return)&&re.return()})}(We,Be);if((0,yt.L)(We))return function vt(We,Be){return we((0,yt.Q)(We),Be)}(We,Be)}throw(0,Ke.z)(We)}(We,Be):(0,E.Xf)(We)}},8421:(_t,Me,O)=>{O.d(Me,{Xf:()=>ht});var E=O(655),F=O(1144),G=O(8239),me=O(8306),fe=O(3670),ge=O(2206),Ie=O(4532),_e=O(6495),Te=O(3260),ie=O(576),J=O(7849),we=O(8822);function ht(ne){if(ne instanceof me.y)return ne;if(null!=ne){if((0,fe.c)(ne))return function Ge(ne){return new me.y($e=>{const We=ne[we.L]();if((0,ie.m)(We.subscribe))return We.subscribe($e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ne);if((0,F.z)(ne))return function Je(ne){return new me.y($e=>{for(let We=0;We<ne.length&&!$e.closed;We++)$e.next(ne[We]);$e.complete()})}(ne);if((0,G.t)(ne))return function lt(ne){return new me.y($e=>{ne.then(We=>{$e.closed||($e.next(We),$e.complete())},We=>$e.error(We)).then(null,J.h)})}(ne);if((0,ge.D)(ne))return Ke(ne);if((0,_e.T)(ne))return function Ne(ne){return new me.y($e=>{for(const We of ne)if($e.next(We),$e.closed)return;$e.complete()})}(ne);if((0,Te.L)(ne))return function yt(ne){return Ke((0,Te.Q)(ne))}(ne)}throw(0,Ie.z)(ne)}function Ke(ne){return new me.y($e=>{(function vt(ne,$e){var We,Be,Ye,re;return(0,E.mG)(this,void 0,void 0,function*(){try{for(We=(0,E.KL)(ne);!(Be=yield We.next()).done;)if($e.next(Be.value),$e.closed)return}catch(ke){Ye={error:ke}}finally{try{Be&&!Be.done&&(re=We.return)&&(yield re.call(We))}finally{if(Ye)throw Ye.error}}$e.complete()})})(ne,$e).catch(We=>$e.error(We))})}},6451:(_t,Me,O)=>{O.d(Me,{T:()=>ge});var E=O(8189),F=O(8421),G=O(515),me=O(7669),fe=O(8996);function ge(...Ie){const _e=(0,me.yG)(Ie),Te=(0,me._6)(Ie,1/0),ie=Ie;return ie.length?1===ie.length?(0,F.Xf)(ie[0]):(0,E.J)(Te)((0,fe.D)(ie,_e)):G.E}},9646:(_t,Me,O)=>{O.d(Me,{of:()=>G});var E=O(7669),F=O(8996);function G(...me){const fe=(0,E.yG)(me);return(0,F.D)(me,fe)}},5403:(_t,Me,O)=>{O.d(Me,{x:()=>F});var E=O(2961);function F(me,fe,ge,Ie,_e){return new G(me,fe,ge,Ie,_e)}class G extends E.Lv{constructor(fe,ge,Ie,_e,Te,ie){super(fe),this.onFinalize=Te,this.shouldUnsubscribe=ie,this._next=ge?function(J){try{ge(J)}catch(we){fe.error(we)}}:super._next,this._error=_e?function(J){try{_e(J)}catch(we){fe.error(we)}finally{this.unsubscribe()}}:super._error,this._complete=Ie?function(){try{Ie()}catch(J){fe.error(J)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var fe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ge}=this;super.unsubscribe(),!ge&&(null===(fe=this.onFinalize)||void 0===fe||fe.call(this))}}}},4351:(_t,Me,O)=>{O.d(Me,{b:()=>G});var E=O(5577),F=O(576);function G(me,fe){return(0,F.m)(fe)?(0,E.z)(me,fe,1):(0,E.z)(me,1)}},6590:(_t,Me,O)=>{O.d(Me,{d:()=>G});var E=O(4482),F=O(5403);function G(me){return(0,E.e)((fe,ge)=>{let Ie=!1;fe.subscribe((0,F.x)(ge,_e=>{Ie=!0,ge.next(_e)},()=>{Ie||ge.next(me),ge.complete()}))})}},9300:(_t,Me,O)=>{O.d(Me,{h:()=>G});var E=O(4482),F=O(5403);function G(me,fe){return(0,E.e)((ge,Ie)=>{let _e=0;ge.subscribe((0,F.x)(Ie,Te=>me.call(fe,Te,_e++)&&Ie.next(Te)))})}},590:(_t,Me,O)=>{O.d(Me,{P:()=>Ie});var E=O(6805),F=O(9300),G=O(5698),me=O(6590),fe=O(8068),ge=O(4671);function Ie(_e,Te){const ie=arguments.length>=2;return J=>J.pipe(_e?(0,F.h)((we,ht)=>_e(we,ht,J)):ge.y,(0,G.q)(1),ie?(0,me.d)(Te):(0,fe.T)(()=>new E.K))}},4004:(_t,Me,O)=>{O.d(Me,{U:()=>G});var E=O(4482),F=O(5403);function G(me,fe){return(0,E.e)((ge,Ie)=>{let _e=0;ge.subscribe((0,F.x)(Ie,Te=>{Ie.next(me.call(fe,Te,_e++))}))})}},8189:(_t,Me,O)=>{O.d(Me,{J:()=>G});var E=O(5577),F=O(4671);function G(me=1/0){return(0,E.z)(F.y,me)}},5577:(_t,Me,O)=>{O.d(Me,{z:()=>_e});var E=O(4004),F=O(8421),G=O(4482),me=O(9672),fe=O(5403),Ie=O(576);function _e(Te,ie,J=1/0){return(0,Ie.m)(ie)?_e((we,ht)=>(0,E.U)((Ge,Je)=>ie(we,Ge,ht,Je))((0,F.Xf)(Te(we,ht))),J):("number"==typeof ie&&(J=ie),(0,G.e)((we,ht)=>function ge(Te,ie,J,we,ht,Ge,Je,lt){const Ne=[];let Ke=0,yt=0,vt=!1;const ne=()=>{vt&&!Ne.length&&!Ke&&ie.complete()},$e=Be=>Ke<we?We(Be):Ne.push(Be),We=Be=>{Ge&&ie.next(Be),Ke++;let Ye=!1;(0,F.Xf)(J(Be,yt++)).subscribe((0,fe.x)(ie,re=>{null==ht||ht(re),Ge?$e(re):ie.next(re)},()=>{Ye=!0},void 0,()=>{if(Ye)try{for(Ke--;Ne.length&&Ke<we;){const re=Ne.shift();Je?(0,me.f)(ie,Je,()=>We(re)):We(re)}ne()}catch(re){ie.error(re)}}))};return Te.subscribe((0,fe.x)(ie,$e,()=>{vt=!0,ne()})),()=>{null==lt||lt()}}(we,ht,Te,J)))}},5363:(_t,Me,O)=>{O.d(Me,{Q:()=>me});var E=O(9672),F=O(4482),G=O(5403);function me(fe,ge=0){return(0,F.e)((Ie,_e)=>{Ie.subscribe((0,G.x)(_e,Te=>(0,E.f)(_e,fe,()=>_e.next(Te),ge),()=>(0,E.f)(_e,fe,()=>_e.complete(),ge),Te=>(0,E.f)(_e,fe,()=>_e.error(Te),ge)))})}},5026:(_t,Me,O)=>{O.d(Me,{R:()=>me});var E=O(4482),F=O(5403);function G(fe,ge,Ie,_e,Te){return(ie,J)=>{let we=Ie,ht=ge,Ge=0;ie.subscribe((0,F.x)(J,Je=>{const lt=Ge++;ht=we?fe(ht,Je,lt):(we=!0,Je),_e&&J.next(ht)},Te&&(()=>{we&&J.next(ht),J.complete()})))}}function me(fe,ge){return(0,E.e)(G(fe,ge,arguments.length>=2,!0))}},3099:(_t,Me,O)=>{O.d(Me,{B:()=>ge});var E=O(8996),F=O(5698),G=O(7579),me=O(2961),fe=O(4482);function ge(_e={}){const{connector:Te=(()=>new G.x),resetOnError:ie=!0,resetOnComplete:J=!0,resetOnRefCountZero:we=!0}=_e;return ht=>{let Ge=null,Je=null,lt=null,Ne=0,Ke=!1,yt=!1;const vt=()=>{null==Je||Je.unsubscribe(),Je=null},ne=()=>{vt(),Ge=lt=null,Ke=yt=!1},$e=()=>{const We=Ge;ne(),null==We||We.unsubscribe()};return(0,fe.e)((We,Be)=>{Ne++,!yt&&!Ke&&vt();const Ye=lt=null!=lt?lt:Te();Be.add(()=>{Ne--,0===Ne&&!yt&&!Ke&&(Je=Ie($e,we))}),Ye.subscribe(Be),Ge||(Ge=new me.Hp({next:re=>Ye.next(re),error:re=>{yt=!0,vt(),Je=Ie(ne,ie,re),Ye.error(re)},complete:()=>{Ke=!0,vt(),Je=Ie(ne,J),Ye.complete()}}),(0,E.D)(We).subscribe(Ge))})(ht)}}function Ie(_e,Te,...ie){return!0===Te?(_e(),null):!1===Te?null:Te(...ie).pipe((0,F.q)(1)).subscribe(()=>_e())}},8675:(_t,Me,O)=>{O.d(Me,{O:()=>me});var E=O(7272),F=O(7669),G=O(4482);function me(...fe){const ge=(0,F.yG)(fe);return(0,G.e)((Ie,_e)=>{(ge?(0,E.z)(fe,Ie,ge):(0,E.z)(fe,Ie)).subscribe(_e)})}},9468:(_t,Me,O)=>{O.d(Me,{R:()=>F});var E=O(4482);function F(G,me=0){return(0,E.e)((fe,ge)=>{ge.add(G.schedule(()=>fe.subscribe(ge),me))})}},3900:(_t,Me,O)=>{O.d(Me,{w:()=>me});var E=O(8421),F=O(4482),G=O(5403);function me(fe,ge){return(0,F.e)((Ie,_e)=>{let Te=null,ie=0,J=!1;const we=()=>J&&!Te&&_e.complete();Ie.subscribe((0,G.x)(_e,ht=>{null==Te||Te.unsubscribe();let Ge=0;const Je=ie++;(0,E.Xf)(fe(ht,Je)).subscribe(Te=(0,G.x)(_e,lt=>_e.next(ge?ge(ht,lt,Je,Ge++):lt),()=>{Te=null,we()}))},()=>{J=!0,we()}))})}},5698:(_t,Me,O)=>{O.d(Me,{q:()=>me});var E=O(515),F=O(4482),G=O(5403);function me(fe){return fe<=0?()=>E.E:(0,F.e)((ge,Ie)=>{let _e=0;ge.subscribe((0,G.x)(Ie,Te=>{++_e<=fe&&(Ie.next(Te),fe<=_e&&Ie.complete())}))})}},8505:(_t,Me,O)=>{O.d(Me,{b:()=>fe});var E=O(576),F=O(4482),G=O(5403),me=O(4671);function fe(ge,Ie,_e){const Te=(0,E.m)(ge)||Ie||_e?{next:ge,error:Ie,complete:_e}:ge;return Te?(0,F.e)((ie,J)=>{var we;null===(we=Te.subscribe)||void 0===we||we.call(Te);let ht=!0;ie.subscribe((0,G.x)(J,Ge=>{var Je;null===(Je=Te.next)||void 0===Je||Je.call(Te,Ge),J.next(Ge)},()=>{var Ge;ht=!1,null===(Ge=Te.complete)||void 0===Ge||Ge.call(Te),J.complete()},Ge=>{var Je;ht=!1,null===(Je=Te.error)||void 0===Je||Je.call(Te,Ge),J.error(Ge)},()=>{var Ge,Je;ht&&(null===(Ge=Te.unsubscribe)||void 0===Ge||Ge.call(Te)),null===(Je=Te.finalize)||void 0===Je||Je.call(Te)}))}):me.y}},8068:(_t,Me,O)=>{O.d(Me,{T:()=>me});var E=O(6805),F=O(4482),G=O(5403);function me(ge=fe){return(0,F.e)((Ie,_e)=>{let Te=!1;Ie.subscribe((0,G.x)(_e,ie=>{Te=!0,_e.next(ie)},()=>Te?_e.complete():_e.error(ge())))})}function fe(){return new E.K}},4408:(_t,Me,O)=>{O.d(Me,{o:()=>fe});var E=O(727);class F extends E.w0{constructor(Ie,_e){super()}schedule(Ie,_e=0){return this}}const G={setInterval(ge,Ie,..._e){const{delegate:Te}=G;return(null==Te?void 0:Te.setInterval)?Te.setInterval(ge,Ie,..._e):setInterval(ge,Ie,..._e)},clearInterval(ge){const{delegate:Ie}=G;return((null==Ie?void 0:Ie.clearInterval)||clearInterval)(ge)},delegate:void 0};var me=O(8737);class fe extends F{constructor(Ie,_e){super(Ie,_e),this.scheduler=Ie,this.work=_e,this.pending=!1}schedule(Ie,_e=0){if(this.closed)return this;this.state=Ie;const Te=this.id,ie=this.scheduler;return null!=Te&&(this.id=this.recycleAsyncId(ie,Te,_e)),this.pending=!0,this.delay=_e,this.id=this.id||this.requestAsyncId(ie,this.id,_e),this}requestAsyncId(Ie,_e,Te=0){return G.setInterval(Ie.flush.bind(Ie,this),Te)}recycleAsyncId(Ie,_e,Te=0){if(null!=Te&&this.delay===Te&&!1===this.pending)return _e;G.clearInterval(_e)}execute(Ie,_e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Te=this._execute(Ie,_e);if(Te)return Te;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ie,_e){let ie,Te=!1;try{this.work(Ie)}catch(J){Te=!0,ie=J||new Error("Scheduled action threw falsy error")}if(Te)return this.unsubscribe(),ie}unsubscribe(){if(!this.closed){const{id:Ie,scheduler:_e}=this,{actions:Te}=_e;this.work=this.state=this.scheduler=null,this.pending=!1,(0,me.P)(Te,this),null!=Ie&&(this.id=this.recycleAsyncId(_e,Ie,null)),this.delay=null,super.unsubscribe()}}}},7565:(_t,Me,O)=>{O.d(Me,{v:()=>G});var E=O(6063);class F{constructor(fe,ge=F.now){this.schedulerActionCtor=fe,this.now=ge}schedule(fe,ge=0,Ie){return new this.schedulerActionCtor(this,fe).schedule(Ie,ge)}}F.now=E.l.now;class G extends F{constructor(fe,ge=F.now){super(fe,ge),this.actions=[],this._active=!1,this._scheduled=void 0}flush(fe){const{actions:ge}=this;if(this._active)return void ge.push(fe);let Ie;this._active=!0;do{if(Ie=fe.execute(fe.state,fe.delay))break}while(fe=ge.shift());if(this._active=!1,Ie){for(;fe=ge.shift();)fe.unsubscribe();throw Ie}}}},4986:(_t,Me,O)=>{O.d(Me,{z:()=>G});var E=O(4408);const G=new(O(7565).v)(E.o)},6063:(_t,Me,O)=>{O.d(Me,{l:()=>E});const E={now:()=>(E.delegate||Date).now(),delegate:void 0}},3410:(_t,Me,O)=>{O.d(Me,{z:()=>E});const E={setTimeout(F,G,...me){const{delegate:fe}=E;return(null==fe?void 0:fe.setTimeout)?fe.setTimeout(F,G,...me):setTimeout(F,G,...me)},clearTimeout(F){const{delegate:G}=E;return((null==G?void 0:G.clearTimeout)||clearTimeout)(F)},delegate:void 0}},2202:(_t,Me,O)=>{O.d(Me,{h:()=>F});const F=function E(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(_t,Me,O)=>{O.d(Me,{L:()=>E});const E="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(_t,Me,O)=>{O.d(Me,{K:()=>F});const F=(0,O(3888).d)(G=>function(){G(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(_t,Me,O)=>{O.d(Me,{_6:()=>ge,jO:()=>me,yG:()=>fe});var E=O(576);function G(Ie){return Ie[Ie.length-1]}function me(Ie){return(0,E.m)(G(Ie))?Ie.pop():void 0}function fe(Ie){return function F(Ie){return Ie&&(0,E.m)(Ie.schedule)}(G(Ie))?Ie.pop():void 0}function ge(Ie,_e){return"number"==typeof G(Ie)?Ie.pop():_e}},4742:(_t,Me,O)=>{O.d(Me,{D:()=>fe});const{isArray:E}=Array,{getPrototypeOf:F,prototype:G,keys:me}=Object;function fe(Ie){if(1===Ie.length){const _e=Ie[0];if(E(_e))return{args:_e,keys:null};if(function ge(Ie){return Ie&&"object"==typeof Ie&&F(Ie)===G}(_e)){const Te=me(_e);return{args:Te.map(ie=>_e[ie]),keys:Te}}}return{args:Ie,keys:null}}},8737:(_t,Me,O)=>{function E(F,G){if(F){const me=F.indexOf(G);0<=me&&F.splice(me,1)}}O.d(Me,{P:()=>E})},3888:(_t,Me,O)=>{function E(F){const me=F(fe=>{Error.call(fe),fe.stack=(new Error).stack});return me.prototype=Object.create(Error.prototype),me.prototype.constructor=me,me}O.d(Me,{d:()=>E})},1810:(_t,Me,O)=>{function E(F,G){return F.reduce((me,fe,ge)=>(me[fe]=G[ge],me),{})}O.d(Me,{n:()=>E})},2806:(_t,Me,O)=>{O.d(Me,{O:()=>me,x:()=>G});var E=O(2416);let F=null;function G(fe){if(E.v.useDeprecatedSynchronousErrorHandling){const ge=!F;if(ge&&(F={errorThrown:!1,error:null}),fe(),ge){const{errorThrown:Ie,error:_e}=F;if(F=null,Ie)throw _e}}else fe()}function me(fe){E.v.useDeprecatedSynchronousErrorHandling&&F&&(F.errorThrown=!0,F.error=fe)}},9672:(_t,Me,O)=>{function E(F,G,me,fe=0,ge=!1){const Ie=G.schedule(function(){me(),ge?F.add(this.schedule(null,fe)):this.unsubscribe()},fe);if(F.add(Ie),!ge)return Ie}O.d(Me,{f:()=>E})},4671:(_t,Me,O)=>{function E(F){return F}O.d(Me,{y:()=>E})},1144:(_t,Me,O)=>{O.d(Me,{z:()=>E});const E=F=>F&&"number"==typeof F.length&&"function"!=typeof F},2206:(_t,Me,O)=>{O.d(Me,{D:()=>F});var E=O(576);function F(G){return Symbol.asyncIterator&&(0,E.m)(null==G?void 0:G[Symbol.asyncIterator])}},576:(_t,Me,O)=>{function E(F){return"function"==typeof F}O.d(Me,{m:()=>E})},3670:(_t,Me,O)=>{O.d(Me,{c:()=>G});var E=O(8822),F=O(576);function G(me){return(0,F.m)(me[E.L])}},6495:(_t,Me,O)=>{O.d(Me,{T:()=>G});var E=O(2202),F=O(576);function G(me){return(0,F.m)(null==me?void 0:me[E.h])}},8239:(_t,Me,O)=>{O.d(Me,{t:()=>F});var E=O(576);function F(G){return(0,E.m)(null==G?void 0:G.then)}},3260:(_t,Me,O)=>{O.d(Me,{L:()=>me,Q:()=>G});var E=O(655),F=O(576);function G(fe){return(0,E.FC)(this,arguments,function*(){const Ie=fe.getReader();try{for(;;){const{value:_e,done:Te}=yield(0,E.qq)(Ie.read());if(Te)return yield(0,E.qq)(void 0);yield yield(0,E.qq)(_e)}}finally{Ie.releaseLock()}})}function me(fe){return(0,F.m)(null==fe?void 0:fe.getReader)}},4482:(_t,Me,O)=>{O.d(Me,{A:()=>F,e:()=>G});var E=O(576);function F(me){return(0,E.m)(null==me?void 0:me.lift)}function G(me){return fe=>{if(F(fe))return fe.lift(function(ge){try{return me(ge,this)}catch(Ie){this.error(Ie)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(_t,Me,O)=>{O.d(Me,{Z:()=>me});var E=O(4004);const{isArray:F}=Array;function me(fe){return(0,E.U)(ge=>function G(fe,ge){return F(ge)?fe(...ge):fe(ge)}(fe,ge))}},7849:(_t,Me,O)=>{O.d(Me,{h:()=>G});var E=O(2416),F=O(3410);function G(me){F.z.setTimeout(()=>{const{onUnhandledError:fe}=E.v;if(!fe)throw me;fe(me)})}},4532:(_t,Me,O)=>{function E(F){return new TypeError(`You provided ${null!==F&&"object"==typeof F?"an invalid object":`'${F}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(Me,{z:()=>E})},655:(_t,Me,O)=>{function me(K,Ee){var oe={};for(var Oe in K)Object.prototype.hasOwnProperty.call(K,Oe)&&Ee.indexOf(Oe)<0&&(oe[Oe]=K[Oe]);if(null!=K&&"function"==typeof Object.getOwnPropertySymbols){var xe=0;for(Oe=Object.getOwnPropertySymbols(K);xe<Oe.length;xe++)Ee.indexOf(Oe[xe])<0&&Object.prototype.propertyIsEnumerable.call(K,Oe[xe])&&(oe[Oe[xe]]=K[Oe[xe]])}return oe}function _e(K,Ee,oe,Oe){return new(oe||(oe=Promise))(function(it,ft){function pt(en){try{at(Oe.next(en))}catch(Bt){ft(Bt)}}function Mt(en){try{at(Oe.throw(en))}catch(Bt){ft(Bt)}}function at(en){en.done?it(en.value):function xe(it){return it instanceof oe?it:new oe(function(ft){ft(it)})}(en.value).then(pt,Mt)}at((Oe=Oe.apply(K,Ee||[])).next())})}function Ne(K){return this instanceof Ne?(this.v=K,this):new Ne(K)}function Ke(K,Ee,oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var xe,Oe=oe.apply(K,Ee||[]),it=[];return xe={},ft("next"),ft("throw"),ft("return"),xe[Symbol.asyncIterator]=function(){return this},xe;function ft(jt){Oe[jt]&&(xe[jt]=function(wt){return new Promise(function(Ht,Zt){it.push([jt,wt,Ht,Zt])>1||pt(jt,wt)})})}function pt(jt,wt){try{!function Mt(jt){jt.value instanceof Ne?Promise.resolve(jt.value.v).then(at,en):Bt(it[0][2],jt)}(Oe[jt](wt))}catch(Ht){Bt(it[0][3],Ht)}}function at(jt){pt("next",jt)}function en(jt){pt("throw",jt)}function Bt(jt,wt){jt(wt),it.shift(),it.length&&pt(it[0][0],it[0][1])}}function vt(K){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var oe,Ee=K[Symbol.asyncIterator];return Ee?Ee.call(K):(K=function we(K){var Ee="function"==typeof Symbol&&Symbol.iterator,oe=Ee&&K[Ee],Oe=0;if(oe)return oe.call(K);if(K&&"number"==typeof K.length)return{next:function(){return K&&Oe>=K.length&&(K=void 0),{value:K&&K[Oe++],done:!K}}};throw new TypeError(Ee?"Object is not iterable.":"Symbol.iterator is not defined.")}(K),oe={},Oe("next"),Oe("throw"),Oe("return"),oe[Symbol.asyncIterator]=function(){return this},oe);function Oe(it){oe[it]=K[it]&&function(ft){return new Promise(function(pt,Mt){!function xe(it,ft,pt,Mt){Promise.resolve(Mt).then(function(at){it({value:at,done:pt})},ft)}(pt,Mt,(ft=K[it](ft)).done,ft.value)})}}}O.d(Me,{FC:()=>Ke,KL:()=>vt,_T:()=>me,mG:()=>_e,qq:()=>Ne})},9808:(_t,Me,O)=>{O.d(Me,{Do:()=>ne,EM:()=>Ms,HT:()=>fe,JF:()=>Qn,K0:()=>Ie,Mx:()=>mi,O5:()=>je,PM:()=>vi,S$:()=>Ne,V_:()=>ie,Ye:()=>$e,b0:()=>vt,bD:()=>ci,ez:()=>qo,lw:()=>_e,mr:()=>yt,q:()=>G,sg:()=>ee,w_:()=>ge});var E=O(5e3);let F=null;function G(){return F}function fe(A){F||(F=A)}class ge{}const Ie=new E.OlP("DocumentToken");let _e=(()=>{class A{historyGo(S){throw new Error("Not implemented")}}return A.\u0275fac=function(S){return new(S||A)},A.\u0275prov=E.Yz7({token:A,factory:function(){return function Te(){return(0,E.LFG)(J)}()},providedIn:"platform"}),A})();const ie=new E.OlP("Location Initialized");let J=(()=>{class A extends _e{constructor(S){super(),this._doc=S,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return G().getBaseHref(this._doc)}onPopState(S){const $=G().getGlobalEventTarget(this._doc,"window");return $.addEventListener("popstate",S,!1),()=>$.removeEventListener("popstate",S)}onHashChange(S){const $=G().getGlobalEventTarget(this._doc,"window");return $.addEventListener("hashchange",S,!1),()=>$.removeEventListener("hashchange",S)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(S){this.location.pathname=S}pushState(S,$,ae){we()?this._history.pushState(S,$,ae):this.location.hash=ae}replaceState(S,$,ae){we()?this._history.replaceState(S,$,ae):this.location.hash=ae}forward(){this._history.forward()}back(){this._history.back()}historyGo(S=0){this._history.go(S)}getState(){return this._history.state}}return A.\u0275fac=function(S){return new(S||A)(E.LFG(Ie))},A.\u0275prov=E.Yz7({token:A,factory:function(){return function ht(){return new J((0,E.LFG)(Ie))}()},providedIn:"platform"}),A})();function we(){return!!window.history.pushState}function Ge(A,V){if(0==A.length)return V;if(0==V.length)return A;let S=0;return A.endsWith("/")&&S++,V.startsWith("/")&&S++,2==S?A+V.substring(1):1==S?A+V:A+"/"+V}function Je(A){const V=A.match(/#|\?|$/),S=V&&V.index||A.length;return A.slice(0,S-("/"===A[S-1]?1:0))+A.slice(S)}function lt(A){return A&&"?"!==A[0]?"?"+A:A}let Ne=(()=>{class A{historyGo(S){throw new Error("Not implemented")}}return A.\u0275fac=function(S){return new(S||A)},A.\u0275prov=E.Yz7({token:A,factory:function(){return function Ke(A){const V=(0,E.LFG)(Ie).location;return new vt((0,E.LFG)(_e),V&&V.origin||"")}()},providedIn:"root"}),A})();const yt=new E.OlP("appBaseHref");let vt=(()=>{class A extends Ne{constructor(S,$){if(super(),this._platformLocation=S,this._removeListenerFns=[],null==$&&($=this._platformLocation.getBaseHrefFromDOM()),null==$)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=$}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(S){this._removeListenerFns.push(this._platformLocation.onPopState(S),this._platformLocation.onHashChange(S))}getBaseHref(){return this._baseHref}prepareExternalUrl(S){return Ge(this._baseHref,S)}path(S=!1){const $=this._platformLocation.pathname+lt(this._platformLocation.search),ae=this._platformLocation.hash;return ae&&S?`${$}${ae}`:$}pushState(S,$,ae,Ve){const He=this.prepareExternalUrl(ae+lt(Ve));this._platformLocation.pushState(S,$,He)}replaceState(S,$,ae,Ve){const He=this.prepareExternalUrl(ae+lt(Ve));this._platformLocation.replaceState(S,$,He)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(S=0){var $,ae;null===(ae=($=this._platformLocation).historyGo)||void 0===ae||ae.call($,S)}}return A.\u0275fac=function(S){return new(S||A)(E.LFG(_e),E.LFG(yt,8))},A.\u0275prov=E.Yz7({token:A,factory:A.\u0275fac}),A})(),ne=(()=>{class A extends Ne{constructor(S,$){super(),this._platformLocation=S,this._baseHref="",this._removeListenerFns=[],null!=$&&(this._baseHref=$)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(S){this._removeListenerFns.push(this._platformLocation.onPopState(S),this._platformLocation.onHashChange(S))}getBaseHref(){return this._baseHref}path(S=!1){let $=this._platformLocation.hash;return null==$&&($="#"),$.length>0?$.substring(1):$}prepareExternalUrl(S){const $=Ge(this._baseHref,S);return $.length>0?"#"+$:$}pushState(S,$,ae,Ve){let He=this.prepareExternalUrl(ae+lt(Ve));0==He.length&&(He=this._platformLocation.pathname),this._platformLocation.pushState(S,$,He)}replaceState(S,$,ae,Ve){let He=this.prepareExternalUrl(ae+lt(Ve));0==He.length&&(He=this._platformLocation.pathname),this._platformLocation.replaceState(S,$,He)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(S=0){var $,ae;null===(ae=($=this._platformLocation).historyGo)||void 0===ae||ae.call($,S)}}return A.\u0275fac=function(S){return new(S||A)(E.LFG(_e),E.LFG(yt,8))},A.\u0275prov=E.Yz7({token:A,factory:A.\u0275fac}),A})(),$e=(()=>{class A{constructor(S,$){this._subject=new E.vpe,this._urlChangeListeners=[],this._platformStrategy=S;const ae=this._platformStrategy.getBaseHref();this._platformLocation=$,this._baseHref=Je(Ye(ae)),this._platformStrategy.onPopState(Ve=>{this._subject.emit({url:this.path(!0),pop:!0,state:Ve.state,type:Ve.type})})}path(S=!1){return this.normalize(this._platformStrategy.path(S))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(S,$=""){return this.path()==this.normalize(S+lt($))}normalize(S){return A.stripTrailingSlash(function Be(A,V){return A&&V.startsWith(A)?V.substring(A.length):V}(this._baseHref,Ye(S)))}prepareExternalUrl(S){return S&&"/"!==S[0]&&(S="/"+S),this._platformStrategy.prepareExternalUrl(S)}go(S,$="",ae=null){this._platformStrategy.pushState(ae,"",S,$),this._notifyUrlChangeListeners(this.prepareExternalUrl(S+lt($)),ae)}replaceState(S,$="",ae=null){this._platformStrategy.replaceState(ae,"",S,$),this._notifyUrlChangeListeners(this.prepareExternalUrl(S+lt($)),ae)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(S=0){var $,ae;null===(ae=($=this._platformStrategy).historyGo)||void 0===ae||ae.call($,S)}onUrlChange(S){this._urlChangeListeners.push(S),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe($=>{this._notifyUrlChangeListeners($.url,$.state)}))}_notifyUrlChangeListeners(S="",$){this._urlChangeListeners.forEach(ae=>ae(S,$))}subscribe(S,$,ae){return this._subject.subscribe({next:S,error:$,complete:ae})}}return A.normalizeQueryParams=lt,A.joinWithSlash=Ge,A.stripTrailingSlash=Je,A.\u0275fac=function(S){return new(S||A)(E.LFG(Ne),E.LFG(_e))},A.\u0275prov=E.Yz7({token:A,factory:function(){return function We(){return new $e((0,E.LFG)(Ne),(0,E.LFG)(_e))}()},providedIn:"root"}),A})();function Ye(A){return A.replace(/\/index.html$/,"")}function mi(A,V){V=encodeURIComponent(V);for(const S of A.split(";")){const $=S.indexOf("="),[ae,Ve]=-1==$?[S,""]:[S.slice(0,$),S.slice($+1)];if(ae.trim()===V)return decodeURIComponent(Ve)}return null}class X{constructor(V,S,$,ae){this.$implicit=V,this.ngForOf=S,this.index=$,this.count=ae}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ee=(()=>{class A{constructor(S,$,ae){this._viewContainer=S,this._template=$,this._differs=ae,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(S){this._ngForOf=S,this._ngForOfDirty=!0}set ngForTrackBy(S){this._trackByFn=S}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(S){S&&(this._template=S)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const S=this._ngForOf;!this._differ&&S&&(this._differ=this._differs.find(S).create(this.ngForTrackBy))}if(this._differ){const S=this._differ.diff(this._ngForOf);S&&this._applyChanges(S)}}_applyChanges(S){const $=this._viewContainer;S.forEachOperation((ae,Ve,He)=>{if(null==ae.previousIndex)$.createEmbeddedView(this._template,new X(ae.item,this._ngForOf,-1,-1),null===He?void 0:He);else if(null==He)$.remove(null===Ve?void 0:Ve);else if(null!==Ve){const Pt=$.get(Ve);$.move(Pt,He),W(Pt,ae)}});for(let ae=0,Ve=$.length;ae<Ve;ae++){const Pt=$.get(ae).context;Pt.index=ae,Pt.count=Ve,Pt.ngForOf=this._ngForOf}S.forEachIdentityChange(ae=>{W($.get(ae.currentIndex),ae)})}static ngTemplateContextGuard(S,$){return!0}}return A.\u0275fac=function(S){return new(S||A)(E.Y36(E.s_b),E.Y36(E.Rgc),E.Y36(E.ZZ4))},A.\u0275dir=E.lG2({type:A,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),A})();function W(A,V){A.context.$implicit=V.item}let je=(()=>{class A{constructor(S,$){this._viewContainer=S,this._context=new St,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=$}set ngIf(S){this._context.$implicit=this._context.ngIf=S,this._updateView()}set ngIfThen(S){En("ngIfThen",S),this._thenTemplateRef=S,this._thenViewRef=null,this._updateView()}set ngIfElse(S){En("ngIfElse",S),this._elseTemplateRef=S,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(S,$){return!0}}return A.\u0275fac=function(S){return new(S||A)(E.Y36(E.s_b),E.Y36(E.Rgc))},A.\u0275dir=E.lG2({type:A,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),A})();class St{constructor(){this.$implicit=null,this.ngIf=null}}function En(A,V){if(V&&!V.createEmbeddedView)throw new Error(`${A} must be a TemplateRef, but received '${(0,E.AaK)(V)}'.`)}let qo=(()=>{class A{}return A.\u0275fac=function(S){return new(S||A)},A.\u0275mod=E.oAB({type:A}),A.\u0275inj=E.cJS({}),A})();const ci="browser";function vi(A){return"server"===A}let Ms=(()=>{class A{}return A.\u0275prov=(0,E.Yz7)({token:A,providedIn:"root",factory:()=>new Fi((0,E.LFG)(Ie),window)}),A})();class Fi{constructor(V,S){this.document=V,this.window=S,this.offset=()=>[0,0]}setOffset(V){this.offset=Array.isArray(V)?()=>V:V}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(V){this.supportsScrolling()&&this.window.scrollTo(V[0],V[1])}scrollToAnchor(V){if(!this.supportsScrolling())return;const S=function jr(A,V){const S=A.getElementById(V)||A.getElementsByName(V)[0];if(S)return S;if("function"==typeof A.createTreeWalker&&A.body&&(A.body.createShadowRoot||A.body.attachShadow)){const $=A.createTreeWalker(A.body,NodeFilter.SHOW_ELEMENT);let ae=$.currentNode;for(;ae;){const Ve=ae.shadowRoot;if(Ve){const He=Ve.getElementById(V)||Ve.querySelector(`[name="${V}"]`);if(He)return He}ae=$.nextNode()}}return null}(this.document,V);S&&(this.scrollToElement(S),S.focus())}setHistoryScrollRestoration(V){if(this.supportScrollRestoration()){const S=this.window.history;S&&S.scrollRestoration&&(S.scrollRestoration=V)}}scrollToElement(V){const S=V.getBoundingClientRect(),$=S.left+this.window.pageXOffset,ae=S.top+this.window.pageYOffset,Ve=this.offset();this.window.scrollTo($-Ve[0],ae-Ve[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const V=qs(this.window.history)||qs(Object.getPrototypeOf(this.window.history));return!(!V||!V.writable&&!V.set)}catch(V){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(V){return!1}}}function qs(A){return Object.getOwnPropertyDescriptor(A,"scrollRestoration")}class Qn{}},520:(_t,Me,O)=>{O.d(Me,{JF:()=>vn,eN:()=>xe});var E=O(9808),F=O(5e3),G=O(9646),me=O(8306),fe=O(4351),ge=O(9300),Ie=O(4004);class _e{}class Te{}class ie{constructor(ue){this.normalizedNames=new Map,this.lazyUpdate=null,ue?this.lazyInit="string"==typeof ue?()=>{this.headers=new Map,ue.split("\n").forEach(pe=>{const tt=pe.indexOf(":");if(tt>0){const Se=pe.slice(0,tt),et=Se.toLowerCase(),gt=pe.slice(tt+1).trim();this.maybeSetNormalizedName(Se,et),this.headers.has(et)?this.headers.get(et).push(gt):this.headers.set(et,[gt])}})}:()=>{this.headers=new Map,Object.keys(ue).forEach(pe=>{let tt=ue[pe];const Se=pe.toLowerCase();"string"==typeof tt&&(tt=[tt]),tt.length>0&&(this.headers.set(Se,tt),this.maybeSetNormalizedName(pe,Se))})}:this.headers=new Map}has(ue){return this.init(),this.headers.has(ue.toLowerCase())}get(ue){this.init();const pe=this.headers.get(ue.toLowerCase());return pe&&pe.length>0?pe[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(ue){return this.init(),this.headers.get(ue.toLowerCase())||null}append(ue,pe){return this.clone({name:ue,value:pe,op:"a"})}set(ue,pe){return this.clone({name:ue,value:pe,op:"s"})}delete(ue,pe){return this.clone({name:ue,value:pe,op:"d"})}maybeSetNormalizedName(ue,pe){this.normalizedNames.has(pe)||this.normalizedNames.set(pe,ue)}init(){this.lazyInit&&(this.lazyInit instanceof ie?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(ue=>this.applyUpdate(ue)),this.lazyUpdate=null))}copyFrom(ue){ue.init(),Array.from(ue.headers.keys()).forEach(pe=>{this.headers.set(pe,ue.headers.get(pe)),this.normalizedNames.set(pe,ue.normalizedNames.get(pe))})}clone(ue){const pe=new ie;return pe.lazyInit=this.lazyInit&&this.lazyInit instanceof ie?this.lazyInit:this,pe.lazyUpdate=(this.lazyUpdate||[]).concat([ue]),pe}applyUpdate(ue){const pe=ue.name.toLowerCase();switch(ue.op){case"a":case"s":let tt=ue.value;if("string"==typeof tt&&(tt=[tt]),0===tt.length)return;this.maybeSetNormalizedName(ue.name,pe);const Se=("a"===ue.op?this.headers.get(pe):void 0)||[];Se.push(...tt),this.headers.set(pe,Se);break;case"d":const et=ue.value;if(et){let gt=this.headers.get(pe);if(!gt)return;gt=gt.filter(fn=>-1===et.indexOf(fn)),0===gt.length?(this.headers.delete(pe),this.normalizedNames.delete(pe)):this.headers.set(pe,gt)}else this.headers.delete(pe),this.normalizedNames.delete(pe)}}forEach(ue){this.init(),Array.from(this.normalizedNames.keys()).forEach(pe=>ue(this.normalizedNames.get(pe),this.headers.get(pe)))}}class J{encodeKey(ue){return Je(ue)}encodeValue(ue){return Je(ue)}decodeKey(ue){return decodeURIComponent(ue)}decodeValue(ue){return decodeURIComponent(ue)}}const ht=/%(\d[a-f0-9])/gi,Ge={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function Je(qe){return encodeURIComponent(qe).replace(ht,(ue,pe)=>{var tt;return null!==(tt=Ge[pe])&&void 0!==tt?tt:ue})}function lt(qe){return`${qe}`}class Ne{constructor(ue={}){if(this.updates=null,this.cloneFrom=null,this.encoder=ue.encoder||new J,ue.fromString){if(ue.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function we(qe,ue){const pe=new Map;return qe.length>0&&qe.replace(/^\?/,"").split("&").forEach(Se=>{const et=Se.indexOf("="),[gt,fn]=-1==et?[ue.decodeKey(Se),""]:[ue.decodeKey(Se.slice(0,et)),ue.decodeValue(Se.slice(et+1))],Kt=pe.get(gt)||[];Kt.push(fn),pe.set(gt,Kt)}),pe}(ue.fromString,this.encoder)}else ue.fromObject?(this.map=new Map,Object.keys(ue.fromObject).forEach(pe=>{const tt=ue.fromObject[pe];this.map.set(pe,Array.isArray(tt)?tt:[tt])})):this.map=null}has(ue){return this.init(),this.map.has(ue)}get(ue){this.init();const pe=this.map.get(ue);return pe?pe[0]:null}getAll(ue){return this.init(),this.map.get(ue)||null}keys(){return this.init(),Array.from(this.map.keys())}append(ue,pe){return this.clone({param:ue,value:pe,op:"a"})}appendAll(ue){const pe=[];return Object.keys(ue).forEach(tt=>{const Se=ue[tt];Array.isArray(Se)?Se.forEach(et=>{pe.push({param:tt,value:et,op:"a"})}):pe.push({param:tt,value:Se,op:"a"})}),this.clone(pe)}set(ue,pe){return this.clone({param:ue,value:pe,op:"s"})}delete(ue,pe){return this.clone({param:ue,value:pe,op:"d"})}toString(){return this.init(),this.keys().map(ue=>{const pe=this.encoder.encodeKey(ue);return this.map.get(ue).map(tt=>pe+"="+this.encoder.encodeValue(tt)).join("&")}).filter(ue=>""!==ue).join("&")}clone(ue){const pe=new Ne({encoder:this.encoder});return pe.cloneFrom=this.cloneFrom||this,pe.updates=(this.updates||[]).concat(ue),pe}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(ue=>this.map.set(ue,this.cloneFrom.map.get(ue))),this.updates.forEach(ue=>{switch(ue.op){case"a":case"s":const pe=("a"===ue.op?this.map.get(ue.param):void 0)||[];pe.push(lt(ue.value)),this.map.set(ue.param,pe);break;case"d":if(void 0===ue.value){this.map.delete(ue.param);break}{let tt=this.map.get(ue.param)||[];const Se=tt.indexOf(lt(ue.value));-1!==Se&&tt.splice(Se,1),tt.length>0?this.map.set(ue.param,tt):this.map.delete(ue.param)}}}),this.cloneFrom=this.updates=null)}}class yt{constructor(){this.map=new Map}set(ue,pe){return this.map.set(ue,pe),this}get(ue){return this.map.has(ue)||this.map.set(ue,ue.defaultValue()),this.map.get(ue)}delete(ue){return this.map.delete(ue),this}has(ue){return this.map.has(ue)}keys(){return this.map.keys()}}function ne(qe){return"undefined"!=typeof ArrayBuffer&&qe instanceof ArrayBuffer}function $e(qe){return"undefined"!=typeof Blob&&qe instanceof Blob}function We(qe){return"undefined"!=typeof FormData&&qe instanceof FormData}class Ye{constructor(ue,pe,tt,Se){let et;if(this.url=pe,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=ue.toUpperCase(),function vt(qe){switch(qe){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||Se?(this.body=void 0!==tt?tt:null,et=Se):et=tt,et&&(this.reportProgress=!!et.reportProgress,this.withCredentials=!!et.withCredentials,et.responseType&&(this.responseType=et.responseType),et.headers&&(this.headers=et.headers),et.context&&(this.context=et.context),et.params&&(this.params=et.params)),this.headers||(this.headers=new ie),this.context||(this.context=new yt),this.params){const gt=this.params.toString();if(0===gt.length)this.urlWithParams=pe;else{const fn=pe.indexOf("?");this.urlWithParams=pe+(-1===fn?"?":fn<pe.length-1?"&":"")+gt}}else this.params=new Ne,this.urlWithParams=pe}serializeBody(){return null===this.body?null:ne(this.body)||$e(this.body)||We(this.body)||function Be(qe){return"undefined"!=typeof URLSearchParams&&qe instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ne?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||We(this.body)?null:$e(this.body)?this.body.type||null:ne(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ne?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(ue={}){var pe;const tt=ue.method||this.method,Se=ue.url||this.url,et=ue.responseType||this.responseType,gt=void 0!==ue.body?ue.body:this.body,fn=void 0!==ue.withCredentials?ue.withCredentials:this.withCredentials,Kt=void 0!==ue.reportProgress?ue.reportProgress:this.reportProgress;let qt=ue.headers||this.headers,hr=ue.params||this.params;const Un=null!==(pe=ue.context)&&void 0!==pe?pe:this.context;return void 0!==ue.setHeaders&&(qt=Object.keys(ue.setHeaders).reduce((_n,Y)=>_n.set(Y,ue.setHeaders[Y]),qt)),ue.setParams&&(hr=Object.keys(ue.setParams).reduce((_n,Y)=>_n.set(Y,ue.setParams[Y]),hr)),new Ye(tt,Se,gt,{params:hr,headers:qt,context:Un,reportProgress:Kt,responseType:et,withCredentials:fn})}}var re=(()=>((re=re||{})[re.Sent=0]="Sent",re[re.UploadProgress=1]="UploadProgress",re[re.ResponseHeader=2]="ResponseHeader",re[re.DownloadProgress=3]="DownloadProgress",re[re.Response=4]="Response",re[re.User=5]="User",re))();class ke{constructor(ue,pe=200,tt="OK"){this.headers=ue.headers||new ie,this.status=void 0!==ue.status?ue.status:pe,this.statusText=ue.statusText||tt,this.url=ue.url||null,this.ok=this.status>=200&&this.status<300}}class K extends ke{constructor(ue={}){super(ue),this.type=re.ResponseHeader}clone(ue={}){return new K({headers:ue.headers||this.headers,status:void 0!==ue.status?ue.status:this.status,statusText:ue.statusText||this.statusText,url:ue.url||this.url||void 0})}}class Ee extends ke{constructor(ue={}){super(ue),this.type=re.Response,this.body=void 0!==ue.body?ue.body:null}clone(ue={}){return new Ee({body:void 0!==ue.body?ue.body:this.body,headers:ue.headers||this.headers,status:void 0!==ue.status?ue.status:this.status,statusText:ue.statusText||this.statusText,url:ue.url||this.url||void 0})}}class oe extends ke{constructor(ue){super(ue,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${ue.url||"(unknown url)"}`:`Http failure response for ${ue.url||"(unknown url)"}: ${ue.status} ${ue.statusText}`,this.error=ue.error||null}}function Oe(qe,ue){return{body:ue,headers:qe.headers,context:qe.context,observe:qe.observe,params:qe.params,reportProgress:qe.reportProgress,responseType:qe.responseType,withCredentials:qe.withCredentials}}let xe=(()=>{class qe{constructor(pe){this.handler=pe}request(pe,tt,Se={}){let et;if(pe instanceof Ye)et=pe;else{let Kt,qt;Kt=Se.headers instanceof ie?Se.headers:new ie(Se.headers),Se.params&&(qt=Se.params instanceof Ne?Se.params:new Ne({fromObject:Se.params})),et=new Ye(pe,tt,void 0!==Se.body?Se.body:null,{headers:Kt,context:Se.context,params:qt,reportProgress:Se.reportProgress,responseType:Se.responseType||"json",withCredentials:Se.withCredentials})}const gt=(0,G.of)(et).pipe((0,fe.b)(Kt=>this.handler.handle(Kt)));if(pe instanceof Ye||"events"===Se.observe)return gt;const fn=gt.pipe((0,ge.h)(Kt=>Kt instanceof Ee));switch(Se.observe||"body"){case"body":switch(et.responseType){case"arraybuffer":return fn.pipe((0,Ie.U)(Kt=>{if(null!==Kt.body&&!(Kt.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Kt.body}));case"blob":return fn.pipe((0,Ie.U)(Kt=>{if(null!==Kt.body&&!(Kt.body instanceof Blob))throw new Error("Response is not a Blob.");return Kt.body}));case"text":return fn.pipe((0,Ie.U)(Kt=>{if(null!==Kt.body&&"string"!=typeof Kt.body)throw new Error("Response is not a string.");return Kt.body}));default:return fn.pipe((0,Ie.U)(Kt=>Kt.body))}case"response":return fn;default:throw new Error(`Unreachable: unhandled observe type ${Se.observe}}`)}}delete(pe,tt={}){return this.request("DELETE",pe,tt)}get(pe,tt={}){return this.request("GET",pe,tt)}head(pe,tt={}){return this.request("HEAD",pe,tt)}jsonp(pe,tt){return this.request("JSONP",pe,{params:(new Ne).append(tt,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(pe,tt={}){return this.request("OPTIONS",pe,tt)}patch(pe,tt,Se={}){return this.request("PATCH",pe,Oe(Se,tt))}post(pe,tt,Se={}){return this.request("POST",pe,Oe(Se,tt))}put(pe,tt,Se={}){return this.request("PUT",pe,Oe(Se,tt))}}return qe.\u0275fac=function(pe){return new(pe||qe)(F.LFG(_e))},qe.\u0275prov=F.Yz7({token:qe,factory:qe.\u0275fac}),qe})();class it{constructor(ue,pe){this.next=ue,this.interceptor=pe}handle(ue){return this.interceptor.intercept(ue,this.next)}}const ft=new F.OlP("HTTP_INTERCEPTORS");let pt=(()=>{class qe{intercept(pe,tt){return tt.handle(pe)}}return qe.\u0275fac=function(pe){return new(pe||qe)},qe.\u0275prov=F.Yz7({token:qe,factory:qe.\u0275fac}),qe})();const nn=/^\)\]\}',?\n/;let bn=(()=>{class qe{constructor(pe){this.xhrFactory=pe}handle(pe){if("JSONP"===pe.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new me.y(tt=>{const Se=this.xhrFactory.build();if(Se.open(pe.method,pe.urlWithParams),pe.withCredentials&&(Se.withCredentials=!0),pe.headers.forEach((Y,se)=>Se.setRequestHeader(Y,se.join(","))),pe.headers.has("Accept")||Se.setRequestHeader("Accept","application/json, text/plain, */*"),!pe.headers.has("Content-Type")){const Y=pe.detectContentTypeHeader();null!==Y&&Se.setRequestHeader("Content-Type",Y)}if(pe.responseType){const Y=pe.responseType.toLowerCase();Se.responseType="json"!==Y?Y:"text"}const et=pe.serializeBody();let gt=null;const fn=()=>{if(null!==gt)return gt;const Y=Se.statusText||"OK",se=new ie(Se.getAllResponseHeaders()),le=function Fn(qe){return"responseURL"in qe&&qe.responseURL?qe.responseURL:/^X-Request-URL:/m.test(qe.getAllResponseHeaders())?qe.getResponseHeader("X-Request-URL"):null}(Se)||pe.url;return gt=new K({headers:se,status:Se.status,statusText:Y,url:le}),gt},Kt=()=>{let{headers:Y,status:se,statusText:le,url:Qe}=fn(),te=null;204!==se&&(te=void 0===Se.response?Se.responseText:Se.response),0===se&&(se=te?200:0);let De=se>=200&&se<300;if("json"===pe.responseType&&"string"==typeof te){const nt=te;te=te.replace(nn,"");try{te=""!==te?JSON.parse(te):null}catch(Ct){te=nt,De&&(De=!1,te={error:Ct,text:te})}}De?(tt.next(new Ee({body:te,headers:Y,status:se,statusText:le,url:Qe||void 0})),tt.complete()):tt.error(new oe({error:te,headers:Y,status:se,statusText:le,url:Qe||void 0}))},qt=Y=>{const{url:se}=fn(),le=new oe({error:Y,status:Se.status||0,statusText:Se.statusText||"Unknown Error",url:se||void 0});tt.error(le)};let hr=!1;const Un=Y=>{hr||(tt.next(fn()),hr=!0);let se={type:re.DownloadProgress,loaded:Y.loaded};Y.lengthComputable&&(se.total=Y.total),"text"===pe.responseType&&!!Se.responseText&&(se.partialText=Se.responseText),tt.next(se)},_n=Y=>{let se={type:re.UploadProgress,loaded:Y.loaded};Y.lengthComputable&&(se.total=Y.total),tt.next(se)};return Se.addEventListener("load",Kt),Se.addEventListener("error",qt),Se.addEventListener("timeout",qt),Se.addEventListener("abort",qt),pe.reportProgress&&(Se.addEventListener("progress",Un),null!==et&&Se.upload&&Se.upload.addEventListener("progress",_n)),Se.send(et),tt.next({type:re.Sent}),()=>{Se.removeEventListener("error",qt),Se.removeEventListener("abort",qt),Se.removeEventListener("load",Kt),Se.removeEventListener("timeout",qt),pe.reportProgress&&(Se.removeEventListener("progress",Un),null!==et&&Se.upload&&Se.upload.removeEventListener("progress",_n)),Se.readyState!==Se.DONE&&Se.abort()}})}}return qe.\u0275fac=function(pe){return new(pe||qe)(F.LFG(E.JF))},qe.\u0275prov=F.Yz7({token:qe,factory:qe.\u0275fac}),qe})();const Gn=new F.OlP("XSRF_COOKIE_NAME"),Sn=new F.OlP("XSRF_HEADER_NAME");class qn{}let rr=(()=>{class qe{constructor(pe,tt,Se){this.doc=pe,this.platform=tt,this.cookieName=Se,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const pe=this.doc.cookie||"";return pe!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,E.Mx)(pe,this.cookieName),this.lastCookieString=pe),this.lastToken}}return qe.\u0275fac=function(pe){return new(pe||qe)(F.LFG(E.K0),F.LFG(F.Lbi),F.LFG(Gn))},qe.\u0275prov=F.Yz7({token:qe,factory:qe.\u0275fac}),qe})(),Zn=(()=>{class qe{constructor(pe,tt){this.tokenService=pe,this.headerName=tt}intercept(pe,tt){const Se=pe.url.toLowerCase();if("GET"===pe.method||"HEAD"===pe.method||Se.startsWith("http://")||Se.startsWith("https://"))return tt.handle(pe);const et=this.tokenService.getToken();return null!==et&&!pe.headers.has(this.headerName)&&(pe=pe.clone({headers:pe.headers.set(this.headerName,et)})),tt.handle(pe)}}return qe.\u0275fac=function(pe){return new(pe||qe)(F.LFG(qn),F.LFG(Sn))},qe.\u0275prov=F.Yz7({token:qe,factory:qe.\u0275fac}),qe})(),Tn=(()=>{class qe{constructor(pe,tt){this.backend=pe,this.injector=tt,this.chain=null}handle(pe){if(null===this.chain){const tt=this.injector.get(ft,[]);this.chain=tt.reduceRight((Se,et)=>new it(Se,et),this.backend)}return this.chain.handle(pe)}}return qe.\u0275fac=function(pe){return new(pe||qe)(F.LFG(Te),F.LFG(F.zs3))},qe.\u0275prov=F.Yz7({token:qe,factory:qe.\u0275fac}),qe})(),wn=(()=>{class qe{static disable(){return{ngModule:qe,providers:[{provide:Zn,useClass:pt}]}}static withOptions(pe={}){return{ngModule:qe,providers:[pe.cookieName?{provide:Gn,useValue:pe.cookieName}:[],pe.headerName?{provide:Sn,useValue:pe.headerName}:[]]}}}return qe.\u0275fac=function(pe){return new(pe||qe)},qe.\u0275mod=F.oAB({type:qe}),qe.\u0275inj=F.cJS({providers:[Zn,{provide:ft,useExisting:Zn,multi:!0},{provide:qn,useClass:rr},{provide:Gn,useValue:"XSRF-TOKEN"},{provide:Sn,useValue:"X-XSRF-TOKEN"}]}),qe})(),vn=(()=>{class qe{}return qe.\u0275fac=function(pe){return new(pe||qe)},qe.\u0275mod=F.oAB({type:qe}),qe.\u0275inj=F.cJS({providers:[xe,{provide:_e,useClass:Tn},bn,{provide:Te,useExisting:bn}],imports:[[wn.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),qe})()},5e3:(_t,Me,O)=>{O.d(Me,{$8M:()=>Ma,$Z:()=>Wr,AFp:()=>uE,AaK:()=>_e,CHM:()=>Zs,CRH:()=>j0,CZH:()=>y_,CqO:()=>Yp,DdM:()=>A0,EJc:()=>DI,EpF:()=>Dv,F4k:()=>$m,FYo:()=>_0,FiY:()=>ds,G48:()=>WI,GfV:()=>E0,Gpc:()=>J,JOm:()=>H,LFG:()=>Vt,LSH:()=>bo,Lbi:()=>EI,NdJ:()=>va,OlP:()=>Pr,Oqu:()=>Xa,PXZ:()=>UI,Q6J:()=>Vm,QGY:()=>Zp,Qsj:()=>pw,R0b:()=>Cu,RDi:()=>qs,Rgc:()=>Eg,SBq:()=>mg,Sil:()=>TI,Suo:()=>B0,TTD:()=>Si,TgZ:()=>Cd,VLi:()=>kI,X6Q:()=>zI,XFs:()=>Ut,Xpm:()=>At,Y36:()=>Td,YKP:()=>b0,YNc:()=>Zh,Yjl:()=>an,Yz7:()=>wt,ZZ4:()=>R_,_Bn:()=>m0,_UZ:()=>Wp,_Vd:()=>Ay,_c5:()=>uD,_uU:()=>ig,aQg:()=>N_,c2e:()=>wI,cJS:()=>Zt,cg1:()=>hf,dDg:()=>pE,deG:()=>Ra,dqk:()=>qt,eFA:()=>yE,ekj:()=>Vc,g9A:()=>lE,h0i:()=>_f,hGG:()=>cD,hij:()=>cf,iGM:()=>V0,ifc:()=>Se,ip1:()=>aE,kL8:()=>Ol,lG2:()=>kr,n5z:()=>as,oAB:()=>_r,oxw:()=>Hm,q4F:()=>w0,qLn:()=>wc,qOj:()=>yd,qZA:()=>tf,sBO:()=>KI,sIi:()=>vd,s_b:()=>Ry,soG:()=>__,tBr:()=>Pn,tb:()=>dE,tp0:()=>Pa,uIk:()=>Kh,vHH:()=>Je,vpe:()=>lc,wAp:()=>cn,xp6:()=>Og,z2F:()=>T_,zSh:()=>mp,zs3:()=>$o});var E=O(7579),F=O(727),G=O(8306),me=O(6451),fe=O(3099);function ge(n){for(let r in n)if(n[r]===ge)return r;throw Error("Could not find renamed property on target object.")}function Ie(n,r){for(const s in r)r.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=r[s])}function _e(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(_e).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function Te(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const ie=ge({__forward_ref__:ge});function J(n){return n.__forward_ref__=J,n.toString=function(){return _e(this())},n}function we(n){return ht(n)?n():n}function ht(n){return"function"==typeof n&&n.hasOwnProperty(ie)&&n.__forward_ref__===J}class Je extends Error{constructor(r,s){super(function lt(n,r){return`NG0${Math.abs(n)}${r?": "+r:""}`}(r,s)),this.code=r}}function Ne(n){return"string"==typeof n?n:null==n?"":String(n)}function Ke(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Ne(n)}function $e(n,r){const s=r?` in ${r}`:"";throw new Je(-201,`No provider for ${Ke(n)} found${s}`)}function Mt(n,r){null==n&&function at(n,r,s,a){throw new Error(`ASSERTION ERROR: ${n}`+(null==a?"":` [Expected=> ${s} ${a} ${r} <=Actual]`))}(r,n,null,"!=")}function wt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Zt(n){return{providers:n.providers||[],imports:n.imports||[]}}function nn(n){return Fn(n,qn)||Fn(n,Zn)}function Fn(n,r){return n.hasOwnProperty(r)?n[r]:null}function Sn(n){return n&&(n.hasOwnProperty(rr)||n.hasOwnProperty(Tn))?n[rr]:null}const qn=ge({\u0275prov:ge}),rr=ge({\u0275inj:ge}),Zn=ge({ngInjectableDef:ge}),Tn=ge({ngInjectorDef:ge});var Ut=(()=>((Ut=Ut||{})[Ut.Default=0]="Default",Ut[Ut.Host=1]="Host",Ut[Ut.Self=2]="Self",Ut[Ut.SkipSelf=4]="SkipSelf",Ut[Ut.Optional=8]="Optional",Ut))();let Yt;function vn(n){const r=Yt;return Yt=n,r}function Zr(n,r,s){const a=nn(n);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&Ut.Optional?null:void 0!==r?r:void $e(_e(n),"Injector")}function qe(n){return{toString:n}.toString()}var ue=(()=>((ue=ue||{})[ue.OnPush=0]="OnPush",ue[ue.Default=1]="Default",ue))(),Se=(()=>{return(n=Se||(Se={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Se;var n})();const et="undefined"!=typeof globalThis&&globalThis,gt="undefined"!=typeof window&&window,fn="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,qt=et||"undefined"!=typeof global&&global||gt||fn,_n={},Y=[],se=ge({\u0275cmp:ge}),le=ge({\u0275dir:ge}),Qe=ge({\u0275pipe:ge}),te=ge({\u0275mod:ge}),De=ge({\u0275fac:ge}),nt=ge({__NG_ELEMENT_ID__:ge});let Ct=0;function At(n){return qe(()=>{const s={},a={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:s,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===ue.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||Y,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Se.Emulated,id:"c",styles:n.styles||Y,_:null,setInput:null,schemas:n.schemas||null,tView:null},c=n.directives,f=n.features,y=n.pipes;return a.id+=Ct++,a.inputs=pr(n.inputs,s),a.outputs=pr(n.outputs),f&&f.forEach(w=>w(a)),a.directiveDefs=c?()=>("function"==typeof c?c():c).map(Vn):null,a.pipeDefs=y?()=>("function"==typeof y?y():y).map(zt):null,a})}function Vn(n){return Mn(n)||function Er(n){return n[le]||null}(n)}function zt(n){return function wr(n){return n[Qe]||null}(n)}const fr={};function _r(n){return qe(()=>{const r={type:n.type,bootstrap:n.bootstrap||Y,declarations:n.declarations||Y,imports:n.imports||Y,exports:n.exports||Y,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(fr[n.id]=n.type),r})}function pr(n,r){if(null==n)return _n;const s={};for(const a in n)if(n.hasOwnProperty(a)){let c=n[a],f=c;Array.isArray(c)&&(f=c[1],c=c[0]),s[c]=a,r&&(r[c]=f)}return s}const kr=At;function an(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function Mn(n){return n[se]||null}function Jn(n,r){const s=n[te]||null;if(!s&&!0===r)throw new Error(`Type ${_e(n)} does not have '\u0275mod' property.`);return s}function jn(n){return Array.isArray(n)&&"object"==typeof n[1]}function ei(n){return Array.isArray(n)&&!0===n[1]}function Hi(n){return 0!=(8&n.flags)}function gs(n){return 2==(2&n.flags)}function yi(n){return 1==(1&n.flags)}function Ti(n){return null!==n.template}function Ci(n){return 0!=(512&n[2])}function Vr(n,r){return n.hasOwnProperty(De)?n[De]:null}class xs{constructor(r,s,a){this.previousValue=r,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function Si(){return Ji}function Ji(n){return n.type.prototype.ngOnChanges&&(n.setInput=Xi),zs}function zs(){const n=ci(this),r=null==n?void 0:n.current;if(r){const s=n.previous;if(s===_n)n.previous=r;else for(let a in r)s[a]=r[a];n.current=null,this.ngOnChanges(r)}}function Xi(n,r,s,a){const c=ci(n)||function Ws(n,r){return n[qo]=r}(n,{previous:_n,current:null}),f=c.current||(c.current={}),y=c.previous,w=this.declaredInputs[s],b=y[w];f[w]=new xs(b&&b.currentValue,r,y===_n),n[a]=r}Si.ngInherit=!0;const qo="__ngSimpleChanges__";function ci(n){return n[qo]||null}let Fi;function qs(n){Fi=n}function Qn(n){return!!n.listen}const A={createRenderer:(n,r)=>function jr(){return void 0!==Fi?Fi:"undefined"!=typeof document?document:void 0}()};function S(n){for(;Array.isArray(n);)n=n[0];return n}function Ve(n,r){return S(r[n])}function He(n,r){return S(r[n.index])}function ln(n,r){return n.data[r]}function un(n,r){const s=r[n];return jn(s)?s:s[0]}function gn(n){return 4==(4&n[2])}function dr(n){return 128==(128&n[2])}function Xn(n,r){return null==r?null:n[r]}function li(n){n[18]=0}function Ai(n,r){n[5]+=r;let s=n,a=n[3];for(;null!==a&&(1===r&&1===s[5]||-1===r&&0===s[5]);)a[5]+=r,s=a,a=a[3]}const Qt={lFrame:Js(null),bindingsEnabled:!0};function Ns(){return Qt.bindingsEnabled}function rt(){return Qt.lFrame.lView}function Dn(){return Qt.lFrame.tView}function Zs(n){return Qt.lFrame.contextLView=n,n[8]}function Ir(){let n=ys();for(;null!==n&&64===n.type;)n=n.parent;return n}function ys(){return Qt.lFrame.currentTNode}function Ui(n,r){const s=Qt.lFrame;s.currentTNode=n,s.isParent=r}function Qs(){return Qt.lFrame.isParent}function Ps(){return Qt.lFrame.bindingIndex++}function gr(n,r){const s=Qt.lFrame;s.bindingIndex=s.bindingRootIndex=n,Qo(r)}function Qo(n){Qt.lFrame.currentDirectiveIndex=n}function tu(){return Qt.lFrame.currentQueryIndex}function Ta(n){Qt.lFrame.currentQueryIndex=n}function Jo(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function xo(n,r,s){if(s&Ut.SkipSelf){let c=r,f=n;for(;!(c=c.parent,null!==c||s&Ut.Host||(c=Jo(f),null===c||(f=f[15],10&c.type))););if(null===c)return!1;r=c,n=f}const a=Qt.lFrame=Xo();return a.currentTNode=r,a.lView=n,!0}function Os(n){const r=Xo(),s=n[1];Qt.lFrame=r,r.currentTNode=s.firstChild,r.lView=n,r.tView=s,r.contextLView=n,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function Xo(){const n=Qt.lFrame,r=null===n?null:n.child;return null===r?Js(n):r}function Js(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function ts(){const n=Qt.lFrame;return Qt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Ca=ts;function po(){const n=ts();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function hi(){return Qt.lFrame.selectedIndex}function Xs(n){Qt.lFrame.selectedIndex=n}function mr(){const n=Qt.lFrame;return ln(n.tView,n.selectedIndex)}function eo(n,r){for(let s=r.directiveStart,a=r.directiveEnd;s<a;s++){const f=n.data[s].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:w,ngAfterViewInit:b,ngAfterViewChecked:N,ngOnDestroy:B}=f;y&&(n.contentHooks||(n.contentHooks=[])).push(-s,y),w&&((n.contentHooks||(n.contentHooks=[])).push(s,w),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,w)),b&&(n.viewHooks||(n.viewHooks=[])).push(-s,b),N&&((n.viewHooks||(n.viewHooks=[])).push(s,N),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,N)),null!=B&&(n.destroyHooks||(n.destroyHooks=[])).push(s,B)}}function ns(n,r,s){Aa(n,r,3,s)}function Ls(n,r,s,a){(3&n[2])===s&&Aa(n,r,s,a)}function xn(n,r){let s=n[2];(3&s)===r&&(s&=2047,s+=1,n[2]=s)}function Aa(n,r,s,a){const f=null!=a?a:-1,y=r.length-1;let w=0;for(let b=void 0!==a?65535&n[18]:0;b<y;b++)if("number"==typeof r[b+1]){if(w=r[b],null!=a&&w>=a)break}else r[b]<0&&(n[18]+=65536),(w<f||-1==f)&&(ta(n,s,r,b),n[18]=(4294901760&n[18])+b+2),b++}function ta(n,r,s,a){const c=s[a]<0,f=s[a+1],w=n[c?-s[a]:s[a]];if(c){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{f.call(w)}finally{}}}else try{f.call(w)}finally{}}class is{constructor(r,s,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function go(n,r,s){const a=Qn(n);let c=0;for(;c<s.length;){const f=s[c];if("number"==typeof f){if(0!==f)break;c++;const y=s[c++],w=s[c++],b=s[c++];a?n.setAttribute(r,w,b,y):r.setAttributeNS(y,w,b)}else{const y=f,w=s[++c];os(y)?a&&n.setProperty(r,y,w):a?n.setAttribute(r,y,w):r.setAttribute(y,w),c++}}return c}function Wi(n){return 3===n||4===n||6===n}function os(n){return 64===n.charCodeAt(0)}function ra(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let s=-1;for(let a=0;a<r.length;a++){const c=r[a];"number"==typeof c?s=c:0===s||xa(n,s,c,null,-1===s||2===s?r[++a]:null)}}return n}function xa(n,r,s,a,c){let f=0,y=n.length;if(-1===r)y=-1;else for(;f<n.length;){const w=n[f++];if("number"==typeof w){if(w===r){y=-1;break}if(w>r){y=f-1;break}}}for(;f<n.length;){const w=n[f];if("number"==typeof w)break;if(w===s){if(null===a)return void(null!==c&&(n[f+1]=c));if(a===n[f+1])return void(n[f+2]=c)}f++,null!==a&&f++,null!==c&&f++}-1!==y&&(n.splice(y,0,r),f=y+1),n.splice(f++,0,s),null!==a&&n.splice(f++,0,a),null!==c&&n.splice(f++,0,c)}function Ro(n){return-1!==n}function to(n){return 32767&n}function no(n,r){let s=function Rr(n){return n>>16}(n),a=r;for(;s>0;)a=a[15],s--;return a}let vs=!0;function No(n){const r=vs;return vs=n,r}let Us=0;function Vs(n,r){const s=sr(n,r);if(-1!==s)return s;const a=r[1];a.firstCreatePass&&(n.injectorIndex=r.length,dt(a.data,n),dt(r,null),dt(a.blueprint,null));const c=I(n,r),f=n.injectorIndex;if(Ro(c)){const y=to(c),w=no(c,r),b=w[1].data;for(let N=0;N<8;N++)r[f+N]=w[y+N]|b[y+N]}return r[f+8]=c,f}function dt(n,r){n.push(0,0,0,0,0,0,0,0,r)}function sr(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function I(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,a=null,c=r;for(;null!==c;){const f=c[1],y=f.type;if(a=2===y?f.declTNode:1===y?c[6]:null,null===a)return-1;if(s++,c=c[15],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return-1}function _(n,r,s){!function ia(n,r,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(nt)&&(a=s[nt]),null==a&&(a=s[nt]=Us++);const c=255&a;r.data[n+(c>>5)]|=1<<c}(n,r,s)}function T(n,r,s){if(s&Ut.Optional)return n;$e(r,"NodeInjector")}function M(n,r,s,a){if(s&Ut.Optional&&void 0===a&&(a=null),0==(s&(Ut.Self|Ut.Host))){const c=n[9],f=vn(void 0);try{return c?c.get(r,a,s&Ut.Optional):Zr(r,a,s&Ut.Optional)}finally{vn(f)}}return T(a,r,s)}function k(n,r,s,a=Ut.Default,c){if(null!==n){const f=function Ft(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(nt)?n[nt]:void 0;return"number"==typeof r?r>=0?255&r:z:r}(s);if("function"==typeof f){if(!xo(r,n,a))return a&Ut.Host?T(c,s,a):M(r,s,a,c);try{const y=f(a);if(null!=y||a&Ut.Optional)return y;$e(s)}finally{Ca()}}else if("number"==typeof f){let y=null,w=sr(n,r),b=-1,N=a&Ut.Host?r[16][6]:null;for((-1===w||a&Ut.SkipSelf)&&(b=-1===w?I(n,r):r[w+8],-1!==b&&Hn(a,!1)?(y=r[1],w=to(b),r=no(b,r)):w=-1);-1!==w;){const B=r[1];if(kn(f,w,B.data)){const Z=Le(w,r,s,y,a,N);if(Z!==L)return Z}b=r[w+8],-1!==b&&Hn(a,r[1].data[w+8]===N)&&kn(f,w,r)?(y=B,w=to(b),r=no(b,r)):w=-1}}}return M(r,s,a,c)}const L={};function z(){return new ni(Ir(),rt())}function Le(n,r,s,a,c,f){const y=r[1],w=y.data[n+8],B=Rt(w,y,s,null==a?gs(w)&&vs:a!=y&&0!=(3&w.type),c&Ut.Host&&f===w);return null!==B?mn(r,y,B,w):L}function Rt(n,r,s,a,c){const f=n.providerIndexes,y=r.data,w=1048575&f,b=n.directiveStart,B=f>>20,de=c?w+B:n.directiveEnd;for(let Ae=a?w:w+B;Ae<de;Ae++){const Xe=y[Ae];if(Ae<b&&s===Xe||Ae>=b&&Xe.type===s)return Ae}if(c){const Ae=y[b];if(Ae&&Ti(Ae)&&Ae.type===s)return b}return null}function mn(n,r,s,a){let c=n[s];const f=r.data;if(function fi(n){return n instanceof is}(c)){const y=c;y.resolving&&function yt(n,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new Je(-200,`Circular dependency in DI detected for ${n}${s}`)}(Ke(f[s]));const w=No(y.canSeeViewProviders);y.resolving=!0;const b=y.injectImpl?vn(y.injectImpl):null;xo(n,a,Ut.Default);try{c=n[s]=y.factory(void 0,f,n,a),r.firstCreatePass&&s>=a.directiveStart&&function Sa(n,r,s){const{ngOnChanges:a,ngOnInit:c,ngDoCheck:f}=r.type.prototype;if(a){const y=Ji(r);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,y),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,y)}c&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,c),f&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,f),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,f))}(s,f[s],r)}finally{null!==b&&vn(b),No(w),y.resolving=!1,Ca()}}return c}function kn(n,r,s){return!!(s[r+(n>>5)]&1<<n)}function Hn(n,r){return!(n&Ut.Self||n&Ut.Host&&r)}class ni{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,a){return k(this._tNode,this._lView,r,a,s)}}function as(n){return qe(()=>{const r=n.prototype.constructor,s=r[De]||mo(r),a=Object.prototype;let c=Object.getPrototypeOf(n.prototype).constructor;for(;c&&c!==a;){const f=c[De]||mo(c);if(f&&f!==s)return f;c=Object.getPrototypeOf(c)}return f=>new f})}function mo(n){return ht(n)?()=>{const r=mo(we(n));return r&&r()}:Vr(n)}function Ma(n){return function m(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const s=n.attrs;if(s){const a=s.length;let c=0;for(;c<a;){const f=s[c];if(Wi(f))break;if(0===f)c+=2;else if("number"==typeof f)for(c++;c<a&&"string"==typeof s[c];)c++;else{if(f===r)return s[c+1];c+=2}}}return null}(Ir(),n)}const Po="__parameters__";function sa(n,r,s){return qe(()=>{const a=function Oo(n){return function(...s){if(n){const a=n(...s);for(const c in a)this[c]=a[c]}}}(r);function c(...f){if(this instanceof c)return a.apply(this,f),this;const y=new c(...f);return w.annotation=y,w;function w(b,N,B){const Z=b.hasOwnProperty(Po)?b[Po]:Object.defineProperty(b,Po,{value:[]})[Po];for(;Z.length<=B;)Z.push(null);return(Z[B]=Z[B]||[]).push(y),b}}return s&&(c.prototype=Object.create(s.prototype)),c.prototype.ngMetadataName=n,c.annotationCls=c,c})}class Pr{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=wt({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ra=new Pr("AnalyzeForEntryComponents");function Bi(n,r){void 0===r&&(r=n);for(let s=0;s<n.length;s++){let a=n[s];Array.isArray(a)?(r===n&&(r=n.slice(0,s)),Bi(a,r)):r!==n&&r.push(a)}return r}function Ei(n,r){n.forEach(s=>Array.isArray(s)?Ei(s,r):r(s))}function Ou(n,r,s){r>=n.length?n.push(s):n.splice(r,0,s)}function Ki(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function Cr(n,r,s){let a=cs(n,r);return a>=0?n[1|a]=s:(a=~a,function bt(n,r,s,a){let c=n.length;if(c==r)n.push(s,a);else if(1===c)n.push(a,n[0]),n[0]=s;else{for(c--,n.push(n[c-1],n[c]);c>r;)n[c]=n[c-2],c--;n[r]=s,n[r+1]=a}}(n,a,r,s)),a}function aa(n,r){const s=cs(n,r);if(s>=0)return n[1|s]}function cs(n,r){return function qi(n,r,s){let a=0,c=n.length>>s;for(;c!==a;){const f=a+(c-a>>1),y=n[f<<s];if(r===y)return f<<s;y>r?c=f:a=f+1}return~(c<<s)}(n,r,1)}const ca={},uu="__NG_DI_FLAG__",Na="ngTempTokenPath",x=/\n/gm,q="__source",Ce=ge({provide:String,useValue:ge});let Pe;function ct(n){const r=Pe;return Pe=n,r}function Lt(n,r=Ut.Default){if(void 0===Pe)throw new Je(203,"");return null===Pe?Zr(n,void 0,r):Pe.get(n,r&Ut.Optional?null:void 0,r)}function Vt(n,r=Ut.Default){return(function wn(){return Yt}()||Lt)(we(n),r)}const zn=Vt;function Xt(n){const r=[];for(let s=0;s<n.length;s++){const a=we(n[s]);if(Array.isArray(a)){if(0===a.length)throw new Je(900,"");let c,f=Ut.Default;for(let y=0;y<a.length;y++){const w=a[y],b=Cn(w);"number"==typeof b?-1===b?c=w.token:f|=b:c=w}r.push(Vt(c,f))}else r.push(Vt(a))}return r}function ii(n,r){return n[uu]=r,n.prototype[uu]=r,n}function Cn(n){return n[uu]}const Pn=ii(sa("Inject",n=>({token:n})),-1),ds=ii(sa("Optional"),8),Pa=ii(sa("SkipSelf"),4);class Zc{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function so(n){return n instanceof Zc?n.changingThisBreaksApplicationSecurity:n}const ju=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Ua=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var on=(()=>((on=on||{})[on.NONE=0]="NONE",on[on.HTML=1]="HTML",on[on.STYLE=2]="STYLE",on[on.SCRIPT=3]="SCRIPT",on[on.URL=4]="URL",on[on.RESOURCE_URL=5]="RESOURCE_URL",on))();function bo(n){const r=function _c(){const n=rt();return n&&n[12]}();return r?r.sanitize(on.URL,n)||"":function hu(n,r){const s=function Yc(n){return n instanceof Zc&&n.getTypeName()||null}(n);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===r}(n,"URL")?so(n):function Lo(n){return(n=String(n)).match(ju)||n.match(Ua)?n:"unsafe:"+n}(Ne(n))}const gu="__ngContext__";function Ii(n,r){n[gu]=r}function Qc(n){const r=function mu(n){return n[gu]||null}(n);return r?Array.isArray(r)?r:r.lView:null}function $a(n){return n.ngOriginalError}function Xl(n,...r){n.error(...r)}class wc{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r),a=function Uo(n){return n&&n.ngErrorLogger||Xl}(r);a(this._console,"ERROR",r),s&&a(this._console,"ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&$a(r);for(;s&&$a(s);)s=$a(s);return s||null}}const nl=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(qt))();function p(n){return n instanceof Function?n():n}var H=(()=>((H=H||{})[H.Important=1]="Important",H[H.DashCase=2]="DashCase",H))();function Fe(n,r){return undefined(n,r)}function $t(n){const r=n[3];return ei(r)?r[3]:r}function ws(n){return ed(n[13])}function Ku(n){return ed(n[4])}function ed(n){for(;null!==n&&!ei(n);)n=n[4];return n}function yu(n,r,s,a,c){if(null!=a){let f,y=!1;ei(a)?f=a:jn(a)&&(y=!0,a=a[0]);const w=S(a);0===n&&null!==s?null==c?Bo(r,s,w):Ha(r,s,w,c||null,!0):1===n&&null!==s?Ha(r,s,w,c||null,!0):2===n?function jf(n,r,s){const a=Ga(n,r);a&&function rd(n,r,s,a){Qn(n)?n.removeChild(r,s,a):r.removeChild(s)}(n,a,r,s)}(r,w,y):3===n&&r.destroyNode(w),null!=f&&function Ic(n,r,s,a,c){const f=s[7];f!==S(s)&&yu(r,n,a,f,c);for(let w=10;w<s.length;w++){const b=s[w];ul(b[1],b,n,r,a,f)}}(r,n,f,s,c)}}function sl(n,r,s){if(Qn(n))return n.createElement(r,s);{const a=null!==s?function Ms(n){const r=n.toLowerCase();return"svg"===r?"http://www.w3.org/2000/svg":"math"===r?"http://www.w3.org/1998/MathML/":null}(s):null;return null===a?n.createElement(r):n.createElementNS(a,r)}}function Tg(n,r){const s=n[9],a=s.indexOf(r),c=r[3];1024&r[2]&&(r[2]&=-1025,Ai(c,-1)),s.splice(a,1)}function lh(n,r){if(n.length<=10)return;const s=10+r,a=n[s];if(a){const c=a[17];null!==c&&c!==n&&Tg(c,a),r>0&&(n[s-1][4]=a[4]);const f=Ki(n,10+r);!function td(n,r){ul(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(a[1],a);const y=f[19];null!==y&&y.detachView(f[1]),a[3]=null,a[4]=null,a[2]&=-129}return a}function Cg(n,r){if(!(256&r[2])){const s=r[11];Qn(s)&&s.destroyNode&&ul(n,r,s,3,null,null),function nd(n){let r=n[13];if(!r)return dh(n[1],n);for(;r;){let s=null;if(jn(r))s=r[13];else{const a=r[10];a&&(s=a)}if(!s){for(;r&&!r[4]&&r!==n;)jn(r)&&dh(r[1],r),r=r[3];null===r&&(r=n),jn(r)&&dh(r[1],r),s=r&&r[4]}r=s}}(r)}}function dh(n,r){if(!(256&r[2])){r[2]&=-129,r[2]|=256,function Sg(n,r){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let a=0;a<s.length;a+=2){const c=r[s[a]];if(!(c instanceof is)){const f=s[a+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const w=c[f[y]],b=f[y+1];try{b.call(w)}finally{}}else try{f.call(c)}finally{}}}}(n,r),function Uy(n,r){const s=n.cleanup,a=r[7];let c=-1;if(null!==s)for(let f=0;f<s.length-1;f+=2)if("string"==typeof s[f]){const y=s[f+1],w="function"==typeof y?y(r):S(r[y]),b=a[c=s[f+2]],N=s[f+3];"boolean"==typeof N?w.removeEventListener(s[f],b,N):N>=0?a[c=N]():a[c=-N].unsubscribe(),f+=2}else{const y=a[c=s[f+1]];s[f].call(y)}if(null!==a){for(let f=c+1;f<a.length;f++)a[f]();r[7]=null}}(n,r),1===r[1].type&&Qn(r[11])&&r[11].destroy();const s=r[17];if(null!==s&&ei(r[3])){s!==r[3]&&Tg(s,r);const a=r[19];null!==a&&a.detachView(n)}}}function Vf(n,r,s){return function ze(n,r,s){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return s[0];if(2&a.flags){const c=n.data[a.directiveStart].encapsulation;if(c===Se.None||c===Se.Emulated)return null}return He(a,s)}(n,r.parent,s)}function Ha(n,r,s,a,c){Qn(n)?n.insertBefore(r,s,a,c):r.insertBefore(s,a,c)}function Bo(n,r,s){Qn(n)?n.appendChild(r,s):r.appendChild(s)}function Ag(n,r,s,a,c){null!==a?Ha(n,r,s,a,c):Bo(n,r,s)}function Ga(n,r){return Qn(n)?n.parentNode(r):r.parentNode}let hh=function Bf(n,r,s){return 40&n.type?He(n,s):null};function ol(n,r,s,a){const c=Vf(n,a,r),f=r[11],w=function qu(n,r,s){return hh(n,r,s)}(a.parent||r[6],a,r);if(null!=c)if(Array.isArray(s))for(let b=0;b<s.length;b++)Ag(f,c,s[b],w,!1);else Ag(f,c,s,w,!1)}function al(n,r){if(null!==r){const s=r.type;if(3&s)return He(r,n);if(4&s)return za(-1,n[r.index]);if(8&s){const a=r.child;if(null!==a)return al(n,a);{const c=n[r.index];return ei(c)?za(-1,c):S(c)}}if(32&s)return Fe(r,n)()||S(n[r.index]);{const a=ph(n,r);return null!==a?Array.isArray(a)?a[0]:al($t(n[16]),a):al(n,r.next)}}return null}function ph(n,r){return null!==r?n[16][6].projection[r.projection]:null}function za(n,r){const s=10+n+1;if(s<r.length){const a=r[s],c=a[1].firstChild;if(null!==c)return al(a,c)}return r[7]}function $f(n,r,s,a,c,f,y){for(;null!=s;){const w=a[s.index],b=s.type;if(y&&0===r&&(w&&Ii(S(w),a),s.flags|=4),64!=(64&s.flags))if(8&b)$f(n,r,s.child,a,c,f,!1),yu(r,n,c,w,f);else if(32&b){const N=Fe(s,a);let B;for(;B=N();)yu(r,n,c,B,f);yu(r,n,c,w,f)}else 16&b?Zu(n,r,a,s,c,f):yu(r,n,c,w,f);s=y?s.projectionNext:s.next}}function ul(n,r,s,a,c,f){$f(s,a,n.firstChild,r,c,f,!1)}function Zu(n,r,s,a,c,f){const y=s[16],b=y[6].projection[a.projection];if(Array.isArray(b))for(let N=0;N<b.length;N++)yu(r,n,c,b[N],f);else $f(n,r,b,y[3],c,f,!0)}function ll(n,r,s){Qn(n)?n.setAttribute(r,"style",s):r.style.cssText=s}function mh(n,r,s){Qn(n)?""===s?n.removeAttribute(r,"class"):n.setAttribute(r,"class",s):r.className=s}function yh(n,r,s){let a=n.length;for(;;){const c=n.indexOf(r,s);if(-1===c)return c;if(0===c||n.charCodeAt(c-1)<=32){const f=r.length;if(c+f===a||n.charCodeAt(c+f)<=32)return c}s=c+1}}const Hf="ng-template";function By(n,r,s){let a=0;for(;a<n.length;){let c=n[a++];if(s&&"class"===c){if(c=n[a],-1!==yh(c.toLowerCase(),r,0))return!0}else if(1===c){for(;a<n.length&&"string"==typeof(c=n[a++]);)if(c.toLowerCase()===r)return!0;return!1}}return!1}function Gf(n){return 4===n.type&&n.value!==Hf}function Mg(n,r,s){return r===(4!==n.type||s?n.value:Hf)}function zf(n,r,s){let a=4;const c=n.attrs||[],f=function jy(n){for(let r=0;r<n.length;r++)if(Wi(n[r]))return r;return n.length}(c);let y=!1;for(let w=0;w<r.length;w++){const b=r[w];if("number"!=typeof b){if(!y)if(4&a){if(a=2|1&a,""!==b&&!Mg(n,b,s)||""===b&&1===r.length){if(Bs(a))return!1;y=!0}}else{const N=8&a?b:r[++w];if(8&a&&null!==n.attrs){if(!By(n.attrs,N,s)){if(Bs(a))return!1;y=!0}continue}const Z=Dc(8&a?"class":b,c,Gf(n),s);if(-1===Z){if(Bs(a))return!1;y=!0;continue}if(""!==N){let de;de=Z>f?"":c[Z+1].toLowerCase();const Ae=8&a?de:null;if(Ae&&-1!==yh(Ae,N,0)||2&a&&N!==de){if(Bs(a))return!1;y=!0}}}}else{if(!y&&!Bs(a)&&!Bs(b))return!1;if(y&&Bs(b))continue;y=!1,a=b|1&a}}return Bs(a)||y}function Bs(n){return 0==(1&n)}function Dc(n,r,s,a){if(null===r)return-1;let c=0;if(a||!s){let f=!1;for(;c<r.length;){const y=r[c];if(y===n)return c;if(3===y||6===y)f=!0;else{if(1===y||2===y){let w=r[++c];for(;"string"==typeof w;)w=r[++c];continue}if(4===y)break;if(0===y){c+=4;continue}}c+=f?1:2}return-1}return function $y(n,r){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const a=n[s];if("number"==typeof a)return-1;if(a===r)return s;s++}return-1}(r,n)}function Rg(n,r,s=!1){for(let a=0;a<r.length;a++)if(zf(n,r[a],s))return!0;return!1}function dl(n,r){return n?":not("+r.trim()+")":r}function bc(n){let r=n[0],s=1,a=2,c="",f=!1;for(;s<n.length;){let y=n[s];if("string"==typeof y)if(2&a){const w=n[++s];c+="["+y+(w.length>0?'="'+w+'"':"")+"]"}else 8&a?c+="."+y:4&a&&(c+=" "+y);else""!==c&&!Bs(y)&&(r+=dl(f,c),c=""),a=y,f=f||!Bs(a);s++}return""!==c&&(r+=dl(f,c)),r}const In={};function Og(n){vh(Dn(),rt(),hi()+n,!1)}function vh(n,r,s,a){if(!a)if(3==(3&r[2])){const f=n.preOrderCheckHooks;null!==f&&ns(r,f,s)}else{const f=n.preOrderHooks;null!==f&&Ls(r,f,0,s)}Xs(s)}function _h(n,r){return n<<17|r<<2}function jo(n){return n>>17&32767}function fl(n){return 2|n}function Wa(n){return(131068&n)>>2}function Is(n,r){return-131069&n|r<<2}function pl(n){return 1|n}function zg(n,r){const s=n.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const c=s[a],f=s[a+1];if(-1!==f){const y=n.data[f];Ta(c),y.contentQueries(2,r[f],f)}}}function Ac(n,r,s,a,c,f,y,w,b,N){const B=r.blueprint.slice();return B[0]=c,B[2]=140|a,li(B),B[3]=B[15]=n,B[8]=s,B[10]=y||n&&n[10],B[11]=w||n&&n[11],B[12]=b||n&&n[12]||null,B[9]=N||n&&n[9]||null,B[6]=f,B[16]=2==r.type?n[16]:B,B}function Eu(n,r,s,a,c){let f=n.data[r];if(null===f)f=function Ch(n,r,s,a,c){const f=ys(),y=Qs(),b=n.data[r]=function Xy(n,r,s,a,c,f){return{type:s,index:a,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,s,r,a,c);return null===n.firstChild&&(n.firstChild=b),null!==f&&(y?null==f.child&&null!==b.parent&&(f.child=b):null===f.next&&(f.next=b)),b}(n,r,s,a,c),function fo(){return Qt.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=s,f.value=a,f.attrs=c;const y=function Ys(){const n=Qt.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return Ui(f,!0),f}function xc(n,r,s,a){if(0===s)return-1;const c=r.length;for(let f=0;f<s;f++)r.push(a),n.blueprint.push(a),n.data.push(null);return c}function vl(n,r,s){Os(r);try{const a=n.viewQuery;null!==a&&wl(1,a,s);const c=n.template;null!==c&&Wg(n,r,c,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&zg(n,r),n.staticViewQueries&&wl(2,n.viewQuery,s);const f=n.components;null!==f&&function yl(n,r){for(let s=0;s<r.length;s++)lp(n,r[s])}(r,f)}catch(a){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),a}finally{r[2]&=-5,po()}}function _l(n,r,s,a){const c=r[2];if(256!=(256&c)){Os(r);try{li(r),function So(n){return Qt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&Wg(n,r,s,2,a);const y=3==(3&c);if(y){const N=n.preOrderCheckHooks;null!==N&&ns(r,N,null)}else{const N=n.preOrderHooks;null!==N&&Ls(r,N,0,null),xn(r,0)}if(function dd(n){for(let r=ws(n);null!==r;r=Ku(r)){if(!r[2])continue;const s=r[9];for(let a=0;a<s.length;a++){const c=s[a],f=c[3];0==(1024&c[2])&&Ai(f,1),c[2]|=1024}}}(r),function Oh(n){for(let r=ws(n);null!==r;r=Ku(r))for(let s=10;s<r.length;s++){const a=r[s],c=a[1];dr(a)&&_l(c,a,c.template,a[8])}}(r),null!==n.contentQueries&&zg(n,r),y){const N=n.contentCheckHooks;null!==N&&ns(r,N)}else{const N=n.contentHooks;null!==N&&Ls(r,N,1),xn(r,1)}!function Gg(n,r){const s=n.hostBindingOpCodes;if(null!==s)try{for(let a=0;a<s.length;a++){const c=s[a];if(c<0)Xs(~c);else{const f=c,y=s[++a],w=s[++a];gr(y,f),w(2,r[f])}}}finally{Xs(-1)}}(n,r);const w=n.components;null!==w&&function ml(n,r){for(let s=0;s<r.length;s++)cp(n,r[s])}(r,w);const b=n.viewQuery;if(null!==b&&wl(2,b,a),y){const N=n.viewCheckHooks;null!==N&&ns(r,N)}else{const N=n.viewHooks;null!==N&&Ls(r,N,2),xn(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[2]&=-73,1024&r[2]&&(r[2]&=-1025,Ai(r[3],-1))}finally{po()}}}function Xf(n,r,s,a){const c=r[10],y=gn(r);try{!y&&c.begin&&c.begin(),y&&vl(n,r,a),_l(n,r,s,a)}finally{!y&&c.end&&c.end()}}function Wg(n,r,s,a,c){const f=hi(),y=2&a;try{Xs(-1),y&&r.length>20&&vh(n,r,20,!1),s(a,c)}finally{Xs(f)}}function ep(n,r,s){!Ns()||(function tv(n,r,s,a){const c=s.directiveStart,f=s.directiveEnd;n.firstCreatePass||Vs(s,r),Ii(a,r);const y=s.initialInputs;for(let w=c;w<f;w++){const b=n.data[w],N=Ti(b);N&&rv(r,s,b);const B=mn(r,n,w,s);Ii(B,r),null!==y&&cd(0,w-c,B,b,0,y),N&&(un(s.index,r)[8]=B)}}(n,r,s,He(s,r)),128==(128&s.flags)&&function nv(n,r,s){const a=s.directiveStart,c=s.directiveEnd,y=s.index,w=function ba(){return Qt.lFrame.currentDirectiveIndex}();try{Xs(y);for(let b=a;b<c;b++){const N=n.data[b],B=r[b];Qo(b),(null!==N.hostBindings||0!==N.hostVars||null!==N.hostAttrs)&&sp(N,B)}}finally{Xs(-1),Qo(w)}}(n,r,s))}function tp(n,r,s=He){const a=r.localNames;if(null!==a){let c=r.index+1;for(let f=0;f<a.length;f+=2){const y=a[f+1],w=-1===y?s(r,n):n[y];n[c++]=w}}}function Ah(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=Di(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function Di(n,r,s,a,c,f,y,w,b,N){const B=20+a,Z=B+c,de=function Jy(n,r){const s=[];for(let a=0;a<r;a++)s.push(a<n?null:In);return s}(B,Z),Ae="function"==typeof N?N():N;return de[1]={type:n,blueprint:de,template:s,queries:null,viewQuery:w,declTNode:r,data:de.slice().fill(null,B),bindingStartIndex:B,expandoStartIndex:Z,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:b,consts:Ae,incompleteFirstPass:!1}}function Zg(n,r,s,a){const c=Mc(r);null===s?c.push(a):(c.push(s),n.firstCreatePass&&Uh(n).push(a,c.length-1))}function xh(n,r,s){for(let a in n)if(n.hasOwnProperty(a)){const c=n[a];(s=null===s?{}:s).hasOwnProperty(a)?s[a].push(r,c):s[a]=[r,c]}return s}function rp(n,r,s,a){let c=!1;if(Ns()){const f=function Nh(n,r,s){const a=n.directiveRegistry;let c=null;if(a)for(let f=0;f<a.length;f++){const y=a[f];Rg(s,y.selectors,!1)&&(c||(c=[]),_(Vs(s,r),n,y.type),Ti(y)?(El(n,s),c.unshift(y)):c.push(y))}return c}(n,r,s),y=null===a?null:{"":-1};if(null!==f){c=!0,nm(s,n.data.length,f.length);for(let B=0;B<f.length;B++){const Z=f[B];Z.providersResolver&&Z.providersResolver(Z)}let w=!1,b=!1,N=xc(n,r,f.length,null);for(let B=0;B<f.length;B++){const Z=f[B];s.mergedAttrs=ra(s.mergedAttrs,Z.hostAttrs),rm(n,s,r,N,Z),tm(N,Z,y),null!==Z.contentQueries&&(s.flags|=8),(null!==Z.hostBindings||null!==Z.hostAttrs||0!==Z.hostVars)&&(s.flags|=128);const de=Z.type.prototype;!w&&(de.ngOnChanges||de.ngOnInit||de.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),w=!0),!b&&(de.ngOnChanges||de.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),b=!0),N++}!function Yg(n,r){const a=r.directiveEnd,c=n.data,f=r.attrs,y=[];let w=null,b=null;for(let N=r.directiveStart;N<a;N++){const B=c[N],Z=B.inputs,de=null===f||Gf(r)?null:up(Z,f);y.push(de),w=xh(Z,N,w),b=xh(B.outputs,N,b)}null!==w&&(w.hasOwnProperty("class")&&(r.flags|=16),w.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=y,r.inputs=w,r.outputs=b}(n,s)}y&&function op(n,r,s){if(r){const a=n.localNames=[];for(let c=0;c<r.length;c+=2){const f=s[r[c+1]];if(null==f)throw new Je(-301,!1);a.push(r[c],f)}}}(s,a,y)}return s.mergedAttrs=ra(s.mergedAttrs,s.attrs),c}function ip(n,r,s,a,c,f){const y=f.hostBindings;if(y){let w=n.hostBindingOpCodes;null===w&&(w=n.hostBindingOpCodes=[]);const b=~r.index;(function ev(n){let r=n.length;for(;r>0;){const s=n[--r];if("number"==typeof s&&s<0)return s}return 0})(w)!=b&&w.push(b),w.push(a,c,y)}}function sp(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function El(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function tm(n,r,s){if(s){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)s[r.exportAs[a]]=n;Ti(r)&&(s[""]=n)}}function nm(n,r,s){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+s,n.providerIndexes=r}function rm(n,r,s,a,c){n.data[a]=c;const f=c.factory||(c.factory=Vr(c.type)),y=new is(f,Ti(c),null);n.blueprint[a]=y,s[a]=y,ip(n,r,0,a,xc(n,s,c.hostVars,In),c)}function rv(n,r,s){const a=He(r,n),c=Ah(s),f=n[10],y=ga(n,Ac(n,c,null,s.onPush?64:16,a,r,f,f.createRenderer(a,s),null,null));n[r.index]=y}function qa(n,r,s,a,c,f){const y=He(n,r);!function ap(n,r,s,a,c,f,y){if(null==f)Qn(n)?n.removeAttribute(r,c,s):r.removeAttribute(c);else{const w=null==y?Ne(f):y(f,a||"",c);Qn(n)?n.setAttribute(r,c,w,s):s?r.setAttributeNS(s,c,w):r.setAttribute(c,w)}}(r[11],y,f,n.value,s,a,c)}function cd(n,r,s,a,c,f){const y=f[r];if(null!==y){const w=a.setInput;for(let b=0;b<y.length;){const N=y[b++],B=y[b++],Z=y[b++];null!==w?a.setInput(s,Z,N,B):s[B]=Z}}}function up(n,r){let s=null,a=0;for(;a<r.length;){const c=r[a];if(0!==c)if(5!==c){if("number"==typeof c)break;n.hasOwnProperty(c)&&(null===s&&(s=[]),s.push(c,n[c],r[a+1])),a+=2}else a+=2;else a+=4}return s}function Ph(n,r,s,a){return new Array(n,!0,!1,r,null,0,a,s,null,null)}function cp(n,r){const s=un(r,n);if(dr(s)){const a=s[1];80&s[2]?_l(a,s,a.template,s[8]):s[5]>0&&kh(s)}}function kh(n){for(let a=ws(n);null!==a;a=Ku(a))for(let c=10;c<a.length;c++){const f=a[c];if(1024&f[2]){const y=f[1];_l(y,f,y.template,f[8])}else f[5]>0&&kh(f)}const s=n[1].components;if(null!==s)for(let a=0;a<s.length;a++){const c=un(s[a],n);dr(c)&&c[5]>0&&kh(c)}}function lp(n,r){const s=un(r,n),a=s[1];(function dp(n,r){for(let s=r.length;s<n.blueprint.length;s++)r.push(n.blueprint[s])})(a,s),vl(a,s,s[8])}function ga(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function Lh(n){for(;n;){n[2]|=64;const r=$t(n);if(Ci(n)&&!r)return n;n=r}return null}function Fh(n){!function hd(n){for(let r=0;r<n.components.length;r++){const s=n.components[r],a=Qc(s),c=a[1];Xf(c,a,c.template,s)}}(n[8])}function wl(n,r,s){Ta(0),r(n,s)}const om=(()=>Promise.resolve(null))();function Mc(n){return n[7]||(n[7]=[])}function Uh(n){return n.cleanup||(n.cleanup=[])}function um(n,r){const s=n[9],a=s?s.get(wc,null):null;a&&a.handleError(r)}function fp(n,r,s,a,c){for(let f=0;f<s.length;){const y=s[f++],w=s[f++],b=r[y],N=n.data[y];null!==N.setInput?N.setInput(b,c,a,w):b[w]=c}}function Za(n,r,s){const a=Ve(r,n);!function il(n,r,s){Qn(n)?n.setValue(r,s):r.textContent=s}(n[11],a,s)}function Vh(n,r,s){let a=s?n.styles:null,c=s?n.classes:null,f=0;if(null!==r)for(let y=0;y<r.length;y++){const w=r[y];"number"==typeof w?f=w:1==f?c=Te(c,w):2==f&&(a=Te(a,w+": "+r[++y]+";"))}s?n.styles=a:n.stylesWithoutHost=a,s?n.classes=c:n.classesWithoutHost=c}const gp=new Pr("INJECTOR",-1);class Bh{get(r,s=ca){if(s===ca){const a=new Error(`NullInjectorError: No provider for ${_e(r)}!`);throw a.name="NullInjectorError",a}return s}}const mp=new Pr("Set Injector scope."),Rc={},lm={};let fd;function jh(){return void 0===fd&&(fd=new Bh),fd}function $h(n,r=null,s=null,a){const c=Nc(n,r,s,a);return c._resolveInjectorDefTypes(),c}function Nc(n,r=null,s=null,a){return new Ju(n,s,r||jh(),a)}class Ju{constructor(r,s,a,c=null){this.parent=a,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];s&&Ei(s,w=>this.processProvider(w,r,s)),Ei([r],w=>this.processInjectorType(w,[],f)),this.records.set(gp,ma(void 0,this));const y=this.records.get(mp);this.scope=null!=y?y.value:null,this.source=c||("object"==typeof r?null:_e(r))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(r=>r.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(r,s=ca,a=Ut.Default){this.assertNotDestroyed();const c=ct(this),f=vn(void 0);try{if(!(a&Ut.SkipSelf)){let w=this.records.get(r);if(void 0===w){const b=function uv(n){return"function"==typeof n||"object"==typeof n&&n instanceof Pr}(r)&&nn(r);w=b&&this.injectableDefInScope(b)?ma(pd(r),Rc):null,this.records.set(r,w)}if(null!=w)return this.hydrate(r,w)}return(a&Ut.Self?jh():this.parent).get(r,s=a&Ut.Optional&&s===ca?null:s)}catch(y){if("NullInjectorError"===y.name){if((y[Na]=y[Na]||[]).unshift(_e(r)),c)throw y;return function Io(n,r,s,a){const c=n[Na];throw r[q]&&c.unshift(r[q]),n.message=function Or(n,r,s,a=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let c=_e(r);if(Array.isArray(r))c=r.map(_e).join(" -> ");else if("object"==typeof r){let f=[];for(let y in r)if(r.hasOwnProperty(y)){let w=r[y];f.push(y+":"+("string"==typeof w?JSON.stringify(w):_e(w)))}c=`{${f.join(", ")}}`}return`${s}${a?"("+a+")":""}[${c}]: ${n.replace(x,"\n  ")}`}("\n"+n.message,c,s,a),n.ngTokenPath=c,n[Na]=null,n}(y,r,"R3InjectorError",this.source)}throw y}finally{vn(f),ct(c)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(r=>this.get(r))}toString(){const r=[];return this.records.forEach((a,c)=>r.push(_e(c))),`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Je(205,!1)}processInjectorType(r,s,a){if(!(r=we(r)))return!1;let c=Sn(r);const f=null==c&&r.ngModule||void 0,y=void 0===f?r:f,w=-1!==a.indexOf(y);if(void 0!==f&&(c=Sn(f)),null==c)return!1;if(null!=c.imports&&!w){let B;a.push(y);try{Ei(c.imports,Z=>{this.processInjectorType(Z,s,a)&&(void 0===B&&(B=[]),B.push(Z))})}finally{}if(void 0!==B)for(let Z=0;Z<B.length;Z++){const{ngModule:de,providers:Ae}=B[Z];Ei(Ae,Xe=>this.processProvider(Xe,de,Ae||Y))}}this.injectorDefTypes.add(y);const b=Vr(y)||(()=>new y);this.records.set(y,ma(b,Rc));const N=c.providers;if(null!=N&&!w){const B=r;Ei(N,Z=>this.processProvider(Z,B,N))}return void 0!==f&&void 0!==r.providers}processProvider(r,s,a){let c=Xu(r=we(r))?r:we(r&&r.provide);const f=function Dl(n,r,s){return dm(n)?ma(void 0,n.useValue):ma(yp(n),Rc)}(r);if(Xu(r)||!0!==r.multi)this.records.get(c);else{let y=this.records.get(c);y||(y=ma(void 0,Rc,!0),y.factory=()=>Xt(y.multi),this.records.set(c,y)),c=r,y.multi.push(r)}this.records.set(c,f)}hydrate(r,s){return s.value===Rc&&(s.value=lm,s.value=s.factory()),"object"==typeof s.value&&s.value&&function av(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this.onDestroy.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=we(r.providedIn);return"string"==typeof s?"any"===s||s===this.scope:this.injectorDefTypes.has(s)}}function pd(n){const r=nn(n),s=null!==r?r.factory:Vr(n);if(null!==s)return s;if(n instanceof Pr)throw new Je(204,!1);if(n instanceof Function)return function Il(n){const r=n.length;if(r>0)throw function us(n,r){const s=[];for(let a=0;a<n;a++)s.push(r);return s}(r,"?"),new Je(204,!1);const s=function bn(n){const r=n&&(n[qn]||n[Zn]);if(r){const s=function Gn(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),r}return null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new Je(204,!1)}function yp(n,r,s){let a;if(Xu(n)){const c=we(n);return Vr(c)||pd(c)}if(dm(n))a=()=>we(n.useValue);else if(function vp(n){return!(!n||!n.useFactory)}(n))a=()=>n.useFactory(...Xt(n.deps||[]));else if(function ov(n){return!(!n||!n.useExisting)}(n))a=()=>Vt(we(n.useExisting));else{const c=we(n&&(n.useClass||n.provide));if(!function Ep(n){return!!n.deps}(n))return Vr(c)||pd(c);a=()=>new c(...Xt(n.deps))}return a}function ma(n,r,s=!1){return{factory:n,value:r,multi:s?[]:void 0}}function dm(n){return null!==n&&"object"==typeof n&&Ce in n}function Xu(n){return"function"==typeof n}let $o=(()=>{class n{static create(s,a){var c;if(Array.isArray(s))return $h({name:""},a,s,"");{const f=null!==(c=s.name)&&void 0!==c?c:"";return $h({name:f},s.parent,s.providers,f)}}}return n.THROW_IF_NOT_FOUND=ca,n.NULL=new Bh,n.\u0275prov=wt({token:n,providedIn:"any",factory:()=>Vt(gp)}),n.__NG_ELEMENT_ID__=-1,n})();function Cp(n,r){eo(Qc(n)[1],Ir())}function yd(n){let r=function zh(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const a=[n];for(;r;){let c;if(Ti(n))c=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new Je(903,"");c=r.\u0275dir}if(c){if(s){a.push(c);const y=n;y.inputs=ec(n.inputs),y.declaredInputs=ec(n.declaredInputs),y.outputs=ec(n.outputs);const w=c.hostBindings;w&&dv(n,w);const b=c.viewQuery,N=c.contentQueries;if(b&&bm(n,b),N&&Ap(n,N),Ie(n.inputs,c.inputs),Ie(n.declaredInputs,c.declaredInputs),Ie(n.outputs,c.outputs),Ti(c)&&c.data.animation){const B=n.data;B.animation=(B.animation||[]).concat(c.data.animation)}}const f=c.features;if(f)for(let y=0;y<f.length;y++){const w=f[y];w&&w.ngInherit&&w(n),w===yd&&(s=!1)}}r=Object.getPrototypeOf(r)}!function Sp(n){let r=0,s=null;for(let a=n.length-1;a>=0;a--){const c=n[a];c.hostVars=r+=c.hostVars,c.hostAttrs=ra(c.hostAttrs,s=ra(s,c.hostAttrs))}}(a)}function ec(n){return n===_n?{}:n===Y?[]:n}function bm(n,r){const s=n.viewQuery;n.viewQuery=s?(a,c)=>{r(a,c),s(a,c)}:r}function Ap(n,r){const s=n.contentQueries;n.contentQueries=s?(a,c,f)=>{r(a,c,f),s(a,c,f)}:r}function dv(n,r){const s=n.hostBindings;n.hostBindings=s?(a,c)=>{r(a,c),s(a,c)}:r}let Wh=null;function tc(){if(!Wh){const n=qt.Symbol;if(n&&n.iterator)Wh=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<r.length;++s){const a=r[s];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(Wh=a)}}}return Wh}function vd(n){return!!_d(n)&&(Array.isArray(n)||!(n instanceof Map)&&tc()in n)}function _d(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Ds(n,r,s){return!Object.is(n[r],s)&&(n[r]=s,!0)}function Kh(n,r,s,a){const c=rt();return Ds(c,Ps(),r)&&(Dn(),qa(mr(),c,n,r,s,a)),Kh}function Zh(n,r,s,a,c,f,y,w){const b=rt(),N=Dn(),B=n+20,Z=N.firstCreatePass?function Mm(n,r,s,a,c,f,y,w,b){const N=r.consts,B=Eu(r,n,4,y||null,Xn(N,w));rp(r,s,B,Xn(N,b)),eo(r,B);const Z=B.tViews=Di(2,B,a,c,f,r.directiveRegistry,r.pipeRegistry,null,r.schemas,N);return null!==r.queries&&(r.queries.template(r,B),Z.queries=r.queries.embeddedTView(B)),B}(B,N,b,r,s,a,c,f,y):N.data[B];Ui(Z,!1);const de=b[11].createComment("");ol(N,b,de,Z),Ii(de,b),ga(b,b[B]=Ph(de,b,de,Z)),yi(Z)&&ep(N,b,Z),null!=y&&tp(b,Z,w)}function Td(n,r=Ut.Default){const s=rt();return null===s?Vt(n,r):k(Ir(),s,we(n),r)}function Wr(){throw new Error("invalid")}function Vm(n,r,s){const a=rt();return Ds(a,Ps(),r)&&function js(n,r,s,a,c,f,y,w){const b=He(r,s);let B,N=r.inputs;!w&&null!=N&&(B=N[a])?(fp(n,s,B,a,c),gs(r)&&function Mh(n,r){const s=un(r,n);16&s[2]||(s[2]|=64)}(s,r.index)):3&r.type&&(a=function Qg(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(a),c=null!=y?y(c,r.value||"",a):c,Qn(f)?f.setProperty(b,a,c):os(a)||(b.setProperty?b.setProperty(a,c):b[a]=c))}(Dn(),mr(),a,n,r,a[11],s,!1),Vm}function Bm(n,r,s,a,c){const y=c?"class":"style";fp(n,s,r.inputs[y],y,a)}function Cd(n,r,s,a){const c=rt(),f=Dn(),y=20+n,w=c[11],b=c[y]=sl(w,r,function dc(){return Qt.lFrame.currentNamespace}()),N=f.firstCreatePass?function Ri(n,r,s,a,c,f,y){const w=r.consts,N=Eu(r,n,2,c,Xn(w,f));return rp(r,s,N,Xn(w,y)),null!==N.attrs&&Vh(N,N.attrs,!1),null!==N.mergedAttrs&&Vh(N,N.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,N),N}(y,f,c,0,r,s,a):f.data[y];Ui(N,!0);const B=N.mergedAttrs;null!==B&&go(w,b,B);const Z=N.classes;null!==Z&&mh(w,b,Z);const de=N.styles;return null!==de&&ll(w,b,de),64!=(64&N.flags)&&ol(f,c,b,N),0===function Rs(){return Qt.lFrame.elementDepthCount}()&&Ii(b,c),function lo(){Qt.lFrame.elementDepthCount++}(),yi(N)&&(ep(f,c,N),function Sh(n,r,s){if(Hi(r)){const c=r.directiveEnd;for(let f=r.directiveStart;f<c;f++){const y=n.data[f];y.contentQueries&&y.contentQueries(1,s[f],f)}}}(f,N,c)),null!==a&&tp(c,N),Cd}function tf(){let n=Ir();Qs()?function Yo(){Qt.lFrame.isParent=!1}():(n=n.parent,Ui(n,!1));const r=n;!function ho(){Qt.lFrame.elementDepthCount--}();const s=Dn();return s.firstCreatePass&&(eo(s,n),Hi(n)&&s.queries.elementEnd(n)),null!=r.classesWithoutHost&&function Nu(n){return 0!=(16&n.flags)}(r)&&Bm(s,r,rt(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function na(n){return 0!=(32&n.flags)}(r)&&Bm(s,r,rt(),r.stylesWithoutHost,!1),tf}function Wp(n,r,s,a){return Cd(n,r,s,a),tf(),Wp}function Dv(){return rt()}function Zp(n){return!!n&&"function"==typeof n.then}function $m(n){return!!n&&"function"==typeof n.subscribe}const Yp=$m;function va(n,r,s,a){const c=rt(),f=Dn(),y=Ir();return function oc(n,r,s,a,c,f,y,w){const b=yi(a),B=n.firstCreatePass&&Uh(n),Z=r[8],de=Mc(r);let Ae=!0;if(3&a.type||w){const Nt=He(a,r),Wt=w?w(Nt):Nt,ot=de.length,hn=w?Kn=>w(S(Kn[a.index])):a.index;if(Qn(s)){let Kn=null;if(!w&&b&&(Kn=function Qa(n,r,s,a){const c=n.cleanup;if(null!=c)for(let f=0;f<c.length-1;f+=2){const y=c[f];if(y===s&&c[f+1]===a){const w=r[7],b=c[f+2];return w.length>b?w[b]:null}"string"==typeof y&&(f+=2)}return null}(n,r,c,a.index)),null!==Kn)(Kn.__ngLastListenerFn__||Kn).__ngNextListenerFn__=f,Kn.__ngLastListenerFn__=f,Ae=!1;else{f=Qp(a,r,Z,f,!1);const Dr=s.listen(Wt,c,f);de.push(f,Dr),B&&B.push(c,hn,ot,ot+1)}}else f=Qp(a,r,Z,f,!0),Wt.addEventListener(c,f,y),de.push(f),B&&B.push(c,hn,ot,y)}else f=Qp(a,r,Z,f,!1);const Xe=a.outputs;let Et;if(Ae&&null!==Xe&&(Et=Xe[c])){const Nt=Et.length;if(Nt)for(let Wt=0;Wt<Nt;Wt+=2){const Ea=r[Et[Wt]][Et[Wt+1]].subscribe(f),Ud=de.length;de.push(f,Ea),B&&B.push(c,a.index,Ud,-(Ud+1))}}}(f,c,c[11],y,n,r,!!s,a),va}function Sd(n,r,s,a){try{return!1!==s(a)}catch(c){return um(n,c),!1}}function Qp(n,r,s,a,c){return function f(y){if(y===Function)return a;const w=2&n.flags?un(n.index,r):r;0==(32&r[2])&&Lh(w);let b=Sd(r,0,a,y),N=f.__ngNextListenerFn__;for(;N;)b=Sd(r,0,N,y)&&b,N=N.__ngNextListenerFn__;return c&&!1===b&&(y.preventDefault(),y.returnValue=!1),b}}function Hm(n=1){return function nu(n){return(Qt.lFrame.contextLView=function ks(n,r){for(;n>0;)r=r[15],n--;return r}(n,Qt.lFrame.contextLView))[8]}(n)}function Xp(n,r,s,a,c){const f=n[s+1],y=null===r;let w=a?jo(f):Wa(f),b=!1;for(;0!==w&&(!1===b||y);){const B=n[w+1];Jm(n[w],r)&&(b=!0,n[w+1]=a?pl(B):fl(B)),w=a?jo(B):Wa(B)}b&&(n[s+1]=a?fl(f):pl(f))}function Jm(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&cs(n,r)>=0}function Vc(n,r){return function _a(n,r,s,a){const c=rt(),f=Dn(),y=function di(n){const r=Qt.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,s}(2);f.firstUpdatePass&&function ry(n,r,s,a){const c=n.data;if(null===c[s+1]){const f=c[hi()],y=function ny(n,r){return r>=n.expandoStartIndex}(n,s);(function cy(n,r){return 0!=(n.flags&(r?16:32))})(f,a)&&null===r&&!y&&(r=!1),r=function iy(n,r,s,a){const c=function Ao(n){const r=Qt.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let f=a?r.residualClasses:r.residualStyles;if(null===c)0===(a?r.classBindings:r.styleBindings)&&(s=Md(s=tg(null,n,r,s,a),r.attrs,a),f=null);else{const y=r.directiveStylingLast;if(-1===y||n[y]!==c)if(s=tg(c,n,r,s,a),null===f){let b=function xv(n,r,s){const a=s?r.classBindings:r.styleBindings;if(0!==Wa(a))return n[jo(a)]}(n,r,a);void 0!==b&&Array.isArray(b)&&(b=tg(null,n,r,b[1],a),b=Md(b,r.attrs,a),function Mv(n,r,s,a){n[jo(s?r.classBindings:r.styleBindings)]=a}(n,r,a,b))}else f=function sy(n,r,s){let a;const c=r.directiveEnd;for(let f=1+r.directiveStylingLast;f<c;f++)a=Md(a,n[f].hostAttrs,s);return Md(a,r.attrs,s)}(n,r,a)}return void 0!==f&&(a?r.residualClasses=f:r.residualStyles=f),s}(c,f,r,a),function Qm(n,r,s,a,c,f){let y=f?r.classBindings:r.styleBindings,w=jo(y),b=Wa(y);n[a]=s;let B,N=!1;if(Array.isArray(s)){const Z=s;B=Z[1],(null===B||cs(Z,B)>0)&&(N=!0)}else B=s;if(c)if(0!==b){const de=jo(n[w+1]);n[a+1]=_h(de,w),0!==de&&(n[de+1]=Is(n[de+1],a)),n[w+1]=function Eh(n,r){return 131071&n|r<<17}(n[w+1],a)}else n[a+1]=_h(w,0),0!==w&&(n[w+1]=Is(n[w+1],a)),w=a;else n[a+1]=_h(b,0),0===w?w=a:n[b+1]=Is(n[b+1],a),b=a;N&&(n[a+1]=fl(n[a+1])),Xp(n,B,a,!0),Xp(n,B,a,!1),function Fc(n,r,s,a,c){const f=c?n.residualClasses:n.residualStyles;null!=f&&"string"==typeof r&&cs(f,r)>=0&&(s[a+1]=pl(s[a+1]))}(r,B,n,a,f),y=_h(w,b),f?r.classBindings=y:r.styleBindings=y}(c,f,r,s,y,a)}}(f,n,y,a),r!==In&&Ds(c,y,r)&&function rg(n,r,s,a,c,f,y,w){if(!(3&r.type))return;const b=n.data,N=b[w+1];Rl(function Wf(n){return 1==(1&n)}(N)?uy(b,r,s,c,Wa(N),y):void 0)||(Rl(f)||function hl(n){return 2==(2&n)}(N)&&(f=uy(b,null,s,c,w,y)),function cl(n,r,s,a,c){const f=Qn(n);if(r)c?f?n.addClass(s,a):s.classList.add(a):f?n.removeClass(s,a):s.classList.remove(a);else{let y=-1===a.indexOf("-")?void 0:H.DashCase;if(null==c)f?n.removeStyle(s,a,y):s.style.removeProperty(a);else{const w="string"==typeof c&&c.endsWith("!important");w&&(c=c.slice(0,-10),y|=H.Important),f?n.setStyle(s,a,c,y):s.style.setProperty(a,c,w?"important":"")}}}(a,y,Ve(hi(),s),c,f))}(f,f.data[hi()],c,c[11],n,c[y+1]=function uf(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=_e(so(n)))),n}(r,s),a,y)}(n,r,null,!0),Vc}function tg(n,r,s,a,c){let f=null;const y=s.directiveEnd;let w=s.directiveStylingLast;for(-1===w?w=s.directiveStart:w++;w<y&&(f=r[w],a=Md(a,f.hostAttrs,c),f!==n);)w++;return null!==n&&(s.directiveStylingLast=w),a}function Md(n,r,s){const a=s?1:2;let c=-1;if(null!==r)for(let f=0;f<r.length;f++){const y=r[f];"number"==typeof y?c=y:c===a&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Cr(n,y,!!s||r[++f]))}return void 0===n?null:n}function uy(n,r,s,a,c,f){const y=null===r;let w;for(;c>0;){const b=n[c],N=Array.isArray(b),B=N?b[1]:b,Z=null===B;let de=s[c+1];de===In&&(de=Z?Y:void 0);let Ae=Z?aa(de,a):B===a?de:void 0;if(N&&!Rl(Ae)&&(Ae=aa(b,a)),Rl(Ae)&&(w=Ae,y))return w;const Xe=n[c+1];c=y?jo(Xe):Wa(Xe)}if(null!==r){let b=f?r.residualClasses:r.residualStyles;null!=b&&(w=aa(b,a))}return w}function Rl(n){return void 0!==n}function ig(n,r=""){const s=rt(),a=Dn(),c=n+20,f=a.firstCreatePass?Eu(a,c,1,r,null):a.data[c],y=s[c]=function rl(n,r){return Qn(n)?n.createText(r):n.createTextNode(r)}(s[11],r);ol(a,s,y,f),Ui(f,!1)}function Xa(n){return cf("",n,""),Xa}function cf(n,r,s){const a=rt(),c=function Tl(n,r,s,a){return Ds(n,Ps(),s)?r+Ne(s)+a:In}(a,n,r,s);return c!==In&&Za(a,hi(),c),cf}const cc=void 0;var zo=["en",[["a","p"],["AM","PM"],cc],[["AM","PM"],cc,cc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],cc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],cc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",cc,"{1} 'at' {0}",cc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Bc(n){const s=Math.floor(Math.abs(n)),a=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let Ni={};function hf(n){const r=function kl(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=Ts(r);if(s)return s;const a=r.split("-")[0];if(s=Ts(a),s)return s;if("en"===a)return zo;throw new Error(`Missing locale data for the locale "${n}".`)}function Ol(n){return hf(n)[cn.PluralCase]}function Ts(n){return n in Ni||(Ni[n]=qt.ng&&qt.ng.common&&qt.ng.common.locales&&qt.ng.common.locales[n]),Ni[n]}var cn=(()=>((cn=cn||{})[cn.LocaleId=0]="LocaleId",cn[cn.DayPeriodsFormat=1]="DayPeriodsFormat",cn[cn.DayPeriodsStandalone=2]="DayPeriodsStandalone",cn[cn.DaysFormat=3]="DaysFormat",cn[cn.DaysStandalone=4]="DaysStandalone",cn[cn.MonthsFormat=5]="MonthsFormat",cn[cn.MonthsStandalone=6]="MonthsStandalone",cn[cn.Eras=7]="Eras",cn[cn.FirstDayOfWeek=8]="FirstDayOfWeek",cn[cn.WeekendRange=9]="WeekendRange",cn[cn.DateFormat=10]="DateFormat",cn[cn.TimeFormat=11]="TimeFormat",cn[cn.DateTimeFormat=12]="DateTimeFormat",cn[cn.NumberSymbols=13]="NumberSymbols",cn[cn.NumberFormats=14]="NumberFormats",cn[cn.CurrencyCode=15]="CurrencyCode",cn[cn.CurrencySymbol=16]="CurrencySymbol",cn[cn.CurrencyName=17]="CurrencyName",cn[cn.Currencies=18]="Currencies",cn[cn.Directionality=19]="Directionality",cn[cn.PluralCase=20]="PluralCase",cn[cn.ExtraData=21]="ExtraData",cn))();const eu="en-US";let Ey=eu;function Qv(n,r,s,a,c){if(n=we(n),Array.isArray(n))for(let f=0;f<n.length;f++)Qv(n[f],r,s,a,c);else{const f=Dn(),y=rt();let w=Xu(n)?n:we(n.provide),b=yp(n);const N=Ir(),B=1048575&N.providerIndexes,Z=N.directiveStart,de=N.providerIndexes>>20;if(Xu(n)||!n.multi){const Ae=new is(b,c,Td),Xe=Xv(w,r,c?B:B+de,Z);-1===Xe?(_(Vs(N,y),f,w),Jv(f,n,r.length),r.push(w),N.directiveStart++,N.directiveEnd++,c&&(N.providerIndexes+=1048576),s.push(Ae),y.push(Ae)):(s[Xe]=Ae,y[Xe]=Ae)}else{const Ae=Xv(w,r,B+de,Z),Xe=Xv(w,r,B,B+de),Et=Ae>=0&&s[Ae],Nt=Xe>=0&&s[Xe];if(c&&!Nt||!c&&!Et){_(Vs(N,y),f,w);const Wt=function uw(n,r,s,a,c){const f=new is(n,s,Td);return f.multi=[],f.index=r,f.componentProviders=0,g0(f,c,a&&!s),f}(c?aw:ow,s.length,c,a,b);!c&&Nt&&(s[Xe].providerFactory=Wt),Jv(f,n,r.length,0),r.push(w),N.directiveStart++,N.directiveEnd++,c&&(N.providerIndexes+=1048576),s.push(Wt),y.push(Wt)}else Jv(f,n,Ae>-1?Ae:Xe,g0(s[c?Xe:Ae],b,!c&&a));!c&&a&&Nt&&s[Xe].componentProviders++}}}function Jv(n,r,s,a){const c=Xu(r),f=function _p(n){return!!n.useClass}(r);if(c||f){const b=(f?we(r.useClass):r).prototype.ngOnDestroy;if(b){const N=n.destroyHooks||(n.destroyHooks=[]);if(!c&&r.multi){const B=N.indexOf(s);-1===B?N.push(s,[a,b]):N[B+1].push(a,b)}else N.push(s,b)}}}function g0(n,r,s){return s&&n.componentProviders++,n.multi.push(r)-1}function Xv(n,r,s,a){for(let c=s;c<a;c++)if(r[c]===n)return c;return-1}function ow(n,r,s,a){return e_(this.multi,[])}function aw(n,r,s,a){const c=this.multi;let f;if(this.providerFactory){const y=this.providerFactory.componentProviders,w=mn(s,s[1],this.providerFactory.index,a);f=w.slice(0,y),e_(c,f);for(let b=y;b<w.length;b++)f.push(w[b])}else f=[],e_(c,f);return f}function e_(n,r){for(let s=0;s<n.length;s++)r.push((0,n[s])());return r}function m0(n,r=[]){return s=>{s.providersResolver=(a,c)=>function sw(n,r,s){const a=Dn();if(a.firstCreatePass){const c=Ti(n);Qv(s,a.data,a.blueprint,c,!0),Qv(r,a.data,a.blueprint,c,!1)}}(a,c?c(n):n,r)}}class y0{}class dw{resolveComponentFactory(r){throw function lw(n){const r=Error(`No component factory found for ${_e(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let Ay=(()=>{class n{}return n.NULL=new dw,n})();function hw(){return vf(Ir(),rt())}function vf(n,r){return new mg(He(n,r))}let mg=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=hw,n})();function fw(n){return n instanceof mg?n.nativeElement:n}class _0{}let pw=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function mw(){const n=rt(),s=un(Ir().index,n);return function gw(n){return n[11]}(jn(s)?s:n)}(),n})(),yw=(()=>{class n{}return n.\u0275prov=wt({token:n,providedIn:"root",factory:()=>null}),n})();class E0{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const w0=new E0("13.3.8"),t_={};function xy(n,r,s,a,c=!1){for(;null!==s;){const f=r[s.index];if(null!==f&&a.push(S(f)),ei(f))for(let w=10;w<f.length;w++){const b=f[w],N=b[1].firstChild;null!==N&&xy(b[1],b,N,a)}const y=s.type;if(8&y)xy(n,r,s.child,a);else if(32&y){const w=Fe(s,r);let b;for(;b=w();)a.push(b)}else if(16&y){const w=ph(r,s);if(Array.isArray(w))a.push(...w);else{const b=$t(r[16]);xy(b[1],b,w,a,!0)}}s=c?s.projectionNext:s.next}return a}class yg{constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,s=r[1];return xy(s,r,s.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(ei(r)){const s=r[8],a=s?s.indexOf(this):-1;a>-1&&(lh(r,a),Ki(s,a))}this._attachedToViewContainer=!1}Cg(this._lView[1],this._lView)}onDestroy(r){Zg(this._lView[1],this._lView,null,r)}markForCheck(){Lh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function hp(n,r,s){const a=r[10];a.begin&&a.begin();try{_l(n,r,n.template,s)}catch(c){throw um(r,c),c}finally{a.end&&a.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Je(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Ff(n,r){ul(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new Je(902,"");this._appRef=r}}class vw extends yg{constructor(r){super(r),this._view=r}detectChanges(){Fh(this._view)}checkNoChanges(){}get context(){return null}}class I0 extends Ay{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=Mn(r);return new n_(s,this.ngModule)}}function D0(n){const r=[];for(let s in n)n.hasOwnProperty(s)&&r.push({propName:n[s],templateName:s});return r}class n_ extends y0{constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function Tc(n){return n.map(bc).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return D0(this.componentDef.inputs)}get outputs(){return D0(this.componentDef.outputs)}create(r,s,a,c){const f=(c=c||this.ngModule)?function Ew(n,r){return{get:(s,a,c)=>{const f=n.get(s,t_,c);return f!==t_||a===t_?f:r.get(s,a,c)}}}(r,c.injector):r,y=f.get(_0,A),w=f.get(yw,null),b=y.createRenderer(null,this.componentDef),N=this.componentDef.selectors[0][0]||"div",B=a?function qg(n,r,s){if(Qn(n))return n.selectRootElement(r,s===Se.ShadowDom);let a="string"==typeof r?n.querySelector(r):r;return a.textContent="",a}(b,a,this.componentDef.encapsulation):sl(y.createRenderer(null,this.componentDef),N,function _w(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(N)),Z=this.componentDef.onPush?576:528,de=function Dm(n,r){return{components:[],scheduler:n||nl,clean:om,playerHandler:r||null,flags:0}}(),Ae=Di(0,null,null,1,0,null,null,null,null,null),Xe=Ac(null,Ae,de,Z,null,null,y,b,w,f);let Et,Nt;Os(Xe);try{const Wt=function Im(n,r,s,a,c,f){const y=s[1];s[20]=n;const b=Eu(y,20,2,"#host",null),N=b.mergedAttrs=r.hostAttrs;null!==N&&(Vh(b,N,!0),null!==n&&(go(c,n,N),null!==b.classes&&mh(c,n,b.classes),null!==b.styles&&ll(c,n,b.styles)));const B=a.createRenderer(n,r),Z=Ac(s,Ah(r),null,r.onPush?64:16,s[20],b,a,B,f||null,null);return y.firstCreatePass&&(_(Vs(b,s),y,r.type),El(y,b),nm(b,s.length,1)),ga(s,Z),s[20]=Z}(B,this.componentDef,Xe,y,b);if(B)if(a)go(b,B,["ng-version",w0.full]);else{const{attrs:ot,classes:hn}=function Pg(n){const r=[],s=[];let a=1,c=2;for(;a<n.length;){let f=n[a];if("string"==typeof f)2===c?""!==f&&r.push(f,n[++a]):8===c&&s.push(f);else{if(!Bs(c))break;c=f}a++}return{attrs:r,classes:s}}(this.componentDef.selectors[0]);ot&&go(b,B,ot),hn&&hn.length>0&&mh(b,B,hn.join(" "))}if(Nt=ln(Ae,20),void 0!==s){const ot=Nt.projection=[];for(let hn=0;hn<this.ngContentSelectors.length;hn++){const Kn=s[hn];ot.push(null!=Kn?Array.from(Kn):null)}}Et=function Gh(n,r,s,a,c){const f=s[1],y=function em(n,r,s){const a=Ir();n.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),rm(n,a,r,xc(n,r,1,null),s));const c=mn(r,n,a.directiveStart,a);Ii(c,r);const f=He(a,r);return f&&Ii(f,r),c}(f,s,r);if(a.components.push(y),n[8]=y,c&&c.forEach(b=>b(y,r)),r.contentQueries){const b=Ir();r.contentQueries(1,y,b.directiveStart)}const w=Ir();return!f.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(Xs(w.index),ip(s[1],w,0,w.directiveStart,w.directiveEnd,r),sp(r,y)),y}(Wt,this.componentDef,Xe,de,[Cp]),vl(Ae,Xe,null)}finally{po()}return new Iw(this.componentType,Et,vf(Nt,Xe),Xe,Nt)}}class Iw extends class cw{}{constructor(r,s,a,c,f){super(),this.location=a,this._rootLView=c,this._tNode=f,this.instance=s,this.hostView=this.changeDetectorRef=new vw(c),this.componentType=r}get injector(){return new ni(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}class _f{}class b0{}const Ef=new Map;class S0 extends _f{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new I0(this);const a=Jn(r);this._bootstrapComponents=p(a.bootstrap),this._r3Injector=Nc(r,s,[{provide:_f,useValue:this},{provide:Ay,useValue:this.componentFactoryResolver}],_e(r)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(r)}get(r,s=$o.THROW_IF_NOT_FOUND,a=Ut.Default){return r===$o||r===_f||r===gp?this:this._r3Injector.get(r,s,a)}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class r_ extends b0{constructor(r){super(),this.moduleType=r,null!==Jn(r)&&function bw(n){const r=new Set;!function s(a){const c=Jn(a,!0),f=c.id;null!==f&&(function T0(n,r,s){if(r&&r!==s)throw new Error(`Duplicate module registered for ${n} - ${_e(r)} vs ${_e(r.name)}`)}(f,Ef.get(f),a),Ef.set(f,a));const y=p(c.imports);for(const w of y)r.has(w)||(r.add(w),s(w))}(n)}(r)}create(r){return new S0(this.moduleType,r)}}function A0(n,r,s){const a=function $r(){const n=Qt.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}()+n,c=rt();return c[a]===In?function Ya(n,r,s){return n[r]=s}(c,a,s?r.call(s):r()):function Pc(n,r){return n[r]}(c,a)}function i_(n){return r=>{setTimeout(n,void 0,r)}}const lc=class jw extends E.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,a){var c,f,y;let w=r,b=s||(()=>null),N=a;if(r&&"object"==typeof r){const Z=r;w=null===(c=Z.next)||void 0===c?void 0:c.bind(Z),b=null===(f=Z.error)||void 0===f?void 0:f.bind(Z),N=null===(y=Z.complete)||void 0===y?void 0:y.bind(Z)}this.__isAsync&&(b=i_(b),w&&(w=i_(w)),N&&(N=i_(N)));const B=super.subscribe({next:w,error:b,complete:N});return r instanceof F.w0&&r.add(B),B}};function $w(){return this._results[tc()]()}class s_{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=tc(),a=s_.prototype;a[s]||(a[s]=$w)}get changes(){return this._changes||(this._changes=new lc)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const a=this;a.dirty=!1;const c=Bi(r);(this._changesDetected=!function hc(n,r,s){if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++){let c=n[a],f=r[a];if(s&&(c=s(c),f=s(f)),f!==c)return!1}return!0}(a._results,c,s))&&(a._results=c,a.length=c.length,a.last=c[this.length-1],a.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Eg=(()=>{class n{}return n.__NG_ELEMENT_ID__=zw,n})();const Hw=Eg,Gw=class extends Hw{constructor(r,s,a){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=a}createEmbeddedView(r){const s=this._declarationTContainer.tViews,a=Ac(this._declarationLView,s,r,16,null,s.declTNode,null,null,null,null);a[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(a[19]=f.createEmbeddedView(s)),vl(s,a,r),new yg(a)}};function zw(){return My(Ir(),rt())}function My(n,r){return 4&n.type?new Gw(r,n,vf(n,r)):null}let Ry=(()=>{class n{}return n.__NG_ELEMENT_ID__=Ww,n})();function Ww(){return L0(Ir(),rt())}const Kw=Ry,O0=class extends Kw{constructor(r,s,a){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=a}get element(){return vf(this._hostTNode,this._hostLView)}get injector(){return new ni(this._hostTNode,this._hostLView)}get parentInjector(){const r=I(this._hostTNode,this._hostLView);if(Ro(r)){const s=no(r,this._hostLView),a=to(r);return new ni(s[1].data[a+8],s)}return new ni(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=k0(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,s,a){const c=r.createEmbeddedView(s||{});return this.insert(c,a),c}createComponent(r,s,a,c,f){const y=r&&!function yr(n){return"function"==typeof n}(r);let w;if(y)w=s;else{const Z=s||{};w=Z.index,a=Z.injector,c=Z.projectableNodes,f=Z.ngModuleRef}const b=y?r:new n_(Mn(r)),N=a||this.parentInjector;if(!f&&null==b.ngModule){const de=(y?N:this.parentInjector).get(_f,null);de&&(f=de)}const B=b.create(N,c,void 0,f);return this.insert(B.hostView,w),B}insert(r,s){const a=r._lView,c=a[1];if(function On(n){return ei(n[3])}(a)){const B=this.indexOf(r);if(-1!==B)this.detach(B);else{const Z=a[3],de=new O0(Z,Z[6],Z[3]);de.detach(de.indexOf(r))}}const f=this._adjustIndex(s),y=this._lContainer;!function Uf(n,r,s,a){const c=10+a,f=s.length;a>0&&(s[c-1][4]=r),a<f-10?(r[4]=s[c],Ou(s,10+a,r)):(s.push(r),r[4]=null),r[3]=s;const y=r[17];null!==y&&s!==y&&function Fy(n,r){const s=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===s?n[9]=[r]:s.push(r)}(y,r);const w=r[19];null!==w&&w.insertView(n),r[2]|=128}(c,a,y,f);const w=za(f,y),b=a[11],N=Ga(b,y[7]);return null!==N&&function ch(n,r,s,a,c,f){a[0]=c,a[6]=r,ul(n,a,s,1,c,f)}(c,y[6],b,a,N,w),r.attachToViewContainerRef(),Ou(o_(y),f,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=k0(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),a=lh(this._lContainer,s);a&&(Ki(o_(this._lContainer),s),Cg(a[1],a))}detach(r){const s=this._adjustIndex(r,-1),a=lh(this._lContainer,s);return a&&null!=Ki(o_(this._lContainer),s)?new yg(a):null}_adjustIndex(r,s=0){return null==r?this.length+s:r}};function k0(n){return n[8]}function o_(n){return n[8]||(n[8]=[])}function L0(n,r){let s;const a=r[n.index];if(ei(a))s=a;else{let c;if(8&n.type)c=S(a);else{const f=r[11];c=f.createComment("");const y=He(n,r);Ha(f,Ga(f,y),c,function Vy(n,r){return Qn(n)?n.nextSibling(r):r.nextSibling}(f,y),!1)}r[n.index]=s=Ph(a,r,c,n),ga(r,s)}return new O0(s,n,r)}class a_{constructor(r){this.queryList=r,this.matches=null}clone(){return new a_(this.queryList)}setDirty(){this.queryList.setDirty()}}class u_{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const a=null!==r.contentQueries?r.contentQueries[0]:s.length,c=[];for(let f=0;f<a;f++){const y=s.getByIndex(f);c.push(this.queries[y.indexInDeclarationView].clone())}return new u_(c)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==G0(r,s).matches&&this.queries[s].setDirty()}}class F0{constructor(r,s,a=null){this.predicate=r,this.flags=s,this.read=a}}class c_{constructor(r=[]){this.queries=r}elementStart(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let a=0;a<this.length;a++){const c=null!==s?s.length:0,f=this.getByIndex(a).embeddedTView(r,c);f&&(f.indexInDeclarationView=a,null!==s?s.push(f):s=[f])}return null!==s?new c_(s):null}template(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class l_{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new l_(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let c=0;c<a.length;c++){const f=a[c];this.matchTNodeWithReadOption(r,s,Yw(s,f)),this.matchTNodeWithReadOption(r,s,Rt(s,r,f,!1,!1))}else a===Eg?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,Rt(s,r,a,!1,!1))}matchTNodeWithReadOption(r,s,a){if(null!==a){const c=this.metadata.read;if(null!==c)if(c===mg||c===Ry||c===Eg&&4&s.type)this.addMatch(s.index,-2);else{const f=Rt(s,r,c,!1,!1);null!==f&&this.addMatch(s.index,f)}else this.addMatch(s.index,a)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function Yw(n,r){const s=n.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===r)return s[a+1];return null}function Jw(n,r,s,a){return-1===s?function Qw(n,r){return 11&n.type?vf(n,r):4&n.type?My(n,r):null}(r,n):-2===s?function Xw(n,r,s){return s===mg?vf(r,n):s===Eg?My(r,n):s===Ry?L0(r,n):void 0}(n,r,a):mn(n,n[1],s,r)}function U0(n,r,s,a){const c=r[19].queries[a];if(null===c.matches){const f=n.data,y=s.matches,w=[];for(let b=0;b<y.length;b+=2){const N=y[b];w.push(N<0?null:Jw(r,f[N],y[b+1],s.metadata.read))}c.matches=w}return c.matches}function d_(n,r,s,a){const c=n.queries.getByIndex(s),f=c.matches;if(null!==f){const y=U0(n,r,c,s);for(let w=0;w<f.length;w+=2){const b=f[w];if(b>0)a.push(y[w/2]);else{const N=f[w+1],B=r[-b];for(let Z=10;Z<B.length;Z++){const de=B[Z];de[17]===de[3]&&d_(de[1],de,N,a)}if(null!==B[9]){const Z=B[9];for(let de=0;de<Z.length;de++){const Ae=Z[de];d_(Ae[1],Ae,N,a)}}}}}return a}function V0(n){const r=rt(),s=Dn(),a=tu();Ta(a+1);const c=G0(s,a);if(n.dirty&&gn(r)===(2==(2&c.metadata.flags))){if(null===c.matches)n.reset([]);else{const f=c.crossesNgTemplate?d_(s,r,a,[]):U0(s,r,c,a);n.reset(f,fw),n.notifyOnChanges()}return!0}return!1}function B0(n,r,s,a){const c=Dn();if(c.firstCreatePass){const f=Ir();(function H0(n,r,s){null===n.queries&&(n.queries=new c_),n.queries.track(new l_(r,s))})(c,new F0(r,s,a),f.index),function nI(n,r){const s=n.contentQueries||(n.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,r)}(c,n),2==(2&s)&&(c.staticContentQueries=!0)}!function $0(n,r,s){const a=new s_(4==(4&s));Zg(n,r,a,a.destroy),null===r[19]&&(r[19]=new u_),r[19].queries.push(new a_(a))}(c,rt(),s)}function j0(){return function tI(n,r){return n[19].queries[r].queryList}(rt(),tu())}function G0(n,r){return n.queries.getByIndex(r)}function Oy(...n){}const aE=new Pr("Application Initializer");let y_=(()=>{class n{constructor(s){this.appInits=s,this.resolve=Oy,this.reject=Oy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,c)=>{this.resolve=a,this.reject=c})}runInitializers(){if(this.initialized)return;const s=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const f=this.appInits[c]();if(Zp(f))s.push(f);else if(Yp(f)){const y=new Promise((w,b)=>{f.subscribe({complete:w,error:b})});s.push(y)}}Promise.all(s).then(()=>{a()}).catch(c=>{this.reject(c)}),0===s.length&&a(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(Vt(aE,8))},n.\u0275prov=wt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const uE=new Pr("AppId",{providedIn:"root",factory:function cE(){return`${v_()}${v_()}${v_()}`}});function v_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const lE=new Pr("Platform Initializer"),EI=new Pr("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),dE=new Pr("appBootstrapListener");let wI=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=wt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const __=new Pr("LocaleId",{providedIn:"root",factory:()=>zn(__,Ut.Optional|Ut.SkipSelf)||function II(){return"undefined"!=typeof $localize&&$localize.locale||eu}()}),DI=new Pr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class bI{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let TI=(()=>{class n{compileModuleSync(s){return new r_(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),f=p(Jn(s).declarations).reduce((y,w)=>{const b=Mn(w);return b&&y.push(new n_(b)),y},[]);return new bI(a,f)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=wt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const SI=(()=>Promise.resolve(0))();function E_(n){"undefined"==typeof Zone?SI.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Cu{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new lc(!1),this.onMicrotaskEmpty=new lc(!1),this.onStable=new lc(!1),this.onError=new lc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!a&&s,c.shouldCoalesceRunChangeDetection=a,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function AI(){let n=qt.requestAnimationFrame,r=qt.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&r){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function RI(n){const r=()=>{!function MI(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(qt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,I_(n),n.isCheckStableRunning=!0,w_(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),I_(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,c,f,y,w)=>{try{return hE(n),s.invokeTask(c,f,y,w)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||n.shouldCoalesceRunChangeDetection)&&r(),fE(n)}},onInvoke:(s,a,c,f,y,w,b)=>{try{return hE(n),s.invoke(c,f,y,w,b)}finally{n.shouldCoalesceRunChangeDetection&&r(),fE(n)}},onHasTask:(s,a,c,f)=>{s.hasTask(c,f),a===c&&("microTask"==f.change?(n._hasPendingMicrotasks=f.microTask,I_(n),w_(n)):"macroTask"==f.change&&(n.hasPendingMacrotasks=f.macroTask))},onHandleError:(s,a,c,f)=>(s.handleError(c,f),n.runOutsideAngular(()=>n.onError.emit(f)),!1)})}(c)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Cu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Cu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(r,s,a){return this._inner.run(r,s,a)}runTask(r,s,a,c){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+c,r,xI,Oy,Oy);try{return f.runTask(y,s,a)}finally{f.cancelTask(y)}}runGuarded(r,s,a){return this._inner.runGuarded(r,s,a)}runOutsideAngular(r){return this._outer.run(r)}}const xI={};function w_(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function I_(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function hE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function fE(n){n._nesting--,w_(n)}class NI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new lc,this.onMicrotaskEmpty=new lc,this.onStable=new lc,this.onError=new lc}run(r,s,a){return r.apply(s,a)}runGuarded(r,s,a){return r.apply(s,a)}runOutsideAngular(r){return r()}runTask(r,s,a,c){return r.apply(s,a)}}let pE=(()=>{class n{constructor(s){this._ngZone=s,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Cu.assertNotInAngularZone(),E_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())E_(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,c){let f=-1;a&&a>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:f,updateCb:c})}whenStable(s,a,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(s,a,c){return[]}}return n.\u0275fac=function(s){return new(s||n)(Vt(Cu))},n.\u0275prov=wt({token:n,factory:n.\u0275fac}),n})(),PI=(()=>{class n{constructor(){this._applications=new Map,D_.addToWindow(this)}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return D_.findTestabilityInTree(this,s,a)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=wt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();class OI{addToWindow(r){}findTestabilityInTree(r,s,a){return null}}function kI(n){D_=n}let D_=new OI,Ld=null;const gE=new Pr("AllowMultipleToken"),mE=new Pr("PlatformOnDestroy");class UI{constructor(r,s){this.name=r,this.token=s}}function yE(n,r,s=[]){const a=`Platform: ${r}`,c=new Pr(a);return(f=[])=>{let y=b_();if(!y||y.injector.get(gE,!1)){const w=[...s,...f,{provide:c,useValue:!0}];n?n(w):function VI(n){if(Ld&&!Ld.get(gE,!1))throw new Je(400,"");Ld=n;const r=n.get(vE),s=n.get(lE,null);s&&s.forEach(a=>a())}(function jI(n=[],r){return $o.create({name:r,providers:[{provide:mp,useValue:"platform"},{provide:mE,useValue:()=>Ld=null},...n]})}(w,a))}return function BI(n){const r=b_();if(!r)throw new Je(401,"");return r}()}}function b_(){var n;return null!==(n=null==Ld?void 0:Ld.get(vE))&&void 0!==n?n:null}let vE=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const w=function $I(n,r){let s;return s="noop"===n?new NI:("zone.js"===n?void 0:n)||new Cu({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==r?void 0:r.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==r?void 0:r.ngZoneRunCoalescing)}),s}(a?a.ngZone:void 0,{ngZoneEventCoalescing:a&&a.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:a&&a.ngZoneRunCoalescing||!1}),b=[{provide:Cu,useValue:w}];return w.run(()=>{const N=$o.create({providers:b,parent:this.injector,name:s.moduleType.name}),B=s.create(N),Z=B.injector.get(wc,null);if(!Z)throw new Je(402,"");return w.runOutsideAngular(()=>{const de=w.onError.subscribe({next:Ae=>{Z.handleError(Ae)}});B.onDestroy(()=>{C_(this._modules,B),de.unsubscribe()})}),function HI(n,r,s){try{const a=s();return Zp(a)?a.catch(c=>{throw r.runOutsideAngular(()=>n.handleError(c)),c}):a}catch(a){throw r.runOutsideAngular(()=>n.handleError(a)),a}}(Z,w,()=>{const de=B.injector.get(y_);return de.runInitializers(),de.donePromise.then(()=>(function zv(n){Mt(n,"Expected localeId to be defined"),"string"==typeof n&&(Ey=n.toLowerCase().replace(/_/g,"-"))}(B.injector.get(__,eu)||eu),this._moduleDoBootstrap(B),B))})})}bootstrapModule(s,a=[]){const c=_E({},a);return function LI(n,r,s){const a=new r_(s);return Promise.resolve(a)}(0,0,s).then(f=>this.bootstrapModuleFactory(f,c))}_moduleDoBootstrap(s){const a=s.injector.get(T_);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(c=>a.bootstrap(c));else{if(!s.instance.ngDoBootstrap)throw new Je(403,"");s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Je(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const s=this._injector.get(mE,null);null==s||s(),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(Vt($o))},n.\u0275prov=wt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function _E(n,r){return Array.isArray(r)?r.reduce(_E,n):Object.assign(Object.assign({},n),r)}let T_=(()=>{class n{constructor(s,a,c,f){this._zone=s,this._injector=a,this._exceptionHandler=c,this._initStatus=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new G.y(b=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{b.next(this._stable),b.complete()})}),w=new G.y(b=>{let N;this._zone.runOutsideAngular(()=>{N=this._zone.onStable.subscribe(()=>{Cu.assertNotInAngularZone(),E_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,b.next(!0))})})});const B=this._zone.onUnstable.subscribe(()=>{Cu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{b.next(!1)}))});return()=>{N.unsubscribe(),B.unsubscribe()}});this.isStable=(0,me.T)(y,w.pipe((0,fe.B)()))}bootstrap(s,a){if(!this._initStatus.done)throw new Je(405,"");let c;c=s instanceof y0?s:this._injector.get(Ay).resolveComponentFactory(s),this.componentTypes.push(c.componentType);const f=function FI(n){return n.isBoundToModule}(c)?void 0:this._injector.get(_f),w=c.create($o.NULL,[],a||c.selector,f),b=w.location.nativeElement,N=w.injector.get(pE,null),B=N&&w.injector.get(PI);return N&&B&&B.registerApplication(b,N),w.onDestroy(()=>{this.detachView(w.hostView),C_(this.components,w),B&&B.unregisterApplication(b)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new Je(101,"");try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;C_(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(dE,[]).concat(this._bootstrapListeners).forEach(c=>c(s))}ngOnDestroy(){this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(s){return new(s||n)(Vt(Cu),Vt($o),Vt(wc),Vt(y_))},n.\u0275prov=wt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function C_(n,r){const s=n.indexOf(r);s>-1&&n.splice(s,1)}let wE=!0,IE=!1;function zI(){return IE=!0,wE}function WI(){if(IE)throw new Error("Cannot enable prod mode after platform setup.");wE=!1}let KI=(()=>{class n{}return n.__NG_ELEMENT_ID__=qI,n})();function qI(n){return function ZI(n,r,s){if(gs(n)&&!s){const a=un(n.index,r);return new yg(a,a)}return 47&n.type?new yg(r[16],r):null}(Ir(),rt(),16==(16&n))}class CE{constructor(){}supports(r){return vd(r)}create(r){return new tD(r)}}const eD=(n,r)=>r;class tD{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||eD}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,a=this._removalsHead,c=0,f=null;for(;s||a;){const y=!a||s&&s.currentIndex<AE(a,c,f)?s:a,w=AE(y,c,f),b=y.currentIndex;if(y===a)c--,a=a._nextRemoved;else if(s=s._next,null==y.previousIndex)c++;else{f||(f=[]);const N=w-c,B=b-c;if(N!=B){for(let de=0;de<N;de++){const Ae=de<f.length?f[de]:f[de]=0,Xe=Ae+de;B<=Xe&&Xe<N&&(f[de]=Ae+1)}f[y.previousIndex]=B-N}}w!==b&&r(y,w,b)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!vd(r))throw new Je(900,"");return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let c,f,y,s=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let w=0;w<this.length;w++)f=r[w],y=this._trackByFn(w,f),null!==s&&Object.is(s.trackById,y)?(a&&(s=this._verifyReinsertion(s,f,y,w)),Object.is(s.item,f)||this._addIdentityChange(s,f)):(s=this._mismatch(s,f,y,w),a=!0),s=s._next}else c=0,function fv(n,r){if(Array.isArray(n))for(let s=0;s<n.length;s++)r(n[s]);else{const s=n[tc()]();let a;for(;!(a=s.next()).done;)r(a.value)}}(r,w=>{y=this._trackByFn(c,w),null!==s&&Object.is(s.trackById,y)?(a&&(s=this._verifyReinsertion(s,w,y,c)),Object.is(s.item,w)||this._addIdentityChange(s,w)):(s=this._mismatch(s,w,y,c),a=!0),s=s._next,c++}),this.length=c;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,a,c){let f;return null===r?f=this._itTail:(f=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,f,c)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,c))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,f,c)):r=this._addAfter(new nD(s,a),f,c),r}_verifyReinsertion(r,s,a,c){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==f?r=this._reinsertAfter(f,r._prev,c):r.currentIndex!=c&&(r.currentIndex=c,this._addToMoves(r,c)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const c=r._prevRemoved,f=r._nextRemoved;return null===c?this._removalsHead=f:c._nextRemoved=f,null===f?this._removalsTail=c:f._prevRemoved=c,this._insertAfter(r,s,a),this._addToMoves(r,a),r}_moveAfter(r,s,a){return this._unlink(r),this._insertAfter(r,s,a),this._addToMoves(r,a),r}_addAfter(r,s,a){return this._insertAfter(r,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,a){const c=null===s?this._itHead:s._next;return r._next=c,r._prev=s,null===c?this._itTail=r:c._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new SE),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,a=r._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new SE),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class nD{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class rD{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const s=r._prevDup,a=r._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class SE{constructor(){this.map=new Map}put(r){const s=r.trackById;let a=this.map.get(s);a||(a=new rD,this.map.set(s,a)),a.add(r)}get(r,s){const c=this.map.get(r);return c?c.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function AE(n,r,s){const a=n.previousIndex;if(null===a)return a;let c=0;return s&&a<s.length&&(c=s[a]),a+r+c}class xE{constructor(){}supports(r){return r instanceof Map||_d(r)}create(){return new iD}}class iD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||_d(r)))throw new Je(900,"")}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,c)=>{if(s&&s.key===c)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const f=this._getOrCreateRecordForKey(c,a);s=this._insertBeforeOrAppend(s,f)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const a=r._prev;return s._next=r,s._prev=a,r._prev=s,a&&(a._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const c=this._records.get(r);this._maybeAddToChanges(c,s);const f=c._prev,y=c._next;return f&&(f._next=y),y&&(y._prev=f),c._next=null,c._prev=null,c}const a=new sD(r);return this._records.set(r,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(a=>s(r[a],a))}}class sD{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ME(){return new R_([new CE])}let R_=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(null!=a){const c=a.factories.slice();s=s.concat(c)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||ME()),deps:[[n,new Pa,new ds]]}}find(s){const a=this.factories.find(c=>c.supports(s));if(null!=a)return a;throw new Je(901,"")}}return n.\u0275prov=wt({token:n,providedIn:"root",factory:ME}),n})();function RE(){return new N_([new xE])}let N_=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(a){const c=a.factories.slice();s=s.concat(c)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||RE()),deps:[[n,new Pa,new ds]]}}find(s){const a=this.factories.find(f=>f.supports(s));if(a)return a;throw new Je(901,"")}}return n.\u0275prov=wt({token:n,providedIn:"root",factory:RE}),n})();const uD=yE(null,"core",[]);let cD=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(Vt(T_))},n.\u0275mod=_r({type:n}),n.\u0275inj=Zt({}),n})()},3809:(_t,Me,O)=>{O.d(Me,{F0:()=>xn,yS:()=>is,Bz:()=>Ro,lC:()=>Ms});var E=O(5e3),F=O(7579);class G extends F.x{constructor(_){super(),this._value=_}get value(){return this.getValue()}_subscribe(_){const m=super._subscribe(_);return!m.closed&&_.next(this._value),m}getValue(){const{hasError:_,thrownError:m,_value:T}=this;if(_)throw m;return this._throwIfClosed(),T}next(_){super.next(this._value=_)}}var me=O(8306),fe=O(4742),ge=O(8996),Ie=O(4671),_e=O(3268),Te=O(7669),ie=O(1810),J=O(5403),we=O(9672);function Je(I,_,m){I?(0,we.f)(m,I,_):_()}var lt=O(576);function Ne(I,_){const m=(0,lt.m)(I)?I:()=>I,T=M=>M.error(m());return new me.y(_?M=>_.schedule(T,0,M):T)}var Ke=O(8421);function yt(I){return new me.y(_=>{(0,Ke.Xf)(I()).subscribe(_)})}var vt=O(727),ne=O(4482);function $e(){return(0,ne.e)((I,_)=>{let m=null;I._refCount++;const T=(0,J.x)(_,void 0,void 0,void 0,()=>{if(!I||I._refCount<=0||0<--I._refCount)return void(m=null);const M=I._connection,k=m;m=null,M&&(!k||M===k)&&M.unsubscribe(),_.unsubscribe()});I.subscribe(T),T.closed||(m=I.connect())})}class We extends me.y{constructor(_,m){super(),this.source=_,this.subjectFactory=m,this._subject=null,this._refCount=0,this._connection=null,(0,ne.A)(_)&&(this.lift=_.lift)}_subscribe(_){return this.getSubject().subscribe(_)}getSubject(){const _=this._subject;return(!_||_.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:_}=this;this._subject=this._connection=null,null==_||_.unsubscribe()}connect(){let _=this._connection;if(!_){_=this._connection=new vt.w0;const m=this.getSubject();_.add(this.source.subscribe((0,J.x)(m,void 0,()=>{this._teardown(),m.complete()},T=>{this._teardown(),m.error(T)},()=>this._teardown()))),_.closed&&(this._connection=null,_=vt.w0.EMPTY)}return _}refCount(){return $e()(this)}}var Be=O(9646),Ye=O(6805),re=O(7272),ke=O(515);function K(I){return(0,ne.e)((_,m)=>{let k,T=null,M=!1;T=_.subscribe((0,J.x)(m,void 0,void 0,L=>{k=(0,Ke.Xf)(I(L,K(I)(_))),T?(T.unsubscribe(),T=null,k.subscribe(m)):M=!0})),M&&(T.unsubscribe(),T=null,k.subscribe(m))})}var Ee=O(9300);function oe(I){return I<=0?()=>ke.E:(0,ne.e)((_,m)=>{let T=[];_.subscribe((0,J.x)(m,M=>{T.push(M),I<T.length&&T.shift()},()=>{for(const M of T)m.next(M);m.complete()},void 0,()=>{T=null}))})}var Oe=O(8068),xe=O(6590),pt=O(4004),Mt=O(3900),at=O(5698),en=O(8675),Bt=O(5026),jt=O(4351),wt=O(590),Ht=O(5577),Zt=O(8505),nn=O(8189),Fn=O(9808);class bn{constructor(_,m){this.id=_,this.url=m}}class Gn extends bn{constructor(_,m,T="imperative",M=null){super(_,m),this.navigationTrigger=T,this.restoredState=M}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Sn extends bn{constructor(_,m,T){super(_,m),this.urlAfterRedirects=T}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class qn extends bn{constructor(_,m,T){super(_,m),this.reason=T}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class rr extends bn{constructor(_,m,T){super(_,m),this.error=T}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Zn extends bn{constructor(_,m,T,M){super(_,m),this.urlAfterRedirects=T,this.state=M}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Tn extends bn{constructor(_,m,T,M){super(_,m),this.urlAfterRedirects=T,this.state=M}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ut extends bn{constructor(_,m,T,M,k){super(_,m),this.urlAfterRedirects=T,this.state=M,this.shouldActivate=k}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Yt extends bn{constructor(_,m,T,M){super(_,m),this.urlAfterRedirects=T,this.state=M}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wn extends bn{constructor(_,m,T,M){super(_,m),this.urlAfterRedirects=T,this.state=M}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vn{constructor(_){this.route=_}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Zr{constructor(_){this.route=_}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Sr{constructor(_){this.snapshot=_}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qe{constructor(_){this.snapshot=_}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ue{constructor(_){this.snapshot=_}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pe{constructor(_){this.snapshot=_}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tt{constructor(_,m,T){this.routerEvent=_,this.position=m,this.anchor=T}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Se="primary";class et{constructor(_){this.params=_||{}}has(_){return Object.prototype.hasOwnProperty.call(this.params,_)}get(_){if(this.has(_)){const m=this.params[_];return Array.isArray(m)?m[0]:m}return null}getAll(_){if(this.has(_)){const m=this.params[_];return Array.isArray(m)?m:[m]}return[]}get keys(){return Object.keys(this.params)}}function gt(I){return new et(I)}const fn="ngNavigationCancelingError";function Kt(I){const _=Error("NavigationCancelingError: "+I);return _[fn]=!0,_}function hr(I,_,m){const T=m.path.split("/");if(T.length>I.length||"full"===m.pathMatch&&(_.hasChildren()||T.length<I.length))return null;const M={};for(let k=0;k<T.length;k++){const L=T[k],z=I[k];if(L.startsWith(":"))M[L.substring(1)]=z;else if(L!==z.path)return null}return{consumed:I.slice(0,T.length),posParams:M}}function _n(I,_){const m=I?Object.keys(I):void 0,T=_?Object.keys(_):void 0;if(!m||!T||m.length!=T.length)return!1;let M;for(let k=0;k<m.length;k++)if(M=m[k],!Y(I[M],_[M]))return!1;return!0}function Y(I,_){if(Array.isArray(I)&&Array.isArray(_)){if(I.length!==_.length)return!1;const m=[...I].sort(),T=[..._].sort();return m.every((M,k)=>T[k]===M)}return I===_}function se(I){return Array.prototype.concat.apply([],I)}function le(I){return I.length>0?I[I.length-1]:null}function te(I,_){for(const m in I)I.hasOwnProperty(m)&&_(I[m],m)}function De(I){return(0,E.CqO)(I)?I:(0,E.QGY)(I)?(0,ge.D)(Promise.resolve(I)):(0,Be.of)(I)}const Ct={exact:function zt(I,_,m){if(!wr(I.segments,_.segments)||!pr(I.segments,_.segments,m)||I.numberOfChildren!==_.numberOfChildren)return!1;for(const T in _.children)if(!I.children[T]||!zt(I.children[T],_.children[T],m))return!1;return!0},subset:_r},At={exact:function Vn(I,_){return _n(I,_)},subset:function fr(I,_){return Object.keys(_).length<=Object.keys(I).length&&Object.keys(_).every(m=>Y(I[m],_[m]))},ignored:()=>!0};function Gt(I,_,m){return Ct[m.paths](I.root,_.root,m.matrixParams)&&At[m.queryParams](I.queryParams,_.queryParams)&&!("exact"===m.fragment&&I.fragment!==_.fragment)}function _r(I,_,m){return ui(I,_,_.segments,m)}function ui(I,_,m,T){if(I.segments.length>m.length){const M=I.segments.slice(0,m.length);return!(!wr(M,m)||_.hasChildren()||!pr(M,m,T))}if(I.segments.length===m.length){if(!wr(I.segments,m)||!pr(I.segments,m,T))return!1;for(const M in _.children)if(!I.children[M]||!_r(I.children[M],_.children[M],T))return!1;return!0}{const M=m.slice(0,I.segments.length),k=m.slice(I.segments.length);return!!(wr(I.segments,M)&&pr(I.segments,M,T)&&I.children[Se])&&ui(I.children[Se],_,k,T)}}function pr(I,_,m){return _.every((T,M)=>At[m](I[M].parameters,T.parameters))}class kr{constructor(_,m,T){this.root=_,this.queryParams=m,this.fragment=T}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=gt(this.queryParams)),this._queryParamMap}toString(){return Oi.serialize(this)}}class an{constructor(_,m){this.segments=_,this.children=m,this.parent=null,te(m,(T,M)=>T.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Lr(this)}}class Mn{constructor(_,m){this.path=_,this.parameters=m}get parameterMap(){return this._parameterMap||(this._parameterMap=gt(this.parameters)),this._parameterMap}toString(){return cr(this)}}function wr(I,_){return I.length===_.length&&I.every((m,T)=>m.path===_[T].path)}class br{}class Yi{parse(_){const m=new ki(_);return new kr(m.parseRootSegment(),m.parseQueryParams(),m.parseFragment())}serialize(_){const m=`/${Ar(_.root,!0)}`,T=function er(I){const _=Object.keys(I).map(m=>{const T=I[m];return Array.isArray(T)?T.map(M=>`${Fr(m)}=${Fr(M)}`).join("&"):`${Fr(m)}=${Fr(T)}`}).filter(m=>!!m);return _.length?`?${_.join("&")}`:""}(_.queryParams);return`${m}${T}${"string"==typeof _.fragment?`#${function Tr(I){return encodeURI(I)}(_.fragment)}`:""}`}}const Oi=new Yi;function Lr(I){return I.segments.map(_=>cr(_)).join("/")}function Ar(I,_){if(!I.hasChildren())return Lr(I);if(_){const m=I.children[Se]?Ar(I.children[Se],!1):"",T=[];return te(I.children,(M,k)=>{k!==Se&&T.push(`${k}:${Ar(M,!1)}`)}),T.length>0?`${m}(${T.join("//")})`:m}{const m=function Jn(I,_){let m=[];return te(I.children,(T,M)=>{M===Se&&(m=m.concat(_(T,M)))}),te(I.children,(T,M)=>{M!==Se&&(m=m.concat(_(T,M)))}),m}(I,(T,M)=>M===Se?[Ar(I.children[Se],!1)]:[`${M}:${Ar(T,!1)}`]);return 1===Object.keys(I.children).length&&null!=I.children[Se]?`${Lr(I)}/${m[0]}`:`${Lr(I)}/(${m.join("//")})`}}function ur(I){return encodeURIComponent(I).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Fr(I){return ur(I).replace(/%3B/gi,";")}function It(I){return ur(I).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Dt(I){return decodeURIComponent(I)}function tn(I){return Dt(I.replace(/\+/g,"%20"))}function cr(I){return`${It(I.path)}${function Ur(I){return Object.keys(I).map(_=>`;${It(_)}=${It(I[_])}`).join("")}(I.parameters)}`}const Jr=/^[^\/()?;=#]+/;function Rn(I){const _=I.match(Jr);return _?_[0]:""}const Xr=/^[^=?&#]+/,rn=/^[^&#]+/;class ki{constructor(_){this.url=_,this.remaining=_}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new an([],{}):new an([],this.parseChildren())}parseQueryParams(){const _={};if(this.consumeOptional("?"))do{this.parseQueryParam(_)}while(this.consumeOptional("&"));return _}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const _=[];for(this.peekStartsWith("(")||_.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),_.push(this.parseSegment());let m={};this.peekStartsWith("/(")&&(this.capture("/"),m=this.parseParens(!0));let T={};return this.peekStartsWith("(")&&(T=this.parseParens(!1)),(_.length>0||Object.keys(m).length>0)&&(T[Se]=new an(_,m)),T}parseSegment(){const _=Rn(this.remaining);if(""===_&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(_),new Mn(Dt(_),this.parseMatrixParams())}parseMatrixParams(){const _={};for(;this.consumeOptional(";");)this.parseParam(_);return _}parseParam(_){const m=Rn(this.remaining);if(!m)return;this.capture(m);let T="";if(this.consumeOptional("=")){const M=Rn(this.remaining);M&&(T=M,this.capture(T))}_[Dt(m)]=Dt(T)}parseQueryParam(_){const m=function tr(I){const _=I.match(Xr);return _?_[0]:""}(this.remaining);if(!m)return;this.capture(m);let T="";if(this.consumeOptional("=")){const L=function mi(I){const _=I.match(rn);return _?_[0]:""}(this.remaining);L&&(T=L,this.capture(T))}const M=tn(m),k=tn(T);if(_.hasOwnProperty(M)){let L=_[M];Array.isArray(L)||(L=[L],_[M]=L),L.push(k)}else _[M]=k}parseParens(_){const m={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const T=Rn(this.remaining),M=this.remaining[T.length];if("/"!==M&&")"!==M&&";"!==M)throw new Error(`Cannot parse url '${this.url}'`);let k;T.indexOf(":")>-1?(k=T.substr(0,T.indexOf(":")),this.capture(k),this.capture(":")):_&&(k=Se);const L=this.parseChildren();m[k]=1===Object.keys(L).length?L[Se]:new an([],L),this.consumeOptional("//")}return m}peekStartsWith(_){return this.remaining.startsWith(_)}consumeOptional(_){return!!this.peekStartsWith(_)&&(this.remaining=this.remaining.substring(_.length),!0)}capture(_){if(!this.consumeOptional(_))throw new Error(`Expected "${_}".`)}}class Li{constructor(_){this._root=_}get root(){return this._root.value}parent(_){const m=this.pathFromRoot(_);return m.length>1?m[m.length-2]:null}children(_){const m=X(_,this._root);return m?m.children.map(T=>T.value):[]}firstChild(_){const m=X(_,this._root);return m&&m.children.length>0?m.children[0].value:null}siblings(_){const m=ee(_,this._root);return m.length<2?[]:m[m.length-2].children.map(M=>M.value).filter(M=>M!==_)}pathFromRoot(_){return ee(_,this._root).map(m=>m.value)}}function X(I,_){if(I===_.value)return _;for(const m of _.children){const T=X(I,m);if(T)return T}return null}function ee(I,_){if(I===_.value)return[_];for(const m of _.children){const T=ee(I,m);if(T.length)return T.unshift(_),T}return[]}class W{constructor(_,m){this.value=_,this.children=m}toString(){return`TreeNode(${this.value})`}}function be(I){const _={};return I&&I.children.forEach(m=>_[m.value.outlet]=m),_}class je extends Li{constructor(_,m){super(_),this.snapshot=m,yi(this,_)}toString(){return this.snapshot.toString()}}function St(I,_){const m=function En(I,_){const L=new Hi([],{},{},"",{},Se,_,null,I.root,-1,{});return new gs("",new W(L,[]))}(I,_),T=new G([new Mn("",{})]),M=new G({}),k=new G({}),L=new G({}),z=new G(""),Le=new Bn(T,M,L,z,k,Se,_,m.root);return Le.snapshot=m.root,new je(new W(Le,[]),m)}class Bn{constructor(_,m,T,M,k,L,z,Le){this.url=_,this.params=m,this.queryParams=T,this.fragment=M,this.data=k,this.outlet=L,this.component=z,this._futureSnapshot=Le}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,pt.U)(_=>gt(_)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,pt.U)(_=>gt(_)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function jn(I,_="emptyOnly"){const m=I.pathFromRoot;let T=0;if("always"!==_)for(T=m.length-1;T>=1;){const M=m[T],k=m[T-1];if(M.routeConfig&&""===M.routeConfig.path)T--;else{if(k.component)break;T--}}return function ei(I){return I.reduce((_,m)=>({params:Object.assign(Object.assign({},_.params),m.params),data:Object.assign(Object.assign({},_.data),m.data),resolve:Object.assign(Object.assign({},_.resolve),m._resolvedData)}),{params:{},data:{},resolve:{}})}(m.slice(T))}class Hi{constructor(_,m,T,M,k,L,z,Le,Rt,mn,Ft){this.url=_,this.params=m,this.queryParams=T,this.fragment=M,this.data=k,this.outlet=L,this.component=z,this.routeConfig=Le,this._urlSegment=Rt,this._lastPathIndex=mn,this._resolve=Ft}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=gt(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=gt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(T=>T.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class gs extends Li{constructor(_,m){super(m),this.url=_,yi(this,m)}toString(){return Ti(this._root)}}function yi(I,_){_.value._routerState=I,_.children.forEach(m=>yi(I,m))}function Ti(I){const _=I.children.length>0?` { ${I.children.map(Ti).join(", ")} } `:"";return`${I.value}${_}`}function Ci(I){if(I.snapshot){const _=I.snapshot,m=I._futureSnapshot;I.snapshot=m,_n(_.queryParams,m.queryParams)||I.queryParams.next(m.queryParams),_.fragment!==m.fragment&&I.fragment.next(m.fragment),_n(_.params,m.params)||I.params.next(m.params),function Un(I,_){if(I.length!==_.length)return!1;for(let m=0;m<I.length;++m)if(!_n(I[m],_[m]))return!1;return!0}(_.url,m.url)||I.url.next(m.url),_n(_.data,m.data)||I.data.next(m.data)}else I.snapshot=I._futureSnapshot,I.data.next(I._futureSnapshot.data)}function Wo(I,_){const m=_n(I.params,_.params)&&function Er(I,_){return wr(I,_)&&I.every((m,T)=>_n(m.parameters,_[T].parameters))}(I.url,_.url);return m&&!(!I.parent!=!_.parent)&&(!I.parent||Wo(I.parent,_.parent))}function Yn(I,_,m){if(m&&I.shouldReuseRoute(_.value,m.value.snapshot)){const T=m.value;T._futureSnapshot=_.value;const M=function Gi(I,_,m){return _.children.map(T=>{for(const M of m.children)if(I.shouldReuseRoute(T.value,M.value.snapshot))return Yn(I,T,M);return Yn(I,T)})}(I,_,m);return new W(T,M)}{if(I.shouldAttach(_.value)){const k=I.retrieve(_.value);if(null!==k){const L=k.route;return L.value._futureSnapshot=_.value,L.children=_.children.map(z=>Yn(I,z)),L}}const T=function $s(I){return new Bn(new G(I.url),new G(I.params),new G(I.queryParams),new G(I.fragment),new G(I.data),I.outlet,I.component,I)}(_.value),M=_.children.map(k=>Yn(I,k));return new W(T,M)}}function ce(I){return"object"==typeof I&&null!=I&&!I.outlets&&!I.segmentPath}function Re(I){return"object"==typeof I&&null!=I&&I.outlets}function Ze(I,_,m,T,M){let k={};if(T&&te(T,(z,Le)=>{k[Le]=Array.isArray(z)?z.map(Rt=>`${Rt}`):`${z}`}),I===_)return new kr(m,k,M);const L=mt(I,_,m);return new kr(L,k,M)}function mt(I,_,m){const T={};return te(I.children,(M,k)=>{T[k]=M===_?m:mt(M,_,m)}),new an(I.segments,T)}class xt{constructor(_,m,T){if(this.isAbsolute=_,this.numberOfDoubleDots=m,this.commands=T,_&&T.length>0&&ce(T[0]))throw new Error("Root segment cannot have matrix parameters");const M=T.find(Re);if(M&&M!==le(T))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ir{constructor(_,m,T){this.segmentGroup=_,this.processChildren=m,this.index=T}}function xr(I,_,m){if(I||(I=new an([],{})),0===I.segments.length&&I.hasChildren())return Gs(I,_,m);const T=function Ss(I,_,m){let T=0,M=_;const k={match:!1,pathIndex:0,commandIndex:0};for(;M<I.segments.length;){if(T>=m.length)return k;const L=I.segments[M],z=m[T];if(Re(z))break;const Le=`${z}`,Rt=T<m.length-1?m[T+1]:null;if(M>0&&void 0===Le)break;if(Le&&Rt&&"object"==typeof Rt&&void 0===Rt.outlets){if(!Vr(Le,Rt,L))return k;T+=2}else{if(!Vr(Le,{},L))return k;T++}M++}return{match:!0,pathIndex:M,commandIndex:T}}(I,_,m),M=m.slice(T.commandIndex);if(T.match&&T.pathIndex<I.segments.length){const k=new an(I.segments.slice(0,T.pathIndex),{});return k.children[Se]=new an(I.segments.slice(T.pathIndex),I.children),Gs(k,0,M)}return T.match&&0===M.length?new an(I.segments,{}):T.match&&!I.hasChildren()?ms(I,_,m):T.match?Gs(I,0,M):ms(I,_,m)}function Gs(I,_,m){if(0===m.length)return new an(I.segments,{});{const T=function Hs(I){return Re(I[0])?I[0].outlets:{[Se]:I}}(m),M={};return te(T,(k,L)=>{"string"==typeof k&&(k=[k]),null!==k&&(M[L]=xr(I.children[L],_,k))}),te(I.children,(k,L)=>{void 0===T[L]&&(M[L]=k)}),new an(I.segments,M)}}function ms(I,_,m){const T=I.segments.slice(0,_);let M=0;for(;M<m.length;){const k=m[M];if(Re(k)){const Le=uo(k.outlets);return new an(T,Le)}if(0===M&&ce(m[0])){T.push(new Mn(I.segments[_].path,As(m[0]))),M++;continue}const L=Re(k)?k.outlets[Se]:`${k}`,z=M<m.length-1?m[M+1]:null;L&&z&&ce(z)?(T.push(new Mn(L,As(z))),M+=2):(T.push(new Mn(L,{})),M++)}return new an(T,{})}function uo(I){const _={};return te(I,(m,T)=>{"string"==typeof m&&(m=[m]),null!==m&&(_[T]=ms(new an([],{}),0,m))}),_}function As(I){const _={};return te(I,(m,T)=>_[T]=`${m}`),_}function Vr(I,_,m){return I==m.path&&_n(_,m.parameters)}class Si{constructor(_,m,T,M){this.routeReuseStrategy=_,this.futureState=m,this.currState=T,this.forwardEvent=M}activate(_){const m=this.futureState._root,T=this.currState?this.currState._root:null;this.deactivateChildRoutes(m,T,_),Ci(this.futureState.root),this.activateChildRoutes(m,T,_)}deactivateChildRoutes(_,m,T){const M=be(m);_.children.forEach(k=>{const L=k.value.outlet;this.deactivateRoutes(k,M[L],T),delete M[L]}),te(M,(k,L)=>{this.deactivateRouteAndItsChildren(k,T)})}deactivateRoutes(_,m,T){const M=_.value,k=m?m.value:null;if(M===k)if(M.component){const L=T.getContext(M.outlet);L&&this.deactivateChildRoutes(_,m,L.children)}else this.deactivateChildRoutes(_,m,T);else k&&this.deactivateRouteAndItsChildren(m,T)}deactivateRouteAndItsChildren(_,m){_.value.component&&this.routeReuseStrategy.shouldDetach(_.value.snapshot)?this.detachAndStoreRouteSubtree(_,m):this.deactivateRouteAndOutlet(_,m)}detachAndStoreRouteSubtree(_,m){const T=m.getContext(_.value.outlet),M=T&&_.value.component?T.children:m,k=be(_);for(const L of Object.keys(k))this.deactivateRouteAndItsChildren(k[L],M);if(T&&T.outlet){const L=T.outlet.detach(),z=T.children.onOutletDeactivated();this.routeReuseStrategy.store(_.value.snapshot,{componentRef:L,route:_,contexts:z})}}deactivateRouteAndOutlet(_,m){const T=m.getContext(_.value.outlet),M=T&&_.value.component?T.children:m,k=be(_);for(const L of Object.keys(k))this.deactivateRouteAndItsChildren(k[L],M);T&&T.outlet&&(T.outlet.deactivate(),T.children.onOutletDeactivated(),T.attachRef=null,T.resolver=null,T.route=null)}activateChildRoutes(_,m,T){const M=be(m);_.children.forEach(k=>{this.activateRoutes(k,M[k.value.outlet],T),this.forwardEvent(new pe(k.value.snapshot))}),_.children.length&&this.forwardEvent(new qe(_.value.snapshot))}activateRoutes(_,m,T){const M=_.value,k=m?m.value:null;if(Ci(M),M===k)if(M.component){const L=T.getOrCreateContext(M.outlet);this.activateChildRoutes(_,m,L.children)}else this.activateChildRoutes(_,m,T);else if(M.component){const L=T.getOrCreateContext(M.outlet);if(this.routeReuseStrategy.shouldAttach(M.snapshot)){const z=this.routeReuseStrategy.retrieve(M.snapshot);this.routeReuseStrategy.store(M.snapshot,null),L.children.onOutletReAttached(z.contexts),L.attachRef=z.componentRef,L.route=z.route.value,L.outlet&&L.outlet.attach(z.componentRef,z.route.value),Ci(z.route.value),this.activateChildRoutes(_,null,L.children)}else{const z=function Ji(I){for(let _=I.parent;_;_=_.parent){const m=_.routeConfig;if(m&&m._loadedConfig)return m._loadedConfig;if(m&&m.component)return null}return null}(M.snapshot),Le=z?z.module.componentFactoryResolver:null;L.attachRef=null,L.route=M,L.resolver=Le,L.outlet&&L.outlet.activateWith(M,Le),this.activateChildRoutes(_,null,L.children)}}else this.activateChildRoutes(_,null,T)}}class zs{constructor(_,m){this.routes=_,this.module=m}}function Xi(I){return"function"==typeof I}function ci(I){return I instanceof kr}const vi=Symbol("INITIAL_VALUE");function lr(){return(0,Mt.w)(I=>function ht(...I){const _=(0,Te.yG)(I),m=(0,Te.jO)(I),{args:T,keys:M}=(0,fe.D)(I);if(0===T.length)return(0,ge.D)([],_);const k=new me.y(function Ge(I,_,m=Ie.y){return T=>{Je(_,()=>{const{length:M}=I,k=new Array(M);let L=M,z=M;for(let Le=0;Le<M;Le++)Je(_,()=>{const Rt=(0,ge.D)(I[Le],_);let mn=!1;Rt.subscribe((0,J.x)(T,Ft=>{k[Le]=Ft,mn||(mn=!0,z--),z||T.next(m(k.slice()))},()=>{--L||T.complete()}))},T)},T)}}(T,_,M?L=>(0,ie.n)(M,L):Ie.y));return m?k.pipe((0,_e.Z)(m)):k}(I.map(_=>_.pipe((0,at.q)(1),(0,en.O)(vi)))).pipe((0,Bt.R)((_,m)=>{let T=!1;return m.reduce((M,k,L)=>M!==vi?M:(k===vi&&(T=!0),T||!1!==k&&L!==m.length-1&&!ci(k)?M:k),_)},vi),(0,Ee.h)(_=>_!==vi),(0,pt.U)(_=>ci(_)?_:!0===_),(0,at.q)(1)))}class co{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Ks,this.attachRef=null}}class Ks{constructor(){this.contexts=new Map}onChildOutletCreated(_,m){const T=this.getOrCreateContext(_);T.outlet=m,this.contexts.set(_,T)}onChildOutletDestroyed(_){const m=this.getContext(_);m&&(m.outlet=null,m.attachRef=null)}onOutletDeactivated(){const _=this.contexts;return this.contexts=new Map,_}onOutletReAttached(_){this.contexts=_}getOrCreateContext(_){let m=this.getContext(_);return m||(m=new co,this.contexts.set(_,m)),m}getContext(_){return this.contexts.get(_)||null}}let Ms=(()=>{class I{constructor(m,T,M,k,L){this.parentContexts=m,this.location=T,this.resolver=M,this.changeDetector=L,this.activated=null,this._activatedRoute=null,this.activateEvents=new E.vpe,this.deactivateEvents=new E.vpe,this.attachEvents=new E.vpe,this.detachEvents=new E.vpe,this.name=k||Se,m.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const m=this.parentContexts.getContext(this.name);m&&m.route&&(m.attachRef?this.attach(m.attachRef,m.route):this.activateWith(m.route,m.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const m=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(m.instance),m}attach(m,T){this.activated=m,this._activatedRoute=T,this.location.insert(m.hostView),this.attachEvents.emit(m.instance)}deactivate(){if(this.activated){const m=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(m)}}activateWith(m,T){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=m;const L=(T=T||this.resolver).resolveComponentFactory(m._futureSnapshot.routeConfig.component),z=this.parentContexts.getOrCreateContext(this.name).children,Le=new Fi(m,z,this.location.injector);this.activated=this.location.createComponent(L,this.location.length,Le),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return I.\u0275fac=function(m){return new(m||I)(E.Y36(Ks),E.Y36(E.s_b),E.Y36(E._Vd),E.$8M("name"),E.Y36(E.sBO))},I.\u0275dir=E.lG2({type:I,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),I})();class Fi{constructor(_,m,T){this.route=_,this.childContexts=m,this.parent=T}get(_,m){return _===Bn?this.route:_===Ks?this.childContexts:this.parent.get(_,m)}}let qs=(()=>{class I{}return I.\u0275fac=function(m){return new(m||I)},I.\u0275cmp=E.Xpm({type:I,selectors:[["ng-component"]],decls:1,vars:0,template:function(m,T){1&m&&E._UZ(0,"router-outlet")},directives:[Ms],encapsulation:2}),I})();function jr(I,_=""){for(let m=0;m<I.length;m++){const T=I[m];wa(T,Qn(_,T))}}function wa(I,_){I.children&&jr(I.children,_)}function Qn(I,_){return _?I||_.path?I&&!_.path?`${I}/`:!I&&_.path?_.path:`${I}/${_.path}`:"":I}function A(I){const _=I.children&&I.children.map(A),m=_?Object.assign(Object.assign({},I),{children:_}):Object.assign({},I);return!m.component&&(_||m.loadChildren)&&m.outlet&&m.outlet!==Se&&(m.component=qs),m}function V(I){return I.outlet||Se}function S(I,_){const m=I.filter(T=>V(T)===_);return m.push(...I.filter(T=>V(T)!==_)),m}const $={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ae(I,_,m){var T;if(""===_.path)return"full"===_.pathMatch&&(I.hasChildren()||m.length>0)?Object.assign({},$):{matched:!0,consumedSegments:[],remainingSegments:m,parameters:{},positionalParamSegments:{}};const k=(_.matcher||hr)(m,I,_);if(!k)return Object.assign({},$);const L={};te(k.posParams,(Le,Rt)=>{L[Rt]=Le.path});const z=k.consumed.length>0?Object.assign(Object.assign({},L),k.consumed[k.consumed.length-1].parameters):L;return{matched:!0,consumedSegments:k.consumed,remainingSegments:m.slice(k.consumed.length),parameters:z,positionalParamSegments:null!==(T=k.posParams)&&void 0!==T?T:{}}}function Ve(I,_,m,T,M="corrected"){if(m.length>0&&function ln(I,_,m){return m.some(T=>un(I,_,T)&&V(T)!==Se)}(I,m,T)){const L=new an(_,function Pt(I,_,m,T){const M={};M[Se]=T,T._sourceSegment=I,T._segmentIndexShift=_.length;for(const k of m)if(""===k.path&&V(k)!==Se){const L=new an([],{});L._sourceSegment=I,L._segmentIndexShift=_.length,M[V(k)]=L}return M}(I,_,T,new an(m,I.children)));return L._sourceSegment=I,L._segmentIndexShift=_.length,{segmentGroup:L,slicedSegments:[]}}if(0===m.length&&function Nn(I,_,m){return m.some(T=>un(I,_,T))}(I,m,T)){const L=new an(I.segments,function He(I,_,m,T,M,k){const L={};for(const z of T)if(un(I,m,z)&&!M[V(z)]){const Le=new an([],{});Le._sourceSegment=I,Le._segmentIndexShift="legacy"===k?I.segments.length:_.length,L[V(z)]=Le}return Object.assign(Object.assign({},M),L)}(I,_,m,T,I.children,M));return L._sourceSegment=I,L._segmentIndexShift=_.length,{segmentGroup:L,slicedSegments:m}}const k=new an(I.segments,I.children);return k._sourceSegment=I,k._segmentIndexShift=_.length,{segmentGroup:k,slicedSegments:m}}function un(I,_,m){return(!(I.hasChildren()||_.length>0)||"full"!==m.pathMatch)&&""===m.path}function gn(I,_,m,T){return!!(V(I)===T||T!==Se&&un(_,m,I))&&("**"===I.path||ae(_,I,m).matched)}function dr(I,_,m){return 0===_.length&&!I.children[m]}class On{constructor(_){this.segmentGroup=_||null}}class Xn{constructor(_){this.urlTree=_}}function li(I){return Ne(new On(I))}function Ai(I){return Ne(new Xn(I))}class Rs{constructor(_,m,T,M,k){this.configLoader=m,this.urlSerializer=T,this.urlTree=M,this.config=k,this.allowRedirects=!0,this.ngModule=_.get(E.h0i)}apply(){const _=Ve(this.urlTree.root,[],[],this.config).segmentGroup,m=new an(_.segments,_.children);return this.expandSegmentGroup(this.ngModule,this.config,m,Se).pipe((0,pt.U)(k=>this.createUrlTree(ho(k),this.urlTree.queryParams,this.urlTree.fragment))).pipe(K(k=>{if(k instanceof Xn)return this.allowRedirects=!1,this.match(k.urlTree);throw k instanceof On?this.noMatchError(k):k}))}match(_){return this.expandSegmentGroup(this.ngModule,this.config,_.root,Se).pipe((0,pt.U)(M=>this.createUrlTree(ho(M),_.queryParams,_.fragment))).pipe(K(M=>{throw M instanceof On?this.noMatchError(M):M}))}noMatchError(_){return new Error(`Cannot match any routes. URL Segment: '${_.segmentGroup}'`)}createUrlTree(_,m,T){const M=_.segments.length>0?new an([],{[Se]:_}):_;return new kr(M,m,T)}expandSegmentGroup(_,m,T,M){return 0===T.segments.length&&T.hasChildren()?this.expandChildren(_,m,T).pipe((0,pt.U)(k=>new an([],k))):this.expandSegment(_,T,m,T.segments,M,!0)}expandChildren(_,m,T){const M=[];for(const k of Object.keys(T.children))"primary"===k?M.unshift(k):M.push(k);return(0,ge.D)(M).pipe((0,jt.b)(k=>{const L=T.children[k],z=S(m,k);return this.expandSegmentGroup(_,z,L,k).pipe((0,pt.U)(Le=>({segment:Le,outlet:k})))}),(0,Bt.R)((k,L)=>(k[L.outlet]=L.segment,k),{}),function it(I,_){const m=arguments.length>=2;return T=>T.pipe(I?(0,Ee.h)((M,k)=>I(M,k,T)):Ie.y,oe(1),m?(0,xe.d)(_):(0,Oe.T)(()=>new Ye.K))}())}expandSegment(_,m,T,M,k,L){return(0,ge.D)(T).pipe((0,jt.b)(z=>this.expandSegmentAgainstRoute(_,m,T,z,M,k,L).pipe(K(Rt=>{if(Rt instanceof On)return(0,Be.of)(null);throw Rt}))),(0,wt.P)(z=>!!z),K((z,Le)=>{if(z instanceof Ye.K||"EmptyError"===z.name)return dr(m,M,k)?(0,Be.of)(new an([],{})):li(m);throw z}))}expandSegmentAgainstRoute(_,m,T,M,k,L,z){return gn(M,m,k,L)?void 0===M.redirectTo?this.matchSegmentAgainstRoute(_,m,M,k,L):z&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(_,m,T,M,k,L):li(m):li(m)}expandSegmentAgainstRouteUsingRedirect(_,m,T,M,k,L){return"**"===M.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(_,T,M,L):this.expandRegularSegmentAgainstRouteUsingRedirect(_,m,T,M,k,L)}expandWildCardWithParamsAgainstRouteUsingRedirect(_,m,T,M){const k=this.applyRedirectCommands([],T.redirectTo,{});return T.redirectTo.startsWith("/")?Ai(k):this.lineralizeSegments(T,k).pipe((0,Ht.z)(L=>{const z=new an(L,{});return this.expandSegment(_,z,m,L,M,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(_,m,T,M,k,L){const{matched:z,consumedSegments:Le,remainingSegments:Rt,positionalParamSegments:mn}=ae(m,M,k);if(!z)return li(m);const Ft=this.applyRedirectCommands(Le,M.redirectTo,mn);return M.redirectTo.startsWith("/")?Ai(Ft):this.lineralizeSegments(M,Ft).pipe((0,Ht.z)(kn=>this.expandSegment(_,m,T,kn.concat(Rt),L,!1)))}matchSegmentAgainstRoute(_,m,T,M,k){if("**"===T.path)return T.loadChildren?(T._loadedConfig?(0,Be.of)(T._loadedConfig):this.configLoader.load(_.injector,T)).pipe((0,pt.U)(Ft=>(T._loadedConfig=Ft,new an(M,{})))):(0,Be.of)(new an(M,{}));const{matched:L,consumedSegments:z,remainingSegments:Le}=ae(m,T,M);return L?this.getChildConfig(_,T,M).pipe((0,Ht.z)(mn=>{const Ft=mn.module,kn=mn.routes,{segmentGroup:Hn,slicedSegments:ni}=Ve(m,z,Le,kn),as=new an(Hn.segments,Hn.children);if(0===ni.length&&as.hasChildren())return this.expandChildren(Ft,kn,as).pipe((0,pt.U)(Po=>new an(z,Po)));if(0===kn.length&&0===ni.length)return(0,Be.of)(new an(z,{}));const mo=V(T)===k;return this.expandSegment(Ft,as,kn,ni,mo?Se:k,!0).pipe((0,pt.U)(or=>new an(z.concat(or.segments),or.children)))})):li(m)}getChildConfig(_,m,T){return m.children?(0,Be.of)(new zs(m.children,_)):m.loadChildren?void 0!==m._loadedConfig?(0,Be.of)(m._loadedConfig):this.runCanLoadGuards(_.injector,m,T).pipe((0,Ht.z)(M=>M?this.configLoader.load(_.injector,m).pipe((0,pt.U)(k=>(m._loadedConfig=k,k))):function ti(I){return Ne(Kt(`Cannot load children because the guard of the route "path: '${I.path}'" returned false`))}(m))):(0,Be.of)(new zs([],_))}runCanLoadGuards(_,m,T){const M=m.canLoad;if(!M||0===M.length)return(0,Be.of)(!0);const k=M.map(L=>{const z=_.get(L);let Le;if(function Ws(I){return I&&Xi(I.canLoad)}(z))Le=z.canLoad(m,T);else{if(!Xi(z))throw new Error("Invalid CanLoad guard");Le=z(m,T)}return De(Le)});return(0,Be.of)(k).pipe(lr(),(0,Zt.b)(L=>{if(!ci(L))return;const z=Kt(`Redirecting to "${this.urlSerializer.serialize(L)}"`);throw z.url=L,z}),(0,pt.U)(L=>!0===L))}lineralizeSegments(_,m){let T=[],M=m.root;for(;;){if(T=T.concat(M.segments),0===M.numberOfChildren)return(0,Be.of)(T);if(M.numberOfChildren>1||!M.children[Se])return Ne(new Error(`Only absolute redirects can have named outlets. redirectTo: '${_.redirectTo}'`));M=M.children[Se]}}applyRedirectCommands(_,m,T){return this.applyRedirectCreatreUrlTree(m,this.urlSerializer.parse(m),_,T)}applyRedirectCreatreUrlTree(_,m,T,M){const k=this.createSegmentGroup(_,m.root,T,M);return new kr(k,this.createQueryParams(m.queryParams,this.urlTree.queryParams),m.fragment)}createQueryParams(_,m){const T={};return te(_,(M,k)=>{if("string"==typeof M&&M.startsWith(":")){const z=M.substring(1);T[k]=m[z]}else T[k]=M}),T}createSegmentGroup(_,m,T,M){const k=this.createSegments(_,m.segments,T,M);let L={};return te(m.children,(z,Le)=>{L[Le]=this.createSegmentGroup(_,z,T,M)}),new an(k,L)}createSegments(_,m,T,M){return m.map(k=>k.path.startsWith(":")?this.findPosParam(_,k,M):this.findOrReturn(k,T))}findPosParam(_,m,T){const M=T[m.path.substring(1)];if(!M)throw new Error(`Cannot redirect to '${_}'. Cannot find '${m.path}'.`);return M}findOrReturn(_,m){let T=0;for(const M of m){if(M.path===_.path)return m.splice(T),M;T++}return _}}function ho(I){const _={};for(const T of Object.keys(I.children)){const k=ho(I.children[T]);(k.segments.length>0||k.hasChildren())&&(_[T]=k)}return function lo(I){if(1===I.numberOfChildren&&I.children[Se]){const _=I.children[Se];return new an(I.segments.concat(_.segments),_.children)}return I}(new an(I.segments,_))}class Ia{constructor(_){this.path=_,this.route=this.path[this.path.length-1]}}class Co{constructor(_,m){this.component=_,this.route=m}}function rt(I,_,m){const T=I._root;return ys(T,_?_._root:null,m,[T.value])}function Zs(I,_,m){const T=function Ir(I){if(!I)return null;for(let _=I.parent;_;_=_.parent){const m=_.routeConfig;if(m&&m._loadedConfig)return m._loadedConfig}return null}(_);return(T?T.module.injector:m).get(I)}function ys(I,_,m,T,M={canDeactivateChecks:[],canActivateChecks:[]}){const k=be(_);return I.children.forEach(L=>{(function Ys(I,_,m,T,M={canDeactivateChecks:[],canActivateChecks:[]}){const k=I.value,L=_?_.value:null,z=m?m.getContext(I.value.outlet):null;if(L&&k.routeConfig===L.routeConfig){const Le=function Ui(I,_,m){if("function"==typeof m)return m(I,_);switch(m){case"pathParamsChange":return!wr(I.url,_.url);case"pathParamsOrQueryParamsChange":return!wr(I.url,_.url)||!_n(I.queryParams,_.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Wo(I,_)||!_n(I.queryParams,_.queryParams);default:return!Wo(I,_)}}(L,k,k.routeConfig.runGuardsAndResolvers);Le?M.canActivateChecks.push(new Ia(T)):(k.data=L.data,k._resolvedData=L._resolvedData),ys(I,_,k.component?z?z.children:null:m,T,M),Le&&z&&z.outlet&&z.outlet.isActivated&&M.canDeactivateChecks.push(new Co(z.outlet.component,L))}else L&&Qs(_,z,M),M.canActivateChecks.push(new Ia(T)),ys(I,null,k.component?z?z.children:null:m,T,M)})(L,k[L.value.outlet],m,T.concat([L.value]),M),delete k[L.value.outlet]}),te(k,(L,z)=>Qs(L,m.getContext(z),M)),M}function Qs(I,_,m){const T=be(I),M=I.value;te(T,(k,L)=>{Qs(k,M.component?_?_.children.getContext(L):null:_,m)}),m.canDeactivateChecks.push(new Co(M.component&&_&&_.outlet&&_.outlet.isActivated?_.outlet.component:null,M))}class Ps{}function di(I){return new me.y(_=>_.error(I))}class Da{constructor(_,m,T,M,k,L){this.rootComponentType=_,this.config=m,this.urlTree=T,this.url=M,this.paramsInheritanceStrategy=k,this.relativeLinkResolution=L}recognize(){const _=Ve(this.urlTree.root,[],[],this.config.filter(L=>void 0===L.redirectTo),this.relativeLinkResolution).segmentGroup,m=this.processSegmentGroup(this.config,_,Se);if(null===m)return null;const T=new Hi([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Se,this.rootComponentType,null,this.urlTree.root,-1,{}),M=new W(T,m),k=new gs(this.url,M);return this.inheritParamsAndData(k._root),k}inheritParamsAndData(_){const m=_.value,T=jn(m,this.paramsInheritanceStrategy);m.params=Object.freeze(T.params),m.data=Object.freeze(T.data),_.children.forEach(M=>this.inheritParamsAndData(M))}processSegmentGroup(_,m,T){return 0===m.segments.length&&m.hasChildren()?this.processChildren(_,m):this.processSegment(_,m,m.segments,T)}processChildren(_,m){const T=[];for(const k of Object.keys(m.children)){const L=m.children[k],z=S(_,k),Le=this.processSegmentGroup(z,L,k);if(null===Le)return null;T.push(...Le)}const M=Ao(T);return function gr(I){I.sort((_,m)=>_.value.outlet===Se?-1:m.value.outlet===Se?1:_.value.outlet.localeCompare(m.value.outlet))}(M),M}processSegment(_,m,T,M){for(const k of _){const L=this.processSegmentAgainstRoute(k,m,T,M);if(null!==L)return L}return dr(m,T,M)?[]:null}processSegmentAgainstRoute(_,m,T,M){if(_.redirectTo||!gn(_,m,T,M))return null;let k,L=[],z=[];if("**"===_.path){const Hn=T.length>0?le(T).parameters:{};k=new Hi(T,Hn,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,xo(_),V(_),_.component,_,Ta(m),Jo(m)+T.length,Os(_))}else{const Hn=ae(m,_,T);if(!Hn.matched)return null;L=Hn.consumedSegments,z=Hn.remainingSegments,k=new Hi(L,Hn.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,xo(_),V(_),_.component,_,Ta(m),Jo(m)+L.length,Os(_))}const Le=function ba(I){return I.children?I.children:I.loadChildren?I._loadedConfig.routes:[]}(_),{segmentGroup:Rt,slicedSegments:mn}=Ve(m,L,z,Le.filter(Hn=>void 0===Hn.redirectTo),this.relativeLinkResolution);if(0===mn.length&&Rt.hasChildren()){const Hn=this.processChildren(Le,Rt);return null===Hn?null:[new W(k,Hn)]}if(0===Le.length&&0===mn.length)return[new W(k,[])];const Ft=V(_)===M,kn=this.processSegment(Le,Rt,mn,Ft?Se:M);return null===kn?null:[new W(k,kn)]}}function Qo(I){const _=I.value.routeConfig;return _&&""===_.path&&void 0===_.redirectTo}function Ao(I){const _=[],m=new Set;for(const T of I){if(!Qo(T)){_.push(T);continue}const M=_.find(k=>T.value.routeConfig===k.value.routeConfig);void 0!==M?(M.children.push(...T.children),m.add(M)):_.push(T)}for(const T of m){const M=Ao(T.children);_.push(new W(T.value,M))}return _.filter(T=>!m.has(T))}function Ta(I){let _=I;for(;_._sourceSegment;)_=_._sourceSegment;return _}function Jo(I){let _=I,m=_._segmentIndexShift?_._segmentIndexShift:0;for(;_._sourceSegment;)_=_._sourceSegment,m+=_._segmentIndexShift?_._segmentIndexShift:0;return m-1}function xo(I){return I.data||{}}function Os(I){return I.resolve||{}}function po(I){return[...Object.keys(I),...Object.getOwnPropertySymbols(I)]}function ks(I){return(0,Mt.w)(_=>{const m=I(_);return m?(0,ge.D)(m).pipe((0,pt.U)(()=>_)):(0,Be.of)(_)})}class mr extends class Xs{shouldDetach(_){return!1}store(_,m){}shouldAttach(_){return!1}retrieve(_){return null}shouldReuseRoute(_,m){return _.routeConfig===m.routeConfig}}{}const ea=new E.OlP("ROUTES");class xu{constructor(_,m,T,M){this.injector=_,this.compiler=m,this.onLoadStartListener=T,this.onLoadEndListener=M}load(_,m){if(m._loader$)return m._loader$;this.onLoadStartListener&&this.onLoadStartListener(m);const M=this.loadModuleFactory(m.loadChildren).pipe((0,pt.U)(k=>{this.onLoadEndListener&&this.onLoadEndListener(m);const L=k.create(_);return new zs(se(L.injector.get(ea,void 0,E.XFs.Self|E.XFs.Optional)).map(A),L)}),K(k=>{throw m._loader$=void 0,k}));return m._loader$=new We(M,()=>new F.x).pipe($e()),m._loader$}loadModuleFactory(_){return De(_()).pipe((0,Ht.z)(m=>m instanceof E.YKP?(0,Be.of)(m):(0,ge.D)(this.compiler.compileModuleAsync(m))))}}class ru{shouldProcessUrl(_){return!0}extract(_){return _}merge(_,m){return _}}function dc(I){throw I}function Sa(I,_,m){return _.parse("/")}function eo(I,_){return(0,Be.of)(null)}const ns={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ls={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let xn=(()=>{class I{constructor(m,T,M,k,L,z,Le){this.rootComponentType=m,this.urlSerializer=T,this.rootContexts=M,this.location=k,this.config=Le,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new F.x,this.errorHandler=dc,this.malformedUriErrorHandler=Sa,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:eo,afterPreactivation:eo},this.urlHandlingStrategy=new ru,this.routeReuseStrategy=new mr,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=L.get(E.h0i),this.console=L.get(E.c2e);const Ft=L.get(E.R0b);this.isNgZoneEnabled=Ft instanceof E.R0b&&E.R0b.isInAngularZone(),this.resetConfig(Le),this.currentUrlTree=function nt(){return new kr(new an([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new xu(L,z,kn=>this.triggerEvent(new vn(kn)),kn=>this.triggerEvent(new Zr(kn))),this.routerState=St(this.currentUrlTree,this.rootComponentType),this.transitions=new G({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var m;return null===(m=this.location.getState())||void 0===m?void 0:m.\u0275routerPageId}setupNavigations(m){const T=this.events;return m.pipe((0,Ee.h)(M=>0!==M.id),(0,pt.U)(M=>Object.assign(Object.assign({},M),{extractedUrl:this.urlHandlingStrategy.extract(M.rawUrl)})),(0,Mt.w)(M=>{let k=!1,L=!1;return(0,Be.of)(M).pipe((0,Zt.b)(z=>{this.currentNavigation={id:z.id,initialUrl:z.currentRawUrl,extractedUrl:z.extractedUrl,trigger:z.source,extras:z.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,Mt.w)(z=>{const Le=this.browserUrlTree.toString(),Rt=!this.navigated||z.extractedUrl.toString()!==Le||Le!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Rt)&&this.urlHandlingStrategy.shouldProcessUrl(z.rawUrl))return ta(z.source)&&(this.browserUrlTree=z.extractedUrl),(0,Be.of)(z).pipe((0,Mt.w)(Ft=>{const kn=this.transitions.getValue();return T.next(new Gn(Ft.id,this.serializeUrl(Ft.extractedUrl),Ft.source,Ft.restoredState)),kn!==this.transitions.getValue()?ke.E:Promise.resolve(Ft)}),function Ns(I,_,m,T){return(0,Mt.w)(M=>function zi(I,_,m,T,M){return new Rs(I,_,m,T,M).apply()}(I,_,m,M.extractedUrl,T).pipe((0,pt.U)(k=>Object.assign(Object.assign({},M),{urlAfterRedirects:k}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Zt.b)(Ft=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:Ft.urlAfterRedirects})}),function Xo(I,_,m,T,M){return(0,Ht.z)(k=>function fo(I,_,m,T,M="emptyOnly",k="legacy"){try{const L=new Da(I,_,m,T,M,k).recognize();return null===L?di(new Ps):(0,Be.of)(L)}catch(L){return di(L)}}(I,_,k.urlAfterRedirects,m(k.urlAfterRedirects),T,M).pipe((0,pt.U)(L=>Object.assign(Object.assign({},k),{targetSnapshot:L}))))}(this.rootComponentType,this.config,Ft=>this.serializeUrl(Ft),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Zt.b)(Ft=>{if("eager"===this.urlUpdateStrategy){if(!Ft.extras.skipLocationChange){const Hn=this.urlHandlingStrategy.merge(Ft.urlAfterRedirects,Ft.rawUrl);this.setBrowserUrl(Hn,Ft)}this.browserUrlTree=Ft.urlAfterRedirects}const kn=new Zn(Ft.id,this.serializeUrl(Ft.extractedUrl),this.serializeUrl(Ft.urlAfterRedirects),Ft.targetSnapshot);T.next(kn)}));if(Rt&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:kn,extractedUrl:Hn,source:ni,restoredState:as,extras:mo}=z,Ma=new Gn(kn,this.serializeUrl(Hn),ni,as);T.next(Ma);const or=St(Hn,this.rootComponentType).snapshot;return(0,Be.of)(Object.assign(Object.assign({},z),{targetSnapshot:or,urlAfterRedirects:Hn,extras:Object.assign(Object.assign({},mo),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=z.rawUrl,z.resolve(null),ke.E}),ks(z=>{const{targetSnapshot:Le,id:Rt,extractedUrl:mn,rawUrl:Ft,extras:{skipLocationChange:kn,replaceUrl:Hn}}=z;return this.hooks.beforePreactivation(Le,{navigationId:Rt,appliedUrlTree:mn,rawUrlTree:Ft,skipLocationChange:!!kn,replaceUrl:!!Hn})}),(0,Zt.b)(z=>{const Le=new Tn(z.id,this.serializeUrl(z.extractedUrl),this.serializeUrl(z.urlAfterRedirects),z.targetSnapshot);this.triggerEvent(Le)}),(0,pt.U)(z=>Object.assign(Object.assign({},z),{guards:rt(z.targetSnapshot,z.currentSnapshot,this.rootContexts)})),function Yo(I,_){return(0,Ht.z)(m=>{const{targetSnapshot:T,currentSnapshot:M,guards:{canActivateChecks:k,canDeactivateChecks:L}}=m;return 0===L.length&&0===k.length?(0,Be.of)(Object.assign(Object.assign({},m),{guardsResult:!0})):function Su(I,_,m,T){return(0,ge.D)(I).pipe((0,Ht.z)(M=>function So(I,_,m,T,M){const k=_&&_.routeConfig?_.routeConfig.canDeactivate:null;if(!k||0===k.length)return(0,Be.of)(!0);const L=k.map(z=>{const Le=Zs(z,_,M);let Rt;if(function Br(I){return I&&Xi(I.canDeactivate)}(Le))Rt=De(Le.canDeactivate(I,_,m,T));else{if(!Xi(Le))throw new Error("Invalid CanDeactivate guard");Rt=De(Le(I,_,m,T))}return Rt.pipe((0,wt.P)())});return(0,Be.of)(L).pipe(lr())}(M.component,M.route,m,_,T)),(0,wt.P)(M=>!0!==M,!0))}(L,T,M,I).pipe((0,Ht.z)(z=>z&&function qo(I){return"boolean"==typeof I}(z)?function Au(I,_,m,T){return(0,ge.D)(_).pipe((0,jt.b)(M=>(0,re.z)(function es(I,_){return null!==I&&_&&_(new Sr(I)),(0,Be.of)(!0)}(M.route.parent,T),function $c(I,_){return null!==I&&_&&_(new ue(I)),(0,Be.of)(!0)}(M.route,T),function _i(I,_,m){const T=_[_.length-1],k=_.slice(0,_.length-1).reverse().map(L=>function Dn(I){const _=I.routeConfig?I.routeConfig.canActivateChild:null;return _&&0!==_.length?{node:I,guards:_}:null}(L)).filter(L=>null!==L).map(L=>yt(()=>{const z=L.guards.map(Le=>{const Rt=Zs(Le,L.node,m);let mn;if(function Zo(I){return I&&Xi(I.canActivateChild)}(Rt))mn=De(Rt.canActivateChild(T,I));else{if(!Xi(Rt))throw new Error("Invalid CanActivateChild guard");mn=De(Rt(T,I))}return mn.pipe((0,wt.P)())});return(0,Be.of)(z).pipe(lr())}));return(0,Be.of)(k).pipe(lr())}(I,M.path,m),function $r(I,_,m){const T=_.routeConfig?_.routeConfig.canActivate:null;if(!T||0===T.length)return(0,Be.of)(!0);const M=T.map(k=>yt(()=>{const L=Zs(k,_,m);let z;if(function Mr(I){return I&&Xi(I.canActivate)}(L))z=De(L.canActivate(_,I));else{if(!Xi(L))throw new Error("Invalid CanActivate guard");z=De(L(_,I))}return z.pipe((0,wt.P)())}));return(0,Be.of)(M).pipe(lr())}(I,M.route,m))),(0,wt.P)(M=>!0!==M,!0))}(T,k,I,_):(0,Be.of)(z)),(0,pt.U)(z=>Object.assign(Object.assign({},m),{guardsResult:z})))})}(this.ngModule.injector,z=>this.triggerEvent(z)),(0,Zt.b)(z=>{if(ci(z.guardsResult)){const Rt=Kt(`Redirecting to "${this.serializeUrl(z.guardsResult)}"`);throw Rt.url=z.guardsResult,Rt}const Le=new Ut(z.id,this.serializeUrl(z.extractedUrl),this.serializeUrl(z.urlAfterRedirects),z.targetSnapshot,!!z.guardsResult);this.triggerEvent(Le)}),(0,Ee.h)(z=>!!z.guardsResult||(this.restoreHistory(z),this.cancelNavigationTransition(z,""),!1)),ks(z=>{if(z.guards.canActivateChecks.length)return(0,Be.of)(z).pipe((0,Zt.b)(Le=>{const Rt=new Yt(Le.id,this.serializeUrl(Le.extractedUrl),this.serializeUrl(Le.urlAfterRedirects),Le.targetSnapshot);this.triggerEvent(Rt)}),(0,Mt.w)(Le=>{let Rt=!1;return(0,Be.of)(Le).pipe(function Js(I,_){return(0,Ht.z)(m=>{const{targetSnapshot:T,guards:{canActivateChecks:M}}=m;if(!M.length)return(0,Be.of)(m);let k=0;return(0,ge.D)(M).pipe((0,jt.b)(L=>function ts(I,_,m,T){return function Ca(I,_,m,T){const M=po(I);if(0===M.length)return(0,Be.of)({});const k={};return(0,ge.D)(M).pipe((0,Ht.z)(L=>function nu(I,_,m,T){const M=Zs(I,_,T);return De(M.resolve?M.resolve(_,m):M(_,m))}(I[L],_,m,T).pipe((0,Zt.b)(z=>{k[L]=z}))),oe(1),(0,Ht.z)(()=>po(k).length===M.length?(0,Be.of)(k):ke.E))}(I._resolve,I,_,T).pipe((0,pt.U)(k=>(I._resolvedData=k,I.data=Object.assign(Object.assign({},I.data),jn(I,m).resolve),null)))}(L.route,T,I,_)),(0,Zt.b)(()=>k++),oe(1),(0,Ht.z)(L=>k===M.length?(0,Be.of)(m):ke.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Zt.b)({next:()=>Rt=!0,complete:()=>{Rt||(this.restoreHistory(Le),this.cancelNavigationTransition(Le,"At least one route resolver didn't emit any value."))}}))}),(0,Zt.b)(Le=>{const Rt=new wn(Le.id,this.serializeUrl(Le.extractedUrl),this.serializeUrl(Le.urlAfterRedirects),Le.targetSnapshot);this.triggerEvent(Rt)}))}),ks(z=>{const{targetSnapshot:Le,id:Rt,extractedUrl:mn,rawUrl:Ft,extras:{skipLocationChange:kn,replaceUrl:Hn}}=z;return this.hooks.afterPreactivation(Le,{navigationId:Rt,appliedUrlTree:mn,rawUrlTree:Ft,skipLocationChange:!!kn,replaceUrl:!!Hn})}),(0,pt.U)(z=>{const Le=function Ko(I,_,m){const T=Yn(I,_._root,m?m._root:void 0);return new je(T,_)}(this.routeReuseStrategy,z.targetSnapshot,z.currentRouterState);return Object.assign(Object.assign({},z),{targetRouterState:Le})}),(0,Zt.b)(z=>{this.currentUrlTree=z.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(z.urlAfterRedirects,z.rawUrl),this.routerState=z.targetRouterState,"deferred"===this.urlUpdateStrategy&&(z.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,z),this.browserUrlTree=z.urlAfterRedirects)}),((I,_,m)=>(0,pt.U)(T=>(new Si(_,T.targetRouterState,T.currentRouterState,m).activate(I),T)))(this.rootContexts,this.routeReuseStrategy,z=>this.triggerEvent(z)),(0,Zt.b)({next(){k=!0},complete(){k=!0}}),function ft(I){return(0,ne.e)((_,m)=>{try{_.subscribe(m)}finally{m.add(I)}})}(()=>{var z;k||L||this.cancelNavigationTransition(M,`Navigation ID ${M.id} is not equal to the current navigation id ${this.navigationId}`),(null===(z=this.currentNavigation)||void 0===z?void 0:z.id)===M.id&&(this.currentNavigation=null)}),K(z=>{if(L=!0,function qt(I){return I&&I[fn]}(z)){const Le=ci(z.url);Le||(this.navigated=!0,this.restoreHistory(M,!0));const Rt=new qn(M.id,this.serializeUrl(M.extractedUrl),z.message);T.next(Rt),Le?setTimeout(()=>{const mn=this.urlHandlingStrategy.merge(z.url,this.rawUrlTree),Ft={skipLocationChange:M.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ta(M.source)};this.scheduleNavigation(mn,"imperative",null,Ft,{resolve:M.resolve,reject:M.reject,promise:M.promise})},0):M.resolve(!1)}else{this.restoreHistory(M,!0);const Le=new rr(M.id,this.serializeUrl(M.extractedUrl),z);T.next(Le);try{M.resolve(this.errorHandler(z))}catch(Rt){M.reject(Rt)}}return ke.E}))}))}resetRootComponentType(m){this.rootComponentType=m,this.routerState.root.component=this.rootComponentType}setTransition(m){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),m))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(m=>{const T="popstate"===m.type?"popstate":"hashchange";"popstate"===T&&setTimeout(()=>{var M;const k={replaceUrl:!0},L=(null===(M=m.state)||void 0===M?void 0:M.navigationId)?m.state:null;if(L){const Le=Object.assign({},L);delete Le.navigationId,delete Le.\u0275routerPageId,0!==Object.keys(Le).length&&(k.state=Le)}const z=this.parseUrl(m.url);this.scheduleNavigation(z,T,L,k)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(m){this.events.next(m)}resetConfig(m){jr(m),this.config=m.map(A),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(m,T={}){const{relativeTo:M,queryParams:k,fragment:L,queryParamsHandling:z,preserveFragment:Le}=T,Rt=M||this.routerState.root,mn=Le?this.currentUrlTree.fragment:L;let Ft=null;switch(z){case"merge":Ft=Object.assign(Object.assign({},this.currentUrlTree.queryParams),k);break;case"preserve":Ft=this.currentUrlTree.queryParams;break;default:Ft=k||null}return null!==Ft&&(Ft=this.removeEmptyProps(Ft)),function ve(I,_,m,T,M){if(0===m.length)return Ze(_.root,_.root,_.root,T,M);const k=function $n(I){if("string"==typeof I[0]&&1===I.length&&"/"===I[0])return new xt(!0,0,I);let _=0,m=!1;const T=I.reduce((M,k,L)=>{if("object"==typeof k&&null!=k){if(k.outlets){const z={};return te(k.outlets,(Le,Rt)=>{z[Rt]="string"==typeof Le?Le.split("/"):Le}),[...M,{outlets:z}]}if(k.segmentPath)return[...M,k.segmentPath]}return"string"!=typeof k?[...M,k]:0===L?(k.split("/").forEach((z,Le)=>{0==Le&&"."===z||(0==Le&&""===z?m=!0:".."===z?_++:""!=z&&M.push(z))}),M):[...M,k]},[]);return new xt(m,_,T)}(m);if(k.toRoot())return Ze(_.root,_.root,new an([],{}),T,M);const L=function An(I,_,m){if(I.isAbsolute)return new ir(_.root,!0,0);if(-1===m.snapshot._lastPathIndex){const k=m.snapshot._urlSegment;return new ir(k,k===_.root,0)}const T=ce(I.commands[0])?0:1;return function Qi(I,_,m){let T=I,M=_,k=m;for(;k>M;){if(k-=M,T=T.parent,!T)throw new Error("Invalid number of '../'");M=T.segments.length}return new ir(T,!1,M-k)}(m.snapshot._urlSegment,m.snapshot._lastPathIndex+T,I.numberOfDoubleDots)}(k,_,I),z=L.processChildren?Gs(L.segmentGroup,L.index,k.commands):xr(L.segmentGroup,L.index,k.commands);return Ze(_.root,L.segmentGroup,z,T,M)}(Rt,this.currentUrlTree,m,Ft,null!=mn?mn:null)}navigateByUrl(m,T={skipLocationChange:!1}){const M=ci(m)?m:this.parseUrl(m),k=this.urlHandlingStrategy.merge(M,this.rawUrlTree);return this.scheduleNavigation(k,"imperative",null,T)}navigate(m,T={skipLocationChange:!1}){return function Aa(I){for(let _=0;_<I.length;_++){const m=I[_];if(null==m)throw new Error(`The requested path contains ${m} segment at index ${_}`)}}(m),this.navigateByUrl(this.createUrlTree(m,T),T)}serializeUrl(m){return this.urlSerializer.serialize(m)}parseUrl(m){let T;try{T=this.urlSerializer.parse(m)}catch(M){T=this.malformedUriErrorHandler(M,this.urlSerializer,m)}return T}isActive(m,T){let M;if(M=!0===T?Object.assign({},ns):!1===T?Object.assign({},Ls):T,ci(m))return Gt(this.currentUrlTree,m,M);const k=this.parseUrl(m);return Gt(this.currentUrlTree,k,M)}removeEmptyProps(m){return Object.keys(m).reduce((T,M)=>{const k=m[M];return null!=k&&(T[M]=k),T},{})}processNavigations(){this.navigations.subscribe(m=>{this.navigated=!0,this.lastSuccessfulId=m.id,this.currentPageId=m.targetPageId,this.events.next(new Sn(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,m.resolve(!0)},m=>{this.console.warn(`Unhandled Navigation Error: ${m}`)})}scheduleNavigation(m,T,M,k,L){var z,Le;if(this.disposed)return Promise.resolve(!1);let Rt,mn,Ft;L?(Rt=L.resolve,mn=L.reject,Ft=L.promise):Ft=new Promise((ni,as)=>{Rt=ni,mn=as});const kn=++this.navigationId;let Hn;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(M=this.location.getState()),Hn=M&&M.\u0275routerPageId?M.\u0275routerPageId:k.replaceUrl||k.skipLocationChange?null!==(z=this.browserPageId)&&void 0!==z?z:0:(null!==(Le=this.browserPageId)&&void 0!==Le?Le:0)+1):Hn=0,this.setTransition({id:kn,targetPageId:Hn,source:T,restoredState:M,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:m,extras:k,resolve:Rt,reject:mn,promise:Ft,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ft.catch(ni=>Promise.reject(ni))}setBrowserUrl(m,T){const M=this.urlSerializer.serialize(m),k=Object.assign(Object.assign({},T.extras.state),this.generateNgRouterState(T.id,T.targetPageId));this.location.isCurrentPathEqualTo(M)||T.extras.replaceUrl?this.location.replaceState(M,"",k):this.location.go(M,"",k)}restoreHistory(m,T=!1){var M,k;if("computed"===this.canceledNavigationResolution){const L=this.currentPageId-m.targetPageId;"popstate"!==m.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(M=this.currentNavigation)||void 0===M?void 0:M.finalUrl)||0===L?this.currentUrlTree===(null===(k=this.currentNavigation)||void 0===k?void 0:k.finalUrl)&&0===L&&(this.resetState(m),this.browserUrlTree=m.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(L)}else"replace"===this.canceledNavigationResolution&&(T&&this.resetState(m),this.resetUrlToCurrentUrlTree())}resetState(m){this.routerState=m.currentRouterState,this.currentUrlTree=m.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,m.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(m,T){const M=new qn(m.id,this.serializeUrl(m.extractedUrl),T);this.triggerEvent(M),m.resolve(!1)}generateNgRouterState(m,T){return"computed"===this.canceledNavigationResolution?{navigationId:m,\u0275routerPageId:T}:{navigationId:m}}}return I.\u0275fac=function(m){E.$Z()},I.\u0275prov=E.Yz7({token:I,factory:I.\u0275fac}),I})();function ta(I){return"imperative"!==I}let is=(()=>{class I{constructor(m,T,M){this.router=m,this.route=T,this.locationStrategy=M,this.commands=null,this.href=null,this.onChanges=new F.x,this.subscription=m.events.subscribe(k=>{k instanceof Sn&&this.updateTargetUrlAndHref()})}set routerLink(m){this.commands=null!=m?Array.isArray(m)?m:[m]:null}ngOnChanges(m){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(m,T,M,k,L){if(0!==m||T||M||k||L||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const z={skipLocationChange:fi(this.skipLocationChange),replaceUrl:fi(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,z),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:fi(this.preserveFragment)})}}return I.\u0275fac=function(m){return new(m||I)(E.Y36(xn),E.Y36(Bn),E.Y36(Fn.S$))},I.\u0275dir=E.lG2({type:I,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(m,T){1&m&&E.NdJ("click",function(k){return T.onClick(k.button,k.ctrlKey,k.shiftKey,k.altKey,k.metaKey)}),2&m&&E.uIk("target",T.target)("href",T.href,E.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[E.TTD]}),I})();function fi(I){return""===I||!!I}class Mo{}class na{preload(_,m){return(0,Be.of)(null)}}let Vi=(()=>{class I{constructor(m,T,M,k){this.router=m,this.injector=M,this.preloadingStrategy=k,this.loader=new xu(M,T,Le=>m.triggerEvent(new vn(Le)),Le=>m.triggerEvent(new Zr(Le)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,Ee.h)(m=>m instanceof Sn),(0,jt.b)(()=>this.preload())).subscribe(()=>{})}preload(){const m=this.injector.get(E.h0i);return this.processRoutes(m,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(m,T){const M=[];for(const k of T)if(k.loadChildren&&!k.canLoad&&k._loadedConfig){const L=k._loadedConfig;M.push(this.processRoutes(L.module,L.routes))}else k.loadChildren&&!k.canLoad?M.push(this.preloadConfig(m,k)):k.children&&M.push(this.processRoutes(m,k.children));return(0,ge.D)(M).pipe((0,nn.J)(),(0,pt.U)(k=>{}))}preloadConfig(m,T){return this.preloadingStrategy.preload(T,()=>(T._loadedConfig?(0,Be.of)(T._loadedConfig):this.loader.load(m.injector,T)).pipe((0,Ht.z)(k=>(T._loadedConfig=k,this.processRoutes(k.module,k.routes)))))}}return I.\u0275fac=function(m){return new(m||I)(E.LFG(xn),E.LFG(E.Sil),E.LFG(E.zs3),E.LFG(Mo))},I.\u0275prov=E.Yz7({token:I,factory:I.\u0275fac}),I})(),xi=(()=>{class I{constructor(m,T,M={}){this.router=m,this.viewportScroller=T,this.options=M,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},M.scrollPositionRestoration=M.scrollPositionRestoration||"disabled",M.anchorScrolling=M.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(m=>{m instanceof Gn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=m.navigationTrigger,this.restoredId=m.restoredState?m.restoredState.navigationId:0):m instanceof Sn&&(this.lastId=m.id,this.scheduleScrollEvent(m,this.router.parseUrl(m.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(m=>{m instanceof tt&&(m.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(m.position):m.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(m.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(m,T){this.router.triggerEvent(new tt(m,"popstate"===this.lastSource?this.store[this.restoredId]:null,T))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return I.\u0275fac=function(m){E.$Z()},I.\u0275prov=E.Yz7({token:I,factory:I.\u0275fac}),I})();const Wi=new E.OlP("ROUTER_CONFIGURATION"),os=new E.OlP("ROUTER_FORROOT_GUARD"),ra=[Fn.Ye,{provide:br,useClass:Yi},{provide:xn,useFactory:function No(I,_,m,T,M,k,L={},z,Le){const Rt=new xn(null,I,_,m,T,M,se(k));return z&&(Rt.urlHandlingStrategy=z),Le&&(Rt.routeReuseStrategy=Le),function iu(I,_){I.errorHandler&&(_.errorHandler=I.errorHandler),I.malformedUriErrorHandler&&(_.malformedUriErrorHandler=I.malformedUriErrorHandler),I.onSameUrlNavigation&&(_.onSameUrlNavigation=I.onSameUrlNavigation),I.paramsInheritanceStrategy&&(_.paramsInheritanceStrategy=I.paramsInheritanceStrategy),I.relativeLinkResolution&&(_.relativeLinkResolution=I.relativeLinkResolution),I.urlUpdateStrategy&&(_.urlUpdateStrategy=I.urlUpdateStrategy),I.canceledNavigationResolution&&(_.canceledNavigationResolution=I.canceledNavigationResolution)}(L,Rt),L.enableTracing&&Rt.events.subscribe(mn=>{var Ft,kn;null===(Ft=console.group)||void 0===Ft||Ft.call(console,`Router Event: ${mn.constructor.name}`),console.log(mn.toString()),console.log(mn),null===(kn=console.groupEnd)||void 0===kn||kn.call(console)}),Rt},deps:[br,Ks,Fn.Ye,E.zs3,E.Sil,ea,Wi,[class Mu{},new E.FiY],[class hi{},new E.FiY]]},Ks,{provide:Bn,useFactory:function Yr(I){return I.routerState.root},deps:[xn]},Vi,na,class Nu{preload(_,m){return m().pipe(K(()=>(0,Be.of)(null)))}},{provide:Wi,useValue:{enableTracing:!1}}];function xa(){return new E.PXZ("Router",xn)}let Ro=(()=>{class I{constructor(m,T){}static forRoot(m,T){return{ngModule:I,providers:[ra,vs(m),{provide:os,useFactory:no,deps:[[xn,new E.FiY,new E.tp0]]},{provide:Wi,useValue:T||{}},{provide:Fn.S$,useFactory:Rr,deps:[Fn.lw,[new E.tBr(Fn.mr),new E.FiY],Wi]},{provide:xi,useFactory:to,deps:[xn,Fn.EM,Wi]},{provide:Mo,useExisting:T&&T.preloadingStrategy?T.preloadingStrategy:na},{provide:E.PXZ,multi:!0,useFactory:xa},[Fs,{provide:E.ip1,multi:!0,useFactory:Us,deps:[Fs]},{provide:Vs,useFactory:ia,deps:[Fs]},{provide:E.tb,multi:!0,useExisting:Vs}]]}}static forChild(m){return{ngModule:I,providers:[vs(m)]}}}return I.\u0275fac=function(m){return new(m||I)(E.LFG(os,8),E.LFG(xn,8))},I.\u0275mod=E.oAB({type:I}),I.\u0275inj=E.cJS({}),I})();function to(I,_,m){return m.scrollOffset&&_.setOffset(m.scrollOffset),new xi(I,_,m)}function Rr(I,_,m={}){return m.useHash?new Fn.Do(I,_):new Fn.b0(I,_)}function no(I){return"guarded"}function vs(I){return[{provide:E.deG,multi:!0,useValue:I},{provide:ea,multi:!0,useValue:I}]}let Fs=(()=>{class I{constructor(m){this.injector=m,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new F.x}appInitializer(){return this.injector.get(Fn.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let T=null;const M=new Promise(z=>T=z),k=this.injector.get(xn),L=this.injector.get(Wi);return"disabled"===L.initialNavigation?(k.setUpLocationChangeListener(),T(!0)):"enabled"===L.initialNavigation||"enabledBlocking"===L.initialNavigation?(k.hooks.afterPreactivation=()=>this.initNavigation?(0,Be.of)(null):(this.initNavigation=!0,T(!0),this.resultOfPreactivationDone),k.initialNavigation()):T(!0),M})}bootstrapListener(m){const T=this.injector.get(Wi),M=this.injector.get(Vi),k=this.injector.get(xi),L=this.injector.get(xn),z=this.injector.get(E.z2F);m===z.components[0]&&(("enabledNonBlocking"===T.initialNavigation||void 0===T.initialNavigation)&&L.initialNavigation(),M.setUpPreloading(),k.init(),L.resetRootComponentType(z.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return I.\u0275fac=function(m){return new(m||I)(E.LFG(E.zs3))},I.\u0275prov=E.Yz7({token:I,factory:I.\u0275fac}),I})();function Us(I){return I.appInitializer.bind(I)}function ia(I){return I.bootstrapListener.bind(I)}const Vs=new E.OlP("Router Initializer")},3942:(_t,Me,O)=>{O.d(Me,{Z:()=>Je});var E=O(2090),F=O(4859),G=O(9681),me=O(1877);class fe{constructor(Ne,Ke){this._delegate=Ne,this.firebase=Ke,(0,G._addComponent)(Ne,new F.wA("app-compat",()=>this,"PUBLIC")),this.container=Ne.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ne){this._delegate.automaticDataCollectionEnabled=Ne}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ne=>{this._delegate.checkDestroyed(),Ne()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,G.deleteApp)(this._delegate)))}_getService(Ne,Ke=G._DEFAULT_ENTRY_NAME){var yt;this._delegate.checkDestroyed();const vt=this._delegate.container.getProvider(Ne);return!vt.isInitialized()&&"EXPLICIT"===(null===(yt=vt.getComponent())||void 0===yt?void 0:yt.instantiationMode)&&vt.initialize(),vt.getImmediate({identifier:Ke})}_removeServiceInstance(Ne,Ke=G._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ne).clearInstance(Ke)}_addComponent(Ne){(0,G._addComponent)(this._delegate,Ne)}_addOrOverwriteComponent(Ne){(0,G._addOrOverwriteComponent)(this._delegate,Ne)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ie=new E.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ie=function Te(){const lt=function _e(lt){const Ne={},Ke={__esModule:!0,initializeApp:function ne(Ye,re={}){const ke=G.initializeApp(Ye,re);if((0,E.r3)(Ne,ke.name))return Ne[ke.name];const K=new lt(ke,Ke);return Ne[ke.name]=K,K},app:vt,registerVersion:G.registerVersion,setLogLevel:G.setLogLevel,onLog:G.onLog,apps:null,SDK_VERSION:G.SDK_VERSION,INTERNAL:{registerComponent:function We(Ye){const re=Ye.name,ke=re.replace("-compat","");if(G._registerComponent(Ye)&&"PUBLIC"===Ye.type){const K=(Ee=vt())=>{if("function"!=typeof Ee[ke])throw Ie.create("invalid-app-argument",{appName:re});return Ee[ke]()};void 0!==Ye.serviceProps&&(0,E.ZB)(K,Ye.serviceProps),Ke[ke]=K,lt.prototype[ke]=function(...Ee){return this._getService.bind(this,re).apply(this,Ye.multipleInstances?Ee:[])}}return"PUBLIC"===Ye.type?Ke[ke]:null},removeApp:function yt(Ye){delete Ne[Ye]},useAsService:function Be(Ye,re){return"serverAuth"===re?null:re},modularAPIs:G}};function vt(Ye){if(!(0,E.r3)(Ne,Ye=Ye||G._DEFAULT_ENTRY_NAME))throw Ie.create("no-app",{appName:Ye});return Ne[Ye]}return Ke.default=Ke,Object.defineProperty(Ke,"apps",{get:function $e(){return Object.keys(Ne).map(Ye=>Ne[Ye])}}),vt.App=lt,Ke}(fe);return lt.INTERNAL=Object.assign(Object.assign({},lt.INTERNAL),{createFirebaseNamespace:Te,extendNamespace:function Ne(Ke){(0,E.ZB)(lt,Ke)},createSubscribe:E.ne,ErrorFactory:E.LL,deepExtend:E.ZB}),lt}(),J=new me.Yd("@firebase/app-compat");if((0,E.jU)()&&void 0!==self.firebase){J.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const lt=self.firebase.SDK_VERSION;lt&&lt.indexOf("LITE")>=0&&J.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Je=ie;!function Ge(lt){(0,G.registerVersion)("@firebase/app-compat","0.1.25",lt)}()},9681:(_t,Me,O)=>{O.r(Me),O.d(Me,{FirebaseError:()=>me.ZR,SDK_VERSION:()=>qn,_DEFAULT_ENTRY_NAME:()=>Mt,_addComponent:()=>jt,_addOrOverwriteComponent:()=>wt,_apps:()=>en,_clearComponents:()=>Fn,_components:()=>Bt,_getProvider:()=>Zt,_registerComponent:()=>Ht,_removeServiceInstance:()=>nn,deleteApp:()=>Ut,getApp:()=>Zn,getApps:()=>Tn,initializeApp:()=>rr,onLog:()=>vn,registerVersion:()=>wn,setLogLevel:()=>Zr});var E=O(5861),F=O(4859),G=O(1877),me=O(2090),fe=O(8766);class ge{constructor(De){this.container=De}getPlatformInfoString(){return this.container.getProviders().map(nt=>{if(function Ie(te){const De=te.getComponent();return"VERSION"===(null==De?void 0:De.type)}(nt)){const Ct=nt.getImmediate();return`${Ct.library}/${Ct.version}`}return null}).filter(nt=>nt).join(" ")}}const _e="@firebase/app",ie=new G.Yd("@firebase/app"),Mt="[DEFAULT]",at={[_e]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},en=new Map,Bt=new Map;function jt(te,De){try{te.container.addComponent(De)}catch(nt){ie.debug(`Component ${De.name} failed to register with FirebaseApp ${te.name}`,nt)}}function wt(te,De){te.container.addOrOverwriteComponent(De)}function Ht(te){const De=te.name;if(Bt.has(De))return ie.debug(`There were multiple attempts to register component ${De}.`),!1;Bt.set(De,te);for(const nt of en.values())jt(nt,te);return!0}function Zt(te,De){const nt=te.container.getProvider("heartbeat").getImmediate({optional:!0});return nt&&nt.triggerHeartbeat(),te.container.getProvider(De)}function nn(te,De,nt=Mt){Zt(te,De).clearInstance(nt)}function Fn(){Bt.clear()}const Gn=new me.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Sn{constructor(De,nt,Ct){this._isDeleted=!1,this._options=Object.assign({},De),this._config=Object.assign({},nt),this._name=nt.name,this._automaticDataCollectionEnabled=nt.automaticDataCollectionEnabled,this._container=Ct,this.container.addComponent(new F.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(De){this.checkDestroyed(),this._automaticDataCollectionEnabled=De}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(De){this._isDeleted=De}checkDestroyed(){if(this.isDeleted)throw Gn.create("app-deleted",{appName:this._name})}}const qn="9.8.1";function rr(te,De={}){"object"!=typeof De&&(De={name:De});const nt=Object.assign({name:Mt,automaticDataCollectionEnabled:!1},De),Ct=nt.name;if("string"!=typeof Ct||!Ct)throw Gn.create("bad-app-name",{appName:String(Ct)});const At=en.get(Ct);if(At){if((0,me.vZ)(te,At.options)&&(0,me.vZ)(nt,At.config))return At;throw Gn.create("duplicate-app",{appName:Ct})}const Gt=new F.H0(Ct);for(const zt of Bt.values())Gt.addComponent(zt);const Vn=new Sn(te,nt,Gt);return en.set(Ct,Vn),Vn}function Zn(te=Mt){const De=en.get(te);if(!De)throw Gn.create("no-app",{appName:te});return De}function Tn(){return Array.from(en.values())}function Ut(te){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,E.Z)(function*(te){const De=te.name;en.has(De)&&(en.delete(De),yield Promise.all(te.container.getProviders().map(nt=>nt.delete())),te.isDeleted=!0)})).apply(this,arguments)}function wn(te,De,nt){var Ct;let At=null!==(Ct=at[te])&&void 0!==Ct?Ct:te;nt&&(At+=`-${nt}`);const Gt=At.match(/\s|\//),Vn=De.match(/\s|\//);if(Gt||Vn){const zt=[`Unable to register library "${At}" with version "${De}":`];return Gt&&zt.push(`library name "${At}" contains illegal characters (whitespace or "/")`),Gt&&Vn&&zt.push("and"),Vn&&zt.push(`version name "${De}" contains illegal characters (whitespace or "/")`),void ie.warn(zt.join(" "))}Ht(new F.wA(`${At}-version`,()=>({library:At,version:De}),"VERSION"))}function vn(te,De){if(null!==te&&"function"!=typeof te)throw Gn.create("invalid-log-argument");(0,G.Am)(te,De)}function Zr(te){(0,G.Ub)(te)}const ue="firebase-heartbeat-store";let pe=null;function tt(){return pe||(pe=(0,fe.X3)("firebase-heartbeat-database",1,{upgrade:(te,De)=>{0===De&&te.createObjectStore(ue)}}).catch(te=>{throw Gn.create("storage-open",{originalErrorMessage:te.message})})),pe}function et(){return(et=(0,E.Z)(function*(te){try{return(yield tt()).transaction(ue).objectStore(ue).get(Kt(te))}catch(De){throw Gn.create("storage-get",{originalErrorMessage:De.message})}})).apply(this,arguments)}function gt(te,De){return fn.apply(this,arguments)}function fn(){return(fn=(0,E.Z)(function*(te,De){try{const Ct=(yield tt()).transaction(ue,"readwrite");return yield Ct.objectStore(ue).put(De,Kt(te)),Ct.done}catch(nt){throw Gn.create("storage-set",{originalErrorMessage:nt.message})}})).apply(this,arguments)}function Kt(te){return`${te.name}!${te.options.appId}`}class Un{constructor(De){this.container=De,this._heartbeatsCache=null;const nt=this.container.getProvider("app").getImmediate();this._storage=new se(nt),this._heartbeatsCachePromise=this._storage.read().then(Ct=>(this._heartbeatsCache=Ct,Ct))}triggerHeartbeat(){var De=this;return(0,E.Z)(function*(){const Ct=De.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),At=_n();if(null===De._heartbeatsCache&&(De._heartbeatsCache=yield De._heartbeatsCachePromise),De._heartbeatsCache.lastSentHeartbeatDate!==At&&!De._heartbeatsCache.heartbeats.some(Gt=>Gt.date===At))return De._heartbeatsCache.heartbeats.push({date:At,agent:Ct}),De._heartbeatsCache.heartbeats=De._heartbeatsCache.heartbeats.filter(Gt=>{const Vn=new Date(Gt.date).valueOf();return Date.now()-Vn<=2592e6}),De._storage.overwrite(De._heartbeatsCache)})()}getHeartbeatsHeader(){var De=this;return(0,E.Z)(function*(){if(null===De._heartbeatsCache&&(yield De._heartbeatsCachePromise),null===De._heartbeatsCache||0===De._heartbeatsCache.heartbeats.length)return"";const nt=_n(),{heartbeatsToSend:Ct,unsentEntries:At}=function Y(te,De=1024){const nt=[];let Ct=te.slice();for(const At of te){const Gt=nt.find(Vn=>Vn.agent===At.agent);if(Gt){if(Gt.dates.push(At.date),le(nt)>De){Gt.dates.pop();break}}else if(nt.push({agent:At.agent,dates:[At.date]}),le(nt)>De){nt.pop();break}Ct=Ct.slice(1)}return{heartbeatsToSend:nt,unsentEntries:Ct}}(De._heartbeatsCache.heartbeats),Gt=(0,me.L)(JSON.stringify({version:2,heartbeats:Ct}));return De._heartbeatsCache.lastSentHeartbeatDate=nt,At.length>0?(De._heartbeatsCache.heartbeats=At,yield De._storage.overwrite(De._heartbeatsCache)):(De._heartbeatsCache.heartbeats=[],De._storage.overwrite(De._heartbeatsCache)),Gt})()}}function _n(){return(new Date).toISOString().substring(0,10)}class se{constructor(De){this.app=De,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,E.Z)(function*(){return!!(0,me.hl)()&&(0,me.eu)().then(()=>!0).catch(()=>!1)})()}read(){var De=this;return(0,E.Z)(function*(){return(yield De._canUseIndexedDBPromise)&&(yield function Se(te){return et.apply(this,arguments)}(De.app))||{heartbeats:[]}})()}overwrite(De){var nt=this;return(0,E.Z)(function*(){var Ct;if(yield nt._canUseIndexedDBPromise){const Gt=yield nt.read();return gt(nt.app,{lastSentHeartbeatDate:null!==(Ct=De.lastSentHeartbeatDate)&&void 0!==Ct?Ct:Gt.lastSentHeartbeatDate,heartbeats:De.heartbeats})}})()}add(De){var nt=this;return(0,E.Z)(function*(){var Ct;if(yield nt._canUseIndexedDBPromise){const Gt=yield nt.read();return gt(nt.app,{lastSentHeartbeatDate:null!==(Ct=De.lastSentHeartbeatDate)&&void 0!==Ct?Ct:Gt.lastSentHeartbeatDate,heartbeats:[...Gt.heartbeats,...De.heartbeats]})}})()}}function le(te){return(0,me.L)(JSON.stringify({version:2,heartbeats:te})).length}!function Qe(te){Ht(new F.wA("platform-logger",De=>new ge(De),"PRIVATE")),Ht(new F.wA("heartbeat",De=>new Un(De),"PRIVATE")),wn(_e,"0.7.24",te),wn(_e,"0.7.24","esm2017"),wn("fire-js","")}("")},4859:(_t,Me,O)=>{O.d(Me,{H0:()=>_e,wA:()=>G});var E=O(5861),F=O(2090);class G{constructor(ie,J,we){this.name=ie,this.instanceFactory=J,this.type=we,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ie){return this.instantiationMode=ie,this}setMultipleInstances(ie){return this.multipleInstances=ie,this}setServiceProps(ie){return this.serviceProps=ie,this}setInstanceCreatedCallback(ie){return this.onInstanceCreated=ie,this}}const me="[DEFAULT]";class fe{constructor(ie,J){this.name=ie,this.container=J,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ie){const J=this.normalizeInstanceIdentifier(ie);if(!this.instancesDeferred.has(J)){const we=new F.BH;if(this.instancesDeferred.set(J,we),this.isInitialized(J)||this.shouldAutoInitialize())try{const ht=this.getOrInitializeService({instanceIdentifier:J});ht&&we.resolve(ht)}catch(ht){}}return this.instancesDeferred.get(J).promise}getImmediate(ie){var J;const we=this.normalizeInstanceIdentifier(null==ie?void 0:ie.identifier),ht=null!==(J=null==ie?void 0:ie.optional)&&void 0!==J&&J;if(!this.isInitialized(we)&&!this.shouldAutoInitialize()){if(ht)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:we})}catch(Ge){if(ht)return null;throw Ge}}getComponent(){return this.component}setComponent(ie){if(ie.name!==this.name)throw Error(`Mismatching Component ${ie.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ie,this.shouldAutoInitialize()){if(function Ie(Te){return"EAGER"===Te.instantiationMode}(ie))try{this.getOrInitializeService({instanceIdentifier:me})}catch(J){}for(const[J,we]of this.instancesDeferred.entries()){const ht=this.normalizeInstanceIdentifier(J);try{const Ge=this.getOrInitializeService({instanceIdentifier:ht});we.resolve(Ge)}catch(Ge){}}}}clearInstance(ie=me){this.instancesDeferred.delete(ie),this.instancesOptions.delete(ie),this.instances.delete(ie)}delete(){var ie=this;return(0,E.Z)(function*(){const J=Array.from(ie.instances.values());yield Promise.all([...J.filter(we=>"INTERNAL"in we).map(we=>we.INTERNAL.delete()),...J.filter(we=>"_delete"in we).map(we=>we._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ie=me){return this.instances.has(ie)}getOptions(ie=me){return this.instancesOptions.get(ie)||{}}initialize(ie={}){const{options:J={}}=ie,we=this.normalizeInstanceIdentifier(ie.instanceIdentifier);if(this.isInitialized(we))throw Error(`${this.name}(${we}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ht=this.getOrInitializeService({instanceIdentifier:we,options:J});for(const[Ge,Je]of this.instancesDeferred.entries())we===this.normalizeInstanceIdentifier(Ge)&&Je.resolve(ht);return ht}onInit(ie,J){var we;const ht=this.normalizeInstanceIdentifier(J),Ge=null!==(we=this.onInitCallbacks.get(ht))&&void 0!==we?we:new Set;Ge.add(ie),this.onInitCallbacks.set(ht,Ge);const Je=this.instances.get(ht);return Je&&ie(Je,ht),()=>{Ge.delete(ie)}}invokeOnInitCallbacks(ie,J){const we=this.onInitCallbacks.get(J);if(we)for(const ht of we)try{ht(ie,J)}catch(Ge){}}getOrInitializeService({instanceIdentifier:ie,options:J={}}){let we=this.instances.get(ie);if(!we&&this.component&&(we=this.component.instanceFactory(this.container,{instanceIdentifier:(Te=ie,Te===me?void 0:Te),options:J}),this.instances.set(ie,we),this.instancesOptions.set(ie,J),this.invokeOnInitCallbacks(we,ie),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ie,we)}catch(ht){}var Te;return we||null}normalizeInstanceIdentifier(ie=me){return this.component?this.component.multipleInstances?ie:me:ie}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class _e{constructor(ie){this.name=ie,this.providers=new Map}addComponent(ie){const J=this.getProvider(ie.name);if(J.isComponentSet())throw new Error(`Component ${ie.name} has already been registered with ${this.name}`);J.setComponent(ie)}addOrOverwriteComponent(ie){this.getProvider(ie.name).isComponentSet()&&this.providers.delete(ie.name),this.addComponent(ie)}getProvider(ie){if(this.providers.has(ie))return this.providers.get(ie);const J=new fe(ie,this);return this.providers.set(ie,J),J}getProviders(){return Array.from(this.providers.values())}}},1877:(_t,Me,O)=>{O.d(Me,{Am:()=>Te,Ub:()=>_e,Yd:()=>Ie,in:()=>F});const E=[];var F=(()=>{return(ie=F||(F={}))[ie.DEBUG=0]="DEBUG",ie[ie.VERBOSE=1]="VERBOSE",ie[ie.INFO=2]="INFO",ie[ie.WARN=3]="WARN",ie[ie.ERROR=4]="ERROR",ie[ie.SILENT=5]="SILENT",F;var ie})();const G={debug:F.DEBUG,verbose:F.VERBOSE,info:F.INFO,warn:F.WARN,error:F.ERROR,silent:F.SILENT},me=F.INFO,fe={[F.DEBUG]:"log",[F.VERBOSE]:"log",[F.INFO]:"info",[F.WARN]:"warn",[F.ERROR]:"error"},ge=(ie,J,...we)=>{if(J<ie.logLevel)return;const ht=(new Date).toISOString(),Ge=fe[J];if(!Ge)throw new Error(`Attempted to log a message with an invalid logType (value: ${J})`);console[Ge](`[${ht}]  ${ie.name}:`,...we)};class Ie{constructor(J){this.name=J,this._logLevel=me,this._logHandler=ge,this._userLogHandler=null,E.push(this)}get logLevel(){return this._logLevel}set logLevel(J){if(!(J in F))throw new TypeError(`Invalid value "${J}" assigned to \`logLevel\``);this._logLevel=J}setLogLevel(J){this._logLevel="string"==typeof J?G[J]:J}get logHandler(){return this._logHandler}set logHandler(J){if("function"!=typeof J)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=J}get userLogHandler(){return this._userLogHandler}set userLogHandler(J){this._userLogHandler=J}debug(...J){this._userLogHandler&&this._userLogHandler(this,F.DEBUG,...J),this._logHandler(this,F.DEBUG,...J)}log(...J){this._userLogHandler&&this._userLogHandler(this,F.VERBOSE,...J),this._logHandler(this,F.VERBOSE,...J)}info(...J){this._userLogHandler&&this._userLogHandler(this,F.INFO,...J),this._logHandler(this,F.INFO,...J)}warn(...J){this._userLogHandler&&this._userLogHandler(this,F.WARN,...J),this._logHandler(this,F.WARN,...J)}error(...J){this._userLogHandler&&this._userLogHandler(this,F.ERROR,...J),this._logHandler(this,F.ERROR,...J)}}function _e(ie){E.forEach(J=>{J.setLogLevel(ie)})}function Te(ie,J){for(const we of E){let ht=null;J&&J.level&&(ht=G[J.level]),we.userLogHandler=null===ie?null:(Ge,Je,...lt)=>{const Ne=lt.map(Ke=>{if(null==Ke)return null;if("string"==typeof Ke)return Ke;if("number"==typeof Ke||"boolean"==typeof Ke)return Ke.toString();if(Ke instanceof Error)return Ke.message;try{return JSON.stringify(Ke)}catch(yt){return null}}).filter(Ke=>Ke).join(" ");Je>=(null!=ht?ht:Ge.logLevel)&&ie({level:F[Je].toLowerCase(),message:Ne,args:lt,type:Ge.name})}}}},8766:(_t,Me,O)=>{O.d(Me,{Lj:()=>ne,X3:()=>vt});var E=O(5861);let G,me;const Ie=new WeakMap,_e=new WeakMap,Te=new WeakMap,ie=new WeakMap,J=new WeakMap;let Ge={get(re,ke,K){if(re instanceof IDBTransaction){if("done"===ke)return _e.get(re);if("objectStoreNames"===ke)return re.objectStoreNames||Te.get(re);if("store"===ke)return K.objectStoreNames[1]?void 0:K.objectStore(K.objectStoreNames[0])}return Ke(re[ke])},set:(re,ke,K)=>(re[ke]=K,!0),has:(re,ke)=>re instanceof IDBTransaction&&("done"===ke||"store"===ke)||ke in re};function Ne(re){return"function"==typeof re?function lt(re){return re!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ge(){return me||(me=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(re)?function(...ke){return re.apply(yt(this),ke),Ke(Ie.get(this))}:function(...ke){return Ke(re.apply(yt(this),ke))}:function(ke,...K){const Ee=re.call(yt(this),ke,...K);return Te.set(Ee,ke.sort?ke.sort():[ke]),Ke(Ee)}}(re):(re instanceof IDBTransaction&&function ht(re){if(_e.has(re))return;const ke=new Promise((K,Ee)=>{const oe=()=>{re.removeEventListener("complete",Oe),re.removeEventListener("error",xe),re.removeEventListener("abort",xe)},Oe=()=>{K(),oe()},xe=()=>{Ee(re.error||new DOMException("AbortError","AbortError")),oe()};re.addEventListener("complete",Oe),re.addEventListener("error",xe),re.addEventListener("abort",xe)});_e.set(re,ke)}(re),((re,ke)=>ke.some(K=>re instanceof K))(re,function fe(){return G||(G=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(re,Ge):re)}function Ke(re){if(re instanceof IDBRequest)return function we(re){const ke=new Promise((K,Ee)=>{const oe=()=>{re.removeEventListener("success",Oe),re.removeEventListener("error",xe)},Oe=()=>{K(Ke(re.result)),oe()},xe=()=>{Ee(re.error),oe()};re.addEventListener("success",Oe),re.addEventListener("error",xe)});return ke.then(K=>{K instanceof IDBCursor&&Ie.set(K,re)}).catch(()=>{}),J.set(ke,re),ke}(re);if(ie.has(re))return ie.get(re);const ke=Ne(re);return ke!==re&&(ie.set(re,ke),J.set(ke,re)),ke}const yt=re=>J.get(re);function vt(re,ke,{blocked:K,upgrade:Ee,blocking:oe,terminated:Oe}={}){const xe=indexedDB.open(re,ke),it=Ke(xe);return Ee&&xe.addEventListener("upgradeneeded",ft=>{Ee(Ke(xe.result),ft.oldVersion,ft.newVersion,Ke(xe.transaction))}),K&&xe.addEventListener("blocked",()=>K()),it.then(ft=>{Oe&&ft.addEventListener("close",()=>Oe()),oe&&ft.addEventListener("versionchange",()=>oe())}).catch(()=>{}),it}function ne(re,{blocked:ke}={}){const K=indexedDB.deleteDatabase(re);return ke&&K.addEventListener("blocked",()=>ke()),Ke(K).then(()=>{})}const $e=["get","getKey","getAll","getAllKeys","count"],We=["put","add","delete","clear"],Be=new Map;function Ye(re,ke){if(!(re instanceof IDBDatabase)||ke in re||"string"!=typeof ke)return;if(Be.get(ke))return Be.get(ke);const K=ke.replace(/FromIndex$/,""),Ee=ke!==K,oe=We.includes(K);if(!(K in(Ee?IDBIndex:IDBObjectStore).prototype)||!oe&&!$e.includes(K))return;const Oe=function(){var xe=(0,E.Z)(function*(it,...ft){const pt=this.transaction(it,oe?"readwrite":"readonly");let Mt=pt.store;return Ee&&(Mt=Mt.index(ft.shift())),(yield Promise.all([Mt[K](...ft),oe&&pt.done]))[0]});return function(ft){return xe.apply(this,arguments)}}();return Be.set(ke,Oe),Oe}!function Je(re){Ge=re(Ge)}(re=>kE(OE({},re),{get:(ke,K,Ee)=>Ye(ke,K)||re.get(ke,K,Ee),has:(ke,K)=>!!Ye(ke,K)||re.has(ke,K)}))},5861:(_t,Me,O)=>{function E(G,me,fe,ge,Ie,_e,Te){try{var ie=G[_e](Te),J=ie.value}catch(we){return void fe(we)}ie.done?me(J):Promise.resolve(J).then(ge,Ie)}function F(G){return function(){var me=this,fe=arguments;return new Promise(function(ge,Ie){var _e=G.apply(me,fe);function Te(J){E(_e,ge,Ie,Te,ie,"next",J)}function ie(J){E(_e,ge,Ie,Te,ie,"throw",J)}Te(void 0)})}}O.d(Me,{Z:()=>F})}},_t=>{_t(_t.s=4736)}]);